import{B as Se,o as a,z as v,w as l,C as ut,D as ct,f as e,E as mt,S as ft,c as p,e as t,v as ve,h as i,x as ge,j as o,t as b,d as _,F as K,G as W,H as Ke,k as N,y as _e,u as Le,I as Me,r as S,A as te,a as Z,J as de,K as pt,L as vt,M as gt,N as _t,O as Fe,P as Ge,Q as yt,R as xt,T as ne,U as Re,V as X,W as ee,X as se,Y as ye,Z as L,q as He,$ as Ye,a0 as We,a1 as fe,a2 as Je,a3 as Ve,a4 as kt,a5 as Pe,a6 as Qe,b as Te,a7 as bt,a8 as $t,a9 as Ct,aa as wt,ab as ht,ac as Dt,m as It,_ as St,g as Vt,n as Pt,i as Tt,ad as Nt,ae as Et,af as Bt,ag as At,ah as Xe,ai as Ut,aj as Ft,ak as qe,al as Lt,am as Mt,an as jt,ao as Ot}from"./app-C5J8MnM7.js";import{u as xe,_ as ke,a as be,b as M,c as $e,d as Ce,e as we,f as he,g as ce,h as zt,i as Gt,j as qt,k as Kt,l as Rt,m as Ht,n as Yt,o as Wt,p as pe,q as Jt}from"./useRowSelection-RvbbyOuN.js";import{_ as De}from"./ActionsMenu-DCStfyLb.js";import{_ as Qt,u as Xt,a as Zt,b as el,c as tl}from"./TagMultiSelect.vue_vue_type_script_setup_true_lang-D1pfTGMf.js";import{_ as Ze}from"./useCredentials-OryQr0C4.js";import{e as ie}from"./eventBus-CGRXT3Tn.js";import{_ as Ne}from"./DeviceListPopover-DmupscWR.js";import{_ as ll}from"./DropdownMenuSeparator.vue_vue_type_script_setup_true_lang-BtjZXYxx.js";import{_ as sl}from"./CardFooter.vue_vue_type_script_setup_true_lang-t25Fo9np.js";import{u as al,_ as nl,a as ol,b as dl,c as il}from"./useTemplatesGithub-BJtZRg6Z.js";/* empty css               */const rl={__name:"SheetDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup($){const A=$,u=Se(()=>{const{class:m,...I}=A;return I});return(m,I)=>(a(),v(e(ft),ct({class:e(mt)("text-sm text-muted-foreground",A.class)},u.value),{default:l(()=>[ut(m.$slots,"default")]),_:3},16,["class"]))}},ul={class:"space-y-2"},cl={class:"mb-2 text-sm text-muted-foreground"},ml={key:0,class:"text-xs text-muted-foreground"},fl={__name:"CategoryListPopover",props:{recordName:{type:String,required:!0},items:{type:Array,required:!0},displayField:{type:String,default:"name"},displayCount:{type:Number,default:100}},setup($){return(A,u)=>{const m=p("Button"),I=p("router-link");return a(),v(e(_e),null,{default:l(()=>[t(e(ve),{"as-child":""},{default:l(()=>[t(m,{variant:"outline",className:"mt-1 inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground"},{default:l(()=>u[0]||(u[0]=[i(" ... ")])),_:1})]),_:1}),t(e(ge),{class:"max-w-max",style:{width:"800px"}},{default:l(()=>[o("div",ul,[o("p",cl,"All command groups associated with "+b($.recordName)+". Showing "+b($.displayCount)+" records.",1)]),(a(!0),_(K,null,W($.items.slice(0,$.displayCount),d=>(a(),v(e(Ke),{key:d[$.displayField],variant:"outline",class:"py-1 mt-1 hover:bg-rcgray-900"},{default:l(()=>[t(I,{to:d.view_url},{default:l(()=>[i(b(d[$.displayField]),1)]),_:2},1032,["to"])]),_:2},1024))),128)),$.displayCount>$.displayCount-1?(a(),_("span",ml,[u[2]||(u[2]=o("br",null,null,-1)),i(" Displaying only "+b($.displayCount)+" records. Visit the ",1),t(I,{to:"/commandgroups",class:"text-blue-500 hover:underline"},{default:l(()=>u[1]||(u[1]=[i(" Command Groups ")])),_:1}),u[3]||(u[3]=i(" page to view all devices. "))])):N("",!0)]),_:1})]),_:1})}}},pl={class:"flex items-center"},vl={class:"ml-2"},gl={key:0,class:"grid gap-2 p-4"},_l={class:"grid items-center grid-cols-4 gap-2"},yl={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},xl={class:"grid items-center grid-cols-4 gap-2"},kl={class:"grid items-center grid-cols-4 gap-2"},bl={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},$l={class:"pl-2 ml-auto"},Cl={class:"rc-kdb-class2"},wl={class:"pl-2 ml-auto"},hl={class:"rc-kdb-class2"},Dl={__name:"CommandAddEditDialog",props:{editId:Number},emits:["save"],setup($,{emit:A}){const{toastSuccess:u,toastError:m,toastInfo:I,toastWarning:d,toastDefault:h}=Le(),C=Me(),{openDialog:B,closeDialog:P,isDialogOpen:F}=C,V=A,f=S([]),c=S(!1),g=S({command:"",description:"",category:[]}),T=$;function w(y){y.ctrlKey&&y.key==="Enter"&&U()}te(()=>{T.editId>0&&(c.value=!0,Z.get(`/api/commands/${T.editId}`).then(y=>{g.value=y.data,g.value.categoryArray=y.data.category.map(r=>r.id)}),c.value=!1),window.addEventListener("keydown",w)}),de(()=>{window.removeEventListener("keydown",w)});function U(){let y=T.editId>0?`/${T.editId}`:"",r=T.editId>0?"patch":"post";Z[r]("/api/commands"+y,g.value).then(j=>{V("save",j.data),u("Command created","The command has been created successfully."),P("DialogNewCommand")}).catch(j=>{f.value=j.response.data.errors})}return(y,r)=>{const j=p("CommandsIcon"),H=p("Button"),R=p("Icon");return a(),v(e(xt),{open:e(F)("DialogNewCommand")},{default:l(()=>[t(e(pt),{"as-child":""}),t(e(vt),{class:"p-0 sm:max-w-fit",onEscapeKeyDown:r[6]||(r[6]=q=>e(P)("DialogNewCommand")),onPointerDownOutside:r[7]||(r[7]=q=>e(P)("DialogNewCommand")),onCloseClicked:r[8]||(r[8]=q=>e(P)("DialogNewCommand"))},{default:l(()=>[t(e(gt),{class:"rc-dialog-header"},{default:l(()=>[t(e(_t),{class:"text-sm text-rcgray-200"},{default:l(()=>[o("div",pl,[t(j),o("span",vl,b($.editId>0?"Edit":"Add")+" Command "+b($.editId>0?"(ID: "+$.editId+")":""),1)])]),_:1})]),_:1}),t(Ze,{state:c.value},null,8,["state"]),c.value?N("",!0):(a(),_("div",gl,[o("div",_l,[t(e(Fe),{for:"command",class:"text-right"},{default:l(()=>r[9]||(r[9]=[i(" Command Name "),o("span",{class:"text-red-400"},"*",-1)])),_:1}),t(e(Ge),{modelValue:g.value.command,"onUpdate:modelValue":r[0]||(r[0]=q=>g.value.command=q),id:"command",class:"col-span-3"},null,8,["modelValue"]),f.value.command?(a(),_("span",yl,b(f.value.command[0]),1)):N("",!0)]),o("div",xl,[t(e(Fe),{for:"description",class:"text-right"},{default:l(()=>r[10]||(r[10]=[i(" Description "),o("span",{class:"text-red-400"},"*",-1)])),_:1}),t(e(Ge),{modelValue:g.value.description,"onUpdate:modelValue":r[1]||(r[1]=q=>g.value.description=q),id:"description",class:"col-span-3"},null,8,["modelValue"])]),o("div",kl,[t(e(Fe),{for:"description",class:"text-right"},{default:l(()=>r[11]||(r[11]=[i(" Command Groups "),o("span",{class:"text-red-400"},"*",-1)])),_:1}),t(Qt,{modelValue:g.value.category,"onUpdate:modelValue":r[2]||(r[2]=q=>g.value.category=q)},null,8,["modelValue"]),f.value.category?(a(),_("span",bl,b(f.value.category[0]),1)):N("",!0)])])),t(e(yt),{class:"rc-dialog-footer bg-rcgray-800"},{default:l(()=>[t(H,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:r[3]||(r[3]=q=>e(P)("DialogNewCommand")),size:"sm"},{default:l(()=>r[12]||(r[12]=[i(" Cancel "),o("div",{class:"pl-2 ml-auto"},[o("kbd",{class:"rc-kdb-class"},"ESC")],-1)])),_:1}),T.editId===0?(a(),v(H,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:r[4]||(r[4]=q=>U()),variant:"primary"},{default:l(()=>[r[14]||(r[14]=i(" Save ")),o("div",$l,[o("kbd",Cl,[r[13]||(r[13]=i(" Ctrl  ")),t(R,{icon:"uil:enter",class:""})])])]),_:1})):N("",!0),T.editId>0?(a(),v(H,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:r[5]||(r[5]=q=>U()),variant:"primary"},{default:l(()=>[r[16]||(r[16]=i(" Update ")),o("div",wl,[o("kbd",hl,[r[15]||(r[15]=i(" Ctrl  ")),t(R,{icon:"uil:enter",class:""})])])]),_:1})):N("",!0)]),_:1})]),_:1})]),_:1},8,["open"])}}};function Il(){const $=S(1),A=S(parseInt(localStorage.getItem("perPage")||"10")),u=S("-id"),m=S(""),I=S({}),d=Me(),h=S(0),C=S(!1),B=S(1),P=S(1),F=S([]),V=S(!1),{openDialog:f}=d,{toastSuccess:c,toastError:g}=Le();async function T(O={}){C.value=!0;try{const E=await Z.get("/api/commands",{params:{page:$.value,perPage:A.value,sort:u.value,...I.value}});F.value=E.data,B.value=E.data.last_page}catch(E){console.error("Error fetching commands:",E),g("Error","Failed to fetch commands.")}finally{C.value=!1}}const w=O=>{h.value=0,P.value=Math.random(),f("DialogNewCommand")};function U(O){h.value=O,P.value=Math.random(),f("DialogNewCommand")}const y=async O=>{try{await Z.delete(`/api/commands/${O}`),T(),c("Command Deleted","The command has been deleted successfully."),V.value=!1}catch(E){E.status===422?g("Error",E.response.data.message):(console.error("Error deleting Command Group:",E),g("Error","Failed to delete Command Group."))}},r=async O=>{try{await Z.post("/api/commands/delete-many",{ids:O}),T(),c("Commands Deleted","The commands have been deleted successfully."),V.value=!1,ie.emit("deleteManyCommandsSuccess")}catch(E){E.status===422?g("Error",E.response.data.message):(console.error("Error deleting Command Group:",E),g("Error","Failed to delete Command Group."))}},j=O=>{h.value=O,P.value=Math.random(),f("DialogNewCommand")},H=()=>{T(),P.value=Math.random()};function R(O){O.altKey&&O.key==="n"&&(O.preventDefault(),f("DialogNewCommand"))}const q=Re(()=>{I.value["filter[command]"]=m.value,$.value=1,T()},500);ne([$,A],()=>{T()}),ne(m,()=>{q()}),ne(A,O=>{localStorage.setItem("perPage",O.toString())});function s(O){u.value===O?u.value=`-${O}`:u.value=O,T()}return{commands:F,isLoading:C,currentPage:$,perPage:A,lastPage:B,editId:h,newCommandModalKey:P,searchTerm:m,openDialog:f,fetchCommands:T,createCommand:w,updateCommand:U,deleteCommand:y,deleteManyCommands:r,handleSave:H,handleKeyDown:R,viewEditDialog:j,toggleSort:s,sortParam:u,showConfirmDelete:V}}const Sl={class:"flex flex-col h-full gap-1 text-center"},Vl={class:"flex items-center justify-between p-4"},Pl={class:"flex items-center"},Tl={class:"flex"},Nl={class:"px-6"},El={key:0,class:"mr-2"},Bl={__name:"Main",setup($){const{editId:A,commands:u,currentPage:m,perPage:I,searchTerm:d,lastPage:h,isLoading:C,fetchCommands:B,viewEditDialog:P,createCommand:F,deleteCommand:V,deleteManyCommands:f,handleSave:c,showConfirmDelete:g,handleKeyDown:T,newCommandModalKey:w,toggleSort:U,sortParam:y}=Il(),{selectedRows:r,selectAll:j,toggleSelectAll:H,toggleSelectRow:R}=xe(u);return te(()=>{B(),window.addEventListener("keydown",T),ie.on("deleteManyCommandsSuccess",()=>{r.value=[],j.value=!1})}),de(()=>{window.removeEventListener("keydown",T)}),(q,s)=>{const O=p("Input"),E=p("Button"),x=p("Checkbox"),Q=p("Icon"),Y=p("router-link"),J=p("Badge"),le=p("Toaster");return a(),_("div",Sl,[o("div",Vl,[o("div",Pl,[t(O,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter commands...",modelValue:e(d),"onUpdate:modelValue":s[0]||(s[0]=n=>X(d)?d.value=n:null)},null,8,["modelValue"]),e(d)?(a(),v(ke,{key:0,"onUpdate:modelValue":s[1]||(s[1]=n=>d.value="")})):N("",!0)]),o("div",Tl,[e(r).length?(a(),v(E,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:s[2]||(s[2]=ee(n=>g.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[i(" Delete Selected "+b(e(r).length)+" Command(s) ",1)]),_:1})):N("",!0),t(E,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:ee(e(F),["prevent"]),variant:"primary"},{default:l(()=>s[12]||(s[12]=[i(" New Command "),o("div",{class:"pl-2 ml-auto"},[o("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])),_:1},8,["onClick"])])]),o("div",Nl,[t(e(we),null,{default:l(()=>[t(e(be),null,{default:l(()=>[t(e(se),null,{default:l(()=>[t(e(M),{class:"w-[2%]"},{default:l(()=>[t(x,{id:"selectAll",modelValue:e(j),"onUpdate:modelValue":s[3]||(s[3]=n=>X(j)?j.value=n:null),checked:e(j),onClick:s[4]||(s[4]=n=>e(H)())},null,8,["modelValue","checked"])]),_:1}),t(e(M),{class:"w-[5%]"},{default:l(()=>[t(E,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:s[5]||(s[5]=n=>e(U)("id"))},{default:l(()=>[t(Q,{icon:e(y)==="id"?"lucide:sort-asc":e(y)==="-id"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),s[13]||(s[13]=o("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),t(e(M),{class:"w-[20%]"},{default:l(()=>[t(E,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:s[6]||(s[6]=n=>e(U)("tagname"))},{default:l(()=>[t(Q,{icon:e(y)==="tagname"?"lucide:sort-asc":e(y)==="-tagname"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),s[14]||(s[14]=o("span",{class:"ml-2"},"Command",-1))]),_:1})]),_:1}),t(e(M),{class:"w-[20%]"},{default:l(()=>s[15]||(s[15]=[i("Description")])),_:1}),t(e(M),{class:"w-[40%]"},{default:l(()=>s[16]||(s[16]=[i("Command Groups")])),_:1}),t(e(M),{class:"w-[10%]"},{default:l(()=>s[17]||(s[17]=[i("Actions")])),_:1})]),_:1})]),_:1}),t(e($e),null,{default:l(()=>[e(C)?(a(),v(ye,{key:0})):e(C)?(a(),v(Ce,{key:2})):(a(!0),_(K,{key:1},W(e(u).data,n=>(a(),v(e(se),{key:n.id},{default:l(()=>[t(e(L),{class:"text-start"},{default:l(()=>[t(x,{class:"cursor-pointer",id:"select-"+n.id,checked:!!e(r).includes(n.id),onClick:z=>e(R)(n.id)},null,8,["id","checked","onClick"])]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[i(b(n.id),1)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[i(b(n.command),1)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[i(b(n.description),1)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[(a(!0),_(K,null,W(n.category.slice(0,8),(z,re)=>(a(),_("span",{key:z.categoryName,class:"mr-2"},[t(J,{variant:"outline",class:He([z.badgeColor?z.badgeColor:"bg-gray-600 text-gray-200 border-gray-500","py-1 mt-1 hover:bg-rcgray-800"])},{default:l(()=>[t(Y,{to:z.view_url},{default:l(()=>[i(b(z.categoryName),1)]),_:2},1032,["to"])]),_:2},1032,["class"])]))),128)),n.category.length>8?(a(),_("span",El,[t(fl,{recordName:n.command,items:n.category,displayField:"categoryName"},null,8,["recordName","items"])])):N("",!0)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[t(De,{rowData:n,onOnEdit:z=>e(P)(n.id),onOnDelete:z=>e(V)(n.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(he,{currentPage:e(m),lastPage:e(h),perPage:e(I),"onUpdate:currentPage":s[7]||(s[7]=n=>m.value=n),"onUpdate:perPage":s[8]||(s[8]=n=>I.value=n)},null,8,["currentPage","lastPage","perPage"]),(a(),v(Dl,{onSave:s[9]||(s[9]=n=>e(c)()),key:e(w),editId:e(A)},null,8,["editId"])),t(ce,{ids:e(r),showConfirmDelete:e(g),onClose:s[10]||(s[10]=n=>g.value=!1),onHandleDelete:s[11]||(s[11]=n=>e(f)(e(r)))},null,8,["ids","showConfirmDelete"]),t(le)])])}}},Al={class:"flex flex-col h-full gap-1 text-center"},Ul={class:"flex items-center justify-between p-4"},Fl={class:"flex items-center"},Ll={class:"flex"},Ml={class:"px-6"},jl={key:0,class:"mr-2"},Ol={__name:"Main",setup($){const{editId:A,categories:u,currentPage:m,perPage:I,searchTerm:d,lastPage:h,isLoading:C,fetchCommandGroups:B,viewEditDialog:P,createCommandGroup:F,deleteCommandGroup:V,deleteManyCommandGroups:f,handleSave:c,showConfirmDelete:g,handleKeyDown:T,newCommandGroupsModalKey:w,toggleSort:U,sortParam:y}=Xt(),{selectedRows:r,selectAll:j,toggleSelectAll:H,toggleSelectRow:R}=xe(u);return te(()=>{B(),window.addEventListener("keydown",T),ie.on("deleteManyCommandGroupsSuccess",()=>{r.value=[],j.value=!1})}),de(()=>{window.removeEventListener("keydown",T)}),(q,s)=>{const O=p("Input"),E=p("Button"),x=p("Checkbox"),Q=p("Icon"),Y=p("router-link"),J=p("Badge"),le=p("Toaster");return a(),_("div",Al,[s[18]||(s[18]=o("div",{class:"hidden text-yellow-200 text-teal-100 bg-yellow-700 bg-teal-700 border-yellow-500 border-teal-500 bg-stone-700 text-stone-200 border-stone-500 bg-lime-700 text-lime-200 border-lime-500 bg-sky-700 text-sky-100 border-sky-500 bg-violet-700 text-violet-200 border-violet-500 bg-fuchsia-700 text-fuchsia-200 border-fuchsia-500"},null,-1)),o("div",Ul,[o("div",Fl,[t(O,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter command groups...",modelValue:e(d),"onUpdate:modelValue":s[0]||(s[0]=n=>X(d)?d.value=n:null)},null,8,["modelValue"]),e(d)?(a(),v(ke,{key:0,"onUpdate:modelValue":s[1]||(s[1]=n=>d.value="")})):N("",!0)]),o("div",Ll,[e(r).length?(a(),v(E,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:s[2]||(s[2]=ee(n=>g.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[i(" Delete Selected "+b(e(r).length)+" CommandGroup(s) ",1)]),_:1})):N("",!0),t(E,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:ee(e(F),["prevent"]),variant:"primary"},{default:l(()=>s[12]||(s[12]=[i(" New Command Group "),o("div",{class:"pl-2 ml-auto"},[o("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])),_:1},8,["onClick"])])]),o("div",Ml,[t(e(we),null,{default:l(()=>[t(e(be),null,{default:l(()=>[t(e(se),null,{default:l(()=>[t(e(M),{class:"w-[2%]"},{default:l(()=>[t(x,{id:"selectAll",modelValue:e(j),"onUpdate:modelValue":s[3]||(s[3]=n=>X(j)?j.value=n:null),checked:e(j),onClick:s[4]||(s[4]=n=>e(H)())},null,8,["modelValue","checked"])]),_:1}),t(e(M),{class:"w-[5%]"},{default:l(()=>[t(E,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:s[5]||(s[5]=n=>e(U)("id"))},{default:l(()=>[t(Q,{icon:e(y)==="id"?"lucide:sort-asc":e(y)==="-id"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),s[13]||(s[13]=o("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),t(e(M),{class:"w-[20%]"},{default:l(()=>[t(E,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:s[6]||(s[6]=n=>e(U)("categoryName"))},{default:l(()=>[t(Q,{icon:e(y)==="categoryName"?"lucide:sort-asc":e(y)==="-categoryName"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),s[14]||(s[14]=o("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),t(e(M),{class:"w-[20%]"},{default:l(()=>s[15]||(s[15]=[i("Description")])),_:1}),t(e(M),{class:"w-[40%]"},{default:l(()=>s[16]||(s[16]=[i("Devices")])),_:1}),t(e(M),{class:"w-[10%]"},{default:l(()=>s[17]||(s[17]=[i("Actions")])),_:1})]),_:1})]),_:1}),t(e($e),null,{default:l(()=>[e(C)?(a(),v(ye,{key:0})):e(C)?(a(),v(Ce,{key:2})):(a(!0),_(K,{key:1},W(e(u).data,n=>(a(),v(e(se),{key:n.id},{default:l(()=>[t(e(L),{class:"text-start"},{default:l(()=>[t(x,{class:"cursor-pointer",id:"select-"+n.id,checked:!!e(r).includes(n.id),onClick:z=>e(R)(n.id)},null,8,["id","checked","onClick"])]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[i(b(n.id),1)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[o("span",{class:He([n.badgeColor?n.badgeColor:"bg-gray-600 text-gray-200 border-gray-500","w-fit flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"])},b(n.categoryName),3)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[i(b(n.categoryDescription),1)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[(a(!0),_(K,null,W(n.device.slice(0,8),(z,re)=>(a(),_("span",{key:z.device_name,class:"mr-2"},[t(J,{variant:"outline",class:"py-1 mt-1 hover:bg-rcgray-800"},{default:l(()=>[t(Y,{to:z.view_url},{default:l(()=>[i(b(z.device_name),1)]),_:2},1032,["to"])]),_:2},1024)]))),128)),n.device.length>8?(a(),_("span",jl,[t(Ne,{recordName:n.categoryName,items:n.device,displayField:"device_name"},null,8,["recordName","items"])])):N("",!0)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[t(De,{rowData:n,onOnEdit:z=>e(P)(n.id),onOnDelete:z=>e(V)(n.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(he,{currentPage:e(m),lastPage:e(h),perPage:e(I),"onUpdate:currentPage":s[7]||(s[7]=n=>m.value=n),"onUpdate:perPage":s[8]||(s[8]=n=>I.value=n)},null,8,["currentPage","lastPage","perPage"]),(a(),v(Zt,{onSave:s[9]||(s[9]=n=>e(c)()),key:e(w),editId:e(A)},null,8,["editId"])),t(ce,{ids:e(r),showConfirmDelete:e(g),onClose:s[10]||(s[10]=n=>g.value=!1),onHandleDelete:s[11]||(s[11]=n=>e(f)(e(r)))},null,8,["ids","showConfirmDelete"]),t(le)])])}}},zl={__name:"ConfirmDisableAlert",props:{ids:{type:Array,required:!0},showConfirmDisable:{type:Boolean,required:!0}},emits:["handleDisable","close"],setup($,{emit:A}){const u=A;te(()=>{window.addEventListener("keydown",d=>{d.key==="Escape"&&I()})}),de(()=>{window.removeEventListener("keydown",d=>{d.key==="Escape"&&I()})});function m(){u("handleDisable")}function I(){u("close")}return(d,h)=>(a(),v(e(Wt),{open:$.showConfirmDisable},{default:l(()=>[t(e(zt),null,{default:l(()=>[t(e(Gt),null,{default:l(()=>[t(e(qt),null,{default:l(()=>[i("Disable device with ID "+b($.ids)+"?",1)]),_:1}),t(e(Kt),null,{default:l(()=>h[2]||(h[2]=[i("Are you absolutely sure you want to disable this device? Disabling a device stops it from downloading configs via scheduled tasks and other operations.")])),_:1})]),_:1}),t(e(Rt),null,{default:l(()=>[t(e(Ht),{onCancel:h[0]||(h[0]=C=>I())},{default:l(()=>h[3]||(h[3]=[i("Cancel")])),_:1}),t(e(Yt),{onAction:h[1]||(h[1]=C=>m())},{default:l(()=>h[4]||(h[4]=[i("Continue")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]))}},Gl={__name:"ActionsMenuDevices",props:{rowData:{type:Object,required:!0},showEditBtn:{type:Boolean,default:!0}},emits:["onEdit","onDelete","onDisable","onClone"],setup($,{emit:A}){const u=S(!1),m=S(!1),I=A;function d(){I("onEdit")}function h(){I("onClone")}function C(){u.value=!0}function B(){I("onDelete"),u.value=!1}function P(){m.value=!0}function F(){I("onDisable"),m.value=!1}function V(){I("onEnable")}return(f,c)=>{const g=p("Button"),T=p("Icon");return a(),_("div",null,[t(e(Je),null,{default:l(()=>[t(e(Ye),{"as-child":""},{default:l(()=>[t(g,{variant:"ghost",class:"hover:animate-pulse"},{default:l(()=>c[2]||(c[2]=[i(" ... ")])),_:1})]),_:1}),t(e(We),{class:"w-56",align:"end",side:"bottom"},{default:l(()=>[$.showEditBtn?(a(),v(e(fe),{key:0,class:"cursor-pointer hover:bg-rcgray-800",onClick:d},{default:l(()=>[c[3]||(c[3]=o("span",null,"Edit",-1)),t(e(pe),null,{default:l(()=>[t(T,{icon:"fluent-color:text-edit-style-16"})]),_:1})]),_:1})):N("",!0),$.showEditBtn?(a(),v(e(fe),{key:1,class:"cursor-pointer hover:bg-rcgray-800",onClick:h},{default:l(()=>[c[4]||(c[4]=o("span",null,"Clone",-1)),t(e(pe),null,{default:l(()=>[t(T,{icon:"material-symbols:content-copy-outline"})]),_:1})]),_:1})):N("",!0),$.showEditBtn?(a(),v(e(ll),{key:2})):N("",!0),$.rowData.status===100?(a(),v(e(fe),{key:3,class:"cursor-pointer hover:bg-rcgray-800",onClick:V},{default:l(()=>[c[5]||(c[5]=o("span",null,"Enable",-1)),t(e(pe),null,{default:l(()=>[t(T,{icon:"emojione-v1:up-arrow"})]),_:1})]),_:1})):N("",!0),$.rowData.status!=100?(a(),v(e(fe),{key:4,class:"cursor-pointer hover:bg-rcgray-800",onClick:P},{default:l(()=>[c[6]||(c[6]=o("span",null,"Disable",-1)),t(e(pe),null,{default:l(()=>[t(T,{icon:"emojione-v1:down-arrow"})]),_:1})]),_:1})):N("",!0),t(e(fe),{class:"cursor-pointer hover:bg-rcgray-800",onClick:C},{default:l(()=>[c[7]||(c[7]=o("span",{class:"text-red-400"},"Delete",-1)),t(e(pe),null,{default:l(()=>[t(T,{icon:"flat-color-icons:full-trash"})]),_:1})]),_:1})]),_:1})]),_:1}),t(zl,{ids:[$.rowData.id],showConfirmDisable:m.value,onClose:c[0]||(c[0]=w=>m.value=!1),onHandleDisable:F},null,8,["ids","showConfirmDisable"]),t(ce,{ids:[$.rowData.id],showConfirmDelete:u.value,onClose:c[1]||(c[1]=w=>u.value=!1),onHandleDelete:B},null,8,["ids","showConfirmDelete"])])}}},ql={key:0,class:"text-sm font-light"},Kl={class:"text-sm font-semibold"},Rl={class:"relative items-center w-full"},Hl={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},Yl={class:"py-1"},Wl=["onClick"],Jl=["checked"],Ql={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Xl={"data-size":"20"},Zl={class:"p-1 border-5"},es=Ve({__name:"CategoryFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup($,{emit:A}){const u=A,m=S([]),I=S(!1),d=S([]),h=S(""),C=S(!1),B=$;te(()=>{F()}),ne(()=>B.modelValue,f=>{d.value=f,C.value=d.value.length===m.value.length});function P(f){if(f.id===9999999)C.value?(d.value=[],C.value=!1):(d.value=[...m.value],C.value=!0);else{const c=d.value.findIndex(g=>g.id===f.id);c!==-1?(d.value.splice(c,1),C.value=!1):(d.value.push(f),d.value.length===m.value.length&&(C.value=!0))}I.value=!1,u("update:modelValue",d.value)}function F(){Z.get("/api/categories/?perPage=10000").then(f=>{m.value=f.data.data})}const V=Se(()=>m.value.filter(f=>f.categoryName.toLowerCase().includes(h.value.toLowerCase())));return(f,c)=>{const g=p("Button"),T=p("Input"),w=p("Icon"),U=p("Separator");return a(),v(e(_e),null,{default:l(()=>[t(e(ve),null,{default:l(()=>[t(g,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[t(kt,{class:"mr-2"}),d.value&&d.value.length===0?(a(),_(K,{key:0},[i("Command Group")],64)):(a(),_(K,{key:1},[d.value.length>0?(a(),_("span",ql,[c[2]||(c[2]=i(" Command Group ")),o("strong",Kl,b(d.value.length)+" selected",1)])):N("",!0)],64))]),_:1})]),_:1}),t(e(ge),{side:"bottom",align:"start",class:"w-64 p-0"},{default:l(()=>[o("div",Rl,[t(T,{id:"search",type:"text",modelValue:h.value,"onUpdate:modelValue":c[0]||(c[0]=y=>h.value=y),placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),o("span",Hl,[t(w,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),t(U),t(e(Pe),{class:"h-44"},{default:l(()=>[o("div",Yl,[(a(!0),_(K,null,W(V.value,y=>(a(),_("div",{key:y.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:r=>P(y)},[o("input",{type:"checkbox",checked:d.value.some(r=>r.id===y.id),class:"mr-2"},null,8,Jl),o("span",Ql,[o("span",Xl,b(y.categoryName),1)])],8,Wl))),128))])]),_:1}),t(U),o("div",Zl,[t(g,{variant:"ghost",class:"justify-start w-full p-1",onClick:c[1]||(c[1]=y=>P({id:9999999}))},{default:l(()=>[t(w,{icon:C.value?"fluent:select-all-on-16-filled":"fluent:select-all-on-16-regular",class:"w-4 h-4 mr-2 text-muted-foreground"},null,8,["icon"]),o("span",null,b(C.value?"Deselect all":"Select all"),1)]),_:1})])]),_:1})]),_:1})}}});function ts($){const A=Qe(),{openSheet:u,closeSheet:m,isSheetOpen:I}=A,d=S([]),h=S(!1),C=S(!1),B=Te(),P=bt("formatters");te(()=>{I("DeviceCommentSheet")&&F()});function F(){h.value=!0,Z.get(`/api/device-comments/${$.deviceId}`).then(g=>{d.value=g.data,h.value=!1}).catch(g=>{console.error(g),h.value=!1})}function V(g){m("DeviceCommentSheet"),B.push({name:"device",params:{id:g}})}function f(){C.value||(d.value.unshift({user:{name:"New User"},created_at:new Date().toISOString(),comment:"",is_open:!0,isEditable:!0}),C.value=!0)}function c(g){d.value[g].isEditable=!1,Z.post("/api/device/comments",{comment:d.value[g].comment,device_id:$.deviceId}).then(T=>{}).catch(T=>{console.error(T)})}return{addComment:f,closeSheet:m,comments:d,formatters:P,isLoading:h,isSheetOpen:I,saveComment:c,viewDevice:V}}const ls={class:"border-b"},ss={key:0},as={class:"mt-4 space-y-4"},ns={class:"text-sm text-muted-foreground"},os={key:1},ds={__name:"CommentSheet",props:{deviceId:{type:Number,required:!0},deviceName:{type:String,required:!0}},setup($){const A=$,{addComment:u,closeSheet:m,comments:I,formatters:d,isLoading:h,isSheetOpen:C,saveComment:B,viewDevice:P}=ts(A);return(F,V)=>{const f=p("Button"),c=p("CommentAddIcon"),g=p("Textarea"),T=p("Icon");return a(),v(e(Et),{open:e(C)("DeviceCommentSheet")},{default:l(()=>[t(e($t),{class:"h-[96vh] m-6 rounded-lg border",onEscapeKeyDown:V[1]||(V[1]=w=>e(m)("DeviceCommentSheet")),onPointerDownOutside:V[2]||(V[2]=w=>e(m)("DeviceCommentSheet")),onCloseClicked:V[3]||(V[3]=w=>e(m)("DeviceCommentSheet"))},{default:l(()=>[e(h)?(a(),v(Ct,{key:0})):N("",!0),e(h)?N("",!0):(a(),v(e(wt),{key:1},{default:l(()=>[t(e(ht),null,{default:l(()=>V[4]||(V[4]=[i("Comments")])),_:1}),t(e(rl),null,{default:l(()=>[V[5]||(V[5]=o("span",{class:"text-muted-foreground"},"Comments on",-1)),t(f,{class:"px-2 py-0 hover:bg-rcgray-800 rounded-xl",variant:"ghost",onClick:V[0]||(V[0]=w=>e(P)($.deviceId))},{default:l(()=>[o("span",ls,b($.deviceName),1)]),_:1}),t(f,{variant:"ghost",class:"float-right",onClick:e(u)},{default:l(()=>[t(c,{class:"text-muted-foreground"})]),_:1},8,["onClick"])]),_:1})]),_:1})),t(Dt,{name:"fade"},{default:l(()=>[e(h)?N("",!0):(a(),_("div",ss,[o("div",as,[(a(!0),_(K,null,W(e(I),(w,U)=>(a(),v(e(It),{key:U},{default:l(()=>[t(e(St),{class:"p-2"},{default:l(()=>[t(e(Vt),null,{default:l(()=>[o("span",null,b(w.user.name),1)]),_:2},1024),t(e(Pt))]),_:2},1024),t(e(Tt),{class:"flex justify-end px-2 py-0"},{default:l(()=>[w.isEditable?(a(),v(g,{key:0,modelValue:w.comment,"onUpdate:modelValue":y=>w.comment=y,rows:"1",class:"mt-2"},null,8,["modelValue","onUpdate:modelValue"])):(a(),v(g,{key:1,class:"border-none",modelValue:w.comment,"onUpdate:modelValue":y=>w.comment=y,disabled:""},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1024),t(e(sl),{class:"flex justify-between px-2 py-1"},{default:l(()=>[o("div",ns,b(e(d).formatTime(w.created_at)),1),o("div",null,[w.isEditable?(a(),v(f,{key:0,onClick:y=>e(B)(U),variant:"outline",size:"sm",class:""},{default:l(()=>V[6]||(V[6]=[i(" Save ")])),_:2},1032,["onClick"])):N("",!0),w.isEditable?N("",!0):(a(),_("div",os,[w.is_open?(a(),v(f,{key:0,title:"Resolve Comment",size:"sm",variant:"ghost",class:"py-2"},{default:l(()=>[t(T,{icon:"solar:check-circle-broken"})]),_:1})):N("",!0)]))])]),_:2},1024)]),_:2},1024))),128))])]))]),_:1}),t(e(Nt),null,{default:l(()=>V[7]||(V[7]=[o("div",{class:"flex-1"},null,-1)])),_:1})]),_:1})]),_:1},8,["open"])}}},is={key:0,class:"text-sm font-light"},rs={class:"text-sm font-semibold"},us={class:"py-1"},cs=["onClick"],ms=["checked"],fs={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},ps={"data-size":"20"},vs=Ve({__name:"StatusFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup($,{emit:A}){const u=A,m=S([{id:0,name:"Unreachable"},{id:1,name:"Reachable"},{id:2,name:"Unknown"},{id:100,name:"Disabled"},{id:200,name:"All"}]),I=S(!1),d=S([]),h=$;ne(()=>h.modelValue,B=>{d.value=B});function C(B){if(B.id===200)d.value.length===m.value.length?d.value=[]:d.value=[...m.value];else{const P=d.value.findIndex(F=>F.id===B.id);if(P!==-1){d.value.splice(P,1);const F=d.value.findIndex(V=>V.id===200);F!==-1&&d.value.splice(F,1)}else d.value.push(B)}I.value=!1,u("update:modelValue",d.value)}return(B,P)=>{const F=p("Icon"),V=p("Button");return a(),v(e(_e),null,{default:l(()=>[t(e(ve),null,{default:l(()=>[t(V,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[t(F,{icon:"material-symbols-light:signal-wifi-statusbar-not-connected-rounded",class:"mr-2"}),d.value&&d.value.length===0?(a(),_(K,{key:0},[i("Status")],64)):(a(),_(K,{key:1},[d.value.length>0?(a(),_("span",is,[P[0]||(P[0]=i(" Status ")),o("strong",rs,b(d.value.length)+" selected",1)])):N("",!0)],64))]),_:1})]),_:1}),t(e(ge),{side:"bottom",align:"start",class:"p-0 w-44"},{default:l(()=>[t(e(Pe),{class:"h-44"},{default:l(()=>[o("div",us,[(a(!0),_(K,null,W(m.value,f=>(a(),_("div",{key:f.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:c=>C(f)},[o("input",{type:"checkbox",checked:d.value.some(c=>c.id===f.id),class:"mr-2"},null,8,ms),o("span",fs,[o("span",ps,b(f.name),1)])],8,cs))),128))])]),_:1})]),_:1})]),_:1})}}}),gs={key:0,class:"text-sm font-light"},_s={class:"text-sm font-semibold"},ys={class:"relative items-center w-full"},xs={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},ks={class:"py-1"},bs=["onClick"],$s=["checked"],Cs={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},ws={"data-size":"20"},hs={class:"p-1 border-5"},Ds=Ve({__name:"TagFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup($,{emit:A}){const u=A,m=S([]),I=S(!1),d=S([]),h=S(""),C=S(!1),B=$;te(()=>{F()}),ne(()=>B.modelValue,f=>{d.value=f,C.value=d.value.length===m.value.length});function P(f){if(f.id===9999999)C.value?(d.value=[],C.value=!1):(d.value=[...m.value],C.value=!0);else{const c=d.value.findIndex(g=>g.id===f.id);c!==-1?(d.value.splice(c,1),C.value=!1):(d.value.push(f),d.value.length===m.value.length&&(C.value=!0))}I.value=!1,u("update:modelValue",d.value)}function F(){Z.get("/api/tags/?perPage=10000").then(f=>{m.value=f.data.data})}const V=Se(()=>m.value.filter(f=>f.tagname.toLowerCase().includes(h.value.toLowerCase())));return(f,c)=>{const g=p("Button"),T=p("Input"),w=p("Icon"),U=p("Separator");return a(),v(e(_e),null,{default:l(()=>[t(e(ve),null,{default:l(()=>[t(g,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[t(Bt,{class:"mr-2"}),d.value&&d.value.length===0?(a(),_(K,{key:0},[i("Tags")],64)):(a(),_(K,{key:1},[d.value.length>0?(a(),_("span",gs,[c[2]||(c[2]=i(" Tag ")),o("strong",_s,b(d.value.length)+" selected",1)])):N("",!0)],64))]),_:1})]),_:1}),t(e(ge),{side:"bottom",align:"start",class:"w-64 p-0"},{default:l(()=>[o("div",ys,[t(T,{id:"search",type:"text",modelValue:h.value,"onUpdate:modelValue":c[0]||(c[0]=y=>h.value=y),placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),o("span",xs,[t(w,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),t(U),t(e(Pe),{class:"h-44"},{default:l(()=>[o("div",ks,[(a(!0),_(K,null,W(V.value,y=>(a(),_("div",{key:y.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:r=>P(y)},[o("input",{type:"checkbox",checked:d.value.some(r=>r.id===y.id),class:"mr-2"},null,8,$s),o("span",Cs,[o("span",ws,b(y.tagname),1)])],8,bs))),128))])]),_:1}),t(U),o("div",hs,[t(g,{variant:"ghost",class:"justify-start w-full p-1",onClick:c[1]||(c[1]=y=>P({id:9999999}))},{default:l(()=>[t(w,{icon:C.value?"fluent:select-all-on-16-filled":"fluent:select-all-on-16-regular",class:"w-4 h-4 mr-2 text-muted-foreground"},null,8,["icon"]),o("span",null,b(C.value?"Deselect all":"Select all"),1)]),_:1})])]),_:1})]),_:1})}}}),Is={class:"space-y-2"},Ss={class:"mb-2 text-sm text-muted-foreground"},Vs={key:0,class:"text-xs text-muted-foreground"},Ps={__name:"TagListPopover",props:{recordName:{type:String,required:!0},items:{type:Array,required:!0},displayField:{type:String,default:"name"},displayCount:{type:Number,default:100}},setup($){return(A,u)=>{const m=p("Button"),I=p("router-link");return a(),v(e(_e),null,{default:l(()=>[t(e(ve),{"as-child":""},{default:l(()=>[t(m,{variant:"outline",className:"mt-1 inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground"},{default:l(()=>u[0]||(u[0]=[i(" ... ")])),_:1})]),_:1}),t(e(ge),{class:"max-w-max",style:{width:"800px"}},{default:l(()=>[o("div",Is,[o("p",Ss,"All tags associated with "+b($.recordName)+". Showing "+b($.displayCount)+" records.",1)]),(a(!0),_(K,null,W($.items.slice(0,$.displayCount),d=>(a(),v(e(Ke),{key:d[$.displayField],variant:"outline",class:"py-1 mt-1 hover:bg-rcgray-900"},{default:l(()=>[t(I,{to:d.view_url},{default:l(()=>[i(b(d[$.displayField]),1)]),_:2},1032,["to"])]),_:2},1024))),128)),$.displayCount>$.displayCount-1?(a(),_("span",Vs,[u[2]||(u[2]=o("br",null,null,-1)),i(" Displaying only "+b($.displayCount)+" records. Visit the ",1),t(I,{to:"/tags",class:"text-blue-500 hover:underline"},{default:l(()=>u[1]||(u[1]=[i(" Tags ")])),_:1}),u[3]||(u[3]=i(" page to view all tags. "))])):N("",!0)]),_:1})]),_:1})}}},Ts={key:0,class:"text-sm font-light"},Ns={class:"text-sm font-semibold"},Es={class:"relative items-center w-full"},Bs={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},As={class:"py-1"},Us=["onClick"],Fs=["checked"],Ls={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Ms={"data-size":"20"},js={class:"p-1 border-5"},Os=Ve({__name:"VendorFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup($,{emit:A}){const u=A,m=S([]),I=S(!1),d=S([]),h=S(""),C=S(!1),B=$;te(()=>{F()}),ne(()=>B.modelValue,f=>{d.value=f,C.value=d.value.length===m.value.length});function P(f){if(f.id===9999999)C.value?(d.value=[],C.value=!1):(d.value=[...m.value],C.value=!0);else{const c=d.value.findIndex(g=>g.id===f.id);c!==-1?(d.value.splice(c,1),C.value=!1):(d.value.push(f),d.value.length===m.value.length&&(C.value=!0))}I.value=!1,u("update:modelValue",d.value)}function F(){Z.get("/api/vendors/?perPage=10000").then(f=>{m.value=f.data.data})}const V=Se(()=>m.value.filter(f=>f.vendorName.toLowerCase().includes(h.value.toLowerCase())));return(f,c)=>{const g=p("Button"),T=p("Input"),w=p("Icon"),U=p("Separator");return a(),v(e(_e),null,{default:l(()=>[t(e(ve),null,{default:l(()=>[t(g,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[t(At,{class:"mr-2"}),d.value&&d.value.length===0?(a(),_(K,{key:0},[i("Vendor")],64)):(a(),_(K,{key:1},[d.value.length>0?(a(),_("span",Ts,[c[2]||(c[2]=i(" Vendor ")),o("strong",Ns,b(d.value.length)+" selected",1)])):N("",!0)],64))]),_:1})]),_:1}),t(e(ge),{side:"bottom",align:"start",class:"w-64 p-0"},{default:l(()=>[o("div",Es,[t(T,{id:"search",type:"text",modelValue:h.value,"onUpdate:modelValue":c[0]||(c[0]=y=>h.value=y),placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),o("span",Bs,[t(w,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),t(U),t(e(Pe),{class:"h-44"},{default:l(()=>[o("div",As,[(a(!0),_(K,null,W(V.value,y=>(a(),_("div",{key:y.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:r=>P(y)},[o("input",{type:"checkbox",checked:d.value.some(r=>r.id===y.id),class:"mr-2"},null,8,Fs),o("span",Ls,[o("span",Ms,b(y.vendorName),1)])],8,Us))),128))])]),_:1}),t(U),o("div",js,[t(g,{variant:"ghost",class:"justify-start w-full p-1",onClick:c[1]||(c[1]=y=>P({id:9999999}))},{default:l(()=>[t(w,{icon:C.value?"fluent:select-all-on-16-filled":"fluent:select-all-on-16-regular",class:"w-4 h-4 mr-2 text-muted-foreground"},null,8,["icon"]),o("span",null,b(C.value?"Deselect all":"Select all"),1)]),_:1})])]),_:1})]),_:1})}}}),zs={class:"flex flex-col h-full gap-1 text-center"},Gs={class:"flex items-center justify-between p-4"},qs={class:"flex items-center"},Ks={class:"flex gap-2"},Rs={class:"flex"},Hs={class:"px-6"},Ys={class:"flex justify-between"},Ws={class:"border-b"},Js={key:0,class:"ml-2"},Qs={key:0},Xs={key:1},Zs={key:0},ea={key:1},ta={key:0},la={key:1},sa={key:0},aa={key:1},na={key:0,class:"mr-2"},oa={__name:"Main",props:{statusId:{type:Number,required:!1}},setup($){const{clearFilters:A,createDevice:u,currentPage:m,deleteDevice:I,deleteManyDevices:d,devices:h,disableDevice:C,editId:B,enableDevice:P,fetchDevices:F,filterCategories:V,filterStatus:f,filterTags:c,filterVendor:g,formatters:T,handleKeyDown:w,handleSave:U,isLoading:y,lastPage:r,newDeviceModalKey:j,perPage:H,searchTerm:R,showConfirmDelete:q,sortParam:s,toggleSort:O,updateDevice:E,viewDeviceDetailsPane:x,viewEditDialog:Q}=al(),{selectedRows:Y,selectAll:J,toggleSelectAll:le,toggleSelectRow:n}=xe(h),z=Qe(),{openSheet:re,closeSheet:G,isSheetOpen:oe}=z,Ee=S(0),je=S(""),Oe=S(0),Be=S(!1),Ae=Xe(),et=Te();te(()=>{Ae.query.statusId&&(f.value=[{id:parseInt(Ae.query.statusId)}]),F(),window.addEventListener("keydown",w),ie.on("deleteManyDevicesSuccess",()=>{Y.value=[],J.value=!1})}),ne(()=>Ae.query,async me=>{if(me.openDeviceDialog){u(),await Ut();const{openDeviceDialog:k,...Ue}=me;et.replace({query:Ue},void 0,{replace:!0})}},{immediate:!0}),de(()=>{window.removeEventListener("keydown",w)});function tt(me){Oe.value+=1,Ee.value=me,je.value=h.value.data.find(k=>k.id===me).device_name,re("DeviceCommentSheet")}return(me,k)=>{const Ue=p("Input"),lt=p("Separator"),ue=p("Button"),ze=p("Checkbox"),Ie=p("Icon"),st=p("StatusRedIcon"),at=p("StatusGreenIcon"),nt=p("StatusYellowIcon"),ot=p("StatusGrayIcon"),dt=p("router-link"),it=p("Badge"),rt=p("Toaster");return a(),_("div",zs,[o("div",Gs,[o("div",qs,[t(Ue,{class:"ml-2 min-w-32 lg:min-w-60",autocomplete:"off",placeholder:"Filter devices by ID, name or IP...",modelValue:e(R),"onUpdate:modelValue":k[0]||(k[0]=D=>X(R)?R.value=D:null)},null,8,["modelValue"]),t(lt,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),k[18]||(k[18]=o("span",{class:"mr-2 text-muted-foreground"},"Filters:",-1)),o("div",Ks,[t(es,{modelValue:e(V),"onUpdate:modelValue":k[1]||(k[1]=D=>X(V)?V.value=D:null)},null,8,["modelValue"]),t(Ds,{modelValue:e(c),"onUpdate:modelValue":k[2]||(k[2]=D=>X(c)?c.value=D:null)},null,8,["modelValue"]),t(Os,{modelValue:e(g),"onUpdate:modelValue":k[3]||(k[3]=D=>X(g)?g.value=D:null)},null,8,["modelValue"]),t(vs,{modelValue:e(f),"onUpdate:modelValue":k[4]||(k[4]=D=>X(f)?f.value=D:null)},null,8,["modelValue"]),e(R)||e(V).length||e(c).length||e(g).length||e(f).length?(a(),v(ke,{key:0,"onUpdate:modelValue":e(A)},null,8,["onUpdate:modelValue"])):N("",!0)])]),o("div",Rs,[e(Y).length?(a(),v(ue,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:k[5]||(k[5]=ee(D=>q.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[i(" Delete Selected "+b(e(Y).length)+" Device(s) ",1)]),_:1})):N("",!0),t(ue,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:k[6]||(k[6]=ee(D=>e(u)(),["prevent"])),variant:"primary"},{default:l(()=>k[19]||(k[19]=[i(" New Device "),o("div",{class:"pl-2 ml-auto"},[o("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])),_:1})])]),o("div",Hs,[t(e(we),null,{default:l(()=>[t(e(be),null,{default:l(()=>[t(e(se),null,{default:l(()=>[t(e(M),{class:"w-[2%]"},{default:l(()=>[t(ze,{id:"selectAll",modelValue:e(J),"onUpdate:modelValue":k[7]||(k[7]=D=>X(J)?J.value=D:null),checked:e(J),onClick:k[8]||(k[8]=D=>e(le)())},null,8,["modelValue","checked"])]),_:1}),t(e(M),{class:"w-[5%]"},{default:l(()=>[t(ue,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:k[9]||(k[9]=D=>e(O)("id"))},{default:l(()=>[t(Ie,{icon:e(s)==="id"?"lucide:sort-asc":e(s)==="-id"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),k[20]||(k[20]=o("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),t(e(M),{class:"w-[2%]"},{default:l(()=>[t(ue,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:k[10]||(k[10]=D=>e(O)("status"))},{default:l(()=>[t(Ie,{icon:e(s)==="status"?"lucide:sort-asc":e(s)==="-status"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),k[21]||(k[21]=o("span",{class:"ml-2"},null,-1))]),_:1})]),_:1}),t(e(M),{class:"w-[20%]"},{default:l(()=>[t(ue,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:k[11]||(k[11]=D=>e(O)("device_name"))},{default:l(()=>[t(Ie,{icon:e(s)==="device_name"?"lucide:sort-asc":e(s)==="-device_name"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),k[22]||(k[22]=o("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),t(e(M),{class:"w-[10%]"},{default:l(()=>k[23]||(k[23]=[i("IP Address")])),_:1}),t(e(M),{class:"w-[10%]"},{default:l(()=>k[24]||(k[24]=[i("C'Group")])),_:1}),t(e(M),{class:"w-[10%]"},{default:l(()=>k[25]||(k[25]=[i("Vendor")])),_:1}),t(e(M),{class:"w-[10%]"},{default:l(()=>k[26]||(k[26]=[i("Model")])),_:1}),t(e(M),{class:"w-[10%]"},{default:l(()=>k[27]||(k[27]=[i("Config Count")])),_:1}),t(e(M),{class:"w-[10%]"},{default:l(()=>k[28]||(k[28]=[i("Config Failures")])),_:1}),t(e(M),{class:"w-[10%]"},{default:l(()=>k[29]||(k[29]=[i("Last Config")])),_:1}),t(e(M),{class:"w-[10%]"},{default:l(()=>k[30]||(k[30]=[i("Tags")])),_:1}),t(e(M),{class:"w-[10%]"},{default:l(()=>k[31]||(k[31]=[i("Actions")])),_:1})]),_:1})]),_:1}),t(e($e),null,{default:l(()=>[e(y)?(a(),v(ye,{key:0})):e(y)?(a(),v(Ce,{key:2})):(a(!0),_(K,{key:1},W(e(h).data,D=>(a(),v(e(se),{key:D.id},{default:l(()=>[t(e(L),{class:"text-start"},{default:l(()=>[t(ze,{class:"cursor-pointer",id:"select-"+D.id,checked:!!e(Y).includes(D.id),onClick:ae=>e(n)(D.id)},null,8,["id","checked","onClick"])]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[i(b(D.id),1)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[D.status===0?(a(),v(st,{key:0})):N("",!0),D.status===1?(a(),v(at,{key:1})):N("",!0),D.status===2?(a(),v(nt,{key:2})):N("",!0),D.status===100?(a(),v(ot,{key:3})):N("",!0)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[o("div",Ys,[t(ue,{class:"px-2 py-0 hover:bg-rcgray-800 rounded-xl",variant:"ghost",onClick:ae=>e(x)(D.id)},{default:l(()=>[o("span",Ws,b(D.device_name),1)]),_:2},1032,["onClick"]),t(ue,{class:"px-2 py-0 hover:bg-rcgray-800 rounded-xl text-muted-foreground",variant:"ghost",onClick:ae=>tt(D.id)},{default:l(()=>[t(Ie,{icon:"vaadin:comments-o"}),D.comments.length>0?(a(),_("span",Js,b(D.comments.length),1)):N("",!0)]),_:2},1032,["onClick"])])]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[i(b(D.device_ip),1)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[D.category.length>0?(a(),_("span",Qs,b(D.category[0].categoryName),1)):(a(),_("span",Xs,"--"))]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[D.vendor.length>0?(a(),_("span",Zs,b(D.vendor[0].vendorName),1)):(a(),_("span",ea,"--"))]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[i(b(D.device_model),1)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[i(b(D.config_good_count),1)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[D.config_bad_count?(a(),_("span",ta,b(D.config_bad_count),1)):(a(),_("span",la,"--"))]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[D.last_config?(a(),_("span",sa,b(e(T).formatTime(D.last_config.created_at)),1)):(a(),_("span",aa,"--"))]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[(a(!0),_(K,null,W(D.tag.slice(0,3),(ae,Aa)=>(a(),_("span",{key:ae.tagname,class:"mr-2"},[t(it,{variant:"outline",class:"py-1 mt-1 hover:bg-rcgray-800"},{default:l(()=>[t(dt,{to:ae.view_url},{default:l(()=>[i(b(ae.tagname),1)]),_:2},1032,["to"])]),_:2},1024)]))),128)),D.tag.length>3?(a(),_("span",na,[t(Ps,{recordName:D.device_name,items:D.tag,displayField:"tagname"},null,8,["recordName","items"])])):N("",!0)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[t(Gl,{rowData:D,onOnEnable:ae=>e(P)(D.id),onOnClone:ae=>(e(Q)(D.id),Be.value=!0),onOnDisable:ae=>e(C)(D.id),onOnEdit:ae=>e(Q)(D.id),onOnDelete:ae=>e(I)(D.id)},null,8,["rowData","onOnEnable","onOnClone","onOnDisable","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(he,{currentPage:e(m),lastPage:e(r),perPage:e(H),"onUpdate:currentPage":k[12]||(k[12]=D=>m.value=D),"onUpdate:perPage":k[13]||(k[13]=D=>H.value=D)},null,8,["currentPage","lastPage","perPage"]),(a(),v(nl,{onSave:k[14]||(k[14]=D=>e(U)()),onClose:k[15]||(k[15]=D=>Be.value=!1),key:e(j),editId:e(B),isClone:Be.value},null,8,["editId","isClone"])),t(ce,{ids:e(Y),showConfirmDelete:e(q),onClose:k[16]||(k[16]=D=>q.value=!1),onHandleDelete:k[17]||(k[17]=D=>e(d)(e(Y)))},null,8,["ids","showConfirmDelete"]),(a(),v(ds,{deviceId:Ee.value,deviceName:je.value,key:Oe.value},null,8,["deviceId","deviceName"])),t(rt)])])}}},da={class:"flex flex-col h-full gap-1 text-center"},ia={class:"flex items-center justify-between p-4"},ra={class:"flex items-center"},ua={class:"flex"},ca={class:"px-6"},ma={key:0,class:"mr-2"},fa={__name:"Main",setup($){const{editId:A,tags:u,currentPage:m,perPage:I,searchTerm:d,lastPage:h,isLoading:C,fetchTags:B,viewEditDialog:P,createTag:F,deleteTag:V,deleteManyTags:f,handleSave:c,showConfirmDelete:g,handleKeyDown:T,newTagModalKey:w,toggleSort:U,sortParam:y}=el(),{selectedRows:r,selectAll:j,toggleSelectAll:H,toggleSelectRow:R}=xe(u);return te(()=>{B(),window.addEventListener("keydown",T),ie.on("deleteManyTagsSuccess",()=>{r.value=[],j.value=!1})}),de(()=>{window.removeEventListener("keydown",T)}),(q,s)=>{const O=p("Input"),E=p("Button"),x=p("Checkbox"),Q=p("Icon"),Y=p("router-link"),J=p("Badge"),le=p("Toaster");return a(),_("div",da,[o("div",ia,[o("div",ra,[t(O,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter tags...",modelValue:e(d),"onUpdate:modelValue":s[0]||(s[0]=n=>X(d)?d.value=n:null)},null,8,["modelValue"]),e(d)?(a(),v(ke,{key:0,"onUpdate:modelValue":s[1]||(s[1]=n=>d.value="")})):N("",!0)]),o("div",ua,[e(r).length?(a(),v(E,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:s[2]||(s[2]=ee(n=>g.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[i(" Delete Selected "+b(e(r).length)+" Tag(s) ",1)]),_:1})):N("",!0),t(E,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:ee(e(F),["prevent"]),variant:"primary"},{default:l(()=>s[12]||(s[12]=[i(" New Tag "),o("div",{class:"pl-2 ml-auto"},[o("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])),_:1},8,["onClick"])])]),o("div",ca,[t(e(we),null,{default:l(()=>[t(e(be),null,{default:l(()=>[t(e(se),null,{default:l(()=>[t(e(M),{class:"w-[2%]"},{default:l(()=>[t(x,{id:"selectAll",modelValue:e(j),"onUpdate:modelValue":s[3]||(s[3]=n=>X(j)?j.value=n:null),checked:e(j),onClick:s[4]||(s[4]=n=>e(H)())},null,8,["modelValue","checked"])]),_:1}),t(e(M),{class:"w-[5%]"},{default:l(()=>[t(E,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:s[5]||(s[5]=n=>e(U)("id"))},{default:l(()=>[t(Q,{icon:e(y)==="id"?"lucide:sort-asc":e(y)==="-id"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),s[13]||(s[13]=o("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),t(e(M),{class:"w-[20%]"},{default:l(()=>[t(E,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:s[6]||(s[6]=n=>e(U)("tagname"))},{default:l(()=>[t(Q,{icon:e(y)==="tagname"?"lucide:sort-asc":e(y)==="-tagname"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),s[14]||(s[14]=o("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),t(e(M),{class:"w-[20%]"},{default:l(()=>s[15]||(s[15]=[i("Description")])),_:1}),t(e(M),{class:"w-[40%]"},{default:l(()=>s[16]||(s[16]=[i("Devices")])),_:1}),t(e(M),{class:"w-[10%]"},{default:l(()=>s[17]||(s[17]=[i("Actions")])),_:1})]),_:1})]),_:1}),t(e($e),null,{default:l(()=>[e(C)?(a(),v(ye,{key:0})):e(C)?(a(),v(Ce,{key:2})):(a(!0),_(K,{key:1},W(e(u).data,n=>(a(),v(e(se),{key:n.id},{default:l(()=>[t(e(L),{class:"text-start"},{default:l(()=>[t(x,{class:"cursor-pointer",id:"select-"+n.id,checked:!!e(r).includes(n.id),onClick:z=>e(R)(n.id)},null,8,["id","checked","onClick"])]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[i(b(n.id),1)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[i(b(n.tagname),1)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[i(b(n.tagDescription),1)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[(a(!0),_(K,null,W(n.device.slice(0,8),(z,re)=>(a(),_("span",{key:z.device_name,class:"mr-2"},[t(J,{variant:"outline",class:"py-1 mt-1 hover:bg-rcgray-800"},{default:l(()=>[t(Y,{to:z.view_url},{default:l(()=>[i(b(z.device_name),1)]),_:2},1032,["to"])]),_:2},1024)]))),128)),n.device.length>8?(a(),_("span",ma,[t(Ne,{recordName:n.tagname,items:n.device,displayField:"device_name"},null,8,["recordName","items"])])):N("",!0)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[t(De,{rowData:n,onOnEdit:z=>e(P)(n.id),onOnDelete:z=>e(V)(n.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(he,{currentPage:e(m),lastPage:e(h),perPage:e(I),"onUpdate:currentPage":s[7]||(s[7]=n=>m.value=n),"onUpdate:perPage":s[8]||(s[8]=n=>I.value=n)},null,8,["currentPage","lastPage","perPage"]),(a(),v(tl,{onSave:s[9]||(s[9]=n=>e(c)()),key:e(w),editId:e(A)},null,8,["editId"])),t(ce,{ids:e(r),showConfirmDelete:e(g),onClose:s[10]||(s[10]=n=>g.value=!1),onHandleDelete:s[11]||(s[11]=n=>e(f)(e(r)))},null,8,["ids","showConfirmDelete"]),t(le)])])}}};function pa($){const A=S(1),u=S(parseInt(localStorage.getItem("perPage")||"10")),m=S("-id"),I=S(""),d=S({}),h=Me(),C=S(0),B=S(!1),P=S(1),F=S(1),V=S([]),f=S(!1),c=Te(),{openDialog:g}=h,{toastSuccess:T,toastError:w}=Le();async function U(E={}){B.value=!0;try{const x=await Z.get("/api/templates",{params:{page:A.value,perPage:u.value,sort:m.value,...d.value}});V.value=x.data,P.value=x.data.last_page}catch(x){console.error("Error fetching templates:",x),w("Error","Failed to fetch templates.")}finally{B.value=!1}}function y(E){c.push({name:"templatesview",params:{id:E}})}const r=async E=>{try{await Z.delete(`/api/templates/${E}`),U(),T("Template Deleted","The template has been deleted successfully.")}catch(x){x.status===422?w("Error",x.response.data.message):(console.error("Error deleting template:",x),w("Error","Failed to delete template."))}},j=async E=>{try{await Z.post("/api/templates/delete-many",{ids:E}),U(),T("Templates Deleted","The templates have been deleted successfully."),f.value=!1,ie.emit("deleteManyTemplatesSuccess")}catch(x){x.status===422?w("Error",x.response.data.message):(console.error("Error deleting Templates:",x),w("Error","Failed to delete Templates.")),f.value=!1}},H=E=>{C.value=E,F.value=Math.random(),g("DialogNewTemplate")},R=()=>{U(),F.value=Math.random()};function q(E){E.altKey&&E.key==="n"&&(E.preventDefault(),g("DialogNewTemplate"))}const s=Re(()=>{d.value["filter[templateName]"]=I.value,A.value=1,U()},500);ne([A,u],()=>{U()}),ne(I,()=>{s()}),ne(u,E=>{localStorage.setItem("perPage",E.toString())});function O(E){m.value===E?m.value=`-${E}`:m.value=E,U()}return{templates:V,isLoading:B,currentPage:A,perPage:u,lastPage:P,editId:C,newTemplateModalKey:F,searchTerm:I,openDialog:g,fetchTemplates:U,viewTemplateDetailsPane:y,deleteTemplate:r,deleteManyTemplates:j,handleSave:R,handleKeyDown:q,viewEditDialog:H,toggleSort:O,sortParam:m,showConfirmDelete:f}}const va={class:"flex flex-col h-full gap-1 text-center"},ga={class:"flex items-center justify-between p-4"},_a={class:"flex items-center"},ya={class:"flex"},xa={class:"px-6"},ka={class:"border-b"},ba={key:0,class:"mr-2"},$a={__name:"Main",setup($){const{templates:A,isLoading:u,currentPage:m,perPage:I,lastPage:d,editId:h,newTemplateModalKey:C,searchTerm:B,openDialog:P,fetchTemplates:F,viewTemplateDetailsPane:V,deleteTemplate:f,deleteManyTemplates:c,handleSave:g,handleKeyDown:T,viewEditDialog:w,toggleSort:U,sortParam:y,showConfirmDelete:r}=pa(),{importTemplates:j,importingTemplates:H}=ol(),{selectedRows:R,selectAll:q,toggleSelectAll:s,toggleSelectRow:O}=xe(A);return te(()=>{F(),window.addEventListener("keydown",T),ie.on("deleteManyTemplatesSuccess",()=>{R.value=[],q.value=!1,document.getElementById("selectAll").checked=!1})}),de(()=>{window.removeEventListener("keydown",T)}),(E,x)=>{const Q=p("Input"),Y=p("Button"),J=p("Icon"),le=p("Checkbox"),n=p("router-link"),z=p("Badge"),re=p("Toaster");return a(),_("div",va,[o("div",ga,[o("div",_a,[t(Q,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter templates...",modelValue:e(B),"onUpdate:modelValue":x[0]||(x[0]=G=>X(B)?B.value=G:null)},null,8,["modelValue"]),e(B)?(a(),v(ke,{key:0,"onUpdate:modelValue":x[1]||(x[1]=G=>B.value="")})):N("",!0)]),o("div",ya,[e(R).length?(a(),v(Y,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:x[2]||(x[2]=ee(G=>r.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[i(" Delete Selected "+b(e(R).length)+" Template(s) ",1)]),_:1})):N("",!0),t(Y,{type:"close",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700",onClick:x[3]||(x[3]=G=>e(j)()),variant:"outline"},{default:l(()=>[e(H)?N("",!0):(a(),v(J,{key:0,icon:"mdi:github",class:"mr-2"})),t(Ze,{state:e(H)},null,8,["state"]),x[13]||(x[13]=i(" Import Templates "))]),_:1}),t(Y,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:x[4]||(x[4]=ee(G=>e(V)(0),["prevent"])),variant:"primary"},{default:l(()=>x[14]||(x[14]=[i(" New Template "),o("div",{class:"pl-2 ml-auto"},[o("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])),_:1})])]),o("div",xa,[t(e(we),null,{default:l(()=>[t(e(be),null,{default:l(()=>[t(e(se),null,{default:l(()=>[t(e(M),{class:"w-[2%]"},{default:l(()=>[t(le,{id:"selectAll",modelValue:e(q),"onUpdate:modelValue":x[5]||(x[5]=G=>X(q)?q.value=G:null),checked:e(q),onClick:x[6]||(x[6]=G=>e(s)())},null,8,["modelValue","checked"])]),_:1}),t(e(M),{class:"w-[5%]"},{default:l(()=>[t(Y,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:x[7]||(x[7]=G=>e(U)("id"))},{default:l(()=>[t(J,{icon:e(y)==="id"?"lucide:sort-asc":e(y)==="-id"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),x[15]||(x[15]=o("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),t(e(M),{class:"w-[20%]"},{default:l(()=>[t(Y,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:x[8]||(x[8]=G=>e(U)("templateName"))},{default:l(()=>[t(J,{icon:e(y)==="templateName"?"lucide:sort-asc":e(y)==="-templateName"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),x[16]||(x[16]=o("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),t(e(M),{class:"w-[20%]"},{default:l(()=>x[17]||(x[17]=[i("Description")])),_:1}),t(e(M),{class:"w-[40%]"},{default:l(()=>x[18]||(x[18]=[i("Devices")])),_:1}),t(e(M),{class:"w-[10%]"},{default:l(()=>x[19]||(x[19]=[i("Actions")])),_:1})]),_:1})]),_:1}),t(e($e),null,{default:l(()=>[e(u)?(a(),v(ye,{key:0})):e(u)?(a(),v(Ce,{key:2})):(a(!0),_(K,{key:1},W(e(A).data,G=>(a(),v(e(se),{key:G.id},{default:l(()=>[t(e(L),{class:"text-start"},{default:l(()=>[t(le,{class:"cursor-pointer",id:"select-"+G.id,checked:!!e(R).includes(G.id),onClick:oe=>e(O)(G.id)},null,8,["id","checked","onClick"])]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[i(b(G.id),1)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[t(Y,{class:"px-2 py-0 text-sm hover:bg-rcgray-800 rounded-xl",variant:"ghost",onClick:oe=>e(V)(G.id)},{default:l(()=>[o("span",ka,b(G.templateName),1)]),_:2},1032,["onClick"])]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[i(b(G.description),1)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[(a(!0),_(K,null,W(G.device.slice(0,8),(oe,Ee)=>(a(),_("span",{key:oe.device_name,class:"mr-2"},[t(z,{variant:"outline",class:"py-1 mt-1 hover:bg-rcgray-800"},{default:l(()=>[t(n,{to:oe.view_url},{default:l(()=>[i(b(oe.device_name),1)]),_:2},1032,["to"])]),_:2},1024)]))),128)),G.device.length>8?(a(),_("span",ba,[t(Ne,{recordName:G.templateName,items:G.device,displayField:"device_name"},null,8,["recordName","items"])])):N("",!0)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[t(De,{rowData:G,onOnEdit:oe=>e(V)(G.id),onOnDelete:oe=>e(f)(G.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(he,{currentPage:e(m),lastPage:e(d),perPage:e(I),"onUpdate:currentPage":x[9]||(x[9]=G=>m.value=G),"onUpdate:perPage":x[10]||(x[10]=G=>I.value=G)},null,8,["currentPage","lastPage","perPage"]),t(ce,{ids:e(R),showConfirmDelete:e(r),onClose:x[11]||(x[11]=G=>r.value=!1),onHandleDelete:x[12]||(x[12]=G=>e(c)(e(R)))},null,8,["ids","showConfirmDelete"]),t(re)])])}}},Ca={class:"flex flex-col h-full gap-1 text-center"},wa={class:"flex items-center justify-between p-4"},ha={class:"flex items-center"},Da={class:"flex"},Ia={class:"px-6"},Sa={key:0,class:"mr-2"},Va={__name:"Main",setup($){const{editId:A,vendors:u,currentPage:m,perPage:I,searchTerm:d,lastPage:h,isLoading:C,fetchVendors:B,viewEditDialog:P,createVendor:F,deleteVendor:V,deleteManyVendors:f,handleSave:c,handleKeyDown:g,newVendorModalKey:T,toggleSort:w,sortParam:U,showConfirmDelete:y}=dl(),{selectedRows:r,selectAll:j,toggleSelectAll:H,toggleSelectRow:R}=xe(u);return te(()=>{B(),window.addEventListener("keydown",g),ie.on("deleteManyVendorsSuccess",()=>{r.value=[],j.value=!1,document.getElementById("selectAll").checked=!1})}),de(()=>{window.removeEventListener("keydown",g)}),(q,s)=>{const O=p("Input"),E=p("Button"),x=p("Checkbox"),Q=p("Icon"),Y=p("router-link"),J=p("Badge"),le=p("Toaster");return a(),_("div",Ca,[o("div",wa,[o("div",ha,[t(O,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter vendors...",modelValue:e(d),"onUpdate:modelValue":s[0]||(s[0]=n=>X(d)?d.value=n:null)},null,8,["modelValue"]),e(d)?(a(),v(ke,{key:0,"onUpdate:modelValue":s[1]||(s[1]=n=>d.value="")})):N("",!0)]),o("div",Da,[e(r).length?(a(),v(E,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:s[2]||(s[2]=ee(n=>y.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[i(" Delete Selected "+b(e(r).length)+" Tag(s) ",1)]),_:1})):N("",!0),t(E,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:ee(e(F),["prevent"]),variant:"primary"},{default:l(()=>s[12]||(s[12]=[i(" New Vendor "),o("div",{class:"pl-2 ml-auto"},[o("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])),_:1},8,["onClick"])])]),o("div",Ia,[t(e(we),null,{default:l(()=>[t(e(be),null,{default:l(()=>[t(e(se),null,{default:l(()=>[t(e(M),{class:"w-[2%]"},{default:l(()=>[t(x,{id:"selectAll",modelValue:e(j),"onUpdate:modelValue":s[3]||(s[3]=n=>X(j)?j.value=n:null),checked:e(j),onClick:s[4]||(s[4]=n=>e(H)())},null,8,["modelValue","checked"])]),_:1}),t(e(M),{class:"w-[5%]"},{default:l(()=>[t(E,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:s[5]||(s[5]=n=>e(w)("id"))},{default:l(()=>[t(Q,{icon:e(U)==="id"?"lucide:sort-asc":e(U)==="-id"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),s[13]||(s[13]=o("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),t(e(M),{class:"w-[20%]"},{default:l(()=>[t(E,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:s[6]||(s[6]=n=>e(w)("vendorName"))},{default:l(()=>[t(Q,{icon:e(U)==="vendorName"?"lucide:sort-asc":e(U)==="-vendorName"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),s[14]||(s[14]=o("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),t(e(M),{class:"w-[50%]"},{default:l(()=>s[15]||(s[15]=[i("Devices")])),_:1}),t(e(M),{class:"w-[10%]"},{default:l(()=>s[16]||(s[16]=[i("Actions")])),_:1})]),_:1})]),_:1}),t(e($e),null,{default:l(()=>[e(C)?(a(),v(ye,{key:0})):e(C)?(a(),v(Ce,{key:2})):(a(!0),_(K,{key:1},W(e(u).data,n=>(a(),v(e(se),{key:n.id},{default:l(()=>[t(e(L),{class:"text-start"},{default:l(()=>[t(x,{class:"cursor-pointer",id:"select-"+n.id,checked:!!e(r).includes(n.id),onClick:z=>e(R)(n.id)},null,8,["id","checked","onClick"])]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[i(b(n.id),1)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[i(b(n.vendorName),1)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[(a(!0),_(K,null,W(n.device.slice(0,8),(z,re)=>(a(),_("span",{key:z.device_name,class:"mr-2"},[t(J,{variant:"outline",class:"py-1 mt-1 hover:bg-rcgray-800"},{default:l(()=>[t(Y,{to:z.view_url},{default:l(()=>[i(b(z.device_name),1)]),_:2},1032,["to"])]),_:2},1024)]))),128)),n.device.length>8?(a(),_("span",Sa,[t(Ne,{recordName:n.vendorName,items:n.device,displayField:"device_name"},null,8,["recordName","items"])])):N("",!0)]),_:2},1024),t(e(L),{class:"text-start"},{default:l(()=>[t(De,{rowData:n,onOnEdit:z=>e(P)(n.id),onOnDelete:z=>e(V)(n.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(he,{currentPage:e(m),lastPage:e(h),perPage:e(I),"onUpdate:currentPage":s[7]||(s[7]=n=>m.value=n),"onUpdate:perPage":s[8]||(s[8]=n=>I.value=n)},null,8,["currentPage","lastPage","perPage"]),(a(),v(il,{onSave:s[9]||(s[9]=n=>e(c)()),key:e(T),editId:e(A)},null,8,["editId"])),t(ce,{ids:e(r),showConfirmDelete:e(y),onClose:s[10]||(s[10]=n=>y.value=!1),onHandleDelete:s[11]||(s[11]=n=>e(f)(e(r)))},null,8,["ids","showConfirmDelete"]),t(le)])])}}},Pa={class:"flex flex-col flex-1 gap-2 dark:bg-rcgray-900"},Ta={class:"border-t border-b topRow"},Na={class:"flex items-center gap-2"},Ea={class:"flex items-center gap-2 mr-4"},Ba={class:"flex items-center gap-2"},Ha={__name:"Main",props:{},setup($){const A=Ft(),u=S(localStorage.getItem("inventorySelectedView")||"devices"),m=Xe(),I=Te(),d=[{id:"devices",label:"Devices",icon:"DeviceIcon",isFavorite:S(!1),route:"/devices"},{id:"commandgroups",label:"Command Groups",icon:"CommandGroupIcon",isFavorite:S(!1),route:"/commandgroups"},{id:"commands",label:"Commands",icon:"CommandsIcon",isFavorite:S(!1),route:"/commands"},{id:"templates",label:"Templates",icon:"TemplateIcon",isFavorite:S(!1),route:"/templates"},{id:"vendors",label:"Vendors",icon:"VendorIcon",isFavorite:S(!1),route:"/vendors"},{id:"tags",label:"Tags",icon:"TagIcon",isFavorite:S(!1),route:"/tags"}];te(()=>{m.params.view?h(m.params.view):m.name==="devicesview"?h(m.name):m.path.includes("inventory")||h(m.name);const B=m.query;Object.keys(B).length>0&&I.push({name:u.value,query:B}),d.forEach(P=>{P.isFavorite.value=A.isFavorite(P.id)})});function h(B){localStorage.setItem("inventorySelectedView",B),u.value=B,I.push({name:B})}function C(B){const P=d.find(F=>F.id===B);P&&(P.isFavorite.value=!P.isFavorite.value,A.toggleFavorite(P))}return(B,P)=>{const F=p("Icon"),V=p("Button"),f=p("StarUnselected"),c=p("StarSelected");return a(),_("main",Pa,[o("div",Ta,[t(e(Je),null,{default:l(()=>{var g,T;return[t(e(Ye),{"as-child":"",class:"p-4 ml-2"},{default:l(()=>[t(V,{variant:"outline"},{default:l(()=>[o("span",Na,[t(F,{icon:"fluent-color:pin-16"}),P[0]||(P[0]=i(" Select View "))])]),_:1})]),_:1}),o("div",Ea,[(a(),v(qe(((g=d.find(w=>w.id===u.value))==null?void 0:g.icon)||""))),i(" "+b(((T=d.find(w=>w.id===u.value))==null?void 0:T.label)||""),1)]),t(e(We),{class:"w-56",align:"start"},{default:l(()=>[t(e(Jt),null,{default:l(()=>[(a(),_(K,null,W(d,w=>t(e(fe),{key:w.id,onClick:U=>h(w.id)},{default:l(()=>[o("span",Ba,[(a(),v(qe(w.icon))),i(" "+b(w.label),1)]),t(e(Lt),null,{default:l(()=>[t(e(Mt),null,{default:l(()=>[t(e(jt),{"as-child":""},{default:l(()=>[t(e(pe),{onClick:ee(U=>C(w.id),["stop","prevent"])},{default:l(()=>[w.isFavorite.value?N("",!0):(a(),v(f,{key:0})),w.isFavorite.value?(a(),v(c,{key:1})):N("",!0)]),_:2},1032,["onClick"])]),_:2},1024),t(e(Ot),null,{default:l(()=>[o("p",null,b(w.isFavorite.value?"Remove from favorites":"Add to favorites"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1})]}),_:1})]),o("div",null,[u.value==="devices"||u.value==="devicesview"?(a(),v(oa,{key:0})):N("",!0),u.value==="commandgroups"?(a(),v(Ol,{key:1})):N("",!0),u.value==="commands"?(a(),v(Bl,{key:2})):N("",!0),u.value==="templates"?(a(),v($a,{key:3})):N("",!0),u.value==="vendors"?(a(),v(Va,{key:4})):N("",!0),u.value==="tags"?(a(),v(fa,{key:5})):N("",!0)])])}}};export{Ha as default};
