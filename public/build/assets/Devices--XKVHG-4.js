import{D as oe,a as ae,u as le,b as ne}from"./DeleteModal-CxTtXkOc.js";import{D as ie}from"./DataTableSpinner-z8HceaJB.js";import{e as R,r as _,f as E,o as a,c as l,a as t,g as ce,v as de,h as S,t as u,F as O,i as x,d as F,j as p,n as I,k as L,l as q,m as re,p as C,b as T,q as N,w as J,s as G,x as fe,y as pe}from"./app-C9AuNpcX.js";import{u as V}from"./MultiSelect-CBF5t018.js";import{D as ue}from"./DevicesBreadcrumbs-fdqai0xq.js";import{D as me}from"./DevicesForm-C0-CSTko.js";import{P as _e}from"./PageHeader-C0d3TrAV.js";import{S as ge}from"./SideDrawer-DIYcDlTF.js";import{u as ve}from"./ViewFunctions-Dm_yn-26.js";/* empty css               */import"./DeviceCategoryField-Dl9PQz4l.js";const be={props:{pagename:{type:String,default:"rConfig"}},setup(h,{emit:e}){const n=_(null),s=_(""),k=_(null),f=_(!1),o=_(null),m=_(null),b=_(null),r=_(!1),g=_(null),i=_(null),c=_(!1),d=_(null),y=_(null),v=_(!1),D=_(null),{results:j,isLoading:B}=V("tags"),{results:A,isLoading:K}=V("categories"),{results:z,isLoading:H}=V("vendors"),{results:U,isLoading:Q}=V("get-device-models");E(o,w=>f.value=!1),E(b,w=>r.value=!1),E(i,w=>c.value=!1),E(y,w=>v.value=!1);function X(w,P){var M={[w]:P};w==="status"&&(k.value=P);let W=JSON.stringify(M);e("searchInput",W)}function Y(w){e("openDrawer",w)}function Z(w){e("searchInput",w.target.value)}function $(){e("showEditColumns")}function ee(w,P,M){w==="category"&&(m.value=M,g.value=!1,d.value=!1,D.value=!1,f.value=!1),w==="tag"&&(g.value=M,m.value=!1,d.value=!1,D.value=!1,r.value=!1),w==="vendor"&&(d.value=M,m.value=!1,g.value=!1,D.value=!1,c.value=!1),w==="device_model"&&(D.value=M,m.value=!1,g.value=!1,d.value=!1,v.value=!1);var W={[w]:P};let se=JSON.stringify(W);e("searchInput",se)}function te(){D.value=!1,m.value=!1,g.value=!1,d.value=!1,k.value=null,s.value="",e("searchInput",s.value)}return{activeStatus:k,clear:te,filterSelect:X,handleInput:Z,openDrawer:Y,search:n,searchInput:s,showEditColumns:$,setFilter:ee,tags:j,tagsIsLoading:B,cats:A,catsIsLoading:K,vendors:z,vendorsIsLoading:H,models:U,modelsIsLoading:Q,showCatFilteroptions:f,clickOutsidetarget1:o,selectedCatName:m,clickOutsidetarget2:b,showTagFilteroptions:r,selectedTagname:g,clickOutsidetarget3:i,showVendorFilteroptions:c,selectedVendorname:d,clickOutsidetarget4:y,showModelFilteroptions:v,selectedModelname:D}}},he={class:"pf-c-toolbar"},we={class:"pf-c-toolbar__content"},ye={class:"pf-c-toolbar__content-section pf-m-nowrap"},ke={class:"pf-c-toolbar__group pf-m-toggle-group pf-m-show"},Ce={class:"pf-c-toolbar__item pf-m-search-filter"},Se={class:"pf-c-search-input"},Oe={class:"pf-c-search-input__bar"},xe={class:"pf-c-search-input__text"},De={class:"pf-c-search-input__utilities"},Ie={class:"pf-c-search-input__clear"},Ne={class:"pf-c-toolbar__group pf-m-filter-group pf-m-hidden pf-m-visible-on-lg"},Me={class:"pf-c-toolbar__item"},Fe={class:"pf-c-select pf-m-expanded",ref:"clickOutsidetarget1"},Te={class:"pf-c-select__toggle-wrapper"},Ee=["textContent"],Pe={key:0,class:"pf-c-select__menu multi-select-dropdown-overflow",role:"listbox"},Ve=["onClick"],Le={key:0,class:"pf-c-select__menu-item-icon"},Je={class:"pf-c-toolbar__item"},Re={class:"pf-c-select pf-m-expanded",ref:"clickOutsidetarget2"},je={class:"pf-c-select__toggle-wrapper"},Be=["textContent"],Ae={key:0,class:"pf-c-select__menu multi-select-dropdown-overflow",role:"listbox"},Ke=["onClick"],ze={key:0,class:"pf-c-select__menu-item-icon"},We={class:"pf-c-toolbar__item"},qe={class:"pf-c-select pf-m-expanded",ref:"clickOutsidetarget3"},Ge={class:"pf-c-select__toggle-wrapper"},He=["textContent"],Ue={key:0,class:"pf-c-select__menu multi-select-dropdown-overflow",role:"listbox"},Qe=["onClick"],Xe={key:0,class:"pf-c-select__menu-item-icon"},Ye={class:"pf-c-toolbar__item"},Ze={class:"pf-c-select pf-m-expanded",ref:"clickOutsidetarget4"},$e={class:"pf-c-select__toggle-wrapper"},et=["textContent"],tt={key:0,class:"pf-c-select__menu multi-select-dropdown-overflow",role:"listbox"},st=["onClick"],ot={key:0,class:"pf-c-select__menu-item-icon"},at={class:"pf-c-toolbar__group pf-m-icon-button-group"},lt={class:"pf-c-toolbar__item"},nt={class:"pf-c-toolbar__item"},it={class:"pf-c-toolbar__item"},ct={class:"pf-c-toolbar__item pf-m-pagination"},dt={class:"pf-c-overflow-menu",id:"-overflow-menu"},rt={class:"pf-c-overflow-menu__content pf-u-display-none pf-u-display-flex-on-lg"},ft={class:"pf-c-overflow-menu__group pf-m-button-group"},pt={class:"pf-c-overflow-menu__item"},ut={key:0,class:"pf-c-toolbar__content pf-m-chip-container"},mt={class:"pf-c-toolbar__group"},_t={class:"pf-c-toolbar__item pf-m-chip-group"},gt={class:"pf-c-chip-group pf-m-category"},vt={class:"pf-c-chip-group__main"},bt={class:"pf-c-chip-group__label","aria-hidden":"true"},ht={key:0},wt={key:1},yt={key:2},kt={key:3},Ct={class:"pf-c-chip-group__list",role:"list"},St={key:0,class:"pf-c-chip-group__list-item"},Ot={class:"pf-c-chip"},xt={class:"pf-c-chip__text"},Dt={key:1,class:"pf-c-chip-group__list-item"},It={class:"pf-c-chip"},Nt={class:"pf-c-chip__text"},Mt={key:2,class:"pf-c-chip-group__list-item"},Ft={class:"pf-c-chip"},Tt={class:"pf-c-chip__text"},Et={key:3,class:"pf-c-chip-group__list-item"},Pt={class:"pf-c-chip"},Vt={class:"pf-c-chip__text"},Lt={class:"pf-c-toolbar__item"};function Jt(h,e,n,s,k,f){return a(),l("div",he,[t("div",we,[t("div",ye,[t("div",ke,[t("div",Ce,[t("div",Se,[t("div",Oe,[t("span",xe,[e[17]||(e[17]=t("span",{class:"pf-c-search-input__icon"},[t("i",{class:"fas fa-search fa-fw","aria-hidden":"true"})],-1)),ce(t("input",{class:"pf-c-search-input__text-input",type:"text",placeholder:"Type to Search","aria-label":"Type to Search","onUpdate:modelValue":e[0]||(e[0]=o=>s.searchInput=o),onInput:e[1]||(e[1]=(...o)=>s.handleInput&&s.handleInput(...o)),ref:"search",autocomplete:"off"},null,544),[[de,s.searchInput]])]),t("span",De,[t("span",Ie,[t("button",{class:"pf-c-button pf-m-plain",type:"button","aria-label":"Clear",onClick:e[2]||(e[2]=(...o)=>s.clear&&s.clear(...o))},e[18]||(e[18]=[t("i",{class:"fas fa-times fa-fw","aria-hidden":"true"},null,-1)]))])])])])])]),e[32]||(e[32]=t("hr",{class:"pf-c-divider pf-m-vertical pf-m-hidden pf-m-visible-on-lg"},null,-1)),t("div",Ne,[t("div",Me,[t("div",Fe,[e[21]||(e[21]=t("span",{hidden:""},"Choose one",-1)),t("button",{class:"pf-c-select__toggle",type:"button","aria-haspopup":"true","aria-expanded":"false",onClick:e[3]||(e[3]=S(o=>s.showCatFilteroptions=!s.showCatFilteroptions,["prevent"]))},[t("div",Te,[t("span",{class:"pf-c-select__toggle-text",textContent:u(s.selectedCatName?s.selectedCatName:"Categories")},null,8,Ee)]),e[19]||(e[19]=t("span",{class:"pf-c-select__toggle-arrow"},[t("i",{class:"fas fa-caret-down","aria-hidden":"true"})],-1))]),s.showCatFilteroptions||!1?(a(),l("ul",Pe,[(a(!0),l(O,null,x(s.cats,o=>(a(),l("li",{role:"presentation",key:o},[t("button",{class:"pf-c-select__menu-item pf-m-selected",role:"option",onClick:S(m=>s.setFilter("category",o.id,o.categoryName),["prevent"])},[F(u(o.categoryName)+" ",1),s.selectedCatName===o.categoryName?(a(),l("span",Le,e[20]||(e[20]=[t("i",{class:"fas fa-check","aria-hidden":"true"},null,-1)]))):p("",!0)],8,Ve)]))),128))])):p("",!0)],512)]),t("div",Je,[t("div",Re,[e[24]||(e[24]=t("span",{hidden:""},"Choose one",-1)),t("button",{class:"pf-c-select__toggle",type:"button","aria-haspopup":"true","aria-expanded":"false",onClick:e[4]||(e[4]=S(o=>s.showTagFilteroptions=!s.showTagFilteroptions,["prevent"]))},[t("div",je,[t("span",{class:"pf-c-select__toggle-text",textContent:u(s.selectedTagname?s.selectedTagname:"Tag")},null,8,Be)]),e[22]||(e[22]=t("span",{class:"pf-c-select__toggle-arrow"},[t("i",{class:"fas fa-caret-down","aria-hidden":"true"})],-1))]),s.showTagFilteroptions||!1?(a(),l("ul",Ae,[(a(!0),l(O,null,x(s.tags,o=>(a(),l("li",{role:"presentation",key:o},[t("button",{class:"pf-c-select__menu-item pf-m-selected",role:"option",onClick:S(m=>s.setFilter("tag",o.id,o.tagname),["prevent"])},[F(u(o.tagname)+" ",1),s.selectedTagname===o.tagname?(a(),l("span",ze,e[23]||(e[23]=[t("i",{class:"fas fa-check","aria-hidden":"true"},null,-1)]))):p("",!0)],8,Ke)]))),128))])):p("",!0)],512)]),t("div",We,[t("div",qe,[e[27]||(e[27]=t("span",{hidden:""},"Choose one",-1)),t("button",{class:"pf-c-select__toggle",type:"button","aria-haspopup":"true","aria-expanded":"false",onClick:e[5]||(e[5]=S(o=>s.showVendorFilteroptions=!s.showVendorFilteroptions,["prevent"]))},[t("div",Ge,[t("span",{class:"pf-c-select__toggle-text",textContent:u(s.selectedVendorname?s.selectedVendorname:"Vendor")},null,8,He)]),e[25]||(e[25]=t("span",{class:"pf-c-select__toggle-arrow"},[t("i",{class:"fas fa-caret-down","aria-hidden":"true"})],-1))]),s.showVendorFilteroptions||!1?(a(),l("ul",Ue,[(a(!0),l(O,null,x(s.vendors,o=>(a(),l("li",{role:"presentation",key:o},[t("button",{class:"pf-c-select__menu-item pf-m-selected",role:"option",onClick:S(m=>s.setFilter("vendor",o.id,o.vendorName),["prevent"])},[F(u(o.vendorName)+" ",1),s.selectedVendorname===o.vendorName?(a(),l("span",Xe,e[26]||(e[26]=[t("i",{class:"fas fa-check","aria-hidden":"true"},null,-1)]))):p("",!0)],8,Qe)]))),128))])):p("",!0)],512)]),t("div",Ye,[t("div",Ze,[e[30]||(e[30]=t("span",{hidden:""},"Choose one",-1)),t("button",{class:"pf-c-select__toggle",type:"button","aria-haspopup":"true","aria-expanded":"false",onClick:e[6]||(e[6]=S(o=>s.showModelFilteroptions=!s.showModelFilteroptions,["prevent"]))},[t("div",$e,[t("span",{class:"pf-c-select__toggle-text",textContent:u(s.selectedModelname?s.selectedModelname:"Model")},null,8,et)]),e[28]||(e[28]=t("span",{class:"pf-c-select__toggle-arrow"},[t("i",{class:"fas fa-caret-down","aria-hidden":"true"})],-1))]),s.showModelFilteroptions||!1?(a(),l("ul",tt,[(a(!0),l(O,null,x(s.models,o=>(a(),l("li",{role:"presentation",key:o},[t("button",{class:"pf-c-select__menu-item pf-m-selected",role:"option",onClick:S(m=>s.setFilter("device_model",o,o),["prevent"])},[F(u(o)+" ",1),s.selectedModelname===o?(a(),l("span",ot,e[29]||(e[29]=[t("i",{class:"fas fa-check","aria-hidden":"true"},null,-1)]))):p("",!0)],8,st)]))),128))])):p("",!0)],512)])]),e[33]||(e[33]=t("hr",{class:"pf-c-divider pf-m-vertical"},null,-1)),t("button",{class:"pf-c-button pf-m-control",type:"button",alt:"Edit Columns",title:"Edit Columns",onClick:e[7]||(e[7]=o=>s.showEditColumns())},e[31]||(e[31]=[t("i",{class:"fas fa-columns","aria-hidden":"true"},null,-1),t("span",{class:"pf-u-display-none pf-u-display-inline-block-on-lg"},null,-1)])),e[34]||(e[34]=t("hr",{class:"pf-c-divider pf-m-vertical"},null,-1)),t("div",at,[t("div",lt,[t("button",{class:"pf-c-button pf-m-plain",type:"button",onClick:e[8]||(e[8]=S(o=>s.clear(),["prevent"]))},[t("i",{class:I(["fas fa-expand-arrows-alt",s.activeStatus===null?"statusActive":"statusInactive"]),alt:"Show all devices",title:"Show all devices"},null,2)])]),t("div",nt,[t("button",{class:"pf-c-button pf-m-plain",type:"button",onClick:e[9]||(e[9]=S(o=>s.filterSelect("status","1"),["prevent"]))},[t("i",{class:I(["fas fa-check-circle pf-u-success-color-100",s.activeStatus=="1"?"statusActive":"statusInactive"]),alt:"Show up devices",title:"Show up devices"},null,2)])]),t("div",it,[t("button",{class:"pf-c-button pf-m-plain",type:"button",onClick:e[10]||(e[10]=S(o=>s.filterSelect("status","0"),["prevent"]))},[t("i",{class:I(["fas fa-exclamation-triangle pf-u-warning-color-100",s.activeStatus=="0"?"statusActive":"statusInactive"]),alt:"Show down devices",title:"Show down devices"},null,2)])])]),t("div",ct,[t("div",dt,[t("div",rt,[t("div",ft,[t("div",pt,[t("button",{class:"pf-c-button pf-m-primary",type:"button",onClick:e[11]||(e[11]=o=>s.openDrawer(0))}," New "+u(n.pagename),1)])])])])])]),e[35]||(e[35]=t("div",{class:"pf-c-toolbar__expandable-content pf-m-hidden",id:"-expandable-content",hidden:""},null,-1))]),s.selectedCatName||s.selectedModelname||s.selectedVendorname||s.selectedTagname?(a(),l("div",ut,[t("div",mt,[t("div",_t,[t("div",gt,[t("div",vt,[t("span",bt,[e[36]||(e[36]=F("Filter ")),s.selectedCatName?(a(),l("span",ht,"category: ")):p("",!0),s.selectedModelname?(a(),l("span",wt,"model: ")):p("",!0),s.selectedVendorname?(a(),l("span",yt,"vendor: ")):p("",!0),s.selectedTagname?(a(),l("span",kt,"tag: ")):p("",!0)]),t("ul",Ct,[s.selectedCatName?(a(),l("li",St,[t("div",Ot,[t("span",xt,u(s.selectedCatName),1),t("button",{class:"pf-c-button pf-m-plain",type:"button",onClick:e[12]||(e[12]=o=>s.clear())},e[37]||(e[37]=[t("i",{class:"fas fa-times","aria-hidden":"true"},null,-1)]))])])):p("",!0),s.selectedModelname?(a(),l("li",Dt,[t("div",It,[t("span",Nt,u(s.selectedModelname),1),t("button",{class:"pf-c-button pf-m-plain",type:"button",onClick:e[13]||(e[13]=o=>s.clear())},e[38]||(e[38]=[t("i",{class:"fas fa-times","aria-hidden":"true"},null,-1)]))])])):p("",!0),s.selectedVendorname?(a(),l("li",Mt,[t("div",Ft,[t("span",Tt,u(s.selectedVendorname),1),t("button",{class:"pf-c-button pf-m-plain",type:"button",onClick:e[14]||(e[14]=o=>s.clear())},e[39]||(e[39]=[t("i",{class:"fas fa-times","aria-hidden":"true"},null,-1)]))])])):p("",!0),s.selectedTagname?(a(),l("li",Et,[t("div",Pt,[t("span",Vt,u(s.selectedTagname),1),t("button",{class:"pf-c-button pf-m-plain",type:"button",onClick:e[15]||(e[15]=o=>s.clear())},e[40]||(e[40]=[t("i",{class:"fas fa-times","aria-hidden":"true"},null,-1)]))])])):p("",!0)])])])])]),t("div",Lt,[t("button",{class:"pf-c-button pf-m-link pf-m-inline",type:"button",onClick:e[16]||(e[16]=o=>s.clear())}," Clear all filters ")])])):p("",!0)])}const Rt=R(be,[["render",Jt],["__scopeId","data-v-e5588839"]]),jt={components:{DevicesDataTableToolbar:Rt,DataTableSpinner:ie,DataTableEmptyState:oe,DataTablePaginate:ae},props:{pagename:{type:String},tabledata:{type:Object,required:[]},newBtnEnabled:{type:Boolean,default:!0},editBtnEnabled:{type:Boolean,default:!0}},emits:["openDrawer","deleteRow","pagechanged","showEditColumnsModal"],setup(h,{emit:e}){const n=L({pageParams:{page:1,perpage:10,filters:null,sortby:null,sortOrder:"desc"},sortIcon:{base:"fas fa-arrows-alt-v",is:"fa-sort",up:"fas fa-long-arrow-alt-up",down:"fas fa-long-arrow-alt-down"}}),s=_(n.sortIcon.base),k=_(0),{setupResizableTable:f}=le(),o=q("formatTime");re(()=>{h.tabledata.isLoading||f()});function m(y,v=!1){e("openDrawer",{id:y,isClone:v})}function b(y){e("deleteRow",y)}function r(){n.pageParams.filters="",e("pagechanged",n.pageParams)}function g(y){n.pageParams.filters=y,e("pagechanged",n.pageParams)}function i(y){n.pageParams.page=y.page,n.pageParams.per_page=y.per_page,e("pagechanged",n.pageParams)}function c(y,v){s.value=n.pageParams.sortOrder==="desc"?n.sortIcon.up:n.sortIcon.down,k.value=v,n.pageParams.sortby=y,n.pageParams.sortOrder=n.pageParams.sortOrder==="desc"?"asc":"desc",e("pagechanged",n.pageParams)}function d(){e("showEditColumnsModal")}return{addFilters:g,clearFilters:r,data:n,deleteRow:b,formatTime:o,isSorted:k,openDrawer:m,pageChanged:i,showEditColumnsModal:d,sortBy:c,sortIcon:s}}},Bt={class:"pf-c-drawer__content pf-m-no-background"},At={class:"pf-c-drawer__body pf-m-padding"},Kt={class:"pf-c-card"},zt={class:"pf-c-table pf-m-compact pf-m-grid-lg",role:"grid",id:"resizeMe"},Wt={role:"row",id:"headerRow"},qt={key:0},Gt=["onClick"],Ht={class:"pf-c-table__button-content"},Ut={class:"pf-c-table__text"},Qt={class:"pf-c-table__sort-indicator"},Xt={key:1,role:"rowgroup"},Yt=["data-label"],Zt={key:0},$t={key:1},es={key:0},ts={key:0,class:"pf-u-default-color-300 pf-u-text-wrap"},ss={key:1},os={key:1,class:"pf-u-text-break-word"},as={key:2},ls=["alt","title"],ns=["href"],is={key:3},cs={role:"cell","data-label":"Actions",class:""},ds=["onClick"],rs=["onClick"],fs=["onClick"];function ps(h,e,n,s,k,f){const o=C("devices-data-table-toolbar"),m=C("data-table-spinner"),b=C("router-link"),r=C("data-table-empty-state"),g=C("data-table-paginate");return a(),l("div",Bt,[t("div",At,[t("div",Kt,[T(o,{pagename:n.pagename,onSearchInput:e[0]||(e[0]=i=>s.addFilters(i)),onOpenDrawer:e[1]||(e[1]=i=>s.openDrawer(i)),onShowEditColumns:e[2]||(e[2]=i=>s.showEditColumnsModal()),newBtnEnabled:n.newBtnEnabled},null,8,["pagename","newBtnEnabled"]),t("table",zt,[t("thead",null,[t("tr",Wt,[(a(!0),l(O,null,x(n.tabledata.selectedColumns,(i,c)=>(a(),l("th",{key:i.name,class:I(["pf-c-table__sort pf-c-table__icon",[s.isSorted===c?"pf-m-selected":"",i.hideOnSmall?"pf-m-hidden pf-m-visible-on-sm":""]])},[i.sortable?p("",!0):(a(),l("span",qt,u(i.label),1)),i.sortable?(a(),l("button",{key:1,class:"pf-c-table__button",onClick:d=>s.sortBy(i.key,c)},[t("div",Ht,[t("span",Ut,u(i.label),1),t("span",Qt,[t("i",{class:I(s.isSorted===c?s.sortIcon:s.data.sortIcon.base)},null,2)])])],8,Gt)):p("",!0)],2))),128)),e[4]||(e[4]=t("th",{class:"pf-c-table__icon"},"Actions",-1))])]),n.tabledata.isLoading?(a(),N(m,{key:0})):p("",!0),n.tabledata.data.total>0||n.tabledata.isLoading?(a(),l("tbody",Xt,[(a(!0),l(O,null,x(n.tabledata.data.data,i=>(a(),l("tr",{role:"row",key:i.name},[(a(!0),l(O,null,x(n.tabledata.selectedColumns,c=>(a(),l("td",{key:c.label,role:"cell","data-label":c.label,class:I((c.hideOnSmall,c.key==="tag"?"pf-m-wrap":"pf-m-truncate"))},[c.isRelationShip===!0?(a(),l("div",Zt,[(a(!0),l(O,null,x(i[c.key],d=>(a(),l("div",{key:d.id},u(d[c.relationshipKey]),1))),128))])):(a(),l("div",$t,[c.isStatusIcon?(a(),l("div",es,[i.job_status!=null?(a(),l("span",ts,u(i.job_status)+"...",1)):(a(),l("i",{key:1,class:I(i[c.key]=="1"?"fa fa-check-circle pf-u-success-color-100 ":"fa fa-exclamation-triangle pf-u-warning-color-100")},null,2))])):(a(),l("span",ss,[c.isLink?(a(),N(b,{key:0,class:"Card__link alink",to:"/device/view/"+i.id},{default:J(()=>[F(u(i[c.key]),1)]),_:2},1032,["to"])):c.key==="last_config"&&i.last_config!=null?(a(),l("span",os,u(s.formatTime(i.last_config.created_at)),1)):c.key==="tag"?(a(),l("span",as,[(a(!0),l(O,null,x(i[c.key],d=>(a(),l("div",{class:"pf-c-chip",key:d.id},[t("span",{class:"pf-c-chip__text",alt:d.tagDescription,title:d.tagDescription},[t("a",{href:/tags/+d.tagname},u(d.tagname),9,ns)],8,ls)]))),128))])):["device_name","last_config"].includes(c.key)?p("",!0):(a(),l("span",is,u(i[c.key]),1))]))]))],10,Yt))),128)),t("td",cs,[t("div",null,[T(b,{class:"pf-c-button pf-m-link pf-m-small",type:"button",to:"/device/view/"+i.id},{default:J(()=>e[5]||(e[5]=[t("span",{class:"pf-c-button__icon pf-m-start"},[t("i",{class:"fas fa-search","aria-hidden":"true"})],-1)])),_:2},1032,["to"]),t("button",{class:"pf-c-button pf-m-link pf-m-small",type:"button",onClick:c=>s.openDrawer(i.id),alt:"Edit",title:"Edit"},e[6]||(e[6]=[t("span",{class:"pf-c-button__icon pf-m-start"},[t("i",{class:"fas fa-edit","aria-hidden":"true"})],-1)]),8,ds),t("button",{class:"pf-c-button pf-m-link pf-m-link-secondary pf-m-small",type:"button",onClick:c=>s.openDrawer(i.id,!0),alt:"Clone",title:"Clone"},e[7]||(e[7]=[t("span",{class:"pf-c-button__icon pf-m-start"},[t("i",{class:"fas fa-copy","aria-hidden":"true"})],-1)]),8,rs),t("button",{class:"pf-c-button pf-m-link pf-m-danger pf-m-small",type:"button",onClick:c=>s.deleteRow(i.id),alt:"Delete",title:"Delete"},e[8]||(e[8]=[t("span",{class:"pf-c-button__icon pf-m-start"},[t("i",{class:"fas fa-trash","aria-hidden":"true"})],-1)]),8,fs)])])]))),128))])):n.tabledata.isLoading?p("",!0):(a(),N(r,{key:2,onClear:s.clearFilters},null,8,["onClear"]))]),T(g,{from:n.tabledata.data.from,to:n.tabledata.data.to,total:n.tabledata.data.total,current_page:n.tabledata.data.current_page,last_page:n.tabledata.data.last_page,onPagechanged:e[3]||(e[3]=i=>s.pageChanged(i))},null,8,["from","to","total","current_page","last_page"])])])])}const us=R(jt,[["render",ps],["__scopeId","data-v-2be6d95c"]]),ms={props:{rows:{type:Array,default:()=>[]}},emits:["close","saveColumns"],setup(h,{emit:e}){const n=_(null);q("create-notification");const s=L(h.rows.filter(r=>r.columnSelected).map(r=>({...r})));E(n,r=>b()),G(()=>{});function k(r){var g=h.rows.map(c=>c.id).indexOf(r);if(h.rows[g].columnSelected=!h.rows[g].columnSelected,s.some(c=>c.id===r)){var i=s.map(c=>c.id).indexOf(r);i>=0&&s.splice(i,1)}else s.push(h.rows[r])}function f(){s.splice(0),h.rows.forEach(r=>{r.columnSelected=!0,s.push(r)})}function o(){m(),localStorage.setItem("rconfig.columnsOrig",JSON.stringify(h.rows)),localStorage.setItem("rconfig.columns",JSON.stringify(s)),e("saveColumns"),b()}function m(){s.sort((r,g)=>r.id-g.id)}const b=()=>{e("close")};return{selectAll:f,close:b,saveColumns:o,toggleColumn:k,selectedRows:s}}},_s={class:"pf-c-backdrop"},gs={class:"pf-l-bullseye"},vs={class:"pf-c-modal-box pf-m-sm",ref:"clickOutsidetarget"},bs={class:"pf-c-modal-box__header"},hs={class:"pf-c-modal-box__description"},ws={class:"pf-c-content"},ys={class:"pf-c-modal-box__body",id:"modal-description"},ks={class:"pf-c-data-list pf-m-compact pf-c-droppable",role:"list"},Cs=["id"],Ss={class:"pf-c-data-list__item-row"},Os={class:"pf-c-data-list__item-control"},xs={class:"pf-c-data-list__check"},Ds=["checked","onChange"],Is={class:"pf-c-data-list__item-content"},Ns={class:"pf-c-data-list__cell"},Ms={id:"table-manage-columns-data-list-draggable-item-1"},Fs={class:"pf-c-modal-box__footer"};function Ts(h,e,n,s,k,f){return a(),l("div",_s,[t("div",gs,[t("div",vs,[t("button",{class:"pf-c-button pf-m-plain",type:"button","aria-label":"Close dialog",onClick:e[0]||(e[0]=(...o)=>s.close&&s.close(...o))},e[4]||(e[4]=[t("i",{class:"fas fa-times","aria-hidden":"true"},null,-1)])),t("header",bs,[e[6]||(e[6]=t("h1",{class:"pf-c-modal-box__title",id:"modal-title"},"Manage columns",-1)),t("div",hs,[t("div",ws,[e[5]||(e[5]=t("p",null,"Selected columns will be displayed in the table.",-1)),t("button",{class:"pf-c-button pf-m-link pf-m-inline",type:"button",onClick:e[1]||(e[1]=(...o)=>s.selectAll&&s.selectAll(...o))},"Select all")])])]),t("div",ys,[t("ul",ks,[(a(!0),l(O,null,x(n.rows,(o,m)=>(a(),l("li",{class:"pf-c-data-list__item pf-m-draggable",key:o.id,id:o.id},[t("div",Ss,[t("div",Os,[t("div",xs,[t("input",{type:"checkbox",name:"table-manage-columns-data-list-draggable-check-action-check1",checked:o.columnSelected===!0,onChange:b=>s.toggleColumn(o.id)},null,40,Ds)])]),t("div",Is,[t("div",Ns,[t("span",Ms,u(o.label),1)])])])],8,Cs))),128))])]),t("footer",Fs,[t("button",{class:"pf-c-button pf-m-primary",type:"button",onClick:e[2]||(e[2]=(...o)=>s.saveColumns&&s.saveColumns(...o))},"Save"),t("button",{class:"pf-c-button pf-m-link",type:"button",onClick:e[3]||(e[3]=(...o)=>s.close&&s.close(...o))},"Cancel")])],512)])])}const Es=R(ms,[["render",Ts]]),Ps={components:{DevicesForm:me,PageHeader:_e,DevicesBreadcrumbs:ue,DataTableDevices:us,SideDrawer:ge,DeleteModal:ne,ModalDeviceColumnSelect:Es},setup(){const{globalState:h}=fe(),e=pe(),n=_(e.path),s=_(e.params.id),k=_(!1),f=L({editid:0,isClone:!1,pagename:"Devices",pagedesc:"All devices",pagenamesingle:"Device",modelName:"devices",openDrawerState:!1,drawerOuterWidth:"pf-m-width-75-on-xl pf-m-width-100 ",showDeleteModal:!1,sideDrawerComponentKey:1,pageOptionsState:{page:1,per_page:10},modelObject:{device_name:"",device_ip:"",device_vendor:"",device_model:"",device_category_id:"",device_tags:"",device_username:"",device_password:"",device_cred_id:0,device_template:"",device_main_prompt:"",job_status:null}}),{models:o,isLoading:m,dataTablePageChanged:b,openDrawer:r,closeDrawerState:g,deleteRow:i,formSubmitted:c,confirmDelete:d,destroyModel:y}=ve(f,f.modelName,f.modelObject),v=L({selectedColumns:[],headers:[{id:0,key:"id",label:"ID",sortable:!0,columnSelected:!0},{id:1,key:"status",label:"Status",sortable:!0,isStatusIcon:!0,columnSelected:!0},{id:2,key:"device_name",label:"Device Name",sortable:!0,isLink:!0,columnSelected:!0},{id:3,key:"device_ip",label:"IP Address",sortable:!1,columnSelected:!0},{id:4,key:"vendor",label:"Vendor",sortable:!1,isRelationShip:!0,relationshipKey:"vendorName",columnSelected:!0},{id:5,key:"device_model",label:"Model",sortable:!1,columnSelected:!0},{id:6,key:"config_good_count",label:"Config Count",sortable:!1,hideOnSmall:!0,columnSelected:!0},{id:7,key:"config_bad_count",label:"Config Failures",sortable:!1,hideOnSmall:!0,columnSelected:!0},{id:8,key:"last_config",label:"Last Config",sortable:!1,hideOnSmall:!0,columnSelected:!0},{id:9,key:"tag",label:"Tags",sortable:!1,hideOnSmall:!0,columnSelected:!0}],data:o,isLoading:m});G(()=>{D(),n.value==="/devices/status/1"&&(f.pageOptionsState.filters=JSON.stringify({status:"1"})),n.value==="/devices/status/0"&&(f.pageOptionsState.filters=JSON.stringify({status:"0"})),n.value==="/devices/creds/"+s.value&&(f.pageOptionsState.filters=JSON.stringify({device_cred_id:s.value})),n.value==="/devices/tag/"+s.value&&(f.pageOptionsState.filters=JSON.stringify({tag:s.value})),n.value==="/devices/category/"+s.value&&(f.pageOptionsState.filters=JSON.stringify({category:s.value})),b(f.pageOptionsState)});function D(){localStorage.getItem("rconfig.columns")===null||localStorage.getItem("rconfig.columnsOrig")===null?(v.selectedColumns=v.headers,localStorage.getItem("rconfig.columnsOrig")!=null&&v.headers.length!=JSON.parse(localStorage.getItem("rconfig.columnsOrig")).length?(localStorage.setItem("rconfig.columnsOrig",JSON.stringify(v.headers)),localStorage.setItem("rconfig.columns",JSON.stringify(v.headers))):(j(),localStorage.setItem("rconfig.columns",JSON.stringify(v.selectedColumns)),localStorage.setItem("rconfig.columnsOrig",JSON.stringify(v.headers)))):(v.selectedColumns=JSON.parse(localStorage.getItem("rconfig.columns")||"[]"),v.headers=JSON.parse(localStorage.getItem("rconfig.columnsOrig")||"[]"))}function j(){v.selectedColumns.sort((K,z)=>K.id-z.id)}function B(){D(),b(f.pageOptionsState)}function A(){f.sideDrawerComponentKey++,g()}return{closeDrawer:A,closeDrawerState:g,confirmDelete:d,dataTablePageChanged:b,deleteRow:i,destroyModel:y,formSubmitted:c,globalState:h,openDrawer:r,saveColumns:B,showEditColumnsModal:k,table:v,viewstate:f}}},Vs={class:"pf-c-page__main",tabindex:"-1"},Ls={class:"pf-c-page__main-section pf-m-no-padding"},Js={class:"pf-c-drawer__main"};function Rs(h,e,n,s,k,f){const o=C("devices-breadcrumbs"),m=C("page-header"),b=C("data-table-devices"),r=C("devices-form"),g=C("side-drawer"),i=C("delete-modal"),c=C("modal-device-column-select");return a(),l(O,null,[t("main",Vs,[T(m,{pagename:s.viewstate.pagename},{breadcrumbs:J(()=>[T(o)]),_:1},8,["pagename"]),e[8]||(e[8]=t("div",{class:"pf-c-divider",role:"separator"},null,-1)),t("section",Ls,[t("div",{class:I(["pf-c-drawer",{"pf-m-expanded":s.viewstate.openDrawerState}])},[t("div",Js,[T(b,{pagename:s.viewstate.pagenamesingle,tabledata:s.table,onPagechanged:s.dataTablePageChanged,onOpenDrawer:e[0]||(e[0]=d=>s.openDrawer(d)),onDeleteRow:e[1]||(e[1]=d=>s.deleteRow(d)),onShowEditColumnsModal:e[2]||(e[2]=d=>s.showEditColumnsModal=!0)},null,8,["pagename","tabledata","onPagechanged"]),(a(),N(g,{pagename:s.viewstate.pagenamesingle,drawerState:s.viewstate.openDrawerState,outerWidth:s.viewstate.drawerOuterWidth,editid:s.viewstate.editid,onCloseDrawer:e[5]||(e[5]=d=>s.closeDrawer()),key:s.viewstate.sideDrawerComponentKey},{form:J(()=>[(a(),N(r,{viewstate:s.viewstate,onCloseDrawer:e[3]||(e[3]=d=>s.closeDrawer()),onFormsubmitted:e[4]||(e[4]=d=>s.formSubmitted(d)),key:s.viewstate.sideDrawerComponentKey},null,8,["viewstate"]))]),_:1},8,["pagename","drawerState","outerWidth","editid"]))])],2)])]),s.viewstate.showDeleteModal?(a(),N(i,{key:0,editid:s.viewstate.editid,onCloseModal:e[6]||(e[6]=d=>s.viewstate.showDeleteModal=!1),onConfirmDelete:s.confirmDelete},null,8,["editid","onConfirmDelete"])):p("",!0),s.showEditColumnsModal?(a(),N(c,{key:1,onClose:e[7]||(e[7]=d=>s.showEditColumnsModal=!1),rows:s.table.headers,onSaveColumns:s.saveColumns},null,8,["rows","onSaveColumns"])):p("",!0)],64)}const Xs=R(Ps,[["render",Rs]]);export{Xs as default};
