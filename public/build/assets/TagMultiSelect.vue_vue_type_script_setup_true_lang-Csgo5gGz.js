import{a0 as J,r as u,T as K,c as T,o as _,z as B,w as l,j as a,e as t,f as s,v as Q,q as F,t as M,x as Y,a2 as H,d as P,F as j,G as U,y as X,u as q,I as R,A as O,a as L,J as Z,K as ee,L as te,M as ae,N as se,h as w,k as A,Q as oe,R as le,U as ne,B as re,am as ie,W}from"./app-D3DFbhTy.js";import{e as de}from"./eventBus-CGRXT3Tn.js";import{l as ue,m as ce,n as me,o as ge,p as pe,q as fe,r as ve,s as be}from"./useRowSelection-CtxXvdhY.js";const ye={class:"py-1"},Ce={class:"grid grid-cols-3 gap-2 mt-4 place-items-center"},xe=["onClick"],_e=J({__name:"BadgeColorSelector",props:{modelValue:String},emits:["update:modelValue"],setup(v,{emit:D}){const b=D,S=v,h=u({}),E=[{label:"Lime",bgClass:"bg-lime-400 text-lime-900 border-lime-300"},{label:"Yellow",bgClass:"bg-yellow-400 text-yellow-900 border-yellow-300"},{label:"Teal",bgClass:"bg-teal-400 text-teal-900 border-teal-300"},{label:"Sky",bgClass:"bg-sky-400 text-sky-900 border-sky-300"},{label:"Pink",bgClass:"bg-pink-400 text-pink-900 border-pink-300"},{label:"Emerald",bgClass:"bg-emerald-400 text-emerald-900 border-emerald-300"},{label:"Orange",bgClass:"bg-orange-400 text-orange-900 border-orange-300"},{label:"Amber",bgClass:"bg-amber-400 text-amber-900 border-amber-300"},{label:"Fuchsia",bgClass:"bg-fuchsia-400 text-fuchsia-900 border-fuchsia-300"},{label:"Rose",bgClass:"bg-rose-400 text-rose-900 border-rose-300"},{label:"Violet",bgClass:"bg-violet-500 text-violet-100 border-violet-600"},{label:"Indigo",bgClass:"bg-indigo-500 text-indigo-100 border-indigo-600"},{label:"Blue",bgClass:"bg-blue-500 text-blue-100 border-blue-600"},{label:"Green",bgClass:"bg-green-500 text-green-100 border-green-600"},{label:"Purple",bgClass:"bg-purple-500 text-purple-100 border-purple-600"},{label:"Stone",bgClass:"bg-stone-600 text-stone-200 border-stone-700"},{label:"Red",bgClass:"bg-red-600 text-red-100 border-red-700"},{label:"Fuchsia Dark",bgClass:"bg-fuchsia-700 text-fuchsia-200 border-fuchsia-800"},{label:"Violet Dark",bgClass:"bg-violet-700 text-violet-200 border-violet-800"},{label:"Teal Dark",bgClass:"bg-teal-700 text-teal-200 border-teal-800"}];function m(c){h.value=c,b("update:modelValue",c.bgClass)}return K(()=>S.modelValue,c=>{const k=E.find(n=>n.bgClass===c);k?h.value=k:h.value={}},{immediate:!0}),(c,k)=>{const n=T("Button"),I=T("Separator");return _(),B(s(X),null,{default:l(()=>[k[0]||(k[0]=a("div",{class:"hidden text-yellow-200 text-teal-100 bg-yellow-700 bg-teal-700 border-yellow-500 border-teal-500 bg-stone-700 text-stone-200 border-stone-500 bg-lime-700 text-lime-200 border-lime-500 bg-sky-700 text-sky-100 border-sky-500 bg-violet-700 text-violet-200 border-violet-500 bg-fuchsia-700 text-fuchsia-200 border-fuchsia-500"},null,-1)),t(s(Q),{class:"col-span-3"},{default:l(()=>[t(n,{variant:"ghost",class:"flex flex-wrap items-start justify-start w-full p-1 pl-2 whitespace-normal border h-fit"},{default:l(()=>[a("div",{class:F(["h-6 px-2 border-2 border-transparent rounded-full cursor-pointer w-fit",Object.keys(h.value).length===0?"bg-gray-600 text-gray-200 border-gray-500":h.value.bgClass])},M(Object.keys(h.value).length===0?"Select color":h.value.label),3)]),_:1})]),_:1}),t(s(Y),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:l(()=>[t(I),t(s(H),{class:"h-64"},{default:l(()=>[a("div",ye,[a("div",Ce,[(_(),P(j,null,U(E,($,f)=>a("div",{key:f,class:F(["cursor-pointer w-6 h-6 rounded-full border-2",$.bgClass,h.value.value===f?"ring-2 ring-offset-2 ring-black":"border-transparent"]),onClick:y=>m($)},null,10,xe)),64))])])]),_:1})]),_:1})]),_:1})}}}),he={class:"flex items-center"},we={class:"ml-2"},ke={class:"grid gap-2 p-4"},$e={class:"grid items-center grid-cols-4 gap-2"},De={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},Ie={class:"grid items-center grid-cols-4 gap-2"},Se={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},Te={class:"grid items-center grid-cols-4 gap-4"},Ve={class:"pl-2 ml-auto"},Ee={class:"rc-kdb-class2"},Ne={class:"pl-2 ml-auto"},Ge={class:"rc-kdb-class2"},Me={__name:"CommandGroupAddEditDialog",props:{editId:Number},emits:["save"],setup(v,{emit:D}){const{toastSuccess:b,toastError:S,toastInfo:h,toastWarning:E,toastDefault:m}=q(),c=R(),{openDialog:k,closeDialog:n,isDialogOpen:I}=c,$=D;u([]);const f=u([]),y=u({categoryName:"",categoryDescription:"",badgeColor:{}}),g=v;function o(p){p.ctrlKey&&p.key==="Enter"&&r()}O(()=>{g.editId>0&&L.get(`/api/categories/${g.editId}`).then(p=>{y.value=p.data}),window.addEventListener("keydown",o)}),Z(()=>{window.removeEventListener("keydown",o)});function r(){let p=g.editId>0?`/${g.editId}`:"",e=g.editId>0?"patch":"post";L[e]("/api/categories"+p,y.value).then(V=>{$("save",V.data),b("Command Group created","The tag has been created successfully."),n("DialogNewCommandGroups")}).catch(V=>{f.value=V.response.data.errors})}return(p,e)=>{const V=T("CommandGroupIcon"),N=T("Label"),i=T("Input"),G=T("Button"),z=T("Icon");return _(),B(s(le),{open:s(I)("DialogNewCommandGroups")},{default:l(()=>[t(s(ee),{"as-child":""}),t(s(te),{class:"p-0 sm:max-w-fit",onEscapeKeyDown:e[6]||(e[6]=C=>s(n)("DialogNewCommandGroups")),onPointerDownOutside:e[7]||(e[7]=C=>s(n)("DialogNewCommandGroups")),onCloseClicked:e[8]||(e[8]=C=>s(n)("DialogNewCommandGroups"))},{default:l(()=>[t(s(ae),{class:"rc-dialog-header"},{default:l(()=>[t(s(se),{class:"text-sm text-rcgray-200"},{default:l(()=>[a("div",he,[t(V),a("span",we,M(v.editId>0?"Edit":"Add")+" Command Group "+M(v.editId>0?"(ID: "+v.editId+")":""),1)])]),_:1})]),_:1}),a("div",ke,[a("div",$e,[t(N,{for:"categoryName",class:"text-right"},{default:l(()=>e[9]||(e[9]=[w(" Name "),a("span",{class:"text-red-400"},"*",-1)])),_:1}),t(i,{modelValue:y.value.categoryName,"onUpdate:modelValue":e[0]||(e[0]=C=>y.value.categoryName=C),id:"categoryName",class:"col-span-3"},null,8,["modelValue"]),f.value.categoryName?(_(),P("span",De,M(f.value.categoryName[0]),1)):A("",!0)]),a("div",Ie,[t(N,{for:"categoryDescription",class:"text-right"},{default:l(()=>e[10]||(e[10]=[w(" Description ")])),_:1}),t(i,{modelValue:y.value.categoryDescription,"onUpdate:modelValue":e[1]||(e[1]=C=>y.value.categoryDescription=C),id:"categoryDescription",class:"col-span-3"},null,8,["modelValue"]),f.value.categoryDescription?(_(),P("span",Se,M(f.value.categoryDescription[0]),1)):A("",!0)]),a("div",Te,[t(N,{for:"badgeColor",class:"text-right"},{default:l(()=>e[11]||(e[11]=[w(" Color ")])),_:1}),t(_e,{modelValue:y.value.badgeColor,"onUpdate:modelValue":e[2]||(e[2]=C=>y.value.badgeColor=C)},null,8,["modelValue"])])]),t(s(oe),{class:"rc-dialog-footer bg-rcgray-800"},{default:l(()=>[t(G,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:e[3]||(e[3]=C=>s(n)("DialogNewCommandGroups")),size:"sm"},{default:l(()=>e[12]||(e[12]=[w(" Cancel "),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])),_:1}),g.editId===0?(_(),B(G,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:e[4]||(e[4]=C=>r()),variant:"primary"},{default:l(()=>[e[14]||(e[14]=w(" Save ")),a("div",Ve,[a("kbd",Ee,[e[13]||(e[13]=w(" Ctrl  ")),t(z,{icon:"uil:enter",class:""})])])]),_:1})):A("",!0),g.editId>0?(_(),B(G,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:e[5]||(e[5]=C=>r()),variant:"primary"},{default:l(()=>[e[16]||(e[16]=w(" Update ")),a("div",Ne,[a("kbd",Ge,[e[15]||(e[15]=w(" Ctrl  ")),t(z,{icon:"uil:enter",class:""})])])]),_:1})):A("",!0)]),_:1})]),_:1})]),_:1},8,["open"])}}};function Pe(){const v=u(1),D=u(parseInt(localStorage.getItem("perPage")||"10")),b=u("-id"),S=u(""),h=u({}),E=R(),m=u(0),c=u(!1),k=u(1),n=u(1),I=u([]),$=u(!1),{openDialog:f}=E,{toastSuccess:y,toastError:g}=q();async function o(d={}){c.value=!0;try{const x=await L.get("/api/categories",{params:{page:v.value,perPage:D.value,sort:b.value,...h.value}});I.value=x.data,k.value=x.data.last_page}catch(x){console.error("Error fetching categories:",x),g("Error","Failed to fetch categories.")}finally{c.value=!1}}const r=d=>{m.value=0,n.value=Math.random(),f("DialogNewCommandGroups")};function p(d){m.value=d,n.value=Math.random(),f("DialogNewCommandGroups")}const e=async d=>{try{await L.delete(`/api/categories/${d}`),o(),y("CommandGroups Deleted","The Command Group has been deleted successfully.")}catch(x){x.status===422?g("Error",x.response.data.message):(console.error("Error deleting Command:",x),g("Error","Failed to delete Command."))}},V=async d=>{try{await L.post("/api/categories/delete-many",{ids:d}),o(),y("CommandGroups Deleted","The command groups have been deleted successfully."),$.value=!1,de.emit("deleteManyCommandGroupsSuccess")}catch(x){x.status===422?g("Error",x.response.data.message):(console.error("Error deleting Commands:",x),g("Error","Failed to delete Commands.")),$.value=!1}},N=d=>{m.value=d,n.value=Math.random(),f("DialogNewCommandGroups")},i=()=>{o(),n.value=Math.random()};function G(d){d.altKey&&d.key==="n"&&(d.preventDefault(),f("DialogNewCommandGroups"))}const z=ne(()=>{h.value["filter[categoryName]"]=S.value,v.value=1,o()},500);K([v,D],()=>{o()}),K(S,()=>{z()}),K(D,d=>{localStorage.setItem("perPage",d.toString())});function C(d){b.value===d?b.value=`-${d}`:b.value=d,o()}return{categories:I,isLoading:c,currentPage:v,perPage:D,lastPage:k,editId:m,newCommandGroupsModalKey:n,searchTerm:S,openDialog:f,fetchCommandGroups:o,createCommandGroup:r,updateCommandGroup:p,deleteCommandGroup:e,deleteManyCommandGroups:V,handleSave:i,handleKeyDown:G,viewEditDialog:N,toggleSort:C,sortParam:b,showConfirmDelete:$}}const Be={class:"relative items-center w-full"},Le={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},Ke={class:"py-1"},ze=["onClick"],Ae={"data-size":"20"},Fe={class:"p-1 border-5"},ut=J({__name:"CategoryMultiSelect",props:{modelValue:{type:Array,required:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(v,{emit:D}){const b=D,{newCommandGroupsModalKey:S,handleSave:h,viewEditDialog:E}=Pe(),m=u([]);u([]);const c=u(!1),k=u(""),n=u([]),I=v,$=re(()=>m.value.filter(o=>o.categoryName.toLowerCase().includes(k.value.toLowerCase())&&!n.value.some(r=>r.id===o.id)));O(()=>{g(),I.modelValue&&I.modelValue.length>0&&(n.value=I.modelValue)}),K(()=>I.modelValue,o=>{n.value=o}),K(S,()=>{g()});function f(o){I.singleSelect?n.value=[o]:n.value.push(o),c.value=!1,k.value="",b("update:modelValue",n.value)}function y(o){const r=n.value.findIndex(p=>p.categoryName===o);r!==-1&&n.value.splice(r,1),b("update:modelValue",n.value)}function g(){L.get("/api/categories/?perPage=10000").then(o=>{m.value=o.data.data})}return(o,r)=>{const p=T("Icon"),e=T("Button"),V=T("Input"),N=T("Separator");return _(),B(s(X),null,{default:l(()=>[r[4]||(r[4]=a("div",{class:"hidden text-yellow-200 text-teal-100 bg-yellow-700 bg-teal-700 border-yellow-500 border-teal-500 bg-stone-700 text-stone-200 border-stone-500 bg-lime-700 text-lime-200 border-lime-500 bg-sky-700 text-sky-100 border-sky-500 bg-violet-700 text-violet-200 border-violet-500 bg-fuchsia-700 text-fuchsia-200 border-fuchsia-500"},null,-1)),t(s(Q),{class:"col-span-3"},{default:l(()=>[t(e,{variant:"ghost",class:F(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",n.value.length===0?"text-muted-foreground":" "]),style:ie(n.value.length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:l(()=>[w(M(n.value&&n.value.length===0?"Select categories":"")+" ",1),(_(!0),P(j,null,U(n.value,i=>(_(),P("span",{key:i.id,class:"relative my-1 group"},[a("span",{class:F([i.badgeColor?i.badgeColor:"bg-gray-600 text-gray-200 border-gray-500","flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"])},[w(M(i.categoryName)+" ",1),t(p,{icon:"si:close-line",class:"ml-1 cursor-pointer hover:text-white",onClick:W(G=>y(i.categoryName),["stop"])},null,8,["onClick"])],2)]))),128))]),_:1},8,["class","style"])]),_:1}),t(s(Y),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:l(()=>[a("div",Be,[t(V,{id:"search",type:"text",modelValue:k.value,"onUpdate:modelValue":r[0]||(r[0]=i=>k.value=i),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",Le,[t(p,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),t(N),t(s(H),{class:"h-64"},{default:l(()=>[a("div",Ke,[(_(!0),P(j,null,U($.value,i=>(_(),P("div",{key:i.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:G=>f(i)},[a("span",{"data-size":"20",class:F(["cursor-default text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border",i.badgeColor?i.badgeColor:"bg-gray-600 text-gray-200 border-gray-500"])},[a("span",Ae,M(i.categoryName),1)],2)],8,ze))),128))])]),_:1}),t(N),a("div",Fe,[t(e,{variant:"ghost",onClick:r[1]||(r[1]=i=>s(E)(0)),class:"justify-start w-full p-1"},{default:l(()=>[t(p,{icon:"octicon:plus-16",class:"w-3 h-3 mt-1 mr-2 text-muted-foreground"}),r[3]||(r[3]=a("span",null,"Create new record",-1))]),_:1})])]),_:1}),(_(),B(Me,{onSave:r[2]||(r[2]=i=>s(h)()),key:s(S),editId:0}))]),_:1})}}}),ct={__name:"ConfirmCloseAlert",props:{showConfirmCloseAlert:{type:Boolean,required:!0}},emits:["handleConfirm","handleClose"],setup(v,{emit:D}){const b=D;function S(m){m.key==="Escape"?E():m.key===" "&&h()}O(()=>{window.addEventListener("keydown",S)}),Z(()=>{window.removeEventListener("keydown",S)});function h(){b("handleConfirm")}function E(){b("handleClose")}return(m,c)=>(_(),B(s(be),{open:v.showConfirmCloseAlert},{default:l(()=>[t(s(ue),null,{default:l(()=>[t(s(ce),null,{default:l(()=>[t(s(me),null,{default:l(()=>c[2]||(c[2]=[w("Are you absolutely sure?")])),_:1}),t(s(ge),null,{default:l(()=>c[3]||(c[3]=[w("Confirming will close the previous dialog box and result in unsaved changes.")])),_:1})]),_:1}),t(s(pe),null,{default:l(()=>[t(s(fe),{class:"h-8 px-2 py-0 text-sm hover:bg-gray-700 hover:animate-pulse",onCancel:c[0]||(c[0]=k=>E())},{default:l(()=>c[4]||(c[4]=[w(" Cancel ")])),_:1}),t(s(ve),{class:"h-8 px-2 py-0 text-sm hover:bg-gray-700 hover:animate-pulse",onAction:c[1]||(c[1]=k=>h())},{default:l(()=>c[5]||(c[5]=[w(" Continue "),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"SPC")],-1)])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]))}},je={class:"flex items-center"},Ue={class:"ml-2"},Oe={class:"grid gap-2 py-4"},qe={class:"grid items-center grid-cols-4 gap-2"},Re={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},We={class:"grid items-center grid-cols-4 gap-2"},Je={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},Qe={class:"pl-2 ml-auto"},Ye={class:"rc-kdb-class2"},He={class:"pl-2 ml-auto"},Xe={class:"rc-kdb-class2"},Ze={__name:"TagAddEditDialog",props:{editId:Number},emits:["save"],setup(v,{emit:D}){const{toastSuccess:b,toastError:S,toastInfo:h,toastWarning:E,toastDefault:m}=q(),c=R(),{openDialog:k,closeDialog:n,isDialogOpen:I}=c,$=D;u([]);const f=u([]),y=u({tagname:"",tagDescription:""}),g=v;function o(p){p.ctrlKey&&p.key==="Enter"&&r()}O(()=>{g.editId>0&&L.get(`/api/tags/${g.editId}`).then(p=>{y.value=p.data}),window.addEventListener("keydown",o)}),Z(()=>{window.removeEventListener("keydown",o)});function r(){let p=g.editId>0?`/${g.editId}`:"",e=g.editId>0?"patch":"post";L[e]("/api/tags"+p,y.value).then(V=>{$("save",V.data),b("Tag created","The tag has been created successfully."),n("DialogNewTag")}).catch(V=>{f.value=V.response.data.errors})}return(p,e)=>{const V=T("CommandsIcon"),N=T("Label"),i=T("Input"),G=T("Button"),z=T("Icon");return _(),B(s(le),{open:s(I)("DialogNewTag")},{default:l(()=>[t(s(ee),{"as-child":""}),t(s(te),{class:"w-full p-0",onEscapeKeyDown:e[5]||(e[5]=C=>s(n)("DialogNewTag")),onPointerDownOutside:e[6]||(e[6]=C=>s(n)("DialogNewTag")),onCloseClicked:e[7]||(e[7]=C=>s(n)("DialogNewTag"))},{default:l(()=>[t(s(ae),{class:"rc-dialog-header"},{default:l(()=>[t(s(se),{class:"text-sm text-rcgray-200"},{default:l(()=>[a("div",je,[t(V),a("span",Ue,M(v.editId>0?"Edit":"Add")+" Tag "+M(v.editId>0?"(ID: "+v.editId+")":""),1)])]),_:1})]),_:1}),a("div",Oe,[a("div",qe,[t(N,{for:"tagname",class:"text-right"},{default:l(()=>e[8]||(e[8]=[w(" Tag Name ")])),_:1}),t(i,{modelValue:y.value.tagname,"onUpdate:modelValue":e[0]||(e[0]=C=>y.value.tagname=C),id:"tagname",class:"col-span-3"},null,8,["modelValue"]),f.value.tagname?(_(),P("span",Re,M(f.value.tagname[0]),1)):A("",!0)]),a("div",We,[t(N,{for:"tagDescription",class:"text-right"},{default:l(()=>e[9]||(e[9]=[w(" Description ")])),_:1}),t(i,{modelValue:y.value.tagDescription,"onUpdate:modelValue":e[1]||(e[1]=C=>y.value.tagDescription=C),id:"tagDescription",class:"col-span-3"},null,8,["modelValue"]),f.value.tagDescription?(_(),P("span",Je,M(f.value.tagDescription[0]),1)):A("",!0)])]),t(s(oe),{class:"rc-dialog-footer bg-rcgray-800"},{default:l(()=>[t(G,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:e[2]||(e[2]=C=>s(n)("DialogNewTag")),size:"sm"},{default:l(()=>e[10]||(e[10]=[w(" Cancel "),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])),_:1}),g.editId===0?(_(),B(G,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:e[3]||(e[3]=C=>r()),variant:"primary"},{default:l(()=>[e[12]||(e[12]=w(" Save ")),a("div",Qe,[a("kbd",Ye,[e[11]||(e[11]=w(" Ctrl  ")),t(z,{icon:"uil:enter",class:""})])])]),_:1})):A("",!0),g.editId>0?(_(),B(G,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:e[4]||(e[4]=C=>r()),variant:"primary"},{default:l(()=>[e[14]||(e[14]=w(" Update ")),a("div",He,[a("kbd",Xe,[e[13]||(e[13]=w(" Ctrl  ")),t(z,{icon:"uil:enter",class:""})])])]),_:1})):A("",!0)]),_:1})]),_:1})]),_:1},8,["open"])}}};function et(){const v=u(1),D=u(parseInt(localStorage.getItem("perPage")||"10")),b=u("-id"),S=u(""),h=u({}),E=R(),m=u(0),c=u(!1),k=u(1),n=u(1),I=u([]),$=u(!1),{openDialog:f}=E,{toastSuccess:y,toastError:g}=q();async function o(d={}){c.value=!0;try{const x=await L.get("/api/tags",{params:{page:v.value,perPage:D.value,sort:b.value,...h.value}});I.value=x.data,k.value=x.data.last_page}catch(x){console.error("Error fetching tags:",x),g("Error","Failed to fetch tags.")}finally{c.value=!1}}const r=d=>{m.value=0,n.value=Math.random(),f("DialogNewTag")};function p(d){m.value=d,n.value=Math.random(),f("DialogNewTag")}const e=async d=>{try{await L.delete(`/api/tags/${d}`),o(),y("Tag Deleted","The tag has been deleted successfully."),$.value=!1}catch(x){x.status===422?g("Error",x.response.data.message):(console.error("Error deleting Tag:",x),g("Error","Failed to delete Tag."))}},V=async d=>{try{await L.post("/api/tags/delete-many",{ids:d}),o(),y("Tags Deleted","The tags have been deleted successfully."),$.value=!1,de.emit("deleteManyTagsSuccess")}catch(x){x.status===422?g("Error",x.response.data.message):(console.error("Error deleting Tags:",x),g("Error","Failed to delete Tags.")),$.value=!1}},N=d=>{m.value=d,n.value=Math.random(),f("DialogNewTag")},i=()=>{o(),n.value=Math.random()};function G(d){d.altKey&&d.key==="n"&&(d.preventDefault(),f("DialogNewTag"))}const z=ne(()=>{h.value["filter[tagname]"]=S.value,v.value=1,o()},500);K([v,D],()=>{o()}),K(S,()=>{z()}),K(D,d=>{localStorage.setItem("perPage",d.toString())});function C(d){b.value===d?b.value=`-${d}`:b.value=d,o()}return{tags:I,isLoading:c,currentPage:v,perPage:D,lastPage:k,editId:m,newTagModalKey:n,searchTerm:S,openDialog:f,fetchTags:o,createTag:r,updateTag:p,deleteTag:e,deleteManyTags:V,handleSave:i,handleKeyDown:G,viewEditDialog:N,toggleSort:C,sortParam:b,showConfirmDelete:$}}const tt={class:"relative items-center w-full"},at={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},st={class:"py-1"},ot=["onClick"],lt={"data-size":"20"},nt={class:"p-1 border-5"},mt=J({__name:"TagMultiSelect",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(v,{emit:D}){const b=D,S=u([]);u([]);const h=u(!1),E=u(""),m=u([]),{newTagModalKey:c,createTag:k,handleSave:n}=et(),I=re(()=>S.value.filter(o=>o.tagname.toLowerCase().includes(E.value.toLowerCase())&&!m.value.some(r=>r.id===o.id))),$=v;O(()=>{g(),$.modelValue&&$.modelValue.length>0&&m.value.push(...$.modelValue)}),K(()=>$.modelValue,o=>{m.value=o}),K(c,()=>{g()});function f(o){m.value.push(o),h.value=!1,E.value="";const r=I.value.findIndex(p=>p.tagname===o.tagname);r!==-1&&I.value.splice(r,1),b("update:modelValue",m.value)}function y(o){const r=m.value.findIndex(p=>p.tagname===o);r!==-1&&m.value.splice(r,1),b("update:modelValue",m.value)}function g(){L.get("/api/tags/?perPage=10000").then(o=>{S.value=o.data.data})}return(o,r)=>{const p=T("Icon"),e=T("Button"),V=T("Input"),N=T("Separator");return _(),B(s(X),null,{default:l(()=>[t(s(Q),{class:"col-span-3"},{default:l(()=>[t(e,{variant:"ghost",class:F(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",m.value.length===0?"text-muted-foreground":" "]),style:ie(m.value.length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:l(()=>[w(M(m.value&&m.value.length===0?"Select tags":"")+" ",1),(_(!0),P(j,null,U(m.value,i=>(_(),P("span",{key:i.id,class:"relative my-1 group"},[a("span",{class:F([i.badgeColor?i.badgeColor:"bg-gray-600 text-gray-200 border-gray-500","flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"])},[w(M(i.tagname)+" ",1),t(p,{icon:"si:close-line",class:"ml-1 cursor-pointer hover:text-white",onClick:W(G=>y(i.tagname),["stop"])},null,8,["onClick"])],2)]))),128))]),_:1},8,["class","style"])]),_:1}),t(s(Y),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:l(()=>[a("div",tt,[t(V,{id:"search",type:"text",modelValue:E.value,"onUpdate:modelValue":r[0]||(r[0]=i=>E.value=i),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",at,[t(p,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),t(N),t(s(H),{class:"h-64"},{default:l(()=>[a("div",st,[(_(!0),P(j,null,U(I.value,i=>(_(),P("div",{key:i.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:G=>f(i)},[a("span",{"data-size":"20",class:F(["cursor-default text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border",i.badgeColor?i.badgeColor:"bg-gray-600 text-gray-200 border-gray-500"])},[a("span",lt,M(i.tagname),1)],2)],8,ot))),128))])]),_:1}),t(N),a("div",nt,[t(e,{variant:"ghost",onClick:r[1]||(r[1]=W(i=>s(k)(),["prevent"])),class:"justify-start w-full p-1"},{default:l(()=>[t(p,{icon:"octicon:plus-16",class:"w-3 h-3 mt-1 mr-2 text-muted-foreground"}),r[3]||(r[3]=a("span",null,"Create new record",-1))]),_:1})])]),_:1}),(_(),B(Ze,{onSave:r[2]||(r[2]=i=>s(n)()),key:s(c),editId:0}))]),_:1})}}});export{ut as _,Me as a,et as b,Ze as c,ct as d,mt as e,Pe as u};
