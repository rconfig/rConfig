import{B as Se,o as a,z as p,w as l,C as ut,D as ct,f as e,E as mt,S as ft,c as f,e as t,v as ve,h as i,x as ge,j as o,t as C,d as _,F as K,G as W,H as Ke,k as V,y as _e,u as Le,I as Me,r as S,A as te,a as Z,J as de,K as pt,L as vt,M as gt,N as _t,O as Ue,P as Ge,Q as yt,R as xt,T as ne,U as Re,V as X,W as ee,X as se,Y as ye,Z as U,q as He,$ as Ye,a0 as We,a1 as fe,a2 as Je,a3 as Ve,a4 as kt,a5 as Pe,a6 as Qe,b as Te,a7 as bt,a8 as $t,a9 as Ct,aa as wt,ab as ht,ac as Dt,m as It,_ as St,g as Vt,n as Pt,i as Tt,ad as Nt,ae as Et,af as Bt,ag as At,ah as Xe,ai as Ft,aj as Ut,ak as qe,al as Lt,am as Mt,an as jt,ao as Ot}from"./app-CbgTKiUk.js";import{u as xe,_ as ke,a as be,b as L,c as $e,d as De,e as Ce,f as we,g as he,h as ce,i as zt,j as Gt,k as qt,l as Kt,m as Rt,n as Ht,o as Yt,p as Wt,q as pe,r as Jt,s as Qt}from"./useRowSelection-fNqBqL4r.js";import{_ as Xt,u as Zt,a as el,b as tl,c as ll}from"./TagMultiSelect.vue_vue_type_script_setup_true_lang-BK39YXvg.js";import{_ as Ze}from"./useCredentials-B3Sw5a-Y.js";import{e as ie}from"./eventBus-CGRXT3Tn.js";import{_ as Ne}from"./DeviceListPopover-DEZDBsDi.js";import{_ as sl}from"./CardFooter.vue_vue_type_script_setup_true_lang-BnzMbzF4.js";import{u as al,_ as nl,a as ol,b as dl,c as il}from"./useTemplatesGithub-Bi8YOSh0.js";/* empty css               */const rl={__name:"SheetDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(x){const N=x,u=Se(()=>{const{class:v,...w}=N;return w});return(v,w)=>(a(),p(e(ft),ct({class:e(mt)("text-sm text-muted-foreground",N.class)},u.value),{default:l(()=>[ut(v.$slots,"default")]),_:3},16,["class"]))}},ul={class:"space-y-2"},cl={class:"mb-2 text-sm text-muted-foreground"},ml={key:0,class:"text-xs text-muted-foreground"},fl={__name:"CategoryListPopover",props:{recordName:{type:String,required:!0},items:{type:Array,required:!0},displayField:{type:String,default:"name"},displayCount:{type:Number,default:100}},setup(x){return(N,u)=>{const v=f("Button"),w=f("router-link");return a(),p(e(_e),null,{default:l(()=>[t(e(ve),{"as-child":""},{default:l(()=>[t(v,{variant:"outline",className:"mt-1 inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground"},{default:l(()=>u[0]||(u[0]=[i(" ... ")])),_:1})]),_:1}),t(e(ge),{class:"max-w-max",style:{width:"800px"}},{default:l(()=>[o("div",ul,[o("p",cl,"All command groups associated with "+C(x.recordName)+". Showing "+C(x.displayCount)+" records.",1)]),(a(!0),_(K,null,W(x.items.slice(0,x.displayCount),d=>(a(),p(e(Ke),{key:d[x.displayField],variant:"outline",class:"py-1 mt-1 hover:bg-rcgray-900"},{default:l(()=>[t(w,{to:d.view_url},{default:l(()=>[i(C(d[x.displayField]),1)]),_:2},1032,["to"])]),_:2},1024))),128)),x.displayCount>x.displayCount-1?(a(),_("span",ml,[u[2]||(u[2]=o("br",null,null,-1)),i(" Displaying only "+C(x.displayCount)+" records. Visit the ",1),t(w,{to:"/commandgroups",class:"text-blue-500 hover:underline"},{default:l(()=>u[1]||(u[1]=[i(" Command Groups ")])),_:1}),u[3]||(u[3]=i(" page to view all devices. "))])):V("",!0)]),_:1})]),_:1})}}},pl={class:"flex items-center"},vl={class:"ml-2"},gl={key:0,class:"grid gap-2 p-4"},_l={class:"grid items-center grid-cols-4 gap-2"},yl={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},xl={class:"grid items-center grid-cols-4 gap-2"},kl={class:"grid items-center grid-cols-4 gap-2"},bl={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},$l={class:"pl-2 ml-auto"},Cl={class:"rc-kdb-class2"},wl={class:"pl-2 ml-auto"},hl={class:"rc-kdb-class2"},Dl={__name:"CommandAddEditDialog",props:{editId:Number},emits:["save"],setup(x,{emit:N}){const{toastSuccess:u,toastError:v,toastInfo:w,toastWarning:d,toastDefault:h}=Le(),g=Me(),{openDialog:T,closeDialog:B,isDialogOpen:M}=g,I=N,m=S([]),r=S(!1),y=S({command:"",description:"",category:[]}),E=x;function A(k){k.ctrlKey&&k.key==="Enter"&&F()}te(()=>{E.editId>0&&(r.value=!0,Z.get(`/api/commands/${E.editId}`).then(k=>{y.value=k.data,y.value.categoryArray=k.data.category.map(c=>c.id)}),r.value=!1),window.addEventListener("keydown",A)}),de(()=>{window.removeEventListener("keydown",A)});function F(){let k=E.editId>0?`/${E.editId}`:"",c=E.editId>0?"patch":"post";Z[c]("/api/commands"+k,y.value).then(j=>{I("save",j.data),u("Command created","The command has been created successfully."),B("DialogNewCommand")}).catch(j=>{m.value=j.response.data.errors})}return(k,c)=>{const j=f("CommandsIcon"),H=f("Button"),R=f("Icon");return a(),p(e(xt),{open:e(M)("DialogNewCommand")},{default:l(()=>[t(e(pt),{"as-child":""}),t(e(vt),{class:"p-0 sm:max-w-fit",onEscapeKeyDown:c[6]||(c[6]=q=>e(B)("DialogNewCommand")),onPointerDownOutside:c[7]||(c[7]=q=>e(B)("DialogNewCommand")),onCloseClicked:c[8]||(c[8]=q=>e(B)("DialogNewCommand"))},{default:l(()=>[t(e(gt),{class:"rc-dialog-header"},{default:l(()=>[t(e(_t),{class:"text-sm text-rcgray-200"},{default:l(()=>[o("div",pl,[t(j),o("span",vl,C(x.editId>0?"Edit":"Add")+" Command "+C(x.editId>0?"(ID: "+x.editId+")":""),1)])]),_:1})]),_:1}),t(Ze,{state:r.value},null,8,["state"]),r.value?V("",!0):(a(),_("div",gl,[o("div",_l,[t(e(Ue),{for:"command",class:"text-right"},{default:l(()=>c[9]||(c[9]=[i(" Command Name "),o("span",{class:"text-red-400"},"*",-1)])),_:1}),t(e(Ge),{modelValue:y.value.command,"onUpdate:modelValue":c[0]||(c[0]=q=>y.value.command=q),id:"command",class:"col-span-3"},null,8,["modelValue"]),m.value.command?(a(),_("span",yl,C(m.value.command[0]),1)):V("",!0)]),o("div",xl,[t(e(Ue),{for:"description",class:"text-right"},{default:l(()=>c[10]||(c[10]=[i(" Description "),o("span",{class:"text-red-400"},"*",-1)])),_:1}),t(e(Ge),{modelValue:y.value.description,"onUpdate:modelValue":c[1]||(c[1]=q=>y.value.description=q),id:"description",class:"col-span-3"},null,8,["modelValue"])]),o("div",kl,[t(e(Ue),{for:"description",class:"text-right"},{default:l(()=>c[11]||(c[11]=[i(" Command Groups "),o("span",{class:"text-red-400"},"*",-1)])),_:1}),t(Xt,{modelValue:y.value.category,"onUpdate:modelValue":c[2]||(c[2]=q=>y.value.category=q)},null,8,["modelValue"]),m.value.category?(a(),_("span",bl,C(m.value.category[0]),1)):V("",!0)])])),t(e(yt),{class:"rc-dialog-footer bg-rcgray-800"},{default:l(()=>[t(H,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:c[3]||(c[3]=q=>e(B)("DialogNewCommand")),size:"sm"},{default:l(()=>c[12]||(c[12]=[i(" Cancel "),o("div",{class:"pl-2 ml-auto"},[o("kbd",{class:"rc-kdb-class"},"ESC")],-1)])),_:1}),E.editId===0?(a(),p(H,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:c[4]||(c[4]=q=>F()),variant:"primary"},{default:l(()=>[c[14]||(c[14]=i(" Save ")),o("div",$l,[o("kbd",Cl,[c[13]||(c[13]=i(" Ctrl  ")),t(R,{icon:"uil:enter",class:""})])])]),_:1})):V("",!0),E.editId>0?(a(),p(H,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:c[5]||(c[5]=q=>F()),variant:"primary"},{default:l(()=>[c[16]||(c[16]=i(" Update ")),o("div",wl,[o("kbd",hl,[c[15]||(c[15]=i(" Ctrl  ")),t(R,{icon:"uil:enter",class:""})])])]),_:1})):V("",!0)]),_:1})]),_:1})]),_:1},8,["open"])}}};function Il(){const x=S(1),N=S(parseInt(localStorage.getItem("perPage")||"10")),u=S("-id"),v=S(""),w=S({}),d=Me(),h=S(0),g=S(!1),T=S(1),B=S(1),M=S([]),I=S(!1),{openDialog:m}=d,{toastSuccess:r,toastError:y}=Le();async function E(O={}){g.value=!0;try{const P=await Z.get("/api/commands",{params:{page:x.value,perPage:N.value,sort:u.value,...w.value}});M.value=P.data,T.value=P.data.last_page}catch(P){console.error("Error fetching commands:",P),y("Error","Failed to fetch commands.")}finally{g.value=!1}}const A=O=>{h.value=0,B.value=Math.random(),m("DialogNewCommand")};function F(O){h.value=O,B.value=Math.random(),m("DialogNewCommand")}const k=async O=>{try{await Z.delete(`/api/commands/${O}`),E(),r("Command Deleted","The command has been deleted successfully."),I.value=!1}catch(P){P.status===422?y("Error",P.response.data.message):(console.error("Error deleting Command Group:",P),y("Error","Failed to delete Command Group."))}},c=async O=>{try{await Z.post("/api/commands/delete-many",{ids:O}),E(),r("Commands Deleted","The commands have been deleted successfully."),I.value=!1,ie.emit("deleteManyCommandsSuccess")}catch(P){P.status===422?y("Error",P.response.data.message):(console.error("Error deleting Command Group:",P),y("Error","Failed to delete Command Group."))}},j=O=>{h.value=O,B.value=Math.random(),m("DialogNewCommand")},H=()=>{E(),B.value=Math.random()};function R(O){O.altKey&&O.key==="n"&&(O.preventDefault(),m("DialogNewCommand"))}const q=Re(()=>{w.value["filter[command]"]=v.value,x.value=1,E()},500);ne([x,N],()=>{E()}),ne(v,()=>{q()}),ne(N,O=>{localStorage.setItem("perPage",O.toString())});function s(O){u.value===O?u.value=`-${O}`:u.value=O,E()}return{commands:M,isLoading:g,currentPage:x,perPage:N,lastPage:T,editId:h,newCommandModalKey:B,searchTerm:v,openDialog:m,fetchCommands:E,createCommand:A,updateCommand:F,deleteCommand:k,deleteManyCommands:c,handleSave:H,handleKeyDown:R,viewEditDialog:j,toggleSort:s,sortParam:u,showConfirmDelete:I}}const Sl={class:"flex flex-col h-full gap-1 text-center"},Vl={class:"flex items-center justify-between p-4"},Pl={class:"flex items-center"},Tl={class:"flex"},Nl={class:"px-6"},El={key:0,class:"mr-2"},Bl={__name:"Main",setup(x){const{editId:N,commands:u,currentPage:v,perPage:w,searchTerm:d,lastPage:h,isLoading:g,fetchCommands:T,viewEditDialog:B,createCommand:M,deleteCommand:I,deleteManyCommands:m,handleSave:r,showConfirmDelete:y,handleKeyDown:E,newCommandModalKey:A,toggleSort:F,sortParam:k}=Il(),{selectedRows:c,selectAll:j,toggleSelectAll:H,toggleSelectRow:R}=xe(u);return te(()=>{T(),window.addEventListener("keydown",E),ie.on("deleteManyCommandsSuccess",()=>{c.value=[],j.value=!1})}),de(()=>{window.removeEventListener("keydown",E)}),(q,s)=>{const O=f("Input"),P=f("Button"),b=f("Checkbox"),Q=f("Icon"),Y=f("router-link"),J=f("Badge"),le=f("Toaster");return a(),_("div",Sl,[o("div",Vl,[o("div",Pl,[t(O,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter commands...",modelValue:e(d),"onUpdate:modelValue":s[0]||(s[0]=n=>X(d)?d.value=n:null)},null,8,["modelValue"]),e(d)?(a(),p(ke,{key:0,"onUpdate:modelValue":s[1]||(s[1]=n=>d.value="")})):V("",!0)]),o("div",Tl,[e(c).length?(a(),p(P,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:s[2]||(s[2]=ee(n=>y.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[i(" Delete Selected "+C(e(c).length)+" Command(s) ",1)]),_:1})):V("",!0),t(P,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:ee(e(M),["prevent"]),variant:"primary"},{default:l(()=>s[12]||(s[12]=[i(" New Command "),o("div",{class:"pl-2 ml-auto"},[o("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])),_:1},8,["onClick"])])]),o("div",Nl,[t(e(we),null,{default:l(()=>[t(e(be),null,{default:l(()=>[t(e(se),null,{default:l(()=>[t(e(L),{class:"w-[2%]"},{default:l(()=>[t(b,{id:"selectAll",modelValue:e(j),"onUpdate:modelValue":s[3]||(s[3]=n=>X(j)?j.value=n:null),checked:e(j),onClick:s[4]||(s[4]=n=>e(H)())},null,8,["modelValue","checked"])]),_:1}),t(e(L),{class:"w-[5%]"},{default:l(()=>[t(P,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:s[5]||(s[5]=n=>e(F)("id"))},{default:l(()=>[t(Q,{icon:e(k)==="id"?"lucide:sort-asc":e(k)==="-id"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),s[13]||(s[13]=o("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),t(e(L),{class:"w-[20%]"},{default:l(()=>[t(P,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:s[6]||(s[6]=n=>e(F)("tagname"))},{default:l(()=>[t(Q,{icon:e(k)==="tagname"?"lucide:sort-asc":e(k)==="-tagname"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),s[14]||(s[14]=o("span",{class:"ml-2"},"Command",-1))]),_:1})]),_:1}),t(e(L),{class:"w-[20%]"},{default:l(()=>s[15]||(s[15]=[i("Description")])),_:1}),t(e(L),{class:"w-[40%]"},{default:l(()=>s[16]||(s[16]=[i("Command Groups")])),_:1}),t(e(L),{class:"w-[10%]"},{default:l(()=>s[17]||(s[17]=[i("Actions")])),_:1})]),_:1})]),_:1}),t(e($e),null,{default:l(()=>[e(g)?(a(),p(ye,{key:0})):e(g)?(a(),p(Ce,{key:2})):(a(!0),_(K,{key:1},W(e(u).data,n=>(a(),p(e(se),{key:n.id},{default:l(()=>[t(e(U),{class:"text-start"},{default:l(()=>[t(b,{class:"cursor-pointer",id:"select-"+n.id,checked:!!e(c).includes(n.id),onClick:z=>e(R)(n.id)},null,8,["id","checked","onClick"])]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[i(C(n.id),1)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[i(C(n.command),1)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[i(C(n.description),1)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[(a(!0),_(K,null,W(n.category.slice(0,8),(z,re)=>(a(),_("span",{key:z.categoryName,class:"mr-2"},[t(J,{variant:"outline",class:He([z.badgeColor?z.badgeColor:"bg-gray-600 text-gray-200 border-gray-500","py-1 mt-1 hover:bg-rcgray-800"])},{default:l(()=>[t(Y,{to:z.view_url},{default:l(()=>[i(C(z.categoryName),1)]),_:2},1032,["to"])]),_:2},1032,["class"])]))),128)),n.category.length>8?(a(),_("span",El,[t(fl,{recordName:n.command,items:n.category,displayField:"categoryName"},null,8,["recordName","items"])])):V("",!0)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[t(De,{rowData:n,onOnEdit:z=>e(B)(n.id),onOnDelete:z=>e(I)(n.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(he,{currentPage:e(v),lastPage:e(h),perPage:e(w),"onUpdate:currentPage":s[7]||(s[7]=n=>v.value=n),"onUpdate:perPage":s[8]||(s[8]=n=>w.value=n)},null,8,["currentPage","lastPage","perPage"]),(a(),p(Dl,{onSave:s[9]||(s[9]=n=>e(r)()),key:e(A),editId:e(N)},null,8,["editId"])),t(ce,{ids:e(c),showConfirmDelete:e(y),onClose:s[10]||(s[10]=n=>y.value=!1),onHandleDelete:s[11]||(s[11]=n=>e(m)(e(c)))},null,8,["ids","showConfirmDelete"]),t(le)])])}}},Al={class:"flex flex-col h-full gap-1 text-center"},Fl={class:"flex items-center justify-between p-4"},Ul={class:"flex items-center"},Ll={class:"flex"},Ml={class:"px-6"},jl={key:0,class:"mr-2"},Ol={__name:"Main",setup(x){const{editId:N,categories:u,currentPage:v,perPage:w,searchTerm:d,lastPage:h,isLoading:g,fetchCommandGroups:T,viewEditDialog:B,createCommandGroup:M,deleteCommandGroup:I,deleteManyCommandGroups:m,handleSave:r,showConfirmDelete:y,handleKeyDown:E,newCommandGroupsModalKey:A,toggleSort:F,sortParam:k}=Zt(),{selectedRows:c,selectAll:j,toggleSelectAll:H,toggleSelectRow:R}=xe(u);return te(()=>{T(),window.addEventListener("keydown",E),ie.on("deleteManyCommandGroupsSuccess",()=>{c.value=[],j.value=!1})}),de(()=>{window.removeEventListener("keydown",E)}),(q,s)=>{const O=f("Input"),P=f("Button"),b=f("Checkbox"),Q=f("Icon"),Y=f("router-link"),J=f("Badge"),le=f("Toaster");return a(),_("div",Al,[s[18]||(s[18]=o("div",{class:"hidden text-yellow-200 text-teal-100 bg-yellow-700 bg-teal-700 border-yellow-500 border-teal-500 bg-stone-700 text-stone-200 border-stone-500 bg-lime-700 text-lime-200 border-lime-500 bg-sky-700 text-sky-100 border-sky-500 bg-violet-700 text-violet-200 border-violet-500 bg-fuchsia-700 text-fuchsia-200 border-fuchsia-500"},null,-1)),o("div",Fl,[o("div",Ul,[t(O,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter command groups...",modelValue:e(d),"onUpdate:modelValue":s[0]||(s[0]=n=>X(d)?d.value=n:null)},null,8,["modelValue"]),e(d)?(a(),p(ke,{key:0,"onUpdate:modelValue":s[1]||(s[1]=n=>d.value="")})):V("",!0)]),o("div",Ll,[e(c).length?(a(),p(P,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:s[2]||(s[2]=ee(n=>y.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[i(" Delete Selected "+C(e(c).length)+" CommandGroup(s) ",1)]),_:1})):V("",!0),t(P,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:ee(e(M),["prevent"]),variant:"primary"},{default:l(()=>s[12]||(s[12]=[i(" New Command Group "),o("div",{class:"pl-2 ml-auto"},[o("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])),_:1},8,["onClick"])])]),o("div",Ml,[t(e(we),null,{default:l(()=>[t(e(be),null,{default:l(()=>[t(e(se),null,{default:l(()=>[t(e(L),{class:"w-[2%]"},{default:l(()=>[t(b,{id:"selectAll",modelValue:e(j),"onUpdate:modelValue":s[3]||(s[3]=n=>X(j)?j.value=n:null),checked:e(j),onClick:s[4]||(s[4]=n=>e(H)())},null,8,["modelValue","checked"])]),_:1}),t(e(L),{class:"w-[5%]"},{default:l(()=>[t(P,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:s[5]||(s[5]=n=>e(F)("id"))},{default:l(()=>[t(Q,{icon:e(k)==="id"?"lucide:sort-asc":e(k)==="-id"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),s[13]||(s[13]=o("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),t(e(L),{class:"w-[20%]"},{default:l(()=>[t(P,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:s[6]||(s[6]=n=>e(F)("categoryName"))},{default:l(()=>[t(Q,{icon:e(k)==="categoryName"?"lucide:sort-asc":e(k)==="-categoryName"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),s[14]||(s[14]=o("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),t(e(L),{class:"w-[20%]"},{default:l(()=>s[15]||(s[15]=[i("Description")])),_:1}),t(e(L),{class:"w-[40%]"},{default:l(()=>s[16]||(s[16]=[i("Devices")])),_:1}),t(e(L),{class:"w-[10%]"},{default:l(()=>s[17]||(s[17]=[i("Actions")])),_:1})]),_:1})]),_:1}),t(e($e),null,{default:l(()=>[e(g)?(a(),p(ye,{key:0})):e(g)?(a(),p(Ce,{key:2})):(a(!0),_(K,{key:1},W(e(u).data,n=>(a(),p(e(se),{key:n.id},{default:l(()=>[t(e(U),{class:"text-start"},{default:l(()=>[t(b,{class:"cursor-pointer",id:"select-"+n.id,checked:!!e(c).includes(n.id),onClick:z=>e(R)(n.id)},null,8,["id","checked","onClick"])]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[i(C(n.id),1)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[o("span",{class:He([n.badgeColor?n.badgeColor:"bg-gray-600 text-gray-200 border-gray-500","w-fit flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"])},C(n.categoryName),3)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[i(C(n.categoryDescription),1)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[(a(!0),_(K,null,W(n.device.slice(0,8),(z,re)=>(a(),_("span",{key:z.device_name,class:"mr-2"},[t(J,{variant:"outline",class:"py-1 mt-1 hover:bg-rcgray-800"},{default:l(()=>[t(Y,{to:z.view_url},{default:l(()=>[i(C(z.device_name),1)]),_:2},1032,["to"])]),_:2},1024)]))),128)),n.device.length>8?(a(),_("span",jl,[t(Ne,{recordName:n.categoryName,items:n.device,displayField:"device_name"},null,8,["recordName","items"])])):V("",!0)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[t(De,{rowData:n,onOnEdit:z=>e(B)(n.id),onOnDelete:z=>e(I)(n.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(he,{currentPage:e(v),lastPage:e(h),perPage:e(w),"onUpdate:currentPage":s[7]||(s[7]=n=>v.value=n),"onUpdate:perPage":s[8]||(s[8]=n=>w.value=n)},null,8,["currentPage","lastPage","perPage"]),(a(),p(el,{onSave:s[9]||(s[9]=n=>e(r)()),key:e(A),editId:e(N)},null,8,["editId"])),t(ce,{ids:e(c),showConfirmDelete:e(y),onClose:s[10]||(s[10]=n=>y.value=!1),onHandleDelete:s[11]||(s[11]=n=>e(m)(e(c)))},null,8,["ids","showConfirmDelete"]),t(le)])])}}},zl={__name:"ConfirmDisableAlert",props:{ids:{type:Array,required:!0},showConfirmDisable:{type:Boolean,required:!0}},emits:["handleDisable","close"],setup(x,{emit:N}){const u=N;te(()=>{window.addEventListener("keydown",d=>{d.key==="Escape"&&w()})}),de(()=>{window.removeEventListener("keydown",d=>{d.key==="Escape"&&w()})});function v(){u("handleDisable")}function w(){u("close")}return(d,h)=>(a(),p(e(Wt),{open:x.showConfirmDisable},{default:l(()=>[t(e(zt),null,{default:l(()=>[t(e(Gt),null,{default:l(()=>[t(e(qt),null,{default:l(()=>[i("Disable device with ID "+C(x.ids)+"?",1)]),_:1}),t(e(Kt),null,{default:l(()=>h[2]||(h[2]=[i("Are you absolutely sure you want to disable this device? Disabling a device stops it from downloading configs via scheduled tasks and other operations.")])),_:1})]),_:1}),t(e(Rt),null,{default:l(()=>[t(e(Ht),{onCancel:h[0]||(h[0]=g=>w())},{default:l(()=>h[3]||(h[3]=[i("Cancel")])),_:1}),t(e(Yt),{onAction:h[1]||(h[1]=g=>v())},{default:l(()=>h[4]||(h[4]=[i("Continue")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]))}},Gl={__name:"ActionsMenuDevices",props:{rowData:{type:Object,required:!0},showEditBtn:{type:Boolean,default:!0}},emits:["onEdit","onDelete","onDisable","onClone"],setup(x,{emit:N}){const u=S(!1),v=S(!1),w=N;function d(){w("onEdit")}function h(){w("onClone")}function g(){u.value=!0}function T(){w("onDelete"),u.value=!1}function B(){v.value=!0}function M(){w("onDisable"),v.value=!1}function I(){w("onEnable")}return(m,r)=>{const y=f("Button"),E=f("Icon");return a(),_("div",null,[t(e(Je),null,{default:l(()=>[t(e(Ye),{"as-child":""},{default:l(()=>[t(y,{variant:"ghost",class:"hover:animate-pulse"},{default:l(()=>r[2]||(r[2]=[i(" ... ")])),_:1})]),_:1}),t(e(We),{class:"w-56",align:"end",side:"bottom"},{default:l(()=>[x.showEditBtn?(a(),p(e(fe),{key:0,class:"cursor-pointer hover:bg-rcgray-800",onClick:d},{default:l(()=>[r[3]||(r[3]=o("span",null,"Edit",-1)),t(e(pe),null,{default:l(()=>[t(E,{icon:"fluent-color:text-edit-style-16"})]),_:1})]),_:1})):V("",!0),x.showEditBtn?(a(),p(e(fe),{key:1,class:"cursor-pointer hover:bg-rcgray-800",onClick:h},{default:l(()=>[r[4]||(r[4]=o("span",null,"Clone",-1)),t(e(pe),null,{default:l(()=>[t(E,{icon:"material-symbols:content-copy-outline"})]),_:1})]),_:1})):V("",!0),x.showEditBtn?(a(),p(e(Jt),{key:2})):V("",!0),x.rowData.status===100?(a(),p(e(fe),{key:3,class:"cursor-pointer hover:bg-rcgray-800",onClick:I},{default:l(()=>[r[5]||(r[5]=o("span",null,"Enable",-1)),t(e(pe),null,{default:l(()=>[t(E,{icon:"emojione-v1:up-arrow"})]),_:1})]),_:1})):V("",!0),x.rowData.status!=100?(a(),p(e(fe),{key:4,class:"cursor-pointer hover:bg-rcgray-800",onClick:B},{default:l(()=>[r[6]||(r[6]=o("span",null,"Disable",-1)),t(e(pe),null,{default:l(()=>[t(E,{icon:"emojione-v1:down-arrow"})]),_:1})]),_:1})):V("",!0),t(e(fe),{class:"cursor-pointer hover:bg-rcgray-800",onClick:g},{default:l(()=>[r[7]||(r[7]=o("span",{class:"text-red-400"},"Delete",-1)),t(e(pe),null,{default:l(()=>[t(E,{icon:"flat-color-icons:full-trash"})]),_:1})]),_:1})]),_:1})]),_:1}),t(zl,{ids:[x.rowData.id],showConfirmDisable:v.value,onClose:r[0]||(r[0]=A=>v.value=!1),onHandleDisable:M},null,8,["ids","showConfirmDisable"]),t(ce,{ids:[x.rowData.id],showConfirmDelete:u.value,onClose:r[1]||(r[1]=A=>u.value=!1),onHandleDelete:T},null,8,["ids","showConfirmDelete"])])}}},ql={key:0,class:"text-sm font-light"},Kl={class:"text-sm font-semibold"},Rl={class:"relative items-center w-full"},Hl={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},Yl={class:"py-1"},Wl=["onClick"],Jl=["checked"],Ql={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Xl={"data-size":"20"},Zl={class:"p-1 border-5"},es=Ve({__name:"CategoryFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(x,{emit:N}){const u=N,v=S([]),w=S(!1),d=S([]),h=S(""),g=S(!1),T=x;te(()=>{M()}),ne(()=>T.modelValue,m=>{d.value=m,g.value=d.value.length===v.value.length});function B(m){if(m.id===9999999)g.value?(d.value=[],g.value=!1):(d.value=[...v.value],g.value=!0);else{const r=d.value.findIndex(y=>y.id===m.id);r!==-1?(d.value.splice(r,1),g.value=!1):(d.value.push(m),d.value.length===v.value.length&&(g.value=!0))}w.value=!1,u("update:modelValue",d.value)}function M(){Z.get("/api/categories/?perPage=10000").then(m=>{v.value=m.data.data})}const I=Se(()=>v.value.filter(m=>m.categoryName.toLowerCase().includes(h.value.toLowerCase())));return(m,r)=>{const y=f("Button"),E=f("Input"),A=f("Icon"),F=f("Separator");return a(),p(e(_e),null,{default:l(()=>[t(e(ve),null,{default:l(()=>[t(y,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[t(kt,{class:"mr-2"}),d.value&&d.value.length===0?(a(),_(K,{key:0},[i("Command Group")],64)):(a(),_(K,{key:1},[d.value.length>0?(a(),_("span",ql,[r[2]||(r[2]=i(" Command Group ")),o("strong",Kl,C(d.value.length)+" selected",1)])):V("",!0)],64))]),_:1})]),_:1}),t(e(ge),{side:"bottom",align:"start",class:"w-64 p-0"},{default:l(()=>[o("div",Rl,[t(E,{id:"search",type:"text",modelValue:h.value,"onUpdate:modelValue":r[0]||(r[0]=k=>h.value=k),placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),o("span",Hl,[t(A,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),t(F),t(e(Pe),{class:"h-44"},{default:l(()=>[o("div",Yl,[(a(!0),_(K,null,W(I.value,k=>(a(),_("div",{key:k.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:c=>B(k)},[o("input",{type:"checkbox",checked:d.value.some(c=>c.id===k.id),class:"mr-2"},null,8,Jl),o("span",Ql,[o("span",Xl,C(k.categoryName),1)])],8,Wl))),128))])]),_:1}),t(F),o("div",Zl,[t(y,{variant:"ghost",class:"justify-start w-full p-1",onClick:r[1]||(r[1]=k=>B({id:9999999}))},{default:l(()=>[t(A,{icon:g.value?"fluent:select-all-on-16-filled":"fluent:select-all-on-16-regular",class:"w-4 h-4 mr-2 text-muted-foreground"},null,8,["icon"]),o("span",null,C(g.value?"Deselect all":"Select all"),1)]),_:1})])]),_:1})]),_:1})}}});function ts(x){const N=Qe(),{openSheet:u,closeSheet:v,isSheetOpen:w}=N,d=S([]),h=S(!1),g=S(!1),T=Te(),B=bt("formatters");te(()=>{w("DeviceCommentSheet")&&M()});function M(){h.value=!0,Z.get(`/api/device-comments/${x.deviceId}`).then(y=>{d.value=y.data,h.value=!1}).catch(y=>{console.error(y),h.value=!1})}function I(y){v("DeviceCommentSheet"),T.push({name:"device",params:{id:y}})}function m(){g.value||(d.value.unshift({user:{name:"New User"},created_at:new Date().toISOString(),comment:"",is_open:!0,isEditable:!0}),g.value=!0)}function r(y){d.value[y].isEditable=!1,Z.post("/api/device/comments",{comment:d.value[y].comment,device_id:x.deviceId}).then(E=>{}).catch(E=>{console.error(E)})}return{addComment:m,closeSheet:v,comments:d,formatters:B,isLoading:h,isSheetOpen:w,saveComment:r,viewDevice:I}}const ls={class:"border-b"},ss={key:0},as={class:"mt-4 space-y-4"},ns={class:"text-sm text-muted-foreground"},os={key:1},ds={__name:"CommentSheet",props:{deviceId:{type:Number,required:!0},deviceName:{type:String,required:!0}},setup(x){const N=x,{addComment:u,closeSheet:v,comments:w,formatters:d,isLoading:h,isSheetOpen:g,saveComment:T,viewDevice:B}=ts(N);return(M,I)=>{const m=f("Button"),r=f("CommentAddIcon"),y=f("Textarea"),E=f("Icon");return a(),p(e(Et),{open:e(g)("DeviceCommentSheet")},{default:l(()=>[t(e($t),{class:"h-[96vh] m-6 rounded-lg border",onEscapeKeyDown:I[1]||(I[1]=A=>e(v)("DeviceCommentSheet")),onPointerDownOutside:I[2]||(I[2]=A=>e(v)("DeviceCommentSheet")),onCloseClicked:I[3]||(I[3]=A=>e(v)("DeviceCommentSheet"))},{default:l(()=>[e(h)?(a(),p(Ct,{key:0})):V("",!0),e(h)?V("",!0):(a(),p(e(wt),{key:1},{default:l(()=>[t(e(ht),null,{default:l(()=>I[4]||(I[4]=[i("Comments")])),_:1}),t(e(rl),null,{default:l(()=>[I[5]||(I[5]=o("span",{class:"text-muted-foreground"},"Comments on",-1)),t(m,{class:"px-2 py-0 hover:bg-rcgray-800 rounded-xl",variant:"ghost",onClick:I[0]||(I[0]=A=>e(B)(x.deviceId))},{default:l(()=>[o("span",ls,C(x.deviceName),1)]),_:1}),t(m,{variant:"ghost",class:"float-right",onClick:e(u)},{default:l(()=>[t(r,{class:"text-muted-foreground"})]),_:1},8,["onClick"])]),_:1})]),_:1})),t(Dt,{name:"fade"},{default:l(()=>[e(h)?V("",!0):(a(),_("div",ss,[o("div",as,[(a(!0),_(K,null,W(e(w),(A,F)=>(a(),p(e(It),{key:F},{default:l(()=>[t(e(St),{class:"p-2"},{default:l(()=>[t(e(Vt),null,{default:l(()=>[o("span",null,C(A.user.name),1)]),_:2},1024),t(e(Pt))]),_:2},1024),t(e(Tt),{class:"flex justify-end px-2 py-0"},{default:l(()=>[A.isEditable?(a(),p(y,{key:0,modelValue:A.comment,"onUpdate:modelValue":k=>A.comment=k,rows:"1",class:"mt-2"},null,8,["modelValue","onUpdate:modelValue"])):(a(),p(y,{key:1,class:"border-none",modelValue:A.comment,"onUpdate:modelValue":k=>A.comment=k,disabled:""},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1024),t(e(sl),{class:"flex justify-between px-2 py-1"},{default:l(()=>[o("div",ns,C(e(d).formatTime(A.created_at)),1),o("div",null,[A.isEditable?(a(),p(m,{key:0,onClick:k=>e(T)(F),variant:"outline",size:"sm",class:""},{default:l(()=>I[6]||(I[6]=[i(" Save ")])),_:2},1032,["onClick"])):V("",!0),A.isEditable?V("",!0):(a(),_("div",os,[A.is_open?(a(),p(m,{key:0,title:"Resolve Comment",size:"sm",variant:"ghost",class:"py-2"},{default:l(()=>[t(E,{icon:"solar:check-circle-broken"})]),_:1})):V("",!0)]))])]),_:2},1024)]),_:2},1024))),128))])]))]),_:1}),t(e(Nt),null,{default:l(()=>I[7]||(I[7]=[o("div",{class:"flex-1"},null,-1)])),_:1})]),_:1})]),_:1},8,["open"])}}},is={key:0,class:"text-sm font-light"},rs={class:"text-sm font-semibold"},us={class:"py-1"},cs=["onClick"],ms=["checked"],fs={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},ps={"data-size":"20"},vs=Ve({__name:"StatusFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(x,{emit:N}){const u=N,v=S([{id:0,name:"Unreachable"},{id:1,name:"Reachable"},{id:2,name:"Unknown"},{id:100,name:"Disabled"},{id:200,name:"All"}]),w=S(!1),d=S([]),h=x;ne(()=>h.modelValue,T=>{d.value=T});function g(T){if(T.id===200)d.value.length===v.value.length?d.value=[]:d.value=[...v.value];else{const B=d.value.findIndex(M=>M.id===T.id);if(B!==-1){d.value.splice(B,1);const M=d.value.findIndex(I=>I.id===200);M!==-1&&d.value.splice(M,1)}else d.value.push(T)}w.value=!1,u("update:modelValue",d.value)}return(T,B)=>{const M=f("Icon"),I=f("Button");return a(),p(e(_e),null,{default:l(()=>[t(e(ve),null,{default:l(()=>[t(I,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[t(M,{icon:"material-symbols-light:signal-wifi-statusbar-not-connected-rounded",class:"mr-2"}),d.value&&d.value.length===0?(a(),_(K,{key:0},[i("Status")],64)):(a(),_(K,{key:1},[d.value.length>0?(a(),_("span",is,[B[0]||(B[0]=i(" Status ")),o("strong",rs,C(d.value.length)+" selected",1)])):V("",!0)],64))]),_:1})]),_:1}),t(e(ge),{side:"bottom",align:"start",class:"p-0 w-44"},{default:l(()=>[t(e(Pe),{class:"h-44"},{default:l(()=>[o("div",us,[(a(!0),_(K,null,W(v.value,m=>(a(),_("div",{key:m.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:r=>g(m)},[o("input",{type:"checkbox",checked:d.value.some(r=>r.id===m.id),class:"mr-2"},null,8,ms),o("span",fs,[o("span",ps,C(m.name),1)])],8,cs))),128))])]),_:1})]),_:1})]),_:1})}}}),gs={key:0,class:"text-sm font-light"},_s={class:"text-sm font-semibold"},ys={class:"relative items-center w-full"},xs={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},ks={class:"py-1"},bs=["onClick"],$s=["checked"],Cs={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},ws={"data-size":"20"},hs={class:"p-1 border-5"},Ds=Ve({__name:"TagFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(x,{emit:N}){const u=N,v=S([]),w=S(!1),d=S([]),h=S(""),g=S(!1),T=x;te(()=>{M()}),ne(()=>T.modelValue,m=>{d.value=m,g.value=d.value.length===v.value.length});function B(m){if(m.id===9999999)g.value?(d.value=[],g.value=!1):(d.value=[...v.value],g.value=!0);else{const r=d.value.findIndex(y=>y.id===m.id);r!==-1?(d.value.splice(r,1),g.value=!1):(d.value.push(m),d.value.length===v.value.length&&(g.value=!0))}w.value=!1,u("update:modelValue",d.value)}function M(){Z.get("/api/tags/?perPage=10000").then(m=>{v.value=m.data.data})}const I=Se(()=>v.value.filter(m=>m.tagname.toLowerCase().includes(h.value.toLowerCase())));return(m,r)=>{const y=f("Button"),E=f("Input"),A=f("Icon"),F=f("Separator");return a(),p(e(_e),null,{default:l(()=>[t(e(ve),null,{default:l(()=>[t(y,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[t(Bt,{class:"mr-2"}),d.value&&d.value.length===0?(a(),_(K,{key:0},[i("Tags")],64)):(a(),_(K,{key:1},[d.value.length>0?(a(),_("span",gs,[r[2]||(r[2]=i(" Tag ")),o("strong",_s,C(d.value.length)+" selected",1)])):V("",!0)],64))]),_:1})]),_:1}),t(e(ge),{side:"bottom",align:"start",class:"w-64 p-0"},{default:l(()=>[o("div",ys,[t(E,{id:"search",type:"text",modelValue:h.value,"onUpdate:modelValue":r[0]||(r[0]=k=>h.value=k),placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),o("span",xs,[t(A,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),t(F),t(e(Pe),{class:"h-44"},{default:l(()=>[o("div",ks,[(a(!0),_(K,null,W(I.value,k=>(a(),_("div",{key:k.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:c=>B(k)},[o("input",{type:"checkbox",checked:d.value.some(c=>c.id===k.id),class:"mr-2"},null,8,$s),o("span",Cs,[o("span",ws,C(k.tagname),1)])],8,bs))),128))])]),_:1}),t(F),o("div",hs,[t(y,{variant:"ghost",class:"justify-start w-full p-1",onClick:r[1]||(r[1]=k=>B({id:9999999}))},{default:l(()=>[t(A,{icon:g.value?"fluent:select-all-on-16-filled":"fluent:select-all-on-16-regular",class:"w-4 h-4 mr-2 text-muted-foreground"},null,8,["icon"]),o("span",null,C(g.value?"Deselect all":"Select all"),1)]),_:1})])]),_:1})]),_:1})}}}),Is={class:"space-y-2"},Ss={class:"mb-2 text-sm text-muted-foreground"},Vs={key:0,class:"text-xs text-muted-foreground"},Ps={__name:"TagListPopover",props:{recordName:{type:String,required:!0},items:{type:Array,required:!0},displayField:{type:String,default:"name"},displayCount:{type:Number,default:100}},setup(x){return(N,u)=>{const v=f("Button"),w=f("router-link");return a(),p(e(_e),null,{default:l(()=>[t(e(ve),{"as-child":""},{default:l(()=>[t(v,{variant:"outline",className:"mt-1 inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground"},{default:l(()=>u[0]||(u[0]=[i(" ... ")])),_:1})]),_:1}),t(e(ge),{class:"max-w-max",style:{width:"800px"}},{default:l(()=>[o("div",Is,[o("p",Ss,"All tags associated with "+C(x.recordName)+". Showing "+C(x.displayCount)+" records.",1)]),(a(!0),_(K,null,W(x.items.slice(0,x.displayCount),d=>(a(),p(e(Ke),{key:d[x.displayField],variant:"outline",class:"py-1 mt-1 hover:bg-rcgray-900"},{default:l(()=>[t(w,{to:d.view_url},{default:l(()=>[i(C(d[x.displayField]),1)]),_:2},1032,["to"])]),_:2},1024))),128)),x.displayCount>x.displayCount-1?(a(),_("span",Vs,[u[2]||(u[2]=o("br",null,null,-1)),i(" Displaying only "+C(x.displayCount)+" records. Visit the ",1),t(w,{to:"/tags",class:"text-blue-500 hover:underline"},{default:l(()=>u[1]||(u[1]=[i(" Tags ")])),_:1}),u[3]||(u[3]=i(" page to view all tags. "))])):V("",!0)]),_:1})]),_:1})}}},Ts={key:0,class:"text-sm font-light"},Ns={class:"text-sm font-semibold"},Es={class:"relative items-center w-full"},Bs={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},As={class:"py-1"},Fs=["onClick"],Us=["checked"],Ls={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Ms={"data-size":"20"},js={class:"p-1 border-5"},Os=Ve({__name:"VendorFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(x,{emit:N}){const u=N,v=S([]),w=S(!1),d=S([]),h=S(""),g=S(!1),T=x;te(()=>{M()}),ne(()=>T.modelValue,m=>{d.value=m,g.value=d.value.length===v.value.length});function B(m){if(m.id===9999999)g.value?(d.value=[],g.value=!1):(d.value=[...v.value],g.value=!0);else{const r=d.value.findIndex(y=>y.id===m.id);r!==-1?(d.value.splice(r,1),g.value=!1):(d.value.push(m),d.value.length===v.value.length&&(g.value=!0))}w.value=!1,u("update:modelValue",d.value)}function M(){Z.get("/api/vendors/?perPage=10000").then(m=>{v.value=m.data.data})}const I=Se(()=>v.value.filter(m=>m.vendorName.toLowerCase().includes(h.value.toLowerCase())));return(m,r)=>{const y=f("Button"),E=f("Input"),A=f("Icon"),F=f("Separator");return a(),p(e(_e),null,{default:l(()=>[t(e(ve),null,{default:l(()=>[t(y,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[t(At,{class:"mr-2"}),d.value&&d.value.length===0?(a(),_(K,{key:0},[i("Vendor")],64)):(a(),_(K,{key:1},[d.value.length>0?(a(),_("span",Ts,[r[2]||(r[2]=i(" Vendor ")),o("strong",Ns,C(d.value.length)+" selected",1)])):V("",!0)],64))]),_:1})]),_:1}),t(e(ge),{side:"bottom",align:"start",class:"w-64 p-0"},{default:l(()=>[o("div",Es,[t(E,{id:"search",type:"text",modelValue:h.value,"onUpdate:modelValue":r[0]||(r[0]=k=>h.value=k),placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),o("span",Bs,[t(A,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),t(F),t(e(Pe),{class:"h-44"},{default:l(()=>[o("div",As,[(a(!0),_(K,null,W(I.value,k=>(a(),_("div",{key:k.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:c=>B(k)},[o("input",{type:"checkbox",checked:d.value.some(c=>c.id===k.id),class:"mr-2"},null,8,Us),o("span",Ls,[o("span",Ms,C(k.vendorName),1)])],8,Fs))),128))])]),_:1}),t(F),o("div",js,[t(y,{variant:"ghost",class:"justify-start w-full p-1",onClick:r[1]||(r[1]=k=>B({id:9999999}))},{default:l(()=>[t(A,{icon:g.value?"fluent:select-all-on-16-filled":"fluent:select-all-on-16-regular",class:"w-4 h-4 mr-2 text-muted-foreground"},null,8,["icon"]),o("span",null,C(g.value?"Deselect all":"Select all"),1)]),_:1})])]),_:1})]),_:1})}}}),zs={class:"flex flex-col h-full gap-1 text-center"},Gs={class:"flex items-center justify-between p-4"},qs={class:"flex items-center"},Ks={class:"flex gap-2"},Rs={class:"flex"},Hs={class:"px-6"},Ys={class:"flex justify-between"},Ws={class:"border-b"},Js={key:0,class:"ml-2"},Qs={key:0},Xs={key:1},Zs={key:0},ea={key:1},ta={key:0},la={key:1},sa={key:0},aa={key:1},na={key:0,class:"mr-2"},oa={__name:"Main",props:{statusId:{type:Number,required:!1}},setup(x){const{clearFilters:N,createDevice:u,currentPage:v,deleteDevice:w,deleteManyDevices:d,devices:h,disableDevice:g,editId:T,enableDevice:B,fetchDevices:M,filterCategories:I,filterStatus:m,filterTags:r,filterVendor:y,formatters:E,handleKeyDown:A,handleSave:F,isLoading:k,lastPage:c,newDeviceModalKey:j,perPage:H,searchTerm:R,showConfirmDelete:q,sortParam:s,toggleSort:O,updateDevice:P,viewDeviceDetailsPane:b,viewEditDialog:Q}=al(),{selectedRows:Y,selectAll:J,toggleSelectAll:le,toggleSelectRow:n}=xe(h),z=Qe(),{openSheet:re,closeSheet:G,isSheetOpen:oe}=z,Ee=S(0),je=S(""),Oe=S(0),Be=S(!1),Ae=Xe(),et=Te();te(()=>{Ae.query.statusId&&(m.value=[{id:parseInt(Ae.query.statusId)}]),M(),window.addEventListener("keydown",A),ie.on("deleteManyDevicesSuccess",()=>{Y.value=[],J.value=!1})}),ne(()=>Ae.query,async me=>{if(me.openDeviceDialog){u(),await Ft();const{openDeviceDialog:$,...Fe}=me;et.replace({query:Fe},void 0,{replace:!0})}},{immediate:!0}),de(()=>{window.removeEventListener("keydown",A)});function tt(me){Oe.value+=1,Ee.value=me,je.value=h.value.data.find($=>$.id===me).device_name,re("DeviceCommentSheet")}return(me,$)=>{const Fe=f("Input"),lt=f("Separator"),ue=f("Button"),ze=f("Checkbox"),Ie=f("Icon"),st=f("StatusRedIcon"),at=f("StatusGreenIcon"),nt=f("StatusYellowIcon"),ot=f("StatusGrayIcon"),dt=f("router-link"),it=f("Badge"),rt=f("Toaster");return a(),_("div",zs,[o("div",Gs,[o("div",qs,[t(Fe,{class:"ml-2 min-w-32 lg:min-w-60",autocomplete:"off",placeholder:"Filter devices by ID, name or IP...",modelValue:e(R),"onUpdate:modelValue":$[0]||($[0]=D=>X(R)?R.value=D:null)},null,8,["modelValue"]),t(lt,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),$[18]||($[18]=o("span",{class:"mr-2 text-muted-foreground"},"Filters:",-1)),o("div",Ks,[t(es,{modelValue:e(I),"onUpdate:modelValue":$[1]||($[1]=D=>X(I)?I.value=D:null)},null,8,["modelValue"]),t(Ds,{modelValue:e(r),"onUpdate:modelValue":$[2]||($[2]=D=>X(r)?r.value=D:null)},null,8,["modelValue"]),t(Os,{modelValue:e(y),"onUpdate:modelValue":$[3]||($[3]=D=>X(y)?y.value=D:null)},null,8,["modelValue"]),t(vs,{modelValue:e(m),"onUpdate:modelValue":$[4]||($[4]=D=>X(m)?m.value=D:null)},null,8,["modelValue"]),e(R)||e(I).length||e(r).length||e(y).length||e(m).length?(a(),p(ke,{key:0,"onUpdate:modelValue":e(N)},null,8,["onUpdate:modelValue"])):V("",!0)])]),o("div",Rs,[e(Y).length?(a(),p(ue,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:$[5]||($[5]=ee(D=>q.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[i(" Delete Selected "+C(e(Y).length)+" Device(s) ",1)]),_:1})):V("",!0),t(ue,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:$[6]||($[6]=ee(D=>e(u)(),["prevent"])),variant:"primary"},{default:l(()=>$[19]||($[19]=[i(" New Device "),o("div",{class:"pl-2 ml-auto"},[o("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])),_:1})])]),o("div",Hs,[t(e(we),null,{default:l(()=>[t(e(be),null,{default:l(()=>[t(e(se),null,{default:l(()=>[t(e(L),{class:"w-[2%]"},{default:l(()=>[t(ze,{id:"selectAll",modelValue:e(J),"onUpdate:modelValue":$[7]||($[7]=D=>X(J)?J.value=D:null),checked:e(J),onClick:$[8]||($[8]=D=>e(le)())},null,8,["modelValue","checked"])]),_:1}),t(e(L),{class:"w-[5%]"},{default:l(()=>[t(ue,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:$[9]||($[9]=D=>e(O)("id"))},{default:l(()=>[t(Ie,{icon:e(s)==="id"?"lucide:sort-asc":e(s)==="-id"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),$[20]||($[20]=o("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),t(e(L),{class:"w-[2%]"},{default:l(()=>[t(ue,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:$[10]||($[10]=D=>e(O)("status"))},{default:l(()=>[t(Ie,{icon:e(s)==="status"?"lucide:sort-asc":e(s)==="-status"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),$[21]||($[21]=o("span",{class:"ml-2"},null,-1))]),_:1})]),_:1}),t(e(L),{class:"w-[20%]"},{default:l(()=>[t(ue,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:$[11]||($[11]=D=>e(O)("device_name"))},{default:l(()=>[t(Ie,{icon:e(s)==="device_name"?"lucide:sort-asc":e(s)==="-device_name"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),$[22]||($[22]=o("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),t(e(L),{class:"w-[10%]"},{default:l(()=>$[23]||($[23]=[i("IP Address")])),_:1}),t(e(L),{class:"w-[10%]"},{default:l(()=>$[24]||($[24]=[i("C'Group")])),_:1}),t(e(L),{class:"w-[10%]"},{default:l(()=>$[25]||($[25]=[i("Vendor")])),_:1}),t(e(L),{class:"w-[10%]"},{default:l(()=>$[26]||($[26]=[i("Model")])),_:1}),t(e(L),{class:"w-[10%]"},{default:l(()=>$[27]||($[27]=[i("Config Count")])),_:1}),t(e(L),{class:"w-[10%]"},{default:l(()=>$[28]||($[28]=[i("Config Failures")])),_:1}),t(e(L),{class:"w-[10%]"},{default:l(()=>$[29]||($[29]=[i("Last Config")])),_:1}),t(e(L),{class:"w-[10%]"},{default:l(()=>$[30]||($[30]=[i("Tags")])),_:1}),t(e(L),{class:"w-[10%]"},{default:l(()=>$[31]||($[31]=[i("Actions")])),_:1})]),_:1})]),_:1}),t(e($e),null,{default:l(()=>[e(k)?(a(),p(ye,{key:0})):e(k)?(a(),p(Ce,{key:2})):(a(!0),_(K,{key:1},W(e(h).data,D=>(a(),p(e(se),{key:D.id},{default:l(()=>[t(e(U),{class:"text-start"},{default:l(()=>[t(ze,{class:"cursor-pointer",id:"select-"+D.id,checked:!!e(Y).includes(D.id),onClick:ae=>e(n)(D.id)},null,8,["id","checked","onClick"])]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[i(C(D.id),1)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[D.status===0?(a(),p(st,{key:0})):V("",!0),D.status===1?(a(),p(at,{key:1})):V("",!0),D.status===2?(a(),p(nt,{key:2})):V("",!0),D.status===100?(a(),p(ot,{key:3})):V("",!0)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[o("div",Ys,[t(ue,{class:"px-2 py-0 hover:bg-rcgray-800 rounded-xl",variant:"ghost",onClick:ae=>e(b)(D.id)},{default:l(()=>[o("span",Ws,C(D.device_name),1)]),_:2},1032,["onClick"]),t(ue,{class:"px-2 py-0 hover:bg-rcgray-800 rounded-xl text-muted-foreground",variant:"ghost",onClick:ae=>tt(D.id)},{default:l(()=>[t(Ie,{icon:"vaadin:comments-o"}),D.comments.length>0?(a(),_("span",Js,C(D.comments.length),1)):V("",!0)]),_:2},1032,["onClick"])])]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[i(C(D.device_ip),1)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[D.category.length>0?(a(),_("span",Qs,C(D.category[0].categoryName),1)):(a(),_("span",Xs,"--"))]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[D.vendor.length>0?(a(),_("span",Zs,C(D.vendor[0].vendorName),1)):(a(),_("span",ea,"--"))]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[i(C(D.device_model),1)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[i(C(D.config_good_count),1)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[D.config_bad_count?(a(),_("span",ta,C(D.config_bad_count),1)):(a(),_("span",la,"--"))]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[D.last_config?(a(),_("span",sa,C(e(E).formatTime(D.last_config.created_at)),1)):(a(),_("span",aa,"--"))]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[(a(!0),_(K,null,W(D.tag.slice(0,3),(ae,Fa)=>(a(),_("span",{key:ae.tagname,class:"mr-2"},[t(it,{variant:"outline",class:"py-1 mt-1 hover:bg-rcgray-800"},{default:l(()=>[t(dt,{to:ae.view_url},{default:l(()=>[i(C(ae.tagname),1)]),_:2},1032,["to"])]),_:2},1024)]))),128)),D.tag.length>3?(a(),_("span",na,[t(Ps,{recordName:D.device_name,items:D.tag,displayField:"tagname"},null,8,["recordName","items"])])):V("",!0)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[t(Gl,{rowData:D,onOnEnable:ae=>e(B)(D.id),onOnClone:ae=>(e(Q)(D.id),Be.value=!0),onOnDisable:ae=>e(g)(D.id),onOnEdit:ae=>e(Q)(D.id),onOnDelete:ae=>e(w)(D.id)},null,8,["rowData","onOnEnable","onOnClone","onOnDisable","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(he,{currentPage:e(v),lastPage:e(c),perPage:e(H),"onUpdate:currentPage":$[12]||($[12]=D=>v.value=D),"onUpdate:perPage":$[13]||($[13]=D=>H.value=D)},null,8,["currentPage","lastPage","perPage"]),(a(),p(nl,{onSave:$[14]||($[14]=D=>e(F)()),onClose:$[15]||($[15]=D=>Be.value=!1),key:e(j),editId:e(T),isClone:Be.value},null,8,["editId","isClone"])),t(ce,{ids:e(Y),showConfirmDelete:e(q),onClose:$[16]||($[16]=D=>q.value=!1),onHandleDelete:$[17]||($[17]=D=>e(d)(e(Y)))},null,8,["ids","showConfirmDelete"]),(a(),p(ds,{deviceId:Ee.value,deviceName:je.value,key:Oe.value},null,8,["deviceId","deviceName"])),t(rt)])])}}},da={class:"flex flex-col h-full gap-1 text-center"},ia={class:"flex items-center justify-between p-4"},ra={class:"flex items-center"},ua={class:"flex"},ca={class:"px-6"},ma={key:0,class:"mr-2"},fa={__name:"Main",setup(x){const{editId:N,tags:u,currentPage:v,perPage:w,searchTerm:d,lastPage:h,isLoading:g,fetchTags:T,viewEditDialog:B,createTag:M,deleteTag:I,deleteManyTags:m,handleSave:r,showConfirmDelete:y,handleKeyDown:E,newTagModalKey:A,toggleSort:F,sortParam:k}=tl(),{selectedRows:c,selectAll:j,toggleSelectAll:H,toggleSelectRow:R}=xe(u);return te(()=>{T(),window.addEventListener("keydown",E),ie.on("deleteManyTagsSuccess",()=>{c.value=[],j.value=!1})}),de(()=>{window.removeEventListener("keydown",E)}),(q,s)=>{const O=f("Input"),P=f("Button"),b=f("Checkbox"),Q=f("Icon"),Y=f("router-link"),J=f("Badge"),le=f("Toaster");return a(),_("div",da,[o("div",ia,[o("div",ra,[t(O,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter tags...",modelValue:e(d),"onUpdate:modelValue":s[0]||(s[0]=n=>X(d)?d.value=n:null)},null,8,["modelValue"]),e(d)?(a(),p(ke,{key:0,"onUpdate:modelValue":s[1]||(s[1]=n=>d.value="")})):V("",!0)]),o("div",ua,[e(c).length?(a(),p(P,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:s[2]||(s[2]=ee(n=>y.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[i(" Delete Selected "+C(e(c).length)+" Tag(s) ",1)]),_:1})):V("",!0),t(P,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:ee(e(M),["prevent"]),variant:"primary"},{default:l(()=>s[12]||(s[12]=[i(" New Tag "),o("div",{class:"pl-2 ml-auto"},[o("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])),_:1},8,["onClick"])])]),o("div",ca,[t(e(we),null,{default:l(()=>[t(e(be),null,{default:l(()=>[t(e(se),null,{default:l(()=>[t(e(L),{class:"w-[2%]"},{default:l(()=>[t(b,{id:"selectAll",modelValue:e(j),"onUpdate:modelValue":s[3]||(s[3]=n=>X(j)?j.value=n:null),checked:e(j),onClick:s[4]||(s[4]=n=>e(H)())},null,8,["modelValue","checked"])]),_:1}),t(e(L),{class:"w-[5%]"},{default:l(()=>[t(P,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:s[5]||(s[5]=n=>e(F)("id"))},{default:l(()=>[t(Q,{icon:e(k)==="id"?"lucide:sort-asc":e(k)==="-id"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),s[13]||(s[13]=o("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),t(e(L),{class:"w-[20%]"},{default:l(()=>[t(P,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:s[6]||(s[6]=n=>e(F)("tagname"))},{default:l(()=>[t(Q,{icon:e(k)==="tagname"?"lucide:sort-asc":e(k)==="-tagname"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),s[14]||(s[14]=o("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),t(e(L),{class:"w-[20%]"},{default:l(()=>s[15]||(s[15]=[i("Description")])),_:1}),t(e(L),{class:"w-[40%]"},{default:l(()=>s[16]||(s[16]=[i("Devices")])),_:1}),t(e(L),{class:"w-[10%]"},{default:l(()=>s[17]||(s[17]=[i("Actions")])),_:1})]),_:1})]),_:1}),t(e($e),null,{default:l(()=>[e(g)?(a(),p(ye,{key:0})):e(g)?(a(),p(Ce,{key:2})):(a(!0),_(K,{key:1},W(e(u).data,n=>(a(),p(e(se),{key:n.id},{default:l(()=>[t(e(U),{class:"text-start"},{default:l(()=>[t(b,{class:"cursor-pointer",id:"select-"+n.id,checked:!!e(c).includes(n.id),onClick:z=>e(R)(n.id)},null,8,["id","checked","onClick"])]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[i(C(n.id),1)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[i(C(n.tagname),1)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[i(C(n.tagDescription),1)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[(a(!0),_(K,null,W(n.device.slice(0,8),(z,re)=>(a(),_("span",{key:z.device_name,class:"mr-2"},[t(J,{variant:"outline",class:"py-1 mt-1 hover:bg-rcgray-800"},{default:l(()=>[t(Y,{to:z.view_url},{default:l(()=>[i(C(z.device_name),1)]),_:2},1032,["to"])]),_:2},1024)]))),128)),n.device.length>8?(a(),_("span",ma,[t(Ne,{recordName:n.tagname,items:n.device,displayField:"device_name"},null,8,["recordName","items"])])):V("",!0)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[t(De,{rowData:n,onOnEdit:z=>e(B)(n.id),onOnDelete:z=>e(I)(n.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(he,{currentPage:e(v),lastPage:e(h),perPage:e(w),"onUpdate:currentPage":s[7]||(s[7]=n=>v.value=n),"onUpdate:perPage":s[8]||(s[8]=n=>w.value=n)},null,8,["currentPage","lastPage","perPage"]),(a(),p(ll,{onSave:s[9]||(s[9]=n=>e(r)()),key:e(A),editId:e(N)},null,8,["editId"])),t(ce,{ids:e(c),showConfirmDelete:e(y),onClose:s[10]||(s[10]=n=>y.value=!1),onHandleDelete:s[11]||(s[11]=n=>e(m)(e(c)))},null,8,["ids","showConfirmDelete"]),t(le)])])}}};function pa(x){const N=S(1),u=S(parseInt(localStorage.getItem("perPage")||"10")),v=S("-id"),w=S(""),d=S({}),h=Me(),g=S(0),T=S(!1),B=S(1),M=S(1),I=S([]),m=S(!1),r=Te(),{openDialog:y}=h,{toastSuccess:E,toastError:A}=Le();async function F(P={}){T.value=!0;try{const b=await Z.get("/api/templates",{params:{page:N.value,perPage:u.value,sort:v.value,...d.value}});I.value=b.data,B.value=b.data.last_page}catch(b){console.error("Error fetching templates:",b),A("Error","Failed to fetch templates.")}finally{T.value=!1}}function k(P){r.push({name:"templatesview",params:{id:P}})}const c=async P=>{try{await Z.delete(`/api/templates/${P}`),F(),E("Template Deleted","The template has been deleted successfully.")}catch(b){b.status===422?A("Error",b.response.data.message):(console.error("Error deleting template:",b),A("Error","Failed to delete template."))}},j=async P=>{try{await Z.post("/api/templates/delete-many",{ids:P}),F(),E("Templates Deleted","The templates have been deleted successfully."),m.value=!1,ie.emit("deleteManyTemplatesSuccess")}catch(b){b.status===422?A("Error",b.response.data.message):(console.error("Error deleting Templates:",b),A("Error","Failed to delete Templates.")),m.value=!1}},H=P=>{g.value=P,M.value=Math.random(),y("DialogNewTemplate")},R=()=>{F(),M.value=Math.random()};function q(P){P.altKey&&P.key==="n"&&(P.preventDefault(),y("DialogNewTemplate"))}const s=Re(()=>{d.value["filter[templateName]"]=w.value,N.value=1,F()},500);ne([N,u],()=>{F()}),ne(w,()=>{s()}),ne(u,P=>{localStorage.setItem("perPage",P.toString())});function O(P){v.value===P?v.value=`-${P}`:v.value=P,F()}return{templates:I,isLoading:T,currentPage:N,perPage:u,lastPage:B,editId:g,newTemplateModalKey:M,searchTerm:w,openDialog:y,fetchTemplates:F,viewTemplateDetailsPane:k,deleteTemplate:c,deleteManyTemplates:j,handleSave:R,handleKeyDown:q,viewEditDialog:H,toggleSort:O,sortParam:v,showConfirmDelete:m}}const va={class:"flex flex-col h-full gap-1 text-center"},ga={class:"flex items-center justify-between p-4"},_a={class:"flex items-center"},ya={class:"flex"},xa={class:"px-6"},ka={class:"border-b"},ba={key:0,class:"mr-2"},$a={__name:"Main",setup(x){const{templates:N,isLoading:u,currentPage:v,perPage:w,lastPage:d,editId:h,newTemplateModalKey:g,searchTerm:T,openDialog:B,fetchTemplates:M,viewTemplateDetailsPane:I,deleteTemplate:m,deleteManyTemplates:r,handleSave:y,handleKeyDown:E,viewEditDialog:A,toggleSort:F,sortParam:k,showConfirmDelete:c}=pa(),{importTemplates:j,importingTemplates:H}=ol(),{selectedRows:R,selectAll:q,toggleSelectAll:s,toggleSelectRow:O}=xe(N);return te(()=>{M(),window.addEventListener("keydown",E),ie.on("deleteManyTemplatesSuccess",()=>{R.value=[],q.value=!1,document.getElementById("selectAll").checked=!1})}),de(()=>{window.removeEventListener("keydown",E)}),(P,b)=>{const Q=f("Input"),Y=f("Button"),J=f("Icon"),le=f("Checkbox"),n=f("router-link"),z=f("Badge"),re=f("Toaster");return a(),_("div",va,[o("div",ga,[o("div",_a,[t(Q,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter templates...",modelValue:e(T),"onUpdate:modelValue":b[0]||(b[0]=G=>X(T)?T.value=G:null)},null,8,["modelValue"]),e(T)?(a(),p(ke,{key:0,"onUpdate:modelValue":b[1]||(b[1]=G=>T.value="")})):V("",!0)]),o("div",ya,[e(R).length?(a(),p(Y,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:b[2]||(b[2]=ee(G=>c.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[i(" Delete Selected "+C(e(R).length)+" Template(s) ",1)]),_:1})):V("",!0),t(Y,{type:"close",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700",onClick:b[3]||(b[3]=G=>e(j)()),variant:"outline"},{default:l(()=>[e(H)?V("",!0):(a(),p(J,{key:0,icon:"mdi:github",class:"mr-2"})),t(Ze,{state:e(H)},null,8,["state"]),b[13]||(b[13]=i(" Import Templates "))]),_:1}),t(Y,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:b[4]||(b[4]=ee(G=>e(I)(0),["prevent"])),variant:"primary"},{default:l(()=>b[14]||(b[14]=[i(" New Template "),o("div",{class:"pl-2 ml-auto"},[o("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])),_:1})])]),o("div",xa,[t(e(we),null,{default:l(()=>[t(e(be),null,{default:l(()=>[t(e(se),null,{default:l(()=>[t(e(L),{class:"w-[2%]"},{default:l(()=>[t(le,{id:"selectAll",modelValue:e(q),"onUpdate:modelValue":b[5]||(b[5]=G=>X(q)?q.value=G:null),checked:e(q),onClick:b[6]||(b[6]=G=>e(s)())},null,8,["modelValue","checked"])]),_:1}),t(e(L),{class:"w-[5%]"},{default:l(()=>[t(Y,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:b[7]||(b[7]=G=>e(F)("id"))},{default:l(()=>[t(J,{icon:e(k)==="id"?"lucide:sort-asc":e(k)==="-id"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),b[15]||(b[15]=o("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),t(e(L),{class:"w-[20%]"},{default:l(()=>[t(Y,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:b[8]||(b[8]=G=>e(F)("templateName"))},{default:l(()=>[t(J,{icon:e(k)==="templateName"?"lucide:sort-asc":e(k)==="-templateName"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),b[16]||(b[16]=o("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),t(e(L),{class:"w-[20%]"},{default:l(()=>b[17]||(b[17]=[i("Description")])),_:1}),t(e(L),{class:"w-[40%]"},{default:l(()=>b[18]||(b[18]=[i("Devices")])),_:1}),t(e(L),{class:"w-[10%]"},{default:l(()=>b[19]||(b[19]=[i("Actions")])),_:1})]),_:1})]),_:1}),t(e($e),null,{default:l(()=>[e(u)?(a(),p(ye,{key:0})):e(u)?(a(),p(Ce,{key:2})):(a(!0),_(K,{key:1},W(e(N).data,G=>(a(),p(e(se),{key:G.id},{default:l(()=>[t(e(U),{class:"text-start"},{default:l(()=>[t(le,{class:"cursor-pointer",id:"select-"+G.id,checked:!!e(R).includes(G.id),onClick:oe=>e(O)(G.id)},null,8,["id","checked","onClick"])]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[i(C(G.id),1)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[t(Y,{class:"px-2 py-0 text-sm hover:bg-rcgray-800 rounded-xl",variant:"ghost",onClick:oe=>e(I)(G.id)},{default:l(()=>[o("span",ka,C(G.templateName),1)]),_:2},1032,["onClick"])]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[i(C(G.description),1)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[(a(!0),_(K,null,W(G.device.slice(0,8),(oe,Ee)=>(a(),_("span",{key:oe.device_name,class:"mr-2"},[t(z,{variant:"outline",class:"py-1 mt-1 hover:bg-rcgray-800"},{default:l(()=>[t(n,{to:oe.view_url},{default:l(()=>[i(C(oe.device_name),1)]),_:2},1032,["to"])]),_:2},1024)]))),128)),G.device.length>8?(a(),_("span",ba,[t(Ne,{recordName:G.templateName,items:G.device,displayField:"device_name"},null,8,["recordName","items"])])):V("",!0)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[t(De,{rowData:G,onOnEdit:oe=>e(I)(G.id),onOnDelete:oe=>e(m)(G.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(he,{currentPage:e(v),lastPage:e(d),perPage:e(w),"onUpdate:currentPage":b[9]||(b[9]=G=>v.value=G),"onUpdate:perPage":b[10]||(b[10]=G=>w.value=G)},null,8,["currentPage","lastPage","perPage"]),t(ce,{ids:e(R),showConfirmDelete:e(c),onClose:b[11]||(b[11]=G=>c.value=!1),onHandleDelete:b[12]||(b[12]=G=>e(r)(e(R)))},null,8,["ids","showConfirmDelete"]),t(re)])])}}},Ca={class:"flex flex-col h-full gap-1 text-center"},wa={class:"flex items-center justify-between p-4"},ha={class:"flex items-center"},Da={class:"flex"},Ia={class:"px-6"},Sa={key:0,class:"mr-2"},Va={__name:"Main",setup(x){const{editId:N,vendors:u,currentPage:v,perPage:w,searchTerm:d,lastPage:h,isLoading:g,fetchVendors:T,viewEditDialog:B,createVendor:M,deleteVendor:I,deleteManyVendors:m,handleSave:r,handleKeyDown:y,newVendorModalKey:E,toggleSort:A,sortParam:F,showConfirmDelete:k}=dl(),{selectedRows:c,selectAll:j,toggleSelectAll:H,toggleSelectRow:R}=xe(u);return te(()=>{T(),window.addEventListener("keydown",y),ie.on("deleteManyVendorsSuccess",()=>{c.value=[],j.value=!1,document.getElementById("selectAll").checked=!1})}),de(()=>{window.removeEventListener("keydown",y)}),(q,s)=>{const O=f("Input"),P=f("Button"),b=f("Checkbox"),Q=f("Icon"),Y=f("router-link"),J=f("Badge"),le=f("Toaster");return a(),_("div",Ca,[o("div",wa,[o("div",ha,[t(O,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter vendors...",modelValue:e(d),"onUpdate:modelValue":s[0]||(s[0]=n=>X(d)?d.value=n:null)},null,8,["modelValue"]),e(d)?(a(),p(ke,{key:0,"onUpdate:modelValue":s[1]||(s[1]=n=>d.value="")})):V("",!0)]),o("div",Da,[e(c).length?(a(),p(P,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:s[2]||(s[2]=ee(n=>k.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[i(" Delete Selected "+C(e(c).length)+" Tag(s) ",1)]),_:1})):V("",!0),t(P,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:ee(e(M),["prevent"]),variant:"primary"},{default:l(()=>s[12]||(s[12]=[i(" New Vendor "),o("div",{class:"pl-2 ml-auto"},[o("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])),_:1},8,["onClick"])])]),o("div",Ia,[t(e(we),null,{default:l(()=>[t(e(be),null,{default:l(()=>[t(e(se),null,{default:l(()=>[t(e(L),{class:"w-[2%]"},{default:l(()=>[t(b,{id:"selectAll",modelValue:e(j),"onUpdate:modelValue":s[3]||(s[3]=n=>X(j)?j.value=n:null),checked:e(j),onClick:s[4]||(s[4]=n=>e(H)())},null,8,["modelValue","checked"])]),_:1}),t(e(L),{class:"w-[5%]"},{default:l(()=>[t(P,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:s[5]||(s[5]=n=>e(A)("id"))},{default:l(()=>[t(Q,{icon:e(F)==="id"?"lucide:sort-asc":e(F)==="-id"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),s[13]||(s[13]=o("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),t(e(L),{class:"w-[20%]"},{default:l(()=>[t(P,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:s[6]||(s[6]=n=>e(A)("vendorName"))},{default:l(()=>[t(Q,{icon:e(F)==="vendorName"?"lucide:sort-asc":e(F)==="-vendorName"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),s[14]||(s[14]=o("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),t(e(L),{class:"w-[50%]"},{default:l(()=>s[15]||(s[15]=[i("Devices")])),_:1}),t(e(L),{class:"w-[10%]"},{default:l(()=>s[16]||(s[16]=[i("Actions")])),_:1})]),_:1})]),_:1}),t(e($e),null,{default:l(()=>[e(g)?(a(),p(ye,{key:0})):e(g)?(a(),p(Ce,{key:2})):(a(!0),_(K,{key:1},W(e(u).data,n=>(a(),p(e(se),{key:n.id},{default:l(()=>[t(e(U),{class:"text-start"},{default:l(()=>[t(b,{class:"cursor-pointer",id:"select-"+n.id,checked:!!e(c).includes(n.id),onClick:z=>e(R)(n.id)},null,8,["id","checked","onClick"])]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[i(C(n.id),1)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[i(C(n.vendorName),1)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[(a(!0),_(K,null,W(n.device.slice(0,8),(z,re)=>(a(),_("span",{key:z.device_name,class:"mr-2"},[t(J,{variant:"outline",class:"py-1 mt-1 hover:bg-rcgray-800"},{default:l(()=>[t(Y,{to:z.view_url},{default:l(()=>[i(C(z.device_name),1)]),_:2},1032,["to"])]),_:2},1024)]))),128)),n.device.length>8?(a(),_("span",Sa,[t(Ne,{recordName:n.vendorName,items:n.device,displayField:"device_name"},null,8,["recordName","items"])])):V("",!0)]),_:2},1024),t(e(U),{class:"text-start"},{default:l(()=>[t(De,{rowData:n,onOnEdit:z=>e(B)(n.id),onOnDelete:z=>e(I)(n.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(he,{currentPage:e(v),lastPage:e(h),perPage:e(w),"onUpdate:currentPage":s[7]||(s[7]=n=>v.value=n),"onUpdate:perPage":s[8]||(s[8]=n=>w.value=n)},null,8,["currentPage","lastPage","perPage"]),(a(),p(il,{onSave:s[9]||(s[9]=n=>e(r)()),key:e(E),editId:e(N)},null,8,["editId"])),t(ce,{ids:e(c),showConfirmDelete:e(k),onClose:s[10]||(s[10]=n=>k.value=!1),onHandleDelete:s[11]||(s[11]=n=>e(m)(e(c)))},null,8,["ids","showConfirmDelete"]),t(le)])])}}};function Pa(){const x=Ut(),N=S(localStorage.getItem("inventorySelectedView")||"devices"),u=Xe(),v=Te(),w=[{id:"devices",label:"Devices",icon:"DeviceIcon",isFavorite:S(!1),route:"/devices"},{id:"commandgroups",label:"Command Groups",icon:"CommandGroupIcon",isFavorite:S(!1),route:"/commandgroups"},{id:"commands",label:"Commands",icon:"CommandsIcon",isFavorite:S(!1),route:"/commands"},{id:"templates",label:"Templates",icon:"TemplateIcon",isFavorite:S(!1),route:"/templates"},{id:"vendors",label:"Vendors",icon:"VendorIcon",isFavorite:S(!1),route:"/vendors"},{id:"tags",label:"Tags",icon:"TagIcon",isFavorite:S(!1),route:"/tags"}];te(()=>{u.params.view?d(u.params.view):u.name==="devicesview"?d(u.name):u.path.includes("inventory")||d(u.name);const g=u.query;Object.keys(g).length>0&&v.push({name:N.value,query:g}),w.forEach(T=>{T.isFavorite.value=x.isFavorite(T.id)})});function d(g){localStorage.setItem("inventorySelectedView",g),N.value=g,v.push({name:g})}function h(g){const T=w.find(B=>B.id===g);T&&(T.isFavorite.value=!T.isFavorite.value,x.toggleFavorite(T))}return{changeView:d,currentView:N,favoritesStore:x,route:u,router:v,toggleFavorite:h,viewItems:w}}const Ta={class:"flex flex-col flex-1 gap-2 dark:bg-rcgray-900"},Na={class:"border-t border-b topRow"},Ea={class:"flex items-center gap-2"},Ba={class:"flex items-center gap-2 mr-4"},Aa={class:"flex items-center gap-2"},Ra={__name:"Main",setup(x){const{changeView:N,currentView:u,toggleFavorite:v,viewItems:w}=Pa();return(d,h)=>{const g=f("Icon"),T=f("Button"),B=f("StarUnselected"),M=f("StarSelected");return a(),_("main",Ta,[o("div",Na,[t(e(Je),null,{default:l(()=>{var I,m;return[t(e(Ye),{"as-child":"",class:"p-4 ml-2"},{default:l(()=>[t(T,{variant:"outline"},{default:l(()=>[o("span",Ea,[t(g,{icon:"fluent-color:pin-16"}),h[0]||(h[0]=i(" Select View "))])]),_:1})]),_:1}),o("div",Ba,[(a(),p(qe(((I=e(w).find(r=>r.id===e(u)))==null?void 0:I.icon)||""))),i(" "+C(((m=e(w).find(r=>r.id===e(u)))==null?void 0:m.label)||""),1)]),t(e(We),{class:"w-56",align:"start"},{default:l(()=>[t(e(Qt),null,{default:l(()=>[(a(!0),_(K,null,W(e(w),r=>(a(),p(e(fe),{key:r.id,onClick:y=>e(N)(r.id)},{default:l(()=>[o("span",Aa,[(a(),p(qe(r.icon))),i(" "+C(r.label),1)]),t(e(Lt),null,{default:l(()=>[t(e(Mt),null,{default:l(()=>[t(e(jt),{"as-child":""},{default:l(()=>[t(e(pe),{onClick:ee(y=>e(v)(r.id),["stop","prevent"])},{default:l(()=>[r.isFavorite.value?V("",!0):(a(),p(B,{key:0})),r.isFavorite.value?(a(),p(M,{key:1})):V("",!0)]),_:2},1032,["onClick"])]),_:2},1024),t(e(Ot),null,{default:l(()=>[o("p",null,C(r.isFavorite.value?"Remove from favorites":"Add to favorites"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]}),_:1})]),o("div",null,[e(u)==="devices"||e(u)==="devicesview"?(a(),p(oa,{key:0})):V("",!0),e(u)==="commandgroups"?(a(),p(Ol,{key:1})):V("",!0),e(u)==="commands"?(a(),p(Bl,{key:2})):V("",!0),e(u)==="templates"?(a(),p($a,{key:3})):V("",!0),e(u)==="vendors"?(a(),p(Va,{key:4})):V("",!0),e(u)==="tags"?(a(),p(fa,{key:5})):V("",!0)])])}}};export{Ra as default};
