import{e as L,F as A,C as G}from"./ConfigFullScreenView-DJO1WVyR.js";import{D as R}from"./DeviceViewDeviceDetailsDescr-Is3sApcN.js";import{e as M,r as g,l as D,s as I,p as _,o as b,c as k,a as e,b as c,G as H,k as S,d as h,H as K,w as U,n as W,j as C,q as J,F as Q,y as X}from"./app-C9AuNpcX.js";import{D as Y}from"./DevicesBreadcrumbs-fdqai0xq.js";import{L as Z}from"./LoadingSpinner-BDNkgvVg.js";import{u as $}from"./index-CW83e1Gb.js";import{P as ee}from"./PageHeader-C0d3TrAV.js";import{S as te}from"./SideDrawer-DIYcDlTF.js";import"./CopyLogo-BaR-5sZr.js";/* empty css               */const oe={props:{configModel:{required:!0}},components:{DeviceViewDeviceDetailsDescr:R},setup(r){const t=g("Downloaded"),n=D("formatTime");I(()=>{r.configModel.download_status=="1"?t.value='<i class="fa fa-check-circle pf-u-success-color-100"></i><span class="pf-u-color-400">&nbsp; Good config</span>':(r.configModel.download_status=="0"||r.configModel.download_status=="2")&&(t.value='<i class="fa fa-exclamation-triangle pf-u-warning-color-100"></i><span class="pf-u-color-400">&nbsp; Config status unknown</span>')});function o(s){var f=["B","KB","MB","GB","TB"];if(s==0)return"0 Byte";var i=parseInt(Math.floor(Math.log(s)/Math.log(1024)));return Math.round(s/Math.pow(1024,i),2)+" "+f[i]}return{statusText:t,bytesToSize:o,formatTime:n}}},ie={class:"pf-c-card"},ne={class:"pf-c-card__body"},le={class:"pf-c-description-list pf-m-horizontal pf-m-vertical-on-md pf-m-horizontal-on-lg pf-m-vertical-on-xl pf-m-horizontal-on-2xl"},se={class:"pf-c-description-list__group"},ae={class:"pf-c-description-list__group"},ce={class:"pf-c-description-list__group"},de={class:"pf-c-description-list__group"},re={class:"pf-c-description-list__group"},fe={class:"pf-c-description-list__group"},pe={class:"pf-c-description-list__group"},me={class:"pf-c-description-list__group"},ue={class:"pf-c-description-list__group"},ge={class:"pf-c-description-list__group"};function _e(r,t,n,o,s,f){const i=_("device-view-device-details-descr");return b(),k("div",ie,[t[10]||(t[10]=e("div",{class:"pf-c-card__title"},[e("h2",{class:"pf-c-title pf-m-lg"},"Config Details")],-1)),e("div",ne,[e("dl",le,[e("div",se,[t[0]||(t[0]=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Status")],-1)),c(i,{html:o.statusText},null,8,["html"])]),e("div",ae,[t[1]||(t[1]=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Config ID")],-1)),c(i,{text:n.configModel.id},null,8,["text"])]),e("div",ce,[t[2]||(t[2]=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Device ID")],-1)),c(i,{text:n.configModel.device_id},null,8,["text"])]),e("div",de,[t[3]||(t[3]=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Device Name")],-1)),c(i,{text:n.configModel.device_name},null,8,["text"])]),e("div",re,[t[4]||(t[4]=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Category")],-1)),c(i,{text:n.configModel.device_category},null,8,["text"])]),e("div",fe,[t[5]||(t[5]=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Command")],-1)),c(i,{text:n.configModel.command},null,8,["text"])]),e("div",pe,[t[6]||(t[6]=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Filename")],-1)),c(i,{text:n.configModel.config_filename},null,8,["text"])]),e("div",me,[t[7]||(t[7]=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Filesize")],-1)),c(i,{text:o.bytesToSize(n.configModel.config_filesize)},null,8,["text"])]),e("div",ue,[t[8]||(t[8]=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Download Duration")],-1)),c(i,{text:n.configModel.duration+" second"},null,8,["text"])]),e("div",ge,[t[9]||(t[9]=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Downloaded At")],-1)),c(i,{text:o.formatTime(n.configModel.created_at)},null,8,["text"])])])])])}const ve=M(oe,[["render",_e]]),be={props:{config_id:{type:[Number,String],required:!0},viewstate:{type:Object,required:!0},configModel:{type:Object,required:!0}},components:{},emits:["showConfigFullScreen"],setup(r,{emit:t}){const n=g(""),o=g(!1),s=D("create-notification"),f=g("rconfig"),i=g(["Loading file..."].join(`
`));H();const{toClipboard:w}=$();let d=null;I(()=>{u(),N(),B(),v();const a=document.getElementById("code-editor");d=L.create(a,{value:i.value,language:f.value||"javascript",lineNumbers:p.value,roundedSelection:!1,readOnly:!1,theme:l.value,scrollBeyondLastLine:!0,wordWrap:"on",automaticLayout:!0,minimap:{enabled:!1}})});function v(){axios.get("/api/configs/view-config/"+r.config_id).then(a=>{n.value=a.data.data,d.getModel().setValue(a.data.data)}).catch(a=>{d.updateOptions({value:"Something went wrong - could not retrieve the configuration from the file system!"}),s({type:"danger",title:"Error",message:a.response})})}function y(){t("showConfigFullScreen",{code:n.value,filename:r.configModel.config_filename})}const l=g("vs");function u(){localStorage.getItem("rConfig.editordarkmode")===null?(l.value="vs",localStorage.setItem("rConfig.editordarkmode",l.value)):l.value=localStorage.getItem("rConfig.editordarkmode")}function E(a){a.target.checked?(l.value="vs-dark",localStorage.setItem("rConfig.editordarkmode",l.value)):(l.value="vs",localStorage.setItem("rConfig.editordarkmode",l.value)),L.setTheme(l.value)}const p=g("on");function N(){localStorage.getItem("rConfig.editorlineNumbers")===null?(p.value="on",localStorage.setItem("rConfig.editorlineNumbers",p.value)):p.value=localStorage.getItem("rConfig.editorlineNumbers")}function T(a){a.target.checked?(p.value="on",localStorage.setItem("rConfig.editorlineNumbers",p.value)):(p.value="off",localStorage.setItem("rConfig.editorlineNumbers",p.value)),d.updateOptions({lineNumbers:p.value})}const m=S({enabled:!0});function B(){localStorage.getItem("rConfig.editorMinimap")===null?(m.enabled=!1,localStorage.setItem("rConfig.editorMinimap",m.enabled)):m.enabled=localStorage.getItem("rConfig.editorMinimap")}function O(a){a.target.checked?(m.enabled=!0,localStorage.setItem("rConfig.editorMinimap",m.enabled)):(m.enabled=!1,localStorage.setItem("rConfig.editorMinimap",m.enabled)),d.updateOptions({minimap:{enabled:m.enabled}})}const F=async(a,x)=>{try{var P=typeof x=="string"?x:d.getValue();await w(P),o.value=!0,setTimeout(()=>{o.value=!1},3e3),s({type:"success",title:"Copy Success",message:a+" copied to clipboard"})}catch(q){s({type:"danger",title:"Error",message:q})}},j=async a=>{F("Path",a)};function V(a=null){const x=new Blob([d.getValue()],{type:"text/plain;charset=utf-8"});A.saveAs(x,a??"template.yml")}function z(){d.focus(),d.getAction("actions.find").run()}return{checkDarkModeIsSet:u,checkLineNumbersIsSet:N,checkMiniMapIsSet:B,copy:F,copyPath:j,darkmode:l,download:V,lineNumbers:p,minimap:m,search:z,showConfigFullScreen:y,toggleEditorDarkMode:E,toggleEditorLineNumbers:T,toggleEditorMinimap:O}}},we={class:"pf-c-card"},ye={class:"pf-c-card__header pf-l-flex"},he={class:"pf-c-check pf-l-flex__item pf-m-align-right"},ke=["checked"],xe={class:"pf-c-check",style:{"align-content":"center"}},Ce=["checked"],Se={class:"pf-c-check",style:{"align-content":"center"}},Me=["checked"],De={class:"pf-c-card__body"},Ie={class:"pf-c-code-editor"},Ne={class:"pf-c-code-editor__header"},Be={class:"pf-c-code-editor__controls"};function Fe(r,t,n,o,s,f){return b(),k("div",we,[e("div",ye,[t[11]||(t[11]=e("h2",{class:"pf-c-title pf-m-xl pf-l-flex__item"},"Config Output",-1)),e("div",he,[e("input",{class:"pf-c-check__input",type:"checkbox",id:"darkmode",name:"darkmode",onChange:t[0]||(t[0]=i=>o.toggleEditorDarkMode(i)),checked:o.darkmode=="vs-dark",style:{"margin-left":"0.5rem"}},null,40,ke),t[8]||(t[8]=e("label",{class:"pf-c-check__label",style:{cursor:"default",color:"#6a6e73"}},[e("small",null,"Dark Mode")],-1))]),e("div",xe,[e("input",{class:"pf-c-check__input pf-u-hidden pf-u-display-inline-block-on-md",type:"checkbox",id:"lineNumbers",name:"lineNumbers",onChange:t[1]||(t[1]=i=>o.toggleEditorLineNumbers(i)),checked:o.lineNumbers=="on",style:{"margin-left":"0.5rem"}},null,40,Ce),t[9]||(t[9]=e("label",{class:"pf-c-check__label pf-u-hidden pf-u-display-inline-block-on-md",style:{cursor:"default",color:"#6a6e73"}},[e("small",null,"Line Numbers")],-1))]),e("div",Se,[e("input",{class:"pf-c-check__input pf-u-hidden pf-u-display-inline-block-on-md",type:"checkbox",id:"lineNumbers",name:"lineNumbers",onChange:t[2]||(t[2]=i=>o.toggleEditorMinimap(i)),checked:o.minimap.enabled=="true",style:{"margin-left":"0.5rem"}},null,40,Me),t[10]||(t[10]=e("label",{class:"pf-c-check__label pf-u-hidden pf-u-display-inline-block-on-md",style:{cursor:"default",color:"#6a6e73"}},[e("small",null,"Minimap")],-1))])]),e("div",De,[e("div",Ie,[e("div",Ne,[e("div",Be,[t[17]||(t[17]=e("br",null,null,-1)),e("button",{class:"pf-c-button pf-m-small pf-m-control",type:"button",label:"Copy to clipboard",title:"Copy to clipboard",onClick:t[3]||(t[3]=i=>o.copy("Config")),style:{"padding-left":"6px","padding-right":"6px"}},t[12]||(t[12]=[e("span",{class:"pf-c-button__icon pf-m-start"},[e("i",{class:"fas fa-copy","aria-hidden":"true"})],-1),h(" Config ")])),e("button",{class:"pf-c-button pf-m-small pf-m-control pf-u-hidden pf-u-display-inline-block-on-md",type:"button",label:"Copy to clipboard",title:"Copy to clipboard",onClick:t[4]||(t[4]=i=>o.copyPath(n.configModel.config_location)),style:{"padding-left":"6px","padding-right":"6px"}},t[13]||(t[13]=[e("span",{class:"pf-c-button__icon pf-m-start"},[e("i",{class:"fas fa-copy","aria-hidden":"true"})],-1),h(" Path ")])),e("button",{class:"pf-c-button pf-m-small pf-m-control pf-u-hidden pf-u-display-inline-block-on-md",type:"button",label:"Download config file",title:"Download config file",onClick:t[5]||(t[5]=i=>o.download(n.configModel.config_filename)),style:{"padding-left":"6px","padding-right":"6px"}},t[14]||(t[14]=[e("span",{class:"pf-c-button__icon pf-m-start"},[e("i",{class:"fa fa-download","aria-hidden":"true"})],-1),h(" Download ")])),e("button",{class:"pf-c-button pf-m-small pf-m-control pf-u-hidden pf-u-display-inline-block-on-md",type:"button",label:"Search the config file",title:"Search the config file",onClick:t[6]||(t[6]=(...i)=>o.search&&o.search(...i)),style:{"padding-left":"6px","padding-right":"6px"}},t[15]||(t[15]=[e("span",{class:"pf-c-button__icon pf-m-start"},[e("i",{class:"fa fa-search","aria-hidden":"true"})],-1),h(" Search ")])),e("button",{class:"pf-c-button pf-m-control pf-u-hidden pf-u-display-inline-block-on-md",type:"button",title:"full screen",alt:"full screen",onClick:t[7]||(t[7]=(...i)=>o.showConfigFullScreen&&o.showConfigFullScreen(...i))},t[16]||(t[16]=[e("i",{class:"fas fa-expand"},null,-1)]))]),t[18]||(t[18]=e("div",{class:"pf-c-code-editor__tab"},[e("span",{class:"pf-c-code-editor__tab-icon"},[e("i",{class:"fas fa-code"})]),e("span",{class:"pf-c-code-editor__tab-text"},"Configuration")],-1))]),t[19]||(t[19]=e("div",{class:"pf-c-code-editor__main",id:"pf-c-code-editor__main"},[e("code",{class:"pf-c-code-editor__code"},[e("div",{class:"pf-c-code-editor__code-pre",id:"code-editor",style:{height:"80vh"}})])],-1))])])])}const Le=M(be,[["render",Fe],["__scopeId","data-v-a46245cb"]]),Ee={props:{},components:{ConfigFullScreenView:G,DevicesBreadcrumbs:Y,PageHeader:ee,LoadingSpinner:Z,MonacoCodePanel:Le,DeviceViewConfigDetailsPanel:ve,SideDrawer:te},setup(r){const n=X().params.id,o=S({}),s=S({editid:0,pagename:"Configuration",pagedesc:"View your downloaded configuration file",pagenamesingle:"config",modelName:"configs",isLoading:!1,modelObject:{code:""}}),f=g(!1),i=D("create-notification");I(()=>{w(),window.addEventListener("wheel",v,{passive:!0})}),K(()=>{window.removeEventListener("wheel",v)});function w(){s.isLoading=!0,axios.get("/api/configs/"+n).then(l=>{Object.assign(o,l.data),s.isLoading=!1}).catch(l=>{i({type:"danger",title:"Error",message:l.response}),s.isLoading=!1})}function d(l){s.modelObject.code=l.code,s.modelObject.filename=l.filename,s.modelObject.language="default",s.configFullScreen=!0}const v=l=>{document.getElementById("top_div").getBoundingClientRect().top<0?f.value=!0:f.value=!1};function y(){document.getElementById("top_div").scrollIntoView({behavior:"smooth"})}return{configModel:o,config_id:n,scrollToTop:y,showScrollBtn:f,showConfigFullScreen:d,viewstate:s}}},Te={class:"pf-c-page__main",tabindex:"-1"},Oe={class:"pf-c-page__main-section pf-m-no-padding"},je={class:"pf-c-drawer__main"},Ve={class:"pf-c-drawer__content pf-m-no-background"},ze={class:"pf-c-drawer__body pf-m-padding"},Pe={key:0,class:"pf-l-grid pf-m-gutter"},qe={class:"pf-l-grid__item pf-m-12-col pf-m-3-col-on-md"},Ae={class:"pf-l-grid__item pf-m-12-col pf-m-9-col-on-md"},Ge={key:1,class:"pf-c-back-to-top"};function Re(r,t,n,o,s,f){const i=_("devices-breadcrumbs"),w=_("page-header"),d=_("loading-spinner"),v=_("device-view-config-details-panel"),y=_("monaco-code-panel"),l=_("config-full-screen-view");return b(),k(Q,null,[e("main",Te,[c(w,{pagename:o.viewstate.pagename},{breadcrumbs:U(()=>[c(i,{devicename:o.configModel.device_name,deviceId:o.configModel.device_id},null,8,["devicename","deviceId"])]),_:1},8,["pagename"]),t[4]||(t[4]=e("div",{class:"pf-c-divider",role:"separator"},null,-1)),e("section",Oe,[e("div",{class:W(["pf-c-drawer",{"pf-m-expanded":o.viewstate.openDrawerState}]),id:"top_div"},[e("div",je,[e("div",Ve,[e("div",ze,[c(d,{showSpinner:o.viewstate.isLoading},null,8,["showSpinner"]),o.viewstate.isLoading?C("",!0):(b(),k("div",Pe,[e("div",qe,[c(v,{configModel:o.configModel},null,8,["configModel"])]),e("div",Ae,[c(y,{config_id:o.config_id,viewstate:o.viewstate,configModel:o.configModel,onShowConfigFullScreen:t[0]||(t[0]=u=>o.showConfigFullScreen(u))},null,8,["config_id","viewstate","configModel"])])])),o.showScrollBtn?(b(),k("div",Ge,[e("button",{class:"pf-c-button pf-m-primary",onClick:t[1]||(t[1]=(...u)=>o.scrollToTop&&o.scrollToTop(...u))},t[3]||(t[3]=[h(" Back to top "),e("span",{class:"pf-c-button__icon pf-m-end"},[e("i",{class:"fas fa-angle-up","aria-hidden":"true"})],-1)]))])):C("",!0)])])])],2)])]),o.viewstate.configFullScreen?(b(),J(l,{key:0,onCloseModal:t[2]||(t[2]=u=>o.viewstate.configFullScreen=!1),editid:o.viewstate.editid,code:o.viewstate.modelObject.code,filename:o.viewstate.modelObject.filename,language:o.viewstate.modelObject.language},null,8,["editid","code","filename","language"])):C("",!0)],64)}const et=M(Ee,[["render",Re]]);export{et as default};
