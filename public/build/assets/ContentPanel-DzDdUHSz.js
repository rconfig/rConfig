import{I as fe,r as S,A,c as x,o as a,d as _,j as s,t as b,e,w as n,q as le,k as v,h as C,an as re,b as Ge,ao as Se,f as t,X as Ne,F as ve,G as pe,z as N,Z as te,aj as Ve,ak as Ee,al as Le,am as Te,ai as at,aa as oe,T as qe,ag as ge,ap as Ae,aq as it,ar as he,as as dt,at as ct,C as je,au as rt,_ as ye,g as be,i as $e,m as ke,$ as Ue,a0 as Ke,a1 as de,a2 as Ye,ah as ut,p as He,u as me,J as ue,a as J,a5 as Qe,av as Je,K as ft,L as mt,M as vt,N as pt,aw as gt,V as Be,Q as _t,R as wt,af as xt}from"./app-Cmnl06IG.js";import{a as ht,_ as yt,b as bt,c as $t,d as We}from"./useTemplatesGithub-DzloYLtc.js";import{a as kt,b as se,c as Dt,f as It,q as ce,r as Xe,h as Ct}from"./useRowSelection-Bwz-dS1f.js";import{_ as St,a as Nt,u as Ze,m as et,b as ne,c as tt,d as Vt}from"./ToggleGroupItem-IA80CT5g.js";import{u as Et,_ as Lt,a as Tt,b as jt}from"./useCopy-C59AqupT.js";import{_ as Bt}from"./CardFooter.vue_vue_type_script_setup_true_lang-bznV18Nd.js";import{_ as st}from"./useCredentials-weXWUR9j.js";import{_ as Pe,a as ze,b as Re,c as Me,d as Fe,e as Oe}from"./SelectScrollDownButton--Y262eTF.js";/* empty css               */import"./TagMultiSelect.vue_vue_type_script_setup_true_lang-DIAxWA6h.js";import"./eventBus-CGRXT3Tn.js";import"./Switch-XjornWR5.js";const Pt={class:"p-2 overflow-none"},zt={class:"flex flex-row items-center justify-start gap-2 pt-1"},Rt={class:"inline-flex flex-row items-center h-[24px] rounded-md px-1.5 py-0.5 gap-1 shadow-[inset_0_0_0_1px_rgb(69,71,74)] bg-[#313337]"},Mt={class:"flex-[0_1_auto] min-w-0 overflow-hidden text-ellipsis whitespace-nowrap inline-flex line-clamp-1"},Ft={key:0,class:"mt-4 space-y-2"},Ot={key:1,class:"mt-6 space-y-4"},Gt={class:"flex items-center justify-end mt-4 space-x-2"},qt={__name:"DeviceConfigsViewPanelAll",props:{deviceId:Number},emits:["toggle-view"],setup(o,{emit:k}){const f=k,l=o;fe();const i=S({}),d=S(!1);A(()=>{g()});function p(){axios.get("/api/configs/latest-by-deviceid/"+l.deviceId).then(m=>{i.value=m.data.data}).catch(m=>{console.log(m)})}function g(){d.value=!0,p(),setTimeout(()=>{d.value=!1},1e3)}function c(){f("toggle-view","latest")}return(m,w)=>{const $=x("Icon"),r=x("Button"),u=x("Skeleton");return a(),_("div",null,[s("div",Pt,[s("div",zt,[s("span",Rt,[s("span",Mt,"All Config Downloads for Device ID: "+b(l.deviceId),1)]),w[0]||(w[0]=s("span",{class:"flex-1 bg-[rgb(49,51,55)] bg-[rgb(49,51,55)] flex-shrink-0 h-px w-full"},null,-1)),e(r,{type:"button",title:"Refresh",variant:"ghost",onClick:g,class:"p-2 h-7"},{default:n(()=>[e($,{icon:"charm:refresh",class:le([d.value?"w-4 h-4 text-blue-500 animate-spin":"w-4 h-4 text-gray-600 hover:text-blue-500","w-4 h-4"])},null,8,["class"])]),_:1})]),d.value?(a(),_("div",Ft,[e(u,{class:"w-1/2 h-4"}),e(u,{class:"w-full h-4"}),e(u,{class:"w-full h-4"}),e(u,{class:"w-full h-4"}),e(u,{class:"w-full h-4"}),e(u,{class:"w-full h-4"}),e(u,{class:"w-full h-4"}),e(u,{class:"w-full h-4"}),e(u,{class:"w-full h-4"})])):v("",!0),d.value?v("",!0):(a(),_("div",Ot,[e(St,{configsId:o.deviceId},null,8,["configsId"])])),s("div",Gt,[e(r,{variant:"outline",onClick:c,class:"text-center"},{default:n(()=>w[1]||(w[1]=[C(" View Latest >> ")])),_:1})])])])}}},At={class:"p-2 overflow-none"},Ut={class:"flex flex-row items-center justify-start gap-2 pt-1"},Kt={class:"inline-flex flex-row items-center h-[24px] rounded-md px-1.5 gap-1 shadow-[inset_0_0_0_1px_rgb(69,71,74)] bg-[#313337]"},Yt={class:"flex-[0_1_auto] min-w-0 overflow-hidden text-ellipsis whitespace-nowrap inline-flex line-clamp-1 items-center"},Ht={key:0,class:"mt-4 space-y-2"},Qt={key:1,class:"mt-6 space-y-4"},Jt={class:"border-b"},Wt={class:"flex items-center justify-end mt-4 space-x-2"},Xt={__name:"DeviceConfigsViewPanelLatest",props:{deviceId:Number},emits:["toggle-view"],setup(o,{emit:k}){const f=k,l=o,i=fe(),{openDialog:d,closeDialog:p,isDialogOpen:g}=i,c=S({}),m=S(!1),w=re("formatters"),$=Ge();A(()=>{u()});function r(){axios.get("/api/configs/latest-by-deviceid/"+l.deviceId).then(E=>{c.value=E.data.data}).catch(E=>{console.log(E)})}function u(){m.value=!0,r(),setTimeout(()=>{m.value=!1},1e3)}function T(){f("toggle-view","all")}function V(E){$.push({name:"configsview",params:{id:parseInt(E)},query:{ref:"devicesview",refId:l.deviceId}})}return(E,D)=>{const M=x("Icon"),B=x("Button"),P=x("Skeleton"),O=x("StatusRedIcon"),G=x("StatusYellowIcon");return a(),_("div",null,[s("div",At,[s("div",Ut,[s("span",Kt,[s("span",Yt,[e(Se,{class:"mr-2"}),D[0]||(D[0]=C(" Latest Good Config Downloads "))])]),D[1]||(D[1]=s("span",{class:"flex-1 bg-[rgb(49,51,55)] bg-[rgb(49,51,55)] flex-shrink-0 h-px w-full"},null,-1)),e(B,{type:"button",title:"Refresh",variant:"ghost",onClick:u,class:"p-2 h-7"},{default:n(()=>[e(M,{icon:"charm:refresh",class:le([m.value?"w-4 h-4 text-blue-500 animate-spin":"w-4 h-4 text-gray-600 hover:text-blue-500","w-4 h-4"])},null,8,["class"])]),_:1})]),m.value?(a(),_("div",Ht,[e(P,{class:"w-1/2 h-4"}),e(P,{class:"w-full h-4"}),e(P,{class:"w-full h-4"}),e(P,{class:"w-full h-4"}),e(P,{class:"w-full h-4"}),e(P,{class:"w-full h-4"}),e(P,{class:"w-full h-4"}),e(P,{class:"w-full h-4"}),e(P,{class:"w-full h-4"})])):v("",!0),m.value?v("",!0):(a(),_("div",Qt,[e(t(It),null,{default:n(()=>[e(t(kt),null,{default:n(()=>[e(t(Ne),null,{default:n(()=>[e(t(se),{class:"w-[2%]"},{default:n(()=>D[2]||(D[2]=[C("ID")])),_:1}),e(t(se),{class:"w-[10%]"},{default:n(()=>D[3]||(D[3]=[C("Command")])),_:1}),e(t(se),{class:"w-[10%]"},{default:n(()=>D[4]||(D[4]=[C("Filename")])),_:1}),e(t(se),{class:"w-[10%]"},{default:n(()=>D[5]||(D[5]=[C("Filesize")])),_:1}),e(t(se),{class:"w-[10%]"},{default:n(()=>D[6]||(D[6]=[C("Downloaded At")])),_:1}),e(t(se),{class:"w-[10%]"},{default:n(()=>D[7]||(D[7]=[C("Status")])),_:1}),e(t(se),{class:"w-[10%]"},{default:n(()=>D[8]||(D[8]=[C("Actions")])),_:1})]),_:1})]),_:1}),e(t(Dt),null,{default:n(()=>[(a(!0),_(ve,null,pe(c.value,I=>(a(),N(t(Ne),null,{default:n(()=>[e(t(te),null,{default:n(()=>D[9]||(D[9]=[C("1")])),_:1}),e(t(te),null,{default:n(()=>[C(b(I.command),1)]),_:2},1024),e(t(te),null,{default:n(()=>[e(B,{class:"px-2 py-0 hover:bg-rcgray-800 rounded-xl",variant:"ghost",onClick:q=>V(I.id)},{default:n(()=>[s("span",Jt,b(I.config_filename),1)]),_:2},1032,["onClick"])]),_:2},1024),e(t(te),null,{default:n(()=>[C(b(I.config_filesize?t(w).formatFileSize(I.config_filesize):""),1)]),_:2},1024),e(t(te),null,{default:n(()=>[C(b(t(w).formatTime(I.created_at)),1)]),_:2},1024),e(t(te),null,{default:n(()=>[I.download_status===0?(a(),N(O,{key:0})):v("",!0),I.download_status===1?(a(),N(Se,{key:1})):v("",!0),I.download_status===2?(a(),N(G,{key:2})):v("",!0)]),_:2},1024),e(t(te),{class:"flex items-center"},{default:n(()=>[e(t(Ve),null,{default:n(()=>[e(t(Ee),null,{default:n(()=>[e(t(Le),{"as-child":""},{default:n(()=>[e(B,{variant:"ghost",onClick:q=>t(d)("peek-config-dialog-"+I.id)},{default:n(()=>[e(M,{icon:"lets-icons:view-alt-fill",class:"size-6 text-muted-foreground hover:text-blue-500"})]),_:2},1032,["onClick"])]),_:2},1024),e(t(Te),{class:"text-white bg-rcgray-800"},{default:n(()=>D[10]||(D[10]=[s("p",null,"Peek Config",-1)])),_:1})]),_:2},1024)]),_:2},1024),e(t(Ve),null,{default:n(()=>[e(t(Ee),null,{default:n(()=>[e(t(Le),{"as-child":""},{default:n(()=>[e(B,{variant:"ghost",onClick:q=>V(I.id)},{default:n(()=>[e(M,{icon:"hugeicons:file-view",class:"size-5 text-muted-foreground hover:text-blue-500"})]),_:2},1032,["onClick"])]),_:2},1024),e(t(Te),{class:"text-white bg-rcgray-800"},{default:n(()=>D[11]||(D[11]=[s("p",null,"Open Config",-1)])),_:1})]),_:2},1024)]),_:2},1024),t(g)("peek-config-dialog-"+I.id)?(a(),N(Nt,{key:0,editId:I.id},null,8,["editId"])):v("",!0)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})])),s("div",Wt,[e(B,{variant:"outline",onClick:T,class:"text-center"},{default:n(()=>D[12]||(D[12]=[C(" View All >> ")])),_:1})])])])}}},Zt={__name:"DeviceConfigsViewPanel",props:{deviceId:Number},setup(o){const k=S("latest"),f=l=>{k.value=l};return(l,i)=>(a(),_("div",null,[e(oe,{name:"fade",mode:"out-in"},{default:n(()=>[(a(),N(at(k.value==="latest"?Xt:qt),{deviceId:o.deviceId,onToggleView:f},null,40,["deviceId"]))]),_:1})]))}},es={class:"relative flex items-center justify-between border-b"},ts={class:"relative flex items-start p-2 pt-1 mb-1"},ss={__name:"DeviceDetailsLeftNav",props:{selectedNav:String,deviceId:Number},emits:["selectLeftNavView","closeNav"],setup(o,{emit:k}){const f=o,l=S(null),i=S(null),d=S({}),p=ht(),g=S(p.commentCounters[f.deviceId]||0),c=k;qe(()=>p.commentCounters[f.deviceId],(r,u)=>{g.value=r}),A(()=>{l.value=f.selectedNav,ge(()=>{const r=document.querySelector(`[data-nav='${f.selectedNav}']`);r&&(i.value=r,w())})});function m(r,u){l.value=r,i.value=u,w(),c("selectLeftNavView",r)}function w(){ge(()=>{if(i.value){const{offsetLeft:r,offsetWidth:u}=i.value;d.value={left:`${r}px`,width:`${u}px`}}})}function $(){c("closeNav")}return(r,u)=>{const T=x("Icon"),V=x("Button");return a(),_("div",es,[s("div",ts,[e(V,{class:le(["h-8",l.value==="details"?"bg-rcgray-700 border":"","mr-2"]),variant:"ghost",onClick:u[0]||(u[0]=E=>m("details",E.target)),ref:"detailsButton","data-nav":"details"},{default:n(()=>[e(T,{icon:"ooui:view-details-ltr",class:"mr-2"}),u[3]||(u[3]=C(" Details "))]),_:1},8,["class"]),e(V,{class:le([[l.value==="comments"?"bg-rcgray-700 border":""],"h-8"]),variant:"ghost",onClick:u[1]||(u[1]=E=>m("comments",E.target)),"data-nav":"comments"},{default:n(()=>[e(T,{icon:"vaadin:comments-o",class:"mr-2"}),C(" Comments ("+b(g.value)+") ",1)]),_:1},8,["class"]),l.value?(a(),_("div",{key:0,class:"absolute bottom-0 h-0.5 bg-blue-500",style:Ae(d.value)},null,4)):v("",!0)]),e(it,{class:"mr-2",onClose:u[2]||(u[2]=E=>$())})])}}},ns={class:"relative flex items-center w-full border-b"},os={class:"flex justify-between w-full mb-0"},ls={key:0,class:"gap-2 ml-auto mr-4 text-lg font-semibold tracking-tight group"},as={key:1,class:"gap-2 ml-auto mr-4 text-lg font-semibold tracking-tight group"},is={__name:"DeviceDetailsMainNav",props:{selectedNav:String},emits:["selectMainNavView","closeNav"],setup(o,{emit:k}){const f=S(null),l=S(null),i=S({}),d=he(),p=o,g=k;A(()=>{const $=localStorage.getItem("DeviceDetailsMainNav");f.value=$||p.selectedNav,ge(()=>{const r=document.querySelector(`[data-nav='${f.value}']`);r&&(l.value=r,m())})});function c($,r){f.value=$,l.value=r,m(),g("selectMainNavView",$),localStorage.setItem("DeviceDetailsMainNav",$)}function m(){ge(()=>{if(l.value){const{offsetLeft:$,offsetWidth:r}=l.value;i.value={left:`${$}px`,width:`${r}px`}}})}function w(){var $,r,u;($=d.panelRef2)!=null&&$.isCollapsed?(r=d.panelRef2)==null||r.expand():(u=d.panelRef2)==null||u.collapse()}return qe(()=>{var $;return($=d.panelRef2)==null?void 0:$.isCollapsed},()=>{m()}),($,r)=>{var V;const u=x("Icon"),T=x("Button");return a(),_("div",ns,[e(dt,{onOpenNav:r[0]||(r[0]=E=>w()),navPanelBtnState:(V=t(d).panelRef2)==null?void 0:V.isCollapsed},null,8,["navPanelBtnState"]),s("div",os,[s("div",null,[e(T,{class:le(["h-8",f.value==="notifications"?"bg-rcgray-700 border":"","mr-2"]),variant:"ghost",onClick:r[1]||(r[1]=E=>c("notifications",E.target)),ref:"notificationsButton","data-nav":"notifications"},{default:n(()=>[e(u,{icon:"ooui:view-details-ltr",class:"mr-2"}),r[3]||(r[3]=C(" Notifications "))]),_:1},8,["class"]),e(T,{class:le([[f.value==="configs"?"bg-rcgray-700 border":""],"h-8"]),variant:"ghost",onClick:r[2]||(r[2]=E=>c("configs",E.target)),"data-nav":"configs"},{default:n(()=>[e(u,{icon:"vaadin:comments-o",class:"mr-2"}),r[4]||(r[4]=C(" Configs "))]),_:1},8,["class"])]),s("div",null,[f.value==="notifications"?(a(),_("h3",ls," Device Latest Events ")):v("",!0),f.value==="configs"?(a(),_("h3",as," Latest Configurations ")):v("",!0)]),f.value?(a(),_("div",{key:0,class:"absolute bottom-0 h-0.5 bg-blue-500",style:Ae(i.value)},null,4)):v("",!0)])])}}},ds={class:"flex justify-between space-x-4"},cs={class:"space-y-1"},rs={class:"text-sm font-semibold"},us={class:"text-sm"},fs={class:"text-sm"},ms={class:"javascript"},vs={class:"flex pt-2 items-between"},ps={class:"text-xs text-muted-foreground"},gs={__name:"DeviceNotificationHoverCard",props:{notification:{type:Object,required:!0}},setup(o){const{copyItem:k,activeCopyIcon:f}=Et(),l=re("formatters");return(i,d)=>{const p=x("Icon"),g=x("Button"),c=ct("highlightjs");return a(),N(t(jt),null,{default:n(()=>[e(t(Lt),{"as-child":""},{default:n(()=>[je(i.$slots,"default")]),_:3}),e(t(Tt),{class:"w-full",align:"start"},{default:n(()=>[s("div",ds,[je(i.$slots,"leftIcon"),s("div",cs,[s("h4",rs,b(o.notification.log_name.charAt(0).toUpperCase()+o.notification.log_name.slice(1)),1),s("p",us,b(o.notification.description),1),d[1]||(d[1]=s("p",{class:"pt-4 text-sm"},"Raw Data:",-1)),s("div",fs,[rt((a(),_("pre",null,[s("code",ms,b(o.notification),1)])),[[c]])]),s("div",vs,[e(p,{icon:"formkit:datetime",class:"w-4 h-4 mr-2 opacity-70"}),s("span",ps,"Event Date: "+b(t(l).formatTime(o.notification.created_at)),1),e(g,{class:"h-6 p-1 ml-auto",variant:"ghost",title:"copy raw data",onClick:d[0]||(d[0]=m=>t(k)(o.notification.id,o.notification))},{default:n(()=>[e(p,{icon:t(f)[o.notification.id]?"material-symbols:check-circle-outline":"material-symbols:content-copy-outline",class:le(t(f)[o.notification.id]?"text-green-500":"")},null,8,["icon","class"])]),_:1})])])])]),_:3})]),_:3})}}},_s={class:"p-2 overflow-none"},ws={key:0,class:"mt-4 space-y-2"},xs={key:1,class:"mt-6 space-y-4"},hs={class:"w-full"},ys={class:"pl-6 border-l border-l-4 rounded-md border-l-rcgray-600"},bs={class:"flex justify-between"},$s={key:0,class:"py-0.5 flex w-fit bg-green-100 text-green-800 text-xs font-medium me-2 px-1.5 py-0.5 rounded-lg dark:bg-blue-900 dark:text-blue-100"},ks={class:"text-muted-foreground"},Ds={class:"py-2 space-y-1 text-left"},Is={class:"text-sm text-white"},Cs={class:"flex items-center justify-between"},Ss={class:"text-muted-foreground"},Ns={class:"flex items-center justify-end mt-4 space-x-2"},Vs={__name:"DeviceLatestEventsPanel",props:{deviceId:Number},setup(o){const k=o,f=S([]),l=S(!1),i=re("formatters");A(()=>{d()});function d(){l.value=!0,axios.get("/api/activitylogs/last5/"+parseInt(k.deviceId)).then(p=>{f.value=p.data,l.value=!1}).catch(p=>{console.log(p)})}return(p,g)=>{const c=x("Skeleton"),m=x("Icon"),w=x("Button");return a(),_("div",null,[s("div",_s,[g[1]||(g[1]=s("div",{class:"flex flex-row items-center justify-start gap-2 pt-1"},[s("span",{class:"inline-flex flex-row items-center h-[24px] rounded-md px-1.5 gap-1 shadow-[inset_0_0_0_1px_rgb(69,71,74)] bg-[#313337]"},[s("span",{class:"flex-[0_1_auto] min-w-0 overflow-hidden text-ellipsis whitespace-nowrap inline-flex line-clamp-1"},"Last 5 Events")]),s("span",{class:"flex-[1_1_100%] bg-[#313337] flex flex-shrink-0 h-px w-full"})],-1)),l.value?(a(),_("div",ws,[e(c,{class:"w-1/2 h-4"}),e(c,{class:"w-full h-4"}),e(c,{class:"w-full h-4"}),e(c,{class:"w-full h-4"}),e(c,{class:"w-full h-4"}),e(c,{class:"w-full h-4"}),e(c,{class:"w-full h-4"}),e(c,{class:"w-full h-4"}),e(c,{class:"w-full h-4"})])):v("",!0),l.value?v("",!0):(a(),_("div",xs,[(a(!0),_(ve,null,pe(f.value,($,r)=>(a(),N(w,{class:"flex w-full h-full border bg-rcgray-800 items-left",key:r},{default:n(()=>[s("div",hs,[s("div",ys,[s("div",bs,[$.log_name==="info"?(a(),_("span",$s,b($.log_name),1)):v("",!0),s("span",ks,"Type: "+b($.event_type),1)]),s("div",Ds,[s("p",Is,b($.description),1),s("div",Cs,[s("p",Ss,b(t(i).formatTime($.created_at)),1),e(gs,{notification:$},{default:n(()=>[e(w,{title:"View Raw Data",alt:"View Raw Data",variant:"outline",class:"h-4 px-1 text-sm text-muted-foreground"},{default:n(()=>[e(m,{icon:"lets-icons:view-duotone-line",class:"w-4 h-4"})]),_:1})]),_:2},1032,["notification"])])])])])]),_:2},1024))),128))])),s("div",Ns,[e(w,{variant:"outline",class:"text-center"},{default:n(()=>g[0]||(g[0]=[C(" View All >> ")])),_:1})])])])}}},Es={__name:"DeviceViewCommentsPanel",props:{deviceId:{type:Number,required:!0},deviceName:{type:String,required:!0}},setup(o){return(k,f)=>(a(),N(yt,{deviceId:o.deviceId,deviceName:o.deviceName,isDeviceCommentsPanelView:!0},null,8,["deviceId","deviceName"]))}},Ls={class:"grid gap-0.5"},Ts={key:0,class:"space-y-2"},js={key:0,class:"grid gap-2 text-sm"},Bs={class:"grid gap-2"},Ps={class:"flex items-center justify-between"},zs={class:"flex items-center gap-1 text-muted-foreground"},Rs={class:"flex items-center gap-2"},Ms={class:"flex items-center justify-between"},Fs={class:"flex items-center gap-1 text-muted-foreground"},Os={class:"flex items-center gap-2"},Gs={class:"flex items-center justify-between"},qs={class:"flex items-center gap-1 text-muted-foreground"},As={class:"flex items-center gap-2"},Us={class:"flex items-center justify-between"},Ks={class:"flex items-center gap-1 text-muted-foreground"},Ys={class:"flex items-center gap-2"},Hs={__name:"DeviceViewConfigStatusPanel",props:{isLoading:Boolean,deviceData:Object},emits:["refresh"],setup(o,{emit:k}){S({}),S({});const f=re("formatters");return(l,i)=>{const d=x("Skeleton"),p=x("StatusGreenIcon"),g=x("StatusRedIcon"),c=x("StatusYellowIcon"),m=x("Icon");return a(),_("div",null,[e(t(ke),{class:"overflow-hidden"},{default:n(()=>[e(t(ye),{class:"flex flex-row items-start p-4 bg-muted/50"},{default:n(()=>[s("div",Ls,[e(t(be),{class:"flex items-center gap-2 text-lg group"},{default:n(()=>i[0]||(i[0]=[C("Configuration Summary")])),_:1})])]),_:1}),e(t($e),{class:"p-4 pt-0 text-sm"},{default:n(()=>[o.isLoading?(a(),_("div",Ts,[e(d,{class:"w-1/2 h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"})])):v("",!0),e(oe,{name:"fade"},{default:n(()=>[!o.isLoading&&o.deviceData?(a(),_("div",js,[s("dl",Bs,[s("div",Ps,[s("dt",zs,[e(p),i[1]||(i[1]=C(" Good Configs "))]),s("dd",Rs,b(o.deviceData.config_good_count),1)]),s("div",Ms,[s("dt",Fs,[e(g),i[2]||(i[2]=C(" Failed Configs "))]),s("dd",Os,b(o.deviceData.config_bad_count),1)]),s("div",Gs,[s("dt",qs,[e(c),i[3]||(i[3]=C(" Unknown Configs "))]),s("dd",As,b(o.deviceData.config_unknown_count),1)]),s("div",Us,[s("dt",Ks,[e(m,{icon:"formkit:datetime",class:"text-indigo-400"}),i[4]||(i[4]=C(" Last Download "))]),s("dd",Ys,b(t(f).formatTime(o.deviceData.last_config)),1)])])])):v("",!0)]),_:1})]),_:1})]),_:1})])}}},Qs={class:"grid gap-0.5"},Js={key:0,class:"space-y-2"},Ws={key:0,class:"grid gap-3"},Xs={class:"grid gap-3"},Zs={class:"flex items-center justify-between"},en={class:"flex items-center gap-2"},tn={class:"flex items-center justify-between"},sn={class:"flex items-center gap-2"},nn={class:"flex items-center justify-between"},on={class:"flex items-center gap-2"},ln={class:"flex items-center justify-between"},an={class:"flex items-center gap-2"},dn={class:"flex items-center justify-between"},cn={class:"flex items-center gap-2"},rn={class:"flex items-center justify-between"},un={class:"flex items-center gap-2"},fn={class:"flex items-center justify-between"},mn={class:"flex items-center gap-2"},vn={class:"flex items-center justify-between"},pn={class:"flex items-center gap-2"},gn={class:"flex items-center justify-between"},_n={class:"flex items-center gap-2"},wn={class:"flex items-center justify-between"},xn={class:"flex items-center gap-2"},hn={key:0,class:"flex items-center gap-2 text-xs text-muted-foreground"},yn={__name:"DeviceViewDetailsPanel",props:{isLoading:Boolean,deviceData:Object},emits:["refresh"],setup(o,{emit:k}){S({}),S({});const f=re("formatters");return(l,i)=>{const d=x("Skeleton"),p=x("Icon");return a(),_("div",null,[e(t(ke),{class:"overflow-hidden"},{default:n(()=>[e(t(ye),{class:"flex flex-row items-start p-4 bg-muted/50"},{default:n(()=>[s("div",Qs,[e(t(be),{class:"flex items-center gap-2 text-lg group"},{default:n(()=>i[0]||(i[0]=[C("Device Details")])),_:1})])]),_:1}),e(t($e),{class:"p-4 pt-0 text-sm"},{default:n(()=>[o.isLoading?(a(),_("div",Js,[e(d,{class:"w-1/2 h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"})])):v("",!0),e(oe,{name:"fade"},{default:n(()=>[!o.isLoading&&o.deviceData?(a(),_("div",Ws,[s("dl",Xs,[s("div",Zs,[i[1]||(i[1]=s("dt",{class:"text-muted-foreground"},"Device ID",-1)),s("dd",en,b(o.deviceData.id),1)]),s("div",tn,[i[2]||(i[2]=s("dt",{class:"text-muted-foreground"},"Name",-1)),s("dd",sn,b(o.deviceData.device_name),1)]),s("div",nn,[i[3]||(i[3]=s("dt",{class:"text-muted-foreground"},"IP Address",-1)),s("dd",on,b(o.deviceData.device_ip),1)]),s("div",ln,[i[4]||(i[4]=s("dt",{class:"text-muted-foreground"},"Status",-1)),s("dd",an,b(o.deviceData.status),1)]),s("div",dn,[i[5]||(i[5]=s("dt",{class:"text-muted-foreground"},"Category",-1)),s("dd",cn,b(o.deviceData.category[0].categoryName),1)]),s("div",rn,[i[6]||(i[6]=s("dt",{class:"text-muted-foreground"},"Vendor",-1)),s("dd",un,b(o.deviceData.vendor[0].vendorName),1)]),s("div",fn,[i[7]||(i[7]=s("dt",{class:"text-muted-foreground"},"Model",-1)),s("dd",mn,b(o.deviceData.device_model),1)]),s("div",vn,[i[8]||(i[8]=s("dt",{class:"text-muted-foreground"},"Template",-1)),s("dd",pn,b(o.deviceData.template[0].templateName),1)]),s("div",gn,[i[9]||(i[9]=s("dt",{class:"text-muted-foreground"},"Tags",-1)),s("dd",_n,b(o.deviceData.tag[0].tagname),1)]),s("div",wn,[i[10]||(i[10]=s("dt",{class:"text-muted-foreground"},"Created",-1)),s("dd",xn,b(t(f).formatTime(o.deviceData.created_at)),1)])])])):v("",!0)]),_:1})]),_:1}),e(t(Bt),{class:"flex flex-row items-center px-4 py-3 border-t bg-muted/50"},{default:n(()=>[!o.isLoading&&o.deviceData?(a(),_("div",hn,[e(p,{icon:"formkit:datetime",class:"text-indigo-400"}),C(" Last Poll: "+b(o.deviceData.last_seen),1)])):v("",!0)]),_:1})]),_:1})])}}},bn={__name:"DeviceViewPaneDropdown",props:{showEditBtn:{type:Boolean,default:!0}},emits:["openDeviceEdit","onDelete","onPurge","openDeviceClone"],setup(o,{emit:k}){const f=k;function l(){f("onDelete")}function i(){f("openDeviceEdit")}function d(){f("openDeviceClone")}function p(){f("onPurge")}return(g,c)=>{const m=x("Icon"),w=x("Button");return a(),_("div",null,[e(t(Ye),null,{default:n(()=>[e(t(Ue),{"as-child":""},{default:n(()=>[e(w,{variant:"ghost",class:"h-8 ml-2"},{default:n(()=>[e(m,{icon:"radix-icons:dots-vertical",class:""})]),_:1})]),_:1}),e(t(Ke),{class:"w-56",align:"end",side:"bottom"},{default:n(()=>[o.showEditBtn?(a(),N(t(de),{key:0,class:"cursor-pointer hover:bg-rcgray-600",onClick:c[0]||(c[0]=$=>i())},{default:n(()=>[c[4]||(c[4]=s("span",null,"Edit Device",-1)),e(t(ce),null,{default:n(()=>[e(m,{icon:"fluent-color:text-edit-style-16"})]),_:1})]),_:1})):v("",!0),o.showEditBtn?(a(),N(t(de),{key:1,class:"cursor-pointer hover:bg-rcgray-600",onClick:c[1]||(c[1]=$=>d())},{default:n(()=>[c[5]||(c[5]=s("span",null,"Clone Device",-1)),e(t(ce),null,{default:n(()=>[e(m,{icon:"fa6-solid:clone"})]),_:1})]),_:1})):v("",!0),o.showEditBtn?(a(),N(t(de),{key:2,class:"cursor-pointer hover:bg-rcgray-600",onClick:c[2]||(c[2]=$=>p())},{default:n(()=>[c[6]||(c[6]=s("span",null,"Purge Failed Configs",-1)),e(t(ce),null,{default:n(()=>[e(m,{icon:"icon-park-twotone:delete-five"})]),_:1})]),_:1})):v("",!0),o.showEditBtn?(a(),N(t(Xe),{key:3})):v("",!0),e(t(de),{class:"cursor-pointer hover:bg-rcgray-600",onClick:c[3]||(c[3]=$=>l())},{default:n(()=>[c[7]||(c[7]=s("span",{class:"text-red-400"},"Delete",-1)),e(t(ce),null,{default:n(()=>[e(m,{icon:"flat-color-icons:full-trash"})]),_:1})]),_:1})]),_:1})]),_:1})])}}};function $n(o,k){const f=S(!1),l=S(null),i=S(null),d=ut(),p=S(!1),g=S("details"),c=S("notifications"),m=S(null),w=he(),{text:$,copy:r,copied:u,isSupported:T}=He(),{toastSuccess:V,toastError:E}=me();fe();const D=S({id:o.editId,label:"",icon:"NetworkDeviceIcon",isFavorite:!1,route:"/device/view/"+o.editId});A(()=>{B(o.editId),M(),w.panelRef2=m.value,window.addEventListener("keydown",h=>{h.key==="Escape"&&q()}),l&&[...d.favorites].forEach(h=>{h.id===o.editId&&(D.value.isFavorite=!0)}),c.value=localStorage.getItem("DeviceDetailsMainNav")}),ue(()=>{window.removeEventListener("keydown",h=>{h.key==="Escape"&&q()})});function M(){J.get("/api/app-dir-path").then(h=>{f.value=h.data})}function B(h){p.value=!0,J.get(`/api/devices/${h}`).then(W=>{l.value=W.data,p.value=!1})}function P(){l&&(D.value.id=l.value.id,D.value.label=l.value.device_name,D.value.route=`/device/view/${l.value.id}`,D.value.isFavorite=!D.value.isFavorite,d.toggleFavorite(D.value))}function O(h){h==="details"?g.value="details":h==="comments"?g.value="comments":g.value="details"}function G(h){h==="notifications"?c.value="notifications":h==="configs"?c.value="configs":c.value="notifications"}function I(){k("close")}function q(){I()}function U(h){try{r(h),V("Copied","Debug command copied to clipboard")}catch{E("Error","Failed to copy Debug command to clipboard")}}function L(){i.value="Downloading...",V("Download Queued","Download started for device "+l.value.device_name),J.post("/api/device/download-now",{device_id:l.value.id}).then(h=>{i.value="Queued...",V("Download Started","Download job for "+l.value.device_name+" was pushed to the queue."),Y()}).catch(h=>{i.value="Queued...",E("Error","Failed to start download job for "+l.value.device_name),console.error("Error starting download job:",h)})}function Y(){const h=setInterval(function(){J.get("/api/tracked-jobs/"+l.value.id).then(W=>{i.value=W.data.data.status}),i.value==="finished"&&(V("Download Finished","Download finished for device "+l.value.device_name),clearInterval(h),setTimeout(()=>{i.value=null},3e3))},2e3)}function K(){m!=null&&m.value.isCollapsed?m==null||m.value.expand():m==null||m.value.collapse()}return{addToFavorites:P,appDirPath:f,closeNav:K,copyDebug:U,deviceData:l,downloadNow:L,downloadStatus:i,favoriteItem:D,fetchDevice:B,isLoading:p,leftNavSelected:g,mainNavSelected:c,panelElement2:m,selectLeftNavView:O,selectMainNavView:G}}const kn={class:"flex flex-col flex-1 gap-2 dark:bg-rcgray-900"},Dn={class:"flex flex-row items-center justify-between h-12 gap-3 pl-4 pr-2 border-b"},In={key:0,class:"flex items-center"},Cn={class:"text-lg font-semibold text-blue-400 font-inter"},Sn={class:"flex items-center"},Nn={key:0,class:"text-muted-foreground",style:{"word-wrap":"normal"}},Vn={key:2},En={class:""},Ln={key:0,class:"flex items-center justify-center",style:{height:"60vh"}},Tn={__name:"DeviceViewPane",props:{editId:Number},emits:["close"],setup(o,{emit:k}){const f=k,l=o,{addToFavorites:i,appDirPath:d,closeNav:p,copyDebug:g,deviceData:c,downloadNow:m,downloadStatus:w,favoriteItem:$,fetchDevice:r,isLoading:u,leftNavSelected:T,mainNavSelected:V,panelElement2:E,selectLeftNavView:D,selectMainNavView:M}=$n(l,f),{handleSave:B,viewEditDialog:P,showConfirmDelete:O,deleteDevice:G,purgeDeviceConfigs:I,newDeviceModalKey:q}=bt(),U=S(!1);function L(){G(l.editId),f("close")}function Y(){I(l.editId)}return(K,h)=>{const W=x("StarUnselected"),j=x("StarSelected"),F=x("Button"),Q=x("Icon"),Z=x("ResizablePanel"),ee=x("ResizableHandle"),H=x("ResizablePanelGroup");return a(),_("main",kn,[s("div",Dn,[t(c)?(a(),_("div",In,[s("span",Cn,b(t(c).device_name),1),e(F,{variant:"ghost",class:"h-8 px-2 py-1.5 h-7 ml-2",onClick:h[0]||(h[0]=z=>t(i)())},{default:n(()=>[t($).isFavorite?v("",!0):(a(),N(W,{key:0,class:"text-muted-foreground"})),t($).isFavorite?(a(),N(j,{key:1,class:"text-muted-foreground"})):v("",!0)]),_:1})])):v("",!0),s("div",Sn,[e(F,{class:"h-8 ml-2",onClick:h[1]||(h[1]=z=>t(g)("cd "+t(d)+" && php artisan rconfig:download-device "+l.editId+" -d")),variant:"outline"},{default:n(()=>[e(Q,{icon:"lucide:code-xml",class:"mr-2"}),h[11]||(h[11]=C(" Copy Debug "))]),_:1}),e(F,{class:"h-8 ml-2",onClick:h[2]||(h[2]=z=>t(m)()),variant:"outline"},{default:n(()=>[e(st,{state:t(w)},null,8,["state"]),t(w)?(a(),_("span",Nn,b(t(w)),1)):v("",!0),t(w)?v("",!0):(a(),N(Q,{key:1,icon:"catppuccin:folder-download-open",class:"mr-2"})),t(w)?v("",!0):(a(),_("span",Vn,"Download Now"))]),_:1}),e(bn,{onOnPurge:h[3]||(h[3]=z=>Y()),onOpenDeviceEdit:h[4]||(h[4]=z=>t(P)(o.editId)),onOpenDeviceClone:h[5]||(h[5]=z=>(t(P)(o.editId),U.value=!0)),onOnDelete:h[6]||(h[6]=z=>O.value=!0)})])]),s("div",En,[e(H,{direction:"horizontal",class:""},{default:n(()=>[e(Z,{"default-size":25,"max-size":30,"min-size":10,collapsible:"","collapsed-size":0,ref_key:"panelElement2",ref:E,class:"min-h-[100vh]"},{default:n(()=>[e(ss,{onCloseNav:t(p),onSelectLeftNavView:t(D),selectedNav:t(T),deviceId:o.editId},null,8,["onCloseNav","onSelectLeftNavView","selectedNav","deviceId"]),t(T)==="details"?(a(),N(Hs,{key:0,class:"p-2 mt-2",isLoading:t(u),deviceData:t(c)},null,8,["isLoading","deviceData"])):v("",!0),t(T)==="details"?(a(),N(yn,{key:1,class:"p-2",isLoading:t(u),deviceData:t(c)},null,8,["isLoading","deviceData"])):v("",!0),t(T)==="comments"?(a(),N(Es,{key:2,class:"p-2",deviceId:o.editId,deviceName:t(c).device_name},null,8,["deviceId","deviceName"])):v("",!0)]),_:1},512),e(ee,{"with-handle":""}),e(Z,{class:"min-h-[100vh]"},{default:n(()=>[e(t(Qe),{class:"h-full border border-none rounded-md"},{default:n(()=>[t(u)?(a(),_("div",Ln,[e(Je,{class:"flex justify-center"})])):v("",!0),e(is,{class:"p-2",onSelectMainNavView:t(M),selectedNav:t(V)},null,8,["onSelectMainNavView","selectedNav"]),!t(u)&&t(V)==="notifications"?(a(),N(Vs,{key:1,class:"p-2",style:{height:"60vh"},deviceId:o.editId},null,8,["deviceId"])):v("",!0),!t(u)&&t(V)==="configs"?(a(),N(Zt,{key:2,class:"p-2",deviceId:o.editId,style:{height:"60vh"}},null,8,["deviceId"])):v("",!0)]),_:1})]),_:1})]),_:1}),(a(),N($t,{key:t(q),onClose:h[7]||(h[7]=z=>U.value=!1),onSave:h[8]||(h[8]=z=>{t(B)(),t(r)(o.editId)}),isClone:U.value,editId:o.editId},null,8,["isClone","editId"])),e(Ct,{ids:[o.editId],showConfirmDelete:t(O),onClose:h[9]||(h[9]=z=>O.value=!1),onHandleDelete:h[10]||(h[10]=z=>L())},null,8,["ids","showConfirmDelete"])])])}}};function jn(o){const{toastSuccess:k,toastError:f}=me(),l=S([]),i=S("");function d(c){c.updateOptions({value:"Something went wrong - could not retrieve the configuration from the file system!"}),f("Error","Something went wrong - could not retrieve the configuration from the file system!")}function p(c,m){J.get("/api/configs/view-config/"+c).then(w=>{i.value=w.data.data.config_location,m.getModel().setValue(w.data.data.content)}).catch(w=>{console.error(w),m.updateOptions({value:"Something went wrong - could not retrieve the configuration from the file system!"}),f("Error","Something went wrong - could not retrieve the configuration from the file system!")})}function g(c,m){c.ctrlKey&&c.key==="Enter"&&m()}return A(()=>{window.addEventListener("keydown",c=>g(c,()=>saveDialog(o.configId,model,null,emit,()=>emit("close"))))}),ue(()=>{window.removeEventListener("keydown",g)}),{errors:l,config_location:i,getDefaultEditorCode:d,showConfiguration:p,handleKeyDown:g}}const Bn={class:"p-2 overflow-none"},Pn={key:0,class:"mt-4 space-y-2"},zn={key:1,class:"space-y-4"},Rn={class:"p-4 px-8"},Mn={class:"flex flex-col"},Fn={class:"flex items-center p-2"},On={class:"flex items-center gap-2 ml-auto"},Gn={__name:"ConfigViewMainPanel",props:{configId:Number},setup(o){const k=o;let f=null;const{checkDarkModeIsSet:l,checkLineNumbersIsSet:i,checkMiniMapIsSet:d,checkStickyScrollIsSet:p,copied:g,copyItem:c,copyPath:m,darkmode:w,download:$,initEditor:r,lineNumbers:u,meditorValue:T,minimap:V,search:E,toggleEditorDarkMode:D,toggleEditorLineNumbers:M,toggleEditorMinimap:B,toggleStickyScroll:P}=Ze(et),{errors:O,getDefaultEditorCode:G,showConfiguration:I,saveDialog:q,config_location:U}=jn(k),L=S(!1),Y=S([]);A(()=>{K(),h()});function K(){l()&&Y.value.push("dark"),i()&&Y.value.push("lineNumbers"),d()&&Y.value.push("minimap"),p()&&Y.value.push("stickyscroll")}function h(){f=r("code-editor__code-pre","rconfig"),k.configId===0?G(f):I(k.configId,f)}return(W,j)=>{const F=x("Skeleton"),Q=x("Icon"),Z=x("Button"),ee=x("Separator");return a(),_("div",null,[s("div",Bn,[L.value?(a(),_("div",Pn,[e(F,{class:"w-1/2 h-4"}),e(F,{class:"w-full h-4"}),e(F,{class:"w-full h-4"}),e(F,{class:"w-full h-4"}),e(F,{class:"w-full h-4"}),e(F,{class:"w-full h-4"}),e(F,{class:"w-full h-4"}),e(F,{class:"w-full h-4"}),e(F,{class:"w-full h-4"})])):v("",!0),L.value?v("",!0):(a(),_("div",zn,[s("div",Rn,[s("div",Mn,[s("div",Fn,[j[7]||(j[7]=s("div",{class:"flex items-center gap-2"},null,-1)),s("div",null,[e(Z,{variant:"ghost",onClick:j[0]||(j[0]=H=>t(m)(t(U))),title:"copy path"},{default:n(()=>[e(Q,{icon:"lucide-lab:copy-file-path"})]),_:1}),e(Z,{variant:"ghost",onClick:j[1]||(j[1]=H=>t(c)()),title:"copy content"},{default:n(()=>[e(Q,{icon:"mdi:content-copy"})]),_:1}),e(Z,{variant:"ghost",class:"ml-1",onClick:j[2]||(j[2]=H=>t($)(t(U))),title:"download"},{default:n(()=>[e(Q,{icon:"mingcute:download-fill"})]),_:1})]),e(ee,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),s("div",On,[e(t(tt),{modelValue:Y.value,"onUpdate:modelValue":j[6]||(j[6]=H=>Y.value=H),type:"multiple"},{default:n(()=>[e(t(ne),{value:"dark",title:"Toggle bold",onClick:j[3]||(j[3]=H=>t(D)())},{default:n(()=>[e(Q,{icon:"mdi:theme-light-dark",class:"w-4 h-4"})]),_:1}),e(t(ne),{value:"lineNumbers",title:"Line Numbers",onClick:j[4]||(j[4]=H=>t(M)())},{default:n(()=>[e(Q,{icon:"mingcute:numbers-09-sort-ascending-line",class:"w-4 h-4"})]),_:1}),e(t(ne),{value:"minimap",title:"Minimap",onClick:j[5]||(j[5]=H=>t(B)())},{default:n(()=>[e(Q,{icon:"tabler:map-2",class:"w-4 h-4"})]),_:1})]),_:1},8,["modelValue"])]),e(ee,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),j[8]||(j[8]=s("span",null,"CONFIG",-1))]),e(ee,{class:"relative w-full h-px shrink-0 bg-border"})]),j[9]||(j[9]=s("div",{class:"code-editor__code-pre",id:"code-editor__code-pre",style:{height:"calc(100vh - 300px)"}},null,-1))])]))])])}}},qn={class:"grid gap-0.5 w-full"},An={class:"flex justify-between"},Un={key:0,class:"flex items-center gap-2 text-xs text-muted-foreground"},Kn={key:0,class:"space-y-2"},Yn={key:0,class:"grid gap-3"},Hn={class:"grid gap-3"},Qn={class:"flex items-center justify-between"},Jn={class:"flex items-center gap-2"},Wn={class:"flex items-center justify-between"},Xn={class:"flex items-center gap-2"},Zn={class:"flex items-center justify-between"},eo={class:"flex items-center gap-2"},to={class:"flex items-center justify-between"},so={class:"flex items-center gap-2"},no={class:"flex items-center justify-between"},oo={class:"flex items-center gap-2"},lo={class:"flex items-center justify-between"},ao={class:"flex items-center gap-2"},io={class:"flex items-center justify-between"},co={class:"flex items-center gap-2"},ro={class:"flex items-center justify-between"},uo={class:"flex items-center gap-2"},fo={__name:"ConfigSummaryPanel",props:{isLoading:Boolean,configData:Object},setup(o){const k=re("formatters");return(f,l)=>{const i=x("StatusGreenIcon"),d=x("StatusRedIcon"),p=x("StatusYellowIcon"),g=x("Skeleton");return a(),_("div",null,[e(t(ke),{class:"overflow-hidden"},{default:n(()=>[e(t(ye),{class:"flex flex-row items-start p-4 bg-muted/50"},{default:n(()=>[s("div",qn,[e(t(be),{class:"gap-2 text-lg group"},{default:n(()=>[s("div",An,[l[1]||(l[1]=s("div",null,"Config Details",-1)),!o.isLoading&&o.configData?(a(),_("div",Un,[l[0]||(l[0]=C(" Download status: ")),o.configData.download_status===1?(a(),N(i,{key:0,class:"mr-2"})):o.configData.download_status===0?(a(),N(d,{key:1,class:"mr-2"})):o.configData.download_status===2?(a(),N(p,{key:2,class:"mr-2"})):v("",!0)])):v("",!0)])]),_:1})])]),_:1}),e(t($e),{class:"p-4 pt-0 text-sm"},{default:n(()=>[o.isLoading?(a(),_("div",Kn,[e(g,{class:"w-1/2 h-4"}),e(g,{class:"w-full h-4"}),e(g,{class:"w-full h-4"}),e(g,{class:"w-full h-4"}),e(g,{class:"w-full h-4"}),e(g,{class:"w-full h-4"}),e(g,{class:"w-full h-4"}),e(g,{class:"w-full h-4"}),e(g,{class:"w-full h-4"})])):v("",!0),e(oe,{name:"fade"},{default:n(()=>[!o.isLoading&&o.configData?(a(),_("div",Yn,[s("dl",Hn,[s("div",Qn,[l[2]||(l[2]=s("dt",{class:"text-muted-foreground"},"Device ID",-1)),s("dd",Jn,b(o.configData.id),1)]),s("div",Wn,[l[3]||(l[3]=s("dt",{class:"text-muted-foreground"},"Device Name",-1)),s("dd",Xn,b(o.configData.device_name),1)]),s("div",Zn,[l[4]||(l[4]=s("dt",{class:"text-muted-foreground"},"Command Group",-1)),s("dd",eo,b(o.configData.device_category),1)]),s("div",to,[l[5]||(l[5]=s("dt",{class:"text-muted-foreground"},"Command",-1)),s("dd",so,b(o.configData.command),1)]),s("div",no,[l[6]||(l[6]=s("dt",{class:"text-muted-foreground"},"Filename",-1)),s("dd",oo,b(o.configData.config_filename),1)]),s("div",lo,[l[7]||(l[7]=s("dt",{class:"text-muted-foreground"},"Filesize",-1)),s("dd",ao,b(t(k).formatFileSize(o.configData.config_filesize)),1)]),s("div",io,[l[8]||(l[8]=s("dt",{class:"text-muted-foreground"},"Duration",-1)),s("dd",co,b(t(k).formatDuration(o.configData.start_time,o.configData.end_time)),1)]),s("div",ro,[l[9]||(l[9]=s("dt",{class:"text-muted-foreground"},"Created",-1)),s("dd",uo,b(t(k).formatTime(o.configData.created_at)),1)])])])):v("",!0)]),_:1})]),_:1})]),_:1})])}}},mo={__name:"ConfigViewPaneDropdown",props:{editId:{type:Number,required:!0}},emits:["onDelete","onPurge"],setup(o,{emit:k}){const f=k,{text:l,copy:i,copied:d,isSupported:p}=He(),{toastSuccess:g}=me(),c=o;function m(){f("onDelete")}function w(){i(c.editId),g("Success","Copied to clipboard")}return($,r)=>{const u=x("Icon"),T=x("Button");return a(),_("div",null,[e(t(Ye),null,{default:n(()=>[e(t(Ue),{"as-child":""},{default:n(()=>[e(T,{variant:"ghost",class:"h-8 ml-2"},{default:n(()=>[e(u,{icon:"radix-icons:dots-vertical",class:""})]),_:1})]),_:1}),e(t(Ke),{class:"w-56",align:"end",side:"bottom"},{default:n(()=>[e(t(de),{class:"cursor-pointer hover:bg-rcgray-600",onClick:r[0]||(r[0]=V=>w())},{default:n(()=>[r[2]||(r[2]=s("span",null,"Copy ID",-1)),e(t(ce),null,{default:n(()=>[e(u,{icon:"icon-park-twotone:delete-five"})]),_:1})]),_:1}),e(t(Xe)),e(t(de),{class:"cursor-pointer hover:bg-rcgray-600",onClick:r[1]||(r[1]=V=>m())},{default:n(()=>[r[3]||(r[3]=s("span",{class:"text-red-400"},"Delete",-1)),e(t(ce),null,{default:n(()=>[e(u,{icon:"flat-color-icons:full-trash"})]),_:1})]),_:1})]),_:1})]),_:1})])}}};function vo(o,k){const f=S(null),l=S(!1),i=S(null),d=he(),{toastError:p}=me();A(()=>{g(),d.panelRef2=i.value,window.addEventListener("keydown",w=>{w.key==="Escape"&&m()})}),ue(()=>{window.removeEventListener("keydown",w=>{w.key==="Escape"&&m()})});function g(){J.get(`/api/configs/${o.configId}`).then(w=>{f.value=w.data,l.value=!1}).catch(w=>{console.error(w),p("Error","Something went wrong - could not retrieve the configuration from the file system!")})}function c(){k("close")}function m(){c()}return{configData:f,isLoading:l,panelElement2:i}}const po={class:"flex flex-col flex-1 gap-2 dark:bg-rcgray-900"},go={class:"flex flex-row items-center justify-between h-12 gap-3 pl-4 pr-2 border-b"},_o={key:0,class:"flex items-center"},wo={class:"text-lg font-semibold text-blue-400 font-inter"},xo={class:"flex items-center"},ho={class:""},yo={key:0,class:"flex items-center justify-center",style:{height:"60vh"}},bo={__name:"ConfigViewPane",props:{configId:Number},emits:["close"],setup(o,{emit:k}){const f=k,l=o,{configData:i,isLoading:d,panelElement2:p}=vo(l,f),{deleteConfig:g}=Vt(l);function c(){g(l.configId),f("close")}return(m,w)=>{const $=x("ResizablePanel"),r=x("ResizableHandle"),u=x("ResizablePanelGroup");return a(),_("main",po,[s("div",go,[t(i)?(a(),_("div",_o,[s("span",wo,b(t(i).config_filename),1)])):v("",!0),s("div",xo,[e(mo,{editId:o.configId,onOnDelete:w[0]||(w[0]=T=>c())},null,8,["editId"])])]),s("div",ho,[e(u,{direction:"horizontal",class:""},{default:n(()=>[e($,{"default-size":25,"max-size":30,"min-size":10,collapsible:"","collapsed-size":0,ref_key:"panelElement2",ref:p,class:"min-h-[100vh]"},{default:n(()=>[e(fo,{class:"p-2 mt-2",isLoading:t(d),configData:t(i)},null,8,["isLoading","configData"])]),_:1},512),e(r,{"with-handle":""}),e($,{class:"min-h-[100vh]"},{default:n(()=>[e(t(Qe),{class:"h-full border border-none rounded-md"},{default:n(()=>[t(d)?(a(),_("div",yo,[e(Je,{class:"flex justify-center"})])):v("",!0),t(i)?(a(),N(Gn,{key:1,class:"p-2",configId:o.configId,style:{height:"60vh"}},null,8,["configId"])):v("",!0)]),_:1})]),_:1})]),_:1})])])}}},$o={class:"grid gap-2 py-4"},ko={class:"grid items-center grid-cols-4 gap-4"},Do={class:"grid items-center grid-cols-4 gap-4"},Io={key:0,class:"flex flex-col w-full space-y-2 text-sm text-muted-foreground"},Co={class:"pl-2 ml-auto"},So={class:"rc-kdb-class2"},No={__name:"TemplateImportDialog",props:{editId:Number},emits:["setTemplateCode"],setup(o,{emit:k}){const{importTemplates:f,importingTemplates:l,getTemplateRepoFolders:i,hasVendorTemplateOptions:d,vendorTemplateOptions:p,vendorOptionSelected:g,getTemplatesList:c,getTemplateFileContents:m,openImportDialog:w,showFileOptions:$,listedFiles:r,hasReadmeFile:u,fileOptionSelected:T,selectedTemplateCode:V}=We(),E=fe(),{closeDialog:D,isDialogOpen:M}=E,B=k;S([]),S({});function P(G){G.ctrlKey&&G.key==="Enter"&&O()}A(()=>{i(),window.addEventListener("keydown",P)}),ue(()=>{window.removeEventListener("keydown",P)});function O(){B("setTemplateCode",V)}return(G,I)=>{const q=x("Button"),U=x("Icon");return a(),N(t(wt),{open:t(M)("DialogTemplateImport")},{default:n(()=>[e(t(ft),{"as-child":""}),e(t(mt),{class:"w-full",onEscapeKeyDown:I[4]||(I[4]=L=>t(D)("DialogTemplateImport")),onPointerDownOutside:I[5]||(I[5]=L=>t(D)("DialogTemplateImport")),onCloseClicked:I[6]||(I[6]=L=>t(D)("DialogTemplateImport"))},{default:n(()=>[e(t(vt),null,{default:n(()=>[e(t(pt),null,{default:n(()=>I[7]||(I[7]=[C("Select from imported templates")])),_:1}),e(t(gt),null,{default:n(()=>I[8]||(I[8]=[C("Choose a vendor and select a template to import. You may edit the template after importing.")])),_:1})]),_:1}),s("div",$o,[s("div",ko,[e(t(Pe),{modelValue:t(g),"onUpdate:modelValue":I[0]||(I[0]=L=>Be(g)?g.value=L:null)},{default:n(()=>[e(t(ze),{className:"w-[280px] flex h-9 items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:truncate text-start w-[180px]"},{default:n(()=>[e(t(Re),{placeholder:"Select a template vendor"})]),_:1}),e(t(Me),{position:"popper"},{default:n(()=>[e(t(Fe),null,{default:n(()=>[e(st,{state:t(l),class:"items-center"},null,8,["state"]),(a(!0),_(ve,null,pe(t(p).data,L=>(a(),N(t(Oe),{key:L.name,value:L.path.toString()},{default:n(()=>[C(b(L.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),s("div",Do,[t($)?(a(),N(t(Pe),{key:0,modelValue:t(T),"onUpdate:modelValue":I[1]||(I[1]=L=>Be(T)?T.value=L:null)},{default:n(()=>[e(t(ze),{className:"w-[280px] flex h-9 items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:truncate text-start w-[180px]"},{default:n(()=>[e(t(Re),{placeholder:"Select a template file"})]),_:1}),e(t(Me),{position:"popper"},{default:n(()=>[e(t(Fe),null,{default:n(()=>[(a(!0),_(ve,null,pe(t(r).data,L=>(a(),N(t(Oe),{key:L.name,value:L.path.toString()},{default:n(()=>[C(b(L.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])):v("",!0)])]),t(T)?(a(),_("div",Io," CLick apply to load this template into the editor. ")):v("",!0),e(t(_t),null,{default:n(()=>[e(q,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:I[2]||(I[2]=L=>t(D)("DialogTemplateImport")),size:"sm"},{default:n(()=>I[9]||(I[9]=[C(" Cancel "),s("div",{class:"pl-2 ml-auto"},[s("kbd",{class:"rc-kdb-class"},"ESC")],-1)])),_:1}),t(V)?(a(),N(q,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:I[3]||(I[3]=L=>O()),variant:"primary"},{default:n(()=>[I[11]||(I[11]=C(" Apply ")),s("div",Co,[s("kbd",So,[I[10]||(I[10]=C(" Ctrl  ")),e(U,{icon:"uil:enter",class:""})])])]),_:1})):v("",!0)]),_:1})]),_:1})]),_:1},8,["open"])}}};function Vo(o,k){const{toastSuccess:f,toastError:l}=me(),i=S([]),d=S(""),p=S({code:"",templateName:"",description:""});function g(r){J.get("/api/get-default-template").then(u=>{d.value=u.data,r.setValue(u.data)}).catch(u=>{r.updateOptions({value:"Something went wrong - could not retrieve the default template from the file system!"}),l("Error","Something went wrong - could not retrieve the default template from the file system!")})}function c(r,u,T){J.get("/api/templates/"+r).then(V=>{T.fileName=V.data.fileName,d.value=V.data.code,u.getModel().setValue(V.data.code)}).catch(V=>{u.updateOptions({value:"Something went wrong - could not retrieve the template from the file system!"}),l("Error","Something went wrong - could not retrieve the template from the file system!")})}function m(r,u,T,V,E){u.value.code=T.getValue();let D=r>0?`/${r}`:"",M=r>0?"patch":"post";J[M]("/api/templates"+D,{templateName:u.value.templateName,description:u.value.description,code:u.value.code}).then(B=>{V("save",B.data),f("Template saved","The template has been saved successfully."),E()}).catch(B=>{i.value=B.response.data.errors})}function w(r,u){r.ctrlKey&&r.key==="Enter"&&u()}function $(r){r>0&&J.get(`/api/templates/${r}`).then(u=>{p.value=u.data})}return A(()=>{$(o.editId),window.addEventListener("keydown",r=>w(r,()=>m(o.editId,p,null,k,()=>k("close"))))}),ue(()=>{window.removeEventListener("keydown",w)}),{errors:i,code:d,model:p,getDefaultTemplate:g,showTemplate:c,saveDialog:m,handleKeyDown:w,fetchTemplateData:$}}const Eo={class:"p-4 px-8"},Lo={class:"grid gap-2 py-4"},To={class:"grid items-center grid-cols-4 gap-4"},jo={class:"grid items-center grid-cols-4 gap-4"},Bo={key:0,class:"grid items-center grid-cols-4 gap-4"},Po={key:0,class:"grid items-center grid-cols-4 col-start-4 gap-1"},zo={key:0,class:"col-span-1 col-start-2 text-sm text-red-400"},Ro={key:1,class:"col-span-1 col-start-2 text-sm text-red-400"},Mo={key:2,class:"col-span-1 col-start-2 text-sm text-red-400"},Fo={class:"flex flex-col"},Oo={class:"flex items-center p-2"},Go={class:"flex items-center gap-2 ml-auto"},qo={class:"flex justify-end pt-4"},Ao={class:"pl-2 ml-auto"},Uo={class:"rc-kdb-class2"},Ko={class:"pl-2 ml-auto"},Yo={class:"rc-kdb-class2"},Ho={__name:"TemplateAddEditPane",props:{editId:Number},emits:["save","close"],setup(o,{emit:k}){const f=o;let l=null;const i=k,{checkDarkModeIsSet:d,checkLineNumbersIsSet:p,checkMiniMapIsSet:g,checkStickyScrollIsSet:c,copied:m,copyItem:w,copyPath:$,darkmode:r,download:u,initEditor:T,lineNumbers:V,meditorValue:E,minimap:D,search:M,toggleEditorDarkMode:B,toggleEditorLineNumbers:P,toggleEditorMinimap:O,toggleStickyScroll:G}=Ze(et),{openImportDialog:I,getTemplateRepoFolders:q,hasVendorTemplateOptions:U}=We(),{errors:L,code:Y,model:K,getDefaultTemplate:h,showTemplate:W,saveDialog:j,handleKeyDown:F,fetchTemplateData:Q}=Vo(f,i),Z=fe(),{isDialogOpen:ee,closeDialog:H}=Z,z=S([]);A(()=>{nt(),q(),ot(),window.addEventListener("keydown",ae=>{ae.key==="Escape"&&De()})}),ue(()=>{window.removeEventListener("keydown",ae=>{ae.key==="Escape"&&De()})});function nt(){d()&&z.value.push("dark"),p()&&z.value.push("lineNumbers"),g()&&z.value.push("minimap"),c()&&z.value.push("stickyscroll")}function ot(){l=T("code-editor__code-pre","yaml"),f.editId===0?h(l):W(f.editId,l,K)}function _e(){i("close")}function De(){_e()}function Ie(){j(f.editId,K,l,i,_e)}function lt(ae){l.getModel().setValue(ae.value),H("DialogTemplateImport")}return(ae,y)=>{const we=x("Label"),Ce=x("Input"),X=x("Icon"),ie=x("Button"),xe=x("Separator");return a(),_("div",Eo,[s("div",Lo,[s("div",To,[e(we,{for:"templateName",class:"text-right"},{default:n(()=>y[13]||(y[13]=[C(" Template Name "),s("span",{class:"text-red-600"},"*",-1)])),_:1}),e(Ce,{modelValue:t(K).templateName,"onUpdate:modelValue":y[0]||(y[0]=R=>t(K).templateName=R),id:"templateName",autocomplete:"off",class:"col-span-3"},null,8,["modelValue"])]),s("div",jo,[e(we,{for:"description",class:"text-right"},{default:n(()=>y[14]||(y[14]=[C(" Description ")])),_:1}),e(Ce,{modelValue:t(K).description,"onUpdate:modelValue":y[1]||(y[1]=R=>t(K).description=R),id:"description",autocomplete:"off",class:"col-span-3"},null,8,["modelValue"])]),t(U)?(a(),_("div",Bo,[e(we,{for:"description",class:"text-right"},{default:n(()=>y[15]||(y[15]=[C(" Imported Templates ")])),_:1}),e(ie,{type:"close",onClick:y[2]||(y[2]=R=>t(I)()),class:"px-2 py-1 text-sm hover:bg-gray-700",variant:"outline"},{default:n(()=>[e(X,{icon:"mdi:github",class:"mr-2"}),y[16]||(y[16]=C(" Choose an Imported Templates "))]),_:1})])):v("",!0)]),t(L)?(a(),_("div",Po,[t(L).templateName?(a(),_("span",zo,b(t(L).templateName[0]),1)):v("",!0),t(L).description?(a(),_("span",Ro,b(t(L).description[0]),1)):v("",!0),t(L).code?(a(),_("span",Mo,b(t(L).code[0]),1)):v("",!0)])):v("",!0),s("div",Fo,[s("div",Oo,[y[17]||(y[17]=s("div",{class:"flex items-center gap-2"},null,-1)),s("div",null,[e(ie,{variant:"ghost",onClick:t(w),title:"copyItem"},{default:n(()=>[e(X,{icon:"mdi:content-copy"})]),_:1},8,["onClick"]),e(ie,{variant:"ghost",class:"ml-1",onClick:y[3]||(y[3]=R=>t(u)(t(K).fileName)),title:"download"},{default:n(()=>[e(X,{icon:"mingcute:download-fill"})]),_:1})]),e(xe,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),s("div",Go,[e(t(tt),{modelValue:z.value,"onUpdate:modelValue":y[8]||(y[8]=R=>z.value=R),type:"multiple"},{default:n(()=>[e(t(ne),{value:"dark",title:"Toggle bold",onClick:y[4]||(y[4]=R=>t(B)())},{default:n(()=>[e(X,{icon:"mdi:theme-light-dark",class:"w-4 h-4"})]),_:1}),e(t(ne),{value:"lineNumbers",title:"Line Numbers",onClick:y[5]||(y[5]=R=>t(P)())},{default:n(()=>[e(X,{icon:"mingcute:numbers-09-sort-ascending-line",class:"w-4 h-4"})]),_:1}),e(t(ne),{value:"minimap",title:"Minimap",onClick:y[6]||(y[6]=R=>t(O)())},{default:n(()=>[e(X,{icon:"tabler:map-2",class:"w-4 h-4"})]),_:1}),e(t(ne),{value:"stickyscroll",title:"Sticky Scroll",onClick:y[7]||(y[7]=R=>t(G)())},{default:n(()=>[e(X,{icon:"clarity:scroll-outline-alerted",class:"w-4 h-4"})]),_:1})]),_:1},8,["modelValue"])]),e(xe,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),y[18]||(y[18]=s("span",null,"YAML",-1))]),e(xe,{class:"relative w-full h-px shrink-0 bg-border"})]),y[24]||(y[24]=s("div",{class:"code-editor__code-pre",id:"code-editor__code-pre",style:{height:"calc(100vh - 450px)"}},null,-1)),s("div",qo,[e(ie,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:y[9]||(y[9]=R=>_e()),size:"sm"},{default:n(()=>y[19]||(y[19]=[C(" Cancel "),s("div",{class:"pl-2 ml-auto"},[s("kbd",{class:"rc-kdb-class"},"ESC")],-1)])),_:1}),f.editId===0?(a(),N(ie,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:y[10]||(y[10]=R=>Ie()),variant:"primary"},{default:n(()=>[y[21]||(y[21]=C(" Save ")),s("div",Ao,[s("kbd",Uo,[y[20]||(y[20]=C(" Ctrl  ")),e(X,{icon:"uil:enter",class:""})])])]),_:1})):v("",!0),f.editId>0?(a(),N(ie,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:y[11]||(y[11]=R=>Ie()),variant:"primary"},{default:n(()=>[y[23]||(y[23]=C(" Update ")),s("div",Ko,[s("kbd",Yo,[y[22]||(y[22]=C(" Ctrl  ")),e(X,{icon:"uil:enter",class:""})])])]),_:1})):v("",!0)]),t(ee)("DialogTemplateImport")?(a(),N(No,{key:1,onSetTemplateCode:y[12]||(y[12]=R=>lt(R))})):v("",!0)])}}},Qo={class:"w-screen h-[calc(100vh-72px)] border",style:{display:"flex","flex-direction":"column","background-color":"rgb(27, 29, 33)","border-radius":"16px",margin:"4px 8px 8px","max-width":"calc(100% - 16px)",overflow:"hidden"}},Jo={class:"flex justify-between p-2 border-b"},Wo={key:0,class:"items-center content-center text-muted-foreground"},Xo={key:1,class:"items-center content-center text-muted-foreground"},Zo={key:2,class:"items-center content-center text-muted-foreground"},fl={__name:"ContentPanel",props:{},emits:["close"],setup(o,{emit:k}){const f=xt(),l=Ge(),i=k,d=S(0),p=S(null),g=S(null);A(()=>{d.value=parseInt(f.params.id,10),p.value=f.name,g.value=f.query.ref||null});function c(){p.value=null,l.push({name:"devices"})}function m(){p.value=null,l.push({name:"templates"})}function w(){if(p.value=null,g.value){const r=f.query.refId?{name:f.query.ref,params:{id:f.query.refId}}:{name:f.query.ref};l.push(r)}else l.push({name:"configs"})}function $(){p.value==="devicesview"&&c(),p.value==="templatesview"&&m(),p.value==="configsview"&&w(),i("close")}return(r,u)=>{const T=x("Icon"),V=x("Button");return a(),_("div",Qo,[s("div",Jo,[e(V,{onClick:u[0]||(u[0]=E=>$()),size:"sm",variant:"outline",class:"gap-1 border-none hover:bg-rcgray-800"},{default:n(()=>[e(T,{icon:"mingcute:close-line",class:"hover:animate-pulse"})]),_:1}),p.value==="devicesview"?(a(),_("h2",Wo," Device ID: "+b(d.value===0?"":d.value),1)):v("",!0),p.value==="templatesview"?(a(),_("h2",Xo,b(d.value===0?"Add Template":"Edit Template")+" "+b(d.value===0?"":"("+d.value+")"),1)):v("",!0),p.value==="configsview"?(a(),_("h2",Zo,b(d.value===0?"Add Config":"View Config")+" "+b(d.value===0?"":"("+d.value+")"),1)):v("",!0),u[4]||(u[4]=s("div",{class:"flex justify-end"},null,-1))]),e(oe,{name:"fade"},{default:n(()=>[p.value==="templatesview"?(a(),N(Ho,{key:0,editId:d.value,onClose:u[1]||(u[1]=E=>m())},null,8,["editId"])):v("",!0)]),_:1}),e(oe,{name:"fade"},{default:n(()=>[p.value==="devicesview"?(a(),N(Tn,{key:0,editId:d.value,onClose:u[2]||(u[2]=E=>c())},null,8,["editId"])):v("",!0)]),_:1}),e(oe,{name:"fade"},{default:n(()=>[p.value==="configsview"?(a(),N(bo,{key:0,configId:d.value,onClose:u[3]||(u[3]=E=>w())},null,8,["configId"])):v("",!0)]),_:1})])}}};export{fl as default};
