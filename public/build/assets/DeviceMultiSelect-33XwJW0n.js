import{r as u,B as L,T as M,A as N,a as T,c as d,o as c,z as q,w as r,e as l,f as m,v as A,q as _,h as w,t as v,d as p,F as C,G as V,j as o,W as F,x as E,a2 as G,y as P}from"./app-D3DFbhTy.js";const U={class:"relative items-center w-full"},W={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},H={class:"py-1"},J=["onClick"],K={"data-size":"20"},O={class:"p-1 border-5"},R={__name:"DeviceMultiSelect",props:{modelValue:{type:Array,required:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(I,{emit:k}){const g=k,x=u([]),B=u(!1),i=u(""),a=u([]),f=L(()=>x.value.filter(e=>e.device_name.toLowerCase().includes(i.value.toLowerCase())&&!a.value.some(s=>s.id===e.id))),h=I;M(()=>h.modelValue,e=>{a.value=e}),N(()=>{z()});function S(e){h.singleSelect?a.value=[e]:a.value.push(e),B.value=!1,i.value="";const s=f.value.findIndex(n=>n.device_name===e.device_name);s!==-1&&f.value.splice(s,1),g("update:modelValue",a.value)}function $(e){const s=a.value.findIndex(n=>n.device_name===e);s!==-1&&a.value.splice(s,1),g("update:modelValue",a.value)}function z(){T.get("/api/devices/?perPage=10000").then(e=>{x.value=e.data.data})}return(e,s)=>{const n=d("Icon"),y=d("Button"),j=d("Input"),b=d("Separator");return c(),q(m(P),null,{default:r(()=>[l(m(A),{class:"w-full"},{default:r(()=>[l(y,{variant:"ghost",class:_(["flex flex-wrap items-start justify-start w-full p-1 pl-2 whitespace-normal border h-fit",a.value.length===0?"text-muted-foreground":" "])},{default:r(()=>[w(v(a.value&&a.value.length===0?"Select devices":"")+" ",1),(c(!0),p(C,null,V(a.value,t=>(c(),p("span",{key:t.id,class:"relative my-1 group"},[o("span",{class:_([t.badgeColor?t.badgeColor:"bg-gray-600 text-gray-200 border-gray-500","flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"])},[w(v(t.device_name)+" ",1),l(n,{icon:"si:close-line",class:"ml-1 cursor-pointer hover:text-white",onClick:F(D=>$(t.device_name),["stop"])},null,8,["onClick"])],2)]))),128))]),_:1},8,["class"])]),_:1}),l(m(E),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:r(()=>[o("div",U,[l(j,{id:"search",type:"text",modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=t=>i.value=t),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),o("span",W,[l(n,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),l(b),l(m(G),{class:"h-64"},{default:r(()=>[o("div",H,[(c(!0),p(C,null,V(f.value,t=>(c(),p("div",{key:t.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:D=>S(t)},[o("span",{"data-size":"20",class:_(["cursor-default text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border",t.badgeColor?t.badgeColor:"bg-gray-600 text-gray-200 border-gray-500"])},[o("span",K,v(t.device_name),1)],2)],8,J))),128))])]),_:1}),l(b),o("div",O,[l(y,{variant:"ghost",class:"justify-start w-full p-1"},{default:r(()=>[l(n,{icon:"octicon:plus-16",class:"w-3 h-3 mt-1 mr-2 text-muted-foreground"}),s[1]||(s[1]=o("span",null,"Create new record",-1))]),_:1})])]),_:1})]),_:1})}}};export{R as _};
