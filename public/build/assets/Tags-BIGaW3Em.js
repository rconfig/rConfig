import{a as T,u as P}from"./ViewFunctions-Dm_yn-26.js";import{P as L}from"./PageHeader-C0d3TrAV.js";import{D as R}from"./DataTable-Nifj0VhV.js";import{S as V}from"./SideDrawer-DIYcDlTF.js";import{b as j}from"./DeleteModal-CxTtXkOc.js";import{e as x,r as b,s as M,p as c,o as n,c as _,b as D,a as t,g as y,v as C,t as S,j as w,h as q,F as N,k as h,n as F,q as u,w as k,y as B}from"./app-C9AuNpcX.js";import{L as K}from"./LoadingSpinner-BDNkgvVg.js";import"./DataTableToolbar-BwPFEpJn.js";import"./DataTableSpinner-z8HceaJB.js";/* empty css               */const U={props:{viewstate:{type:Object}},emits:["closeDrawer","formsubmitted"],components:{LoadingSpinner:K},setup(s,{emit:a}){const l=b(!1),e=b(s.viewstate.editid===0?"add":"edit"),{errors:m,model:d,clearModel:i,updateModel:o,getModel:p,storeModel:f,isLoading:g}=T(s.viewstate.modelName,s.viewstate.modelObject);M(()=>{p(s.viewstate.editid)});const r=async()=>{s.viewstate.editid!=0?await o(d):await f(d),m.value===""&&(a("formsubmitted",s.viewstate.pagenamesingle+" "+e.value+"ed!"),v())};function v(){a("closeDrawer")}return{showRoleOptions:l,close:v,errors:m,model:d,saveModels:r,clearModel:i,isLoading:g}}},z={key:0,novalidate:"",class:"pf-c-form"},E=["value"],H={class:"pf-c-form__group"},I={class:"pf-c-form__group-control"},J=["aria-invalid"],A={key:0,class:"pf-c-form__helper-text pf-m-error",id:"form-help-text-address-helper","aria-live":"polite"},G={class:"pf-c-form__group"},Q={class:"pf-c-form__group-control"},W=["aria-invalid"],X={key:0,class:"pf-c-form__helper-text pf-m-error",id:"form-help-text-address-helper","aria-live":"polite"},Y={class:"pf-c-form__group pf-m-action"},Z={class:"pf-c-form__group-control"},$={class:"pf-c-form__actions"};function ee(s,a,l,e,m,d){const i=c("loading-spinner");return n(),_(N,null,[D(i,{showSpinner:e.isLoading},null,8,["showSpinner"]),e.isLoading?w("",!0):(n(),_("form",z,[t("input",{id:"editid",name:"editid",type:"hidden",value:l.viewstate.editid},null,8,E),t("div",H,[a[4]||(a[4]=t("div",{class:"pf-c-form__group-label"},[t("label",{class:"pf-c-form__label",for:"form-demo-basic-name"},[t("span",{class:"pf-c-form__label-text"},"Tag Name"),t("span",{class:"pf-c-form__label-required","aria-hidden":"true"},"*")])],-1)),t("div",I,[y(t("input",{class:"pf-c-form-control",required:"",type:"text",id:"tagname",name:"tagname","onUpdate:modelValue":a[0]||(a[0]=o=>e.model.tagname=o),"aria-invalid":!!e.errors.tagname,autocomplete:"off"},null,8,J),[[C,e.model.tagname]]),e.errors.tagname?(n(),_("p",A,S(e.errors.tagname[0]),1)):w("",!0)])]),t("div",G,[a[5]||(a[5]=t("div",{class:"pf-c-form__group-label"},[t("label",{class:"pf-c-form__label",for:"form-demo-basic-name"},[t("span",{class:"pf-c-form__label-text"},"Description"),t("span",{class:"pf-c-form__label-required","aria-hidden":"true"},"*")])],-1)),t("div",Q,[y(t("input",{class:"pf-c-form-control",required:"",type:"text",id:"tagDescription",name:"tagDescription","onUpdate:modelValue":a[1]||(a[1]=o=>e.model.tagDescription=o),"aria-invalid":!!e.errors.tagDescription,autocomplete:"off"},null,8,W),[[C,e.model.tagDescription]]),e.errors.tagDescription?(n(),_("p",X,S(e.errors.tagDescription[0]),1)):w("",!0)])]),t("div",Y,[t("div",Z,[t("div",$,[t("button",{class:"pf-c-button pf-m-primary",type:"submit",onClick:a[2]||(a[2]=q((...o)=>e.saveModels&&e.saveModels(...o),["prevent"]))},"Save"),t("button",{class:"pf-c-button pf-m-link",type:"button",onClick:a[3]||(a[3]=(...o)=>e.close&&e.close(...o))},"Cancel")])])])]))],64)}const ae=x(U,[["render",ee]]),te={components:{TagsForm:ae,PageHeader:L,DataTable:R,SideDrawer:V,DeleteModal:j},setup(){const s=B(),a=b(s.path),l=b(s.params.id),e=h({editid:0,pagename:"Tags",pagedesc:"rConfig system tags",pagenamesingle:"Tag",modelName:"tags",openDrawerState:!1,showDeleteModal:!1,sideDrawerComponentKey:1,pageOptionsState:{page:1,per_page:10},modelObject:{tagname:"",tagDescription:""}}),{models:m,isLoading:d,dataTablePageChanged:i,openDrawer:o,closeDrawerState:p,deleteRow:f,formSubmitted:g,confirmDelete:r,destroyModel:v}=P(e,e.modelName,e.modelObject);M(()=>{a.value==="/tags/"+l.value&&(e.pageOptionsState.filters=JSON.stringify({tagName:l.value})),i(e.pageOptionsState)});const O=h({headers:[{key:"id",label:"ID",sortable:!0,error:"Can't be blank"},{key:"tagname",label:"Model Name",sortable:!0},{key:"tagDescription",label:"Description",sortable:!1},{key:"device_count",label:"Devices Count",sortable:!1,deviceCountType:"tag"}],data:m,isLoading:d});return{viewstate:e,dataTablePageChanged:i,openDrawer:o,closeDrawerState:p,deleteRow:f,confirmDelete:r,table:O,destroyModel:v,formSubmitted:g}}},oe={class:"pf-c-page__main",tabindex:"-1"},se={class:"pf-c-page__main-section pf-m-no-padding"},re={class:"pf-c-drawer__main"};function ie(s,a,l,e,m,d){const i=c("page-header"),o=c("data-table"),p=c("tags-form"),f=c("side-drawer"),g=c("delete-modal");return n(),_(N,null,[t("main",oe,[D(i,{pagename:e.viewstate.pagename,desc:e.viewstate.pagedesc},null,8,["pagename","desc"]),a[6]||(a[6]=t("div",{class:"pf-c-divider",role:"separator"},null,-1)),t("section",se,[t("div",{class:F(["pf-c-drawer",{"pf-m-expanded":e.viewstate.openDrawerState}])},[t("div",re,[D(o,{pagename:e.viewstate.pagenamesingle,tabledata:e.table,onPagechanged:e.dataTablePageChanged,onOpenDrawer:a[0]||(a[0]=r=>e.openDrawer(r)),onDeleteRow:a[1]||(a[1]=r=>e.deleteRow(r))},null,8,["pagename","tabledata","onPagechanged"]),(n(),u(f,{pagename:e.viewstate.pagenamesingle,drawerState:e.viewstate.openDrawerState,editid:e.viewstate.editid,onCloseDrawer:a[3]||(a[3]=r=>e.viewstate.openDrawerState=!1),key:e.viewstate.sideDrawerComponentKey},{subtext:k(()=>a[5]||(a[5]=[t("div",{class:"pf-l-flex__item"},"Please complete all fields",-1)])),form:k(()=>[(n(),u(p,{viewstate:e.viewstate,onCloseDrawer:e.closeDrawerState,onFormsubmitted:a[2]||(a[2]=r=>e.formSubmitted(r)),key:e.viewstate.editid},null,8,["viewstate","onCloseDrawer"]))]),_:1},8,["pagename","drawerState","editid"]))])],2)])]),e.viewstate.showDeleteModal?(n(),u(g,{key:0,editid:e.viewstate.editid,onCloseModal:a[4]||(a[4]=r=>e.viewstate.showDeleteModal=!1),onConfirmDelete:e.confirmDelete},null,8,["editid","onConfirmDelete"])):w("",!0)],64)}const we=x(te,[["render",ie]]);export{we as default};
