import{z as xe,o,x as E,w as l,A as bt,B as xt,e,C as kt,D as wt,b as w,d as t,q as de,g as c,s as re,i as a,t as $,c as C,F as H,E as X,G as Ze,j as M,v as ie,u as ue,r as f,y as Z,a as R,H as oe,I as he,J as $e,K as Ce,L as De,M as ze,N as Re,O as Xe,P as Ie,Q as Ve,R as Y,S as Se,T as se,U as le,V as ne,W as Ee,X as G,n as be,Y as ge,Z as _e,$ as et,a0 as tt,a1 as Ue,a2 as lt,a3 as ht,a4 as st,a5 as Oe,a6 as at,a7 as $t,a8 as ot,a9 as Ct,aa as Dt,ab as nt,l as It,_ as Vt,f as St,m as Et,h as Nt,ac as Pt,ad as Tt,ae as Ke,af as Mt,ag as At,ah as Bt,ai as Ut,aj as Lt,ak as Je,al as Ft,am as jt,an as zt,ao as Ot}from"./app-cxhb3sUh.js";import{u as ce,a as Ne,_ as Pe,b as q,c as Te,d as Me,e as Ae,f as Be,g as we,h as Kt,i as Gt,j as qt,k as Rt,l as Ht,m as Wt,n as Yt,o as Xt,p as Le,q as Jt}from"./useRowSelection-CQMGDxOw.js";import{_ as Fe}from"./ActionsMenu-CXN8JUKU.js";import{_ as dt,a as Qt,b as Zt}from"./TagMultiSelect.vue_vue_type_script_setup_true_lang-Cvcs0cCE.js";import{_ as rt}from"./Spinner-BLncglqK.js";import{e as me}from"./eventBus-CGRXT3Tn.js";import{_ as Ge,a as Qe}from"./Input-password.vue_vue_type_script_setup_true_lang-IHJ89_VA.js";import{_ as el}from"./DropdownMenuSeparator.vue_vue_type_script_setup_true_lang-CpAXcQmc.js";import{_ as tl}from"./ClearFilters.vue_vue_type_script_setup_true_lang-8fR0TORr.js";import{_ as ll}from"./CardFooter.vue_vue_type_script_setup_true_lang-n5OM_zeD.js";import{u as sl}from"./useTemplatesGithub-uHiVXjV0.js";/* empty css               */const al={__name:"SheetDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(_){const T=_,y=xe(()=>{const{class:x,...N}=T;return N});return(x,N)=>(o(),E(e(wt),xt({class:e(kt)("text-sm text-muted-foreground",T.class)},y.value),{default:l(()=>[bt(x.$slots,"default")]),_:3},16,["class"]))}},ol={class:"space-y-2"},nl={class:"mb-2 text-sm text-muted-foreground"},dl={key:0,class:"text-xs text-muted-foreground"},rl={__name:"CategoryListPopover",props:{recordName:{type:String,required:!0},items:{type:Array,required:!0},displayField:{type:String,default:"name"},displayCount:{type:Number,default:100}},setup(_){return(T,y)=>{const x=w("Button"),N=w("router-link");return o(),E(e(ie),null,{default:l(()=>[t(e(de),{"as-child":""},{default:l(()=>[t(x,{variant:"outline",className:"mt-1 inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground"},{default:l(()=>y[0]||(y[0]=[c(" ... ")])),_:1})]),_:1}),t(e(re),{class:"max-w-max",style:{width:"800px"}},{default:l(()=>[a("div",ol,[a("p",nl,"All command groups associated with "+$(_.recordName)+". Showing "+$(_.displayCount)+" records.",1)]),(o(!0),C(H,null,X(_.items.slice(0,_.displayCount),n=>(o(),E(e(Ze),{key:n[_.displayField],variant:"outline",class:"py-1 mt-1 hover:bg-rcgray-900"},{default:l(()=>[t(N,{to:n.view_url},{default:l(()=>[c($(n[_.displayField]),1)]),_:2},1032,["to"])]),_:2},1024))),128)),_.displayCount>_.displayCount-1?(o(),C("span",dl,[y[2]||(y[2]=a("br",null,null,-1)),c(" Displaying only "+$(_.displayCount)+" records. Visit the ",1),t(N,{to:"/commandgroups",class:"text-blue-500 hover:underline"},{default:l(()=>y[1]||(y[1]=[c(" Command Groups ")])),_:1}),y[3]||(y[3]=c(" page to view all devices. "))])):M("",!0)]),_:1})]),_:1})}}},il={key:0,class:"grid gap-2 py-4"},ul={class:"grid items-center grid-cols-4 gap-4"},cl={class:"grid items-center grid-cols-4 gap-4"},ml={class:"grid items-center grid-cols-4 gap-4"},vl={class:"flex flex-col w-full space-y-2"},pl={key:0,class:"text-red-400"},fl={key:1,class:"text-red-400"},gl={key:2,class:"text-red-400"},_l={class:"pl-2 ml-auto"},yl={class:"rc-kdb-class2"},bl={class:"pl-2 ml-auto"},xl={class:"rc-kdb-class2"},kl={__name:"CommandAddEditDialog",props:{editId:Number},emits:["save"],setup(_,{emit:T}){const{toastSuccess:y,toastError:x,toastInfo:N,toastWarning:n,toastDefault:m}=ue(),g=ce(),{openDialog:A,closeDialog:h,isDialogOpen:U}=g,k=T,u=f([]),d=f(!1),p=f({command:"",description:"",category:[]}),D=_;function r(s){s.ctrlKey&&s.key==="Enter"&&I()}Z(()=>{D.editId>0&&(d.value=!0,R.get(`/api/commands/${D.editId}`).then(s=>{p.value=s.data,p.value.categoryArray=s.data.category.map(v=>v.id)}),d.value=!1),window.addEventListener("keydown",r)}),oe(()=>{window.removeEventListener("keydown",r)});function I(){let s=D.editId>0?`/${D.editId}`:"",v=D.editId>0?"patch":"post";R[v]("/api/commands"+s,p.value).then(P=>{k("save",P.data),y("Command created","The command has been created successfully."),h("DialogNewCommand")}).catch(P=>{u.value=P.response.data.errors})}return(s,v)=>{const P=w("Button"),j=w("Icon");return o(),E(e(Ve),{open:e(U)("DialogNewCommand")},{default:l(()=>[t(e(he),{"as-child":""}),t(e($e),{class:"sm:max-w-fit",onEscapeKeyDown:v[6]||(v[6]=V=>e(h)("DialogNewCommand")),onPointerDownOutside:v[7]||(v[7]=V=>e(h)("DialogNewCommand")),onCloseClicked:v[8]||(v[8]=V=>e(h)("DialogNewCommand"))},{default:l(()=>[t(e(Ce),null,{default:l(()=>[t(e(De),null,{default:l(()=>[c($(_.editId>0?"Edit":"Add")+" Command "+$(_.editId>0?"(ID: "+_.editId+")":""),1)]),_:1}),t(e(ze),null,{default:l(()=>[c("Make changes to your command here. Click "+$(_.editId>0?"update":"save")+" when you're done.",1)]),_:1})]),_:1}),t(rt,{state:d.value},null,8,["state"]),d.value?M("",!0):(o(),C("div",il,[a("div",ul,[t(e(Re),{for:"command",class:"text-right"},{default:l(()=>v[9]||(v[9]=[c(" Command Name "),a("span",{class:"text-red-400"},"*",-1)])),_:1}),t(e(Xe),{modelValue:p.value.command,"onUpdate:modelValue":v[0]||(v[0]=V=>p.value.command=V),id:"command",class:"col-span-3"},null,8,["modelValue"])]),a("div",cl,[t(e(Re),{for:"description",class:"text-right"},{default:l(()=>v[10]||(v[10]=[c(" Description ")])),_:1}),t(e(Xe),{modelValue:p.value.description,"onUpdate:modelValue":v[1]||(v[1]=V=>p.value.description=V),id:"description",class:"col-span-3"},null,8,["modelValue"])]),a("div",ml,[t(e(Re),{for:"description",class:"text-right"},{default:l(()=>v[11]||(v[11]=[c(" Command Groups ")])),_:1}),t(dt,{modelValue:p.value.category,"onUpdate:modelValue":v[2]||(v[2]=V=>p.value.category=V)},null,8,["modelValue"])])])),a("div",vl,[u.value.description?(o(),C("span",pl,$(u.value.description[0]),1)):M("",!0),u.value.command?(o(),C("span",fl,$(u.value.command[0]),1)):M("",!0),u.value.category?(o(),C("span",gl,$(u.value.category[0]),1)):M("",!0)]),t(e(Ie),null,{default:l(()=>[t(P,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:v[3]||(v[3]=V=>e(h)("DialogNewCommand")),size:"sm"},{default:l(()=>v[12]||(v[12]=[c(" Cancel "),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])),_:1}),D.editId===0?(o(),E(P,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:v[4]||(v[4]=V=>I()),variant:"primary"},{default:l(()=>[v[14]||(v[14]=c(" Save ")),a("div",_l,[a("kbd",yl,[v[13]||(v[13]=c(" Ctrl  ")),t(j,{icon:"uil:enter",class:""})])])]),_:1})):M("",!0),D.editId>0?(o(),E(P,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:v[5]||(v[5]=V=>I()),variant:"primary"},{default:l(()=>[v[16]||(v[16]=c(" Update ")),a("div",bl,[a("kbd",xl,[v[15]||(v[15]=c(" Ctrl  ")),t(j,{icon:"uil:enter",class:""})])])]),_:1})):M("",!0)]),_:1})]),_:1})]),_:1},8,["open"])}}};function wl(){const _=f(1),T=f(parseInt(localStorage.getItem("perPage")||"10")),y=f("-id"),x=f(""),N=f({}),n=ce(),m=f(0),g=f(!1),A=f(1),h=f(1),U=f([]),k=f(!1),{openDialog:u}=n,{toastSuccess:d,toastError:p}=ue();async function D(S={}){g.value=!0;try{const B=await R.get("/api/commands",{params:{page:_.value,perPage:T.value,sort:y.value,...N.value}});U.value=B.data,A.value=B.data.last_page}catch(B){console.error("Error fetching commands:",B),p("Error","Failed to fetch commands.")}finally{g.value=!1}}const r=S=>{m.value=0,h.value=Math.random(),u("DialogNewCommand")};function I(S){m.value=S,h.value=Math.random(),u("DialogNewCommand")}const s=async S=>{try{await R.delete(`/api/commands/${S}`),D(),d("Command Deleted","The command has been deleted successfully."),k.value=!1}catch(B){console.error("Error deleting command:",B),p("Error","Failed to delete command."),k.value=!1}},v=async S=>{try{await R.post("/api/commands/delete-many",{ids:S}),D(),d("Commands Deleted","The commands have been deleted successfully."),k.value=!1,me.emit("deleteManyCommandsSuccess")}catch(B){console.error("Error deleting commands:",B),p("Error","Failed to delete commands."),k.value=!1}},P=S=>{m.value=S,h.value=Math.random(),u("DialogNewCommand")},j=()=>{D(),h.value=Math.random()};function V(S){S.altKey&&S.key==="n"&&(S.preventDefault(),u("DialogNewCommand"))}const K=Se(()=>{N.value["filter[commandname]"]=x.value,_.value=1,D()},500);Y([_,T],()=>{D()}),Y(x,()=>{K()}),Y(T,S=>{localStorage.setItem("perPage",S.toString())});function i(S){y.value===S?y.value=`-${S}`:y.value=S,D()}return{commands:U,isLoading:g,currentPage:_,perPage:T,lastPage:A,editId:m,newCommandModalKey:h,searchTerm:x,openDialog:u,fetchCommands:D,createCommand:r,updateCommand:I,deleteCommand:s,deleteManyCommands:v,handleSave:j,handleKeyDown:V,viewEditDialog:P,toggleSort:i,sortParam:y,showConfirmDelete:k}}const hl={class:"flex flex-col h-full gap-1 text-center"},$l={class:"flex items-center justify-between p-4"},Cl={class:"flex items-center"},Dl={class:"flex"},Il={class:"px-6"},Vl={key:0,class:"mr-2"},Sl={__name:"Main",setup(_){const{editId:T,commands:y,currentPage:x,perPage:N,searchTerm:n,lastPage:m,isLoading:g,fetchCommands:A,viewEditDialog:h,createCommand:U,deleteCommand:k,deleteManyCommands:u,handleSave:d,showConfirmDelete:p,handleKeyDown:D,newCommandModalKey:r,toggleSort:I,sortParam:s}=wl(),{selectedRows:v,selectAll:P,toggleSelectAll:j,toggleSelectRow:V}=Ne(y);return Z(()=>{A(),window.addEventListener("keydown",D),me.on("deleteManyCommandsSuccess",()=>{v.value=[],P.value=!1})}),oe(()=>{window.removeEventListener("keydown",D)}),(K,i)=>{const S=w("Input"),B=w("Button"),F=w("Checkbox"),te=w("Icon"),Q=w("router-link"),ee=w("Badge"),ae=w("Toaster");return o(),C("div",hl,[a("div",$l,[a("div",Cl,[t(S,{class:"max-w-sm ml-4",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter commands...",modelValue:e(n),"onUpdate:modelValue":i[0]||(i[0]=b=>se(n)?n.value=b:null)},null,8,["modelValue"]),t(B,{class:"ml-2 hover:bg-gray-800",variant:"outline",onClick:i[1]||(i[1]=b=>n.value="")},{default:l(()=>i[12]||(i[12]=[c(" Clear Filter ")])),_:1})]),a("div",Dl,[e(v).length?(o(),E(B,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:i[2]||(i[2]=le(b=>p.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[c(" Delete Selected "+$(e(v).length)+" Command(s) ",1)]),_:1})):M("",!0),t(B,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:le(e(U),["prevent"]),variant:"primary"},{default:l(()=>i[13]||(i[13]=[c(" New Command "),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])),_:1},8,["onClick"])])]),a("div",Il,[t(e(Ae),null,{default:l(()=>[t(e(Pe),null,{default:l(()=>[t(e(ne),null,{default:l(()=>[t(e(q),{class:"w-[2%]"},{default:l(()=>[t(F,{id:"selectAll",modelValue:e(P),"onUpdate:modelValue":i[3]||(i[3]=b=>se(P)?P.value=b:null),checked:e(P),onClick:i[4]||(i[4]=b=>e(j)())},null,8,["modelValue","checked"])]),_:1}),t(e(q),{class:"w-[5%]"},{default:l(()=>[t(B,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[5]||(i[5]=b=>e(I)("id"))},{default:l(()=>[t(te,{icon:e(s)==="id"?"lucide:sort-asc":e(s)==="-id"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),i[14]||(i[14]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),t(e(q),{class:"w-[20%]"},{default:l(()=>[t(B,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[6]||(i[6]=b=>e(I)("tagname"))},{default:l(()=>[t(te,{icon:e(s)==="tagname"?"lucide:sort-asc":e(s)==="-tagname"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),i[15]||(i[15]=a("span",{class:"ml-2"},"Command",-1))]),_:1})]),_:1}),t(e(q),{class:"w-[20%]"},{default:l(()=>i[16]||(i[16]=[c("Description")])),_:1}),t(e(q),{class:"w-[40%]"},{default:l(()=>i[17]||(i[17]=[c("Command Groups")])),_:1}),t(e(q),{class:"w-[10%]"},{default:l(()=>i[18]||(i[18]=[c("Actions")])),_:1})]),_:1})]),_:1}),t(e(Te),null,{default:l(()=>[e(g)?(o(),E(Ee,{key:0})):e(g)?(o(),E(Me,{key:2})):(o(!0),C(H,{key:1},X(e(y).data,b=>(o(),E(e(ne),{key:b.id},{default:l(()=>[t(e(G),{class:"text-start"},{default:l(()=>[t(F,{class:"cursor-pointer",id:"select-"+b.id,checked:!!e(v).includes(b.id),onClick:W=>e(V)(b.id)},null,8,["id","checked","onClick"])]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[c($(b.id),1)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[c($(b.command),1)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[c($(b.description),1)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[(o(!0),C(H,null,X(b.category.slice(0,8),(W,ye)=>(o(),C("span",{key:W.categoryName,class:"mr-2"},[t(ee,{variant:"outline",class:be([W.badgeColor?W.badgeColor:"bg-gray-600 text-gray-200 border-gray-500","py-1 mt-1 hover:bg-rcgray-800"])},{default:l(()=>[t(Q,{to:W.view_url},{default:l(()=>[c($(W.categoryName),1)]),_:2},1032,["to"])]),_:2},1032,["class"])]))),128)),b.category.length>8?(o(),C("span",Vl,[t(rl,{recordName:b.command,items:b.category,displayField:"categoryName"},null,8,["recordName","items"])])):M("",!0)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[t(Fe,{rowData:b,onOnEdit:W=>e(h)(b.id),onOnDelete:W=>e(k)(b.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(Be,{currentPage:e(x),lastPage:e(m),perPage:e(N),"onUpdate:currentPage":i[7]||(i[7]=b=>x.value=b),"onUpdate:perPage":i[8]||(i[8]=b=>N.value=b)},null,8,["currentPage","lastPage","perPage"]),(o(),E(kl,{onSave:i[9]||(i[9]=b=>e(d)()),key:e(r),editId:e(T)},null,8,["editId"])),t(we,{ids:e(v),showConfirmDelete:e(p),onClose:i[10]||(i[10]=b=>p.value=!1),onHandleDelete:i[11]||(i[11]=b=>e(u)(e(v)))},null,8,["ids","showConfirmDelete"]),t(ae)])])}}},El={class:"py-1"},Nl={class:"grid grid-cols-3 gap-2 mt-4 place-items-center"},Pl=["onClick"],Tl=ge({__name:"BadgeColorSelector",emits:["update:modelValue"],setup(_,{emit:T}){const y=T,x=f({}),N=[{label:"Lime",bgClass:"bg-lime-400 text-lime-900 border-lime-300"},{label:"Yellow",bgClass:"bg-yellow-400 text-yellow-900 border-yellow-300"},{label:"Teal",bgClass:"bg-teal-400 text-teal-900 border-teal-300"},{label:"Sky",bgClass:"bg-sky-400 text-sky-900 border-sky-300"},{label:"Pink",bgClass:"bg-pink-400 text-pink-900 border-pink-300"},{label:"Emerald",bgClass:"bg-emerald-400 text-emerald-900 border-emerald-300"},{label:"Orange",bgClass:"bg-orange-400 text-orange-900 border-orange-300"},{label:"Amber",bgClass:"bg-amber-400 text-amber-900 border-amber-300"},{label:"Fuchsia",bgClass:"bg-fuchsia-400 text-fuchsia-900 border-fuchsia-300"},{label:"Rose",bgClass:"bg-rose-400 text-rose-900 border-rose-300"},{label:"Violet",bgClass:"bg-violet-500 text-violet-100 border-violet-600"},{label:"Indigo",bgClass:"bg-indigo-500 text-indigo-100 border-indigo-600"},{label:"Blue",bgClass:"bg-blue-500 text-blue-100 border-blue-600"},{label:"Green",bgClass:"bg-green-500 text-green-100 border-green-600"},{label:"Purple",bgClass:"bg-purple-500 text-purple-100 border-purple-600"},{label:"Stone",bgClass:"bg-stone-600 text-stone-200 border-stone-700"},{label:"Red",bgClass:"bg-red-600 text-red-100 border-red-700"},{label:"Fuchsia Dark",bgClass:"bg-fuchsia-700 text-fuchsia-200 border-fuchsia-800"},{label:"Violet Dark",bgClass:"bg-violet-700 text-violet-200 border-violet-800"},{label:"Teal Dark",bgClass:"bg-teal-700 text-teal-200 border-teal-800"}];function n(m){x.value=m,y("update:modelValue",m.bgClass)}return(m,g)=>{const A=w("Button"),h=w("Separator");return o(),E(e(ie),null,{default:l(()=>[g[0]||(g[0]=a("div",{class:"hidden text-yellow-200 text-teal-100 bg-yellow-700 bg-teal-700 border-yellow-500 border-teal-500 bg-stone-700 text-stone-200 border-stone-500 bg-lime-700 text-lime-200 border-lime-500 bg-sky-700 text-sky-100 border-sky-500 bg-violet-700 text-violet-200 border-violet-500 bg-fuchsia-700 text-fuchsia-200 border-fuchsia-500"},null,-1)),t(e(de),{class:"col-span-3"},{default:l(()=>[t(A,{variant:"ghost",class:"flex flex-wrap items-start justify-start w-full p-1 pl-2 whitespace-normal border h-fit"},{default:l(()=>[a("div",{class:be(["h-6 px-2 border-2 border-transparent rounded-full cursor-pointer w-fit",Object.keys(x.value).length===0?"bg-gray-600 text-gray-200 border-gray-500":x.value.bgClass])},$(Object.keys(x.value).length===0?"Select color":x.value.label),3)]),_:1})]),_:1}),t(e(re),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:l(()=>[t(h),t(e(_e),{class:"h-64"},{default:l(()=>[a("div",El,[a("div",Nl,[(o(),C(H,null,X(N,(U,k)=>a("div",{key:k,class:be(["cursor-pointer w-6 h-6 rounded-full border-2",U.bgClass,x.value.value===k?"ring-2 ring-offset-2 ring-black":"border-transparent"]),onClick:u=>n(U)},null,10,Pl)),64))])])]),_:1})]),_:1})]),_:1})}}}),Ml={class:"grid gap-2 py-4"},Al={class:"grid items-center grid-cols-4 gap-4"},Bl={class:"grid items-center grid-cols-4 gap-4"},Ul={class:"grid items-center grid-cols-4 gap-4"},Ll={class:"flex flex-col w-full space-y-2"},Fl={key:0,class:"text-red-400"},jl={key:1,class:"text-red-400"},zl={class:"pl-2 ml-auto"},Ol={class:"rc-kdb-class2"},Kl={class:"pl-2 ml-auto"},Gl={class:"rc-kdb-class2"},ql={__name:"CommandGroupAddEditDialog",props:{editId:Number},emits:["save"],setup(_,{emit:T}){const{toastSuccess:y,toastError:x,toastInfo:N,toastWarning:n,toastDefault:m}=ue(),g=ce(),{openDialog:A,closeDialog:h,isDialogOpen:U}=g,k=T;f([]);const u=f([]),d=f({categoryName:"",categoryDescription:"",badgeColor:{}}),p=_;function D(I){I.ctrlKey&&I.key==="Enter"&&r()}Z(()=>{p.editId>0&&R.get(`/api/categories/${p.editId}`).then(I=>{d.value=I.data}),window.addEventListener("keydown",D)}),oe(()=>{window.removeEventListener("keydown",D)});function r(){let I=p.editId>0?`/${p.editId}`:"",s=p.editId>0?"patch":"post";R[s]("/api/categories"+I,d.value).then(v=>{k("save",v.data),y("Command Group created","The tag has been created successfully."),h("DialogNewCommandGroups")}).catch(v=>{u.value=v.response.data.errors})}return(I,s)=>{const v=w("Label"),P=w("Input"),j=w("Button"),V=w("Icon");return o(),E(e(Ve),{open:e(U)("DialogNewCommandGroups")},{default:l(()=>[t(e(he),{"as-child":""}),t(e($e),{class:"sm:max-w-fit",onEscapeKeyDown:s[6]||(s[6]=K=>e(h)("DialogNewCommandGroups")),onPointerDownOutside:s[7]||(s[7]=K=>e(h)("DialogNewCommandGroups")),onCloseClicked:s[8]||(s[8]=K=>e(h)("DialogNewCommandGroups"))},{default:l(()=>[t(e(Ce),null,{default:l(()=>[t(e(De),null,{default:l(()=>[c($(_.editId>0?"Edit":"Add")+" Command Group "+$(_.editId>0?"(ID: "+_.editId+")":""),1)]),_:1}),t(e(ze),null,{default:l(()=>[c("Make changes to your command group here. Click "+$(_.editId>0?"update":"save")+" when you're done.",1)]),_:1})]),_:1}),a("div",Ml,[a("div",Al,[t(v,{for:"categoryName",class:"text-right"},{default:l(()=>s[9]||(s[9]=[c(" Name ")])),_:1}),t(P,{modelValue:d.value.categoryName,"onUpdate:modelValue":s[0]||(s[0]=K=>d.value.categoryName=K),id:"categoryName",class:"col-span-3"},null,8,["modelValue"])]),a("div",Bl,[t(v,{for:"categoryDescription",class:"text-right"},{default:l(()=>s[10]||(s[10]=[c(" Description ")])),_:1}),t(P,{modelValue:d.value.categoryDescription,"onUpdate:modelValue":s[1]||(s[1]=K=>d.value.categoryDescription=K),id:"categoryDescription",class:"col-span-3"},null,8,["modelValue"])]),a("div",Ul,[t(v,{for:"categoryDescription",class:"text-right"},{default:l(()=>s[11]||(s[11]=[c(" Color ")])),_:1}),t(Tl,{modelValue:d.value.badgeColor,"onUpdate:modelValue":s[2]||(s[2]=K=>d.value.badgeColor=K)},null,8,["modelValue"])])]),a("div",Ll,[u.value.categoryDescription?(o(),C("span",Fl,$(u.value.categoryDescription[0]),1)):M("",!0),u.value.categoryName?(o(),C("span",jl,$(u.value.categoryName[0]),1)):M("",!0)]),t(e(Ie),null,{default:l(()=>[t(j,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:s[3]||(s[3]=K=>e(h)("DialogNewCommandGroups")),size:"sm"},{default:l(()=>s[12]||(s[12]=[c(" Cancel "),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])),_:1}),p.editId===0?(o(),E(j,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:s[4]||(s[4]=K=>r()),variant:"primary"},{default:l(()=>[s[14]||(s[14]=c(" Save ")),a("div",zl,[a("kbd",Ol,[s[13]||(s[13]=c(" Ctrl  ")),t(V,{icon:"uil:enter",class:""})])])]),_:1})):M("",!0),p.editId>0?(o(),E(j,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:s[5]||(s[5]=K=>r()),variant:"primary"},{default:l(()=>[s[16]||(s[16]=c(" Update ")),a("div",Kl,[a("kbd",Gl,[s[15]||(s[15]=c(" Ctrl  ")),t(V,{icon:"uil:enter",class:""})])])]),_:1})):M("",!0)]),_:1})]),_:1})]),_:1},8,["open"])}}};function Rl(){const _=f(1),T=f(parseInt(localStorage.getItem("perPage")||"10")),y=f("-id"),x=f(""),N=f({}),n=ce(),m=f(0),g=f(!1),A=f(1),h=f(1),U=f([]),k=f(!1),{openDialog:u}=n,{toastSuccess:d,toastError:p}=ue();async function D(S={}){g.value=!0;try{const B=await R.get("/api/categories",{params:{page:_.value,perPage:T.value,sort:y.value,...N.value}});U.value=B.data,A.value=B.data.last_page}catch(B){console.error("Error fetching categories:",B),p("Error","Failed to fetch categories.")}finally{g.value=!1}}const r=S=>{m.value=0,h.value=Math.random(),u("DialogNewCommandGroups")};function I(S){m.value=S,h.value=Math.random(),u("DialogNewCommandGroups")}const s=async S=>{try{await R.delete(`/api/categories/${S}`),D(),d("CommandGroups Deleted","The Command Group has been deleted successfully.")}catch(B){console.error("Error deleting Command Group:",B),p("Error","Failed to delete Command Group.")}},v=async S=>{try{await R.post("/api/categories/delete-many",{ids:S}),D(),d("CommandGroups Deleted","The command groups have been deleted successfully."),k.value=!1,me.emit("deleteManyCommandGroupsSuccess")}catch(B){console.error("Error deleting command groups:",B),p("Error","Failed to delete command groups."),k.value=!1}},P=S=>{m.value=S,h.value=Math.random(),u("DialogNewCommandGroups")},j=()=>{D(),h.value=Math.random()};function V(S){S.altKey&&S.key==="n"&&(S.preventDefault(),u("DialogNewCommandGroups"))}const K=Se(()=>{N.value["filter[categoryName]"]=x.value,_.value=1,D()},500);Y([_,T],()=>{D()}),Y(x,()=>{K()}),Y(T,S=>{localStorage.setItem("perPage",S.toString())});function i(S){y.value===S?y.value=`-${S}`:y.value=S,D()}return{categories:U,isLoading:g,currentPage:_,perPage:T,lastPage:A,editId:m,newCommandGroupsModalKey:h,searchTerm:x,openDialog:u,fetchCommandGroups:D,createCommandGroup:r,updateCommandGroup:I,deleteCommandGroup:s,deleteManyCommandGroups:v,handleSave:j,handleKeyDown:V,viewEditDialog:P,toggleSort:i,sortParam:y,showConfirmDelete:k}}const Hl={class:"flex flex-col h-full gap-1 text-center"},Wl={class:"flex items-center justify-between p-4"},Yl={class:"flex items-center"},Xl={class:"flex"},Jl={class:"px-6"},Ql={key:0,class:"mr-2"},Zl={__name:"Main",setup(_){const{editId:T,categories:y,currentPage:x,perPage:N,searchTerm:n,lastPage:m,isLoading:g,fetchCommandGroups:A,viewEditDialog:h,createCommandGroup:U,deleteCommandGroup:k,deleteManyCommandGroups:u,handleSave:d,showConfirmDelete:p,handleKeyDown:D,newCommandGroupModalKey:r,toggleSort:I,sortParam:s}=Rl(),{selectedRows:v,selectAll:P,toggleSelectAll:j,toggleSelectRow:V}=Ne(y);return Z(()=>{A(),window.addEventListener("keydown",D),me.on("deleteManyCommandGroupsSuccess",()=>{v.value=[],P.value=!1})}),oe(()=>{window.removeEventListener("keydown",D)}),(K,i)=>{const S=w("Input"),B=w("Button"),F=w("Checkbox"),te=w("Icon"),Q=w("router-link"),ee=w("Badge"),ae=w("Toaster");return o(),C("div",Hl,[a("div",Wl,[a("div",Yl,[t(S,{class:"max-w-sm ml-4",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter categories...",modelValue:e(n),"onUpdate:modelValue":i[0]||(i[0]=b=>se(n)?n.value=b:null)},null,8,["modelValue"]),t(B,{class:"ml-2 hover:bg-gray-800",variant:"outline",onClick:i[1]||(i[1]=b=>n.value="")},{default:l(()=>i[12]||(i[12]=[c(" Clear Filter ")])),_:1})]),a("div",Xl,[e(v).length?(o(),E(B,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:i[2]||(i[2]=le(b=>p.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[c(" Delete Selected "+$(e(v).length)+" CommandGroup(s) ",1)]),_:1})):M("",!0),t(B,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:le(e(U),["prevent"]),variant:"primary"},{default:l(()=>i[13]||(i[13]=[c(" New CommandGroup "),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])),_:1},8,["onClick"])])]),a("div",Jl,[t(e(Ae),null,{default:l(()=>[t(e(Pe),null,{default:l(()=>[t(e(ne),null,{default:l(()=>[t(e(q),{class:"w-[2%]"},{default:l(()=>[t(F,{id:"selectAll",modelValue:e(P),"onUpdate:modelValue":i[3]||(i[3]=b=>se(P)?P.value=b:null),checked:e(P),onClick:i[4]||(i[4]=b=>e(j)())},null,8,["modelValue","checked"])]),_:1}),t(e(q),{class:"w-[5%]"},{default:l(()=>[t(B,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[5]||(i[5]=b=>e(I)("id"))},{default:l(()=>[t(te,{icon:e(s)==="id"?"lucide:sort-asc":e(s)==="-id"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),i[14]||(i[14]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),t(e(q),{class:"w-[20%]"},{default:l(()=>[t(B,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[6]||(i[6]=b=>e(I)("categoryName"))},{default:l(()=>[t(te,{icon:e(s)==="categoryName"?"lucide:sort-asc":e(s)==="-categoryName"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),i[15]||(i[15]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),t(e(q),{class:"w-[20%]"},{default:l(()=>i[16]||(i[16]=[c("Description")])),_:1}),t(e(q),{class:"w-[40%]"},{default:l(()=>i[17]||(i[17]=[c("Devices")])),_:1}),t(e(q),{class:"w-[10%]"},{default:l(()=>i[18]||(i[18]=[c("Actions")])),_:1})]),_:1})]),_:1}),t(e(Te),null,{default:l(()=>[e(g)?(o(),E(Ee,{key:0})):e(g)?(o(),E(Me,{key:2})):(o(!0),C(H,{key:1},X(e(y).data,b=>(o(),E(e(ne),{key:b.id},{default:l(()=>[t(e(G),{class:"text-start"},{default:l(()=>[t(F,{class:"cursor-pointer",id:"select-"+b.id,checked:!!e(v).includes(b.id),onClick:W=>e(V)(b.id)},null,8,["id","checked","onClick"])]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[c($(b.id),1)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[c($(b.categoryName),1)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[c($(b.categoryDescription),1)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[(o(!0),C(H,null,X(b.device.slice(0,8),(W,ye)=>(o(),C("span",{key:W.device_name,class:"mr-2"},[t(ee,{variant:"outline",class:"py-1 mt-1 hover:bg-rcgray-800"},{default:l(()=>[t(Q,{to:W.view_url},{default:l(()=>[c($(W.device_name),1)]),_:2},1032,["to"])]),_:2},1024)]))),128)),b.device.length>8?(o(),C("span",Ql,[t(Ge,{recordName:b.categoryName,items:b.device,displayField:"device_name"},null,8,["recordName","items"])])):M("",!0)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[t(Fe,{rowData:b,onOnEdit:W=>e(h)(b.id),onOnDelete:W=>e(k)(b.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(Be,{currentPage:e(x),lastPage:e(m),perPage:e(N),"onUpdate:currentPage":i[7]||(i[7]=b=>x.value=b),"onUpdate:perPage":i[8]||(i[8]=b=>N.value=b)},null,8,["currentPage","lastPage","perPage"]),(o(),E(ql,{onSave:i[9]||(i[9]=b=>e(d)()),key:e(r),editId:e(T)},null,8,["editId"])),t(we,{ids:e(v),showConfirmDelete:e(p),onClose:i[10]||(i[10]=b=>p.value=!1),onHandleDelete:i[11]||(i[11]=b=>e(u)(e(v)))},null,8,["ids","showConfirmDelete"]),t(ae)])])}}},es={__name:"ConfirmDisableAlert",props:{ids:{type:Array,required:!0},showConfirmDisable:{type:Boolean,required:!0}},emits:["handleDisable","close"],setup(_,{emit:T}){const y=T;Z(()=>{window.addEventListener("keydown",n=>{n.key==="Escape"&&N()})}),oe(()=>{window.removeEventListener("keydown",n=>{n.key==="Escape"&&N()})});function x(){y("handleDisable")}function N(){y("close")}return(n,m)=>(o(),E(e(Xt),{open:_.showConfirmDisable},{default:l(()=>[t(e(Kt),null,{default:l(()=>[t(e(Gt),null,{default:l(()=>[t(e(qt),null,{default:l(()=>[c("Disable device with ID "+$(_.ids)+"?",1)]),_:1}),t(e(Rt),null,{default:l(()=>m[2]||(m[2]=[c("Are you absolutely sure you want to disable this device? Disabling a device stops it from downloading configs via scheduled tasks and other operations.")])),_:1})]),_:1}),t(e(Ht),null,{default:l(()=>[t(e(Wt),{onCancel:m[0]||(m[0]=g=>N())},{default:l(()=>m[3]||(m[3]=[c("Cancel")])),_:1}),t(e(Yt),{onAction:m[1]||(m[1]=g=>x())},{default:l(()=>m[4]||(m[4]=[c("Continue")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]))}},ts={__name:"ActionsMenuDevices",props:{rowData:{type:Object,required:!0},showEditBtn:{type:Boolean,default:!0}},emits:["onEdit","onDelete","onDisable"],setup(_,{emit:T}){const y=f(!1),x=f(!1),N=T;function n(){N("onEdit")}function m(){y.value=!0}function g(){x.value=!0}function A(){N("onDisable"),x.value=!1}function h(){N("onEnable")}return(U,k)=>{const u=w("Button"),d=w("Icon");return o(),C("div",null,[t(e(lt),null,{default:l(()=>[t(e(et),{"as-child":""},{default:l(()=>[t(u,{variant:"ghost",class:"hover:animate-pulse"},{default:l(()=>k[2]||(k[2]=[c(" ... ")])),_:1})]),_:1}),t(e(tt),{class:"w-56",align:"end",side:"bottom"},{default:l(()=>[_.showEditBtn?(o(),E(e(Ue),{key:0,class:"cursor-pointer hover:bg-rcgray-800",onClick:n},{default:l(()=>[k[3]||(k[3]=a("span",null,"Edit",-1)),t(e(Le),null,{default:l(()=>[t(d,{icon:"fluent-color:text-edit-style-16"})]),_:1})]),_:1})):M("",!0),_.showEditBtn?(o(),E(e(el),{key:1})):M("",!0),_.rowData.status===100?(o(),E(e(Ue),{key:2,class:"cursor-pointer hover:bg-rcgray-800",onClick:h},{default:l(()=>[k[4]||(k[4]=a("span",null,"Enable",-1)),t(e(Le),null,{default:l(()=>[t(d,{icon:"emojione-v1:up-arrow"})]),_:1})]),_:1})):M("",!0),_.rowData.status!=100?(o(),E(e(Ue),{key:3,class:"cursor-pointer hover:bg-rcgray-800",onClick:g},{default:l(()=>[k[5]||(k[5]=a("span",null,"Disable",-1)),t(e(Le),null,{default:l(()=>[t(d,{icon:"emojione-v1:down-arrow"})]),_:1})]),_:1})):M("",!0),t(e(Ue),{class:"cursor-pointer hover:bg-rcgray-800",onClick:m},{default:l(()=>[k[6]||(k[6]=a("span",{class:"text-red-400"},"Delete",-1)),t(e(Le),null,{default:l(()=>[t(d,{icon:"flat-color-icons:full-trash"})]),_:1})]),_:1})]),_:1})]),_:1}),t(es,{ids:[_.rowData.id],showConfirmDisable:x.value,onClose:k[0]||(k[0]=p=>x.value=!1),onHandleDisable:A},null,8,["ids","showConfirmDisable"]),t(we,{ids:[_.rowData.id],showConfirmDelete:y.value,onClose:k[1]||(k[1]=p=>y.value=!1),onHandleDelete:A},null,8,["ids","showConfirmDelete"])])}}},ls={key:0,class:"text-sm font-light"},ss={class:"text-sm font-semibold"},as={class:"relative items-center w-full"},os={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},ns={class:"py-1"},ds=["onClick"],rs=["checked"],is={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},us={"data-size":"20"},cs={class:"p-1 border-5"},ms=ge({__name:"CategoryFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(_,{emit:T}){const y=T,x=f([]),N=f(!1),n=f([]),m=f(""),g=f(!1),A=_;Z(()=>{U()}),Y(()=>A.modelValue,u=>{n.value=u,g.value=n.value.length===x.value.length});function h(u){if(u.id===9999999)g.value?(n.value=[],g.value=!1):(n.value=[...x.value],g.value=!0);else{const d=n.value.findIndex(p=>p.id===u.id);d!==-1?(n.value.splice(d,1),g.value=!1):(n.value.push(u),n.value.length===x.value.length&&(g.value=!0))}N.value=!1,y("update:modelValue",n.value)}function U(){R.get("/api/categories/?perPage=10000").then(u=>{x.value=u.data.data})}const k=xe(()=>x.value.filter(u=>u.categoryName.toLowerCase().includes(m.value.toLowerCase())));return(u,d)=>{const p=w("Button"),D=w("Input"),r=w("Icon"),I=w("Separator");return o(),E(e(ie),null,{default:l(()=>[t(e(de),null,{default:l(()=>[t(p,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[t(ht,{class:"mr-2"}),n.value&&n.value.length===0?(o(),C(H,{key:0},[c("Command Group")],64)):(o(),C(H,{key:1},[n.value.length>0?(o(),C("span",ls,[d[2]||(d[2]=c(" Command Group ")),a("strong",ss,$(n.value.length)+" selected",1)])):M("",!0)],64))]),_:1})]),_:1}),t(e(re),{side:"bottom",align:"start",class:"w-64 p-0"},{default:l(()=>[a("div",as,[t(D,{id:"search",type:"text",modelValue:m.value,"onUpdate:modelValue":d[0]||(d[0]=s=>m.value=s),placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",os,[t(r,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),t(I),t(e(_e),{class:"h-44"},{default:l(()=>[a("div",ns,[(o(!0),C(H,null,X(k.value,s=>(o(),C("div",{key:s.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:v=>h(s)},[a("input",{type:"checkbox",checked:n.value.some(v=>v.id===s.id),class:"mr-2"},null,8,rs),a("span",is,[a("span",us,$(s.categoryName),1)])],8,ds))),128))])]),_:1}),t(I),a("div",cs,[t(p,{variant:"ghost",class:"justify-start w-full p-1",onClick:d[1]||(d[1]=s=>h({id:9999999}))},{default:l(()=>[t(r,{icon:g.value?"fluent:select-all-on-16-filled":"fluent:select-all-on-16-regular",class:"w-4 h-4 mr-2 text-muted-foreground"},null,8,["icon"]),a("span",null,$(g.value?"Deselect all":"Select all"),1)]),_:1})])]),_:1})]),_:1})}}});function vs(_){const T=st(),{openSheet:y,closeSheet:x,isSheetOpen:N}=T,n=f([]),m=f(!1),g=f(!1),A=Oe(),h=at("formatters");Z(()=>{N("DeviceCommentSheet")&&U()});function U(){m.value=!0,R.get(`/api/device-comments/${_.deviceId}`).then(p=>{n.value=p.data,m.value=!1}).catch(p=>{console.error(p),m.value=!1})}function k(p){x("DeviceCommentSheet"),A.push({name:"device",params:{id:p}})}function u(){g.value||(n.value.unshift({user:{name:"New User"},created_at:new Date().toISOString(),comment:"",is_open:!0,isEditable:!0}),g.value=!0)}function d(p){n.value[p].isEditable=!1,R.post("/api/device/comments",{comment:n.value[p].comment,device_id:_.deviceId}).then(D=>{}).catch(D=>{console.error(D)})}return{addComment:u,closeSheet:x,comments:n,formatters:h,isLoading:m,isSheetOpen:N,saveComment:d,viewDevice:k}}const ps={class:"border-b"},fs={key:0},gs={class:"mt-4 space-y-4"},_s={class:"text-sm text-muted-foreground"},ys={key:1},bs={__name:"CommentSheet",props:{deviceId:{type:Number,required:!0},deviceName:{type:String,required:!0}},setup(_){const T=_,{addComment:y,closeSheet:x,comments:N,formatters:n,isLoading:m,isSheetOpen:g,saveComment:A,viewDevice:h}=vs(T);return(U,k)=>{const u=w("Button"),d=w("CommentAddIcon"),p=w("Textarea"),D=w("Icon");return o(),E(e(Tt),{open:e(g)("DeviceCommentSheet")},{default:l(()=>[t(e($t),{class:"h-[96vh] m-6 rounded-lg border",onEscapeKeyDown:k[1]||(k[1]=r=>e(x)("DeviceCommentSheet")),onPointerDownOutside:k[2]||(k[2]=r=>e(x)("DeviceCommentSheet")),onCloseClicked:k[3]||(k[3]=r=>e(x)("DeviceCommentSheet"))},{default:l(()=>[e(m)?(o(),E(ot,{key:0})):M("",!0),e(m)?M("",!0):(o(),E(e(Ct),{key:1},{default:l(()=>[t(e(Dt),null,{default:l(()=>k[4]||(k[4]=[c("Comments")])),_:1}),t(e(al),null,{default:l(()=>[k[5]||(k[5]=a("span",{class:"text-muted-foreground"},"Comments on",-1)),t(u,{class:"px-2 py-0 hover:bg-rcgray-800 rounded-xl",variant:"ghost",onClick:k[0]||(k[0]=r=>e(h)(_.deviceId))},{default:l(()=>[a("span",ps,$(_.deviceName),1)]),_:1}),t(u,{variant:"ghost",class:"float-right",onClick:e(y)},{default:l(()=>[t(d,{class:"text-muted-foreground"})]),_:1},8,["onClick"])]),_:1})]),_:1})),t(nt,{name:"fade"},{default:l(()=>[e(m)?M("",!0):(o(),C("div",fs,[a("div",gs,[(o(!0),C(H,null,X(e(N),(r,I)=>(o(),E(e(It),{key:I},{default:l(()=>[t(e(Vt),{class:"p-2"},{default:l(()=>[t(e(St),null,{default:l(()=>[a("span",null,$(r.user.name),1)]),_:2},1024),t(e(Et))]),_:2},1024),t(e(Nt),{class:"flex justify-end px-2 py-0"},{default:l(()=>[r.isEditable?(o(),E(p,{key:0,modelValue:r.comment,"onUpdate:modelValue":s=>r.comment=s,rows:"1",class:"mt-2"},null,8,["modelValue","onUpdate:modelValue"])):(o(),E(p,{key:1,class:"border-none",modelValue:r.comment,"onUpdate:modelValue":s=>r.comment=s,disabled:""},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1024),t(e(ll),{class:"flex justify-between px-2 py-1"},{default:l(()=>[a("div",_s,$(e(n).formatTime(r.created_at)),1),a("div",null,[r.isEditable?(o(),E(u,{key:0,onClick:s=>e(A)(I),variant:"outline",size:"sm",class:""},{default:l(()=>k[6]||(k[6]=[c(" Save ")])),_:2},1032,["onClick"])):M("",!0),r.isEditable?M("",!0):(o(),C("div",ys,[r.is_open?(o(),E(u,{key:0,title:"Resolve Comment",size:"sm",variant:"ghost",class:"py-2"},{default:l(()=>[t(D,{icon:"solar:check-circle-broken"})]),_:1})):M("",!0)]))])]),_:2},1024)]),_:2},1024))),128))])]))]),_:1}),t(e(Pt),null,{default:l(()=>k[7]||(k[7]=[a("div",{class:"flex-1"},null,-1)])),_:1})]),_:1})]),_:1},8,["open"])}}},xs={class:"relative items-center w-full"},ks={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},ws={class:"py-1"},hs=["onClick"],$s={"data-size":"20"},Cs={class:"p-1 border-5"},Ds=ge({__name:"CredentialsMultiSelect",props:{modelValue:{type:Array,required:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(_,{emit:T}){const y=T,x=f([]);f([]);const N=f(!1),n=f(""),m=f([]),g=_,A=xe(()=>x.value.filter(u=>u.cred_name.toLowerCase().includes(n.value.toLowerCase())&&!m.value.some(d=>d.id===u.id)));Y(()=>g.modelValue,u=>{m.value=u}),Z(()=>{k(),g.modelValue[0]!=null?m.value=g.modelValue:m.value=[]});function h(u){g.singleSelect?m.value=[u]:m.value.push(u),N.value=!1,n.value="",y("update:modelValue",m.value)}function U(u){const d=m.value.findIndex(p=>p.cred_name===u);d!==-1&&m.value.splice(d,1),y("update:modelValue",m.value)}function k(){R.get("/api/device-credentials/?perPage=10000").then(u=>{x.value=u.data.data})}return(u,d)=>{const p=w("Icon"),D=w("Button"),r=w("Input"),I=w("Separator");return o(),E(e(ie),null,{default:l(()=>[d[2]||(d[2]=a("div",{class:"hidden text-yellow-200 text-teal-100 bg-yellow-700 bg-teal-700 border-yellow-500 border-teal-500 bg-stone-700 text-stone-200 border-stone-500 bg-lime-700 text-lime-200 border-lime-500 bg-sky-700 text-sky-100 border-sky-500 bg-violet-700 text-violet-200 border-violet-500 bg-fuchsia-700 text-fuchsia-200 border-fuchsia-500"},null,-1)),t(e(de),{class:"col-span-3"},{default:l(()=>[t(D,{variant:"ghost",class:be(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",m.value.length===0?"text-muted-foreground":" "]),style:Ke(m.value.length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:l(()=>[c($(m.value&&m.value.length===0?"Select credentials":"")+" ",1),(o(!0),C(H,null,X(m.value,s=>(o(),C("span",{key:s.id,class:"relative my-1 group"},[a("span",{class:be([s.badgeColor?s.badgeColor:"bg-gray-600 text-gray-200 border-gray-500","flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"])},[c($(s.cred_name)+" ",1),t(p,{icon:"si:close-line",class:"ml-1 cursor-pointer hover:text-white",onClick:le(v=>U(s.cred_name),["stop"])},null,8,["onClick"])],2)]))),128))]),_:1},8,["class","style"])]),_:1}),t(e(re),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:l(()=>[a("div",xs,[t(r,{id:"search",type:"text",modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=s=>n.value=s),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",ks,[t(p,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),t(I),t(e(_e),{class:"h-64"},{default:l(()=>[a("div",ws,[(o(!0),C(H,null,X(A.value,s=>(o(),C("div",{key:s.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:v=>h(s)},[a("span",{"data-size":"20",class:be(["cursor-default text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border",s.badgeColor?s.badgeColor:"bg-gray-600 text-gray-200 border-gray-500"])},[a("span",$s,$(s.cred_name),1)],2)],8,hs))),128))])]),_:1}),t(I),a("div",Cs,[t(D,{variant:"ghost",class:"justify-start w-full p-1"},{default:l(()=>[t(p,{icon:"octicon:plus-16",class:"w-3 h-3 mt-1 mr-2 text-muted-foreground"}),d[1]||(d[1]=a("span",null,"Create new record",-1))]),_:1})])]),_:1})]),_:1})}}}),Is={class:"flex items-center"},Vs={class:"ml-2"},Ss={class:"grid gap-2 p-4"},Es={class:"grid items-center grid-cols-1 gap-4"},Ns={key:0,class:"col-start-2 -mt-4 text-sm text-red-400"},Ps={class:"pl-2 ml-auto"},Ts={class:"rc-kdb-class2"},Ms={class:"pl-2 ml-auto"},As={class:"rc-kdb-class2"},Bs={__name:"DeviceModelAddDialog",props:{editId:{type:Number,default:0}},emits:["save"],setup(_,{emit:T}){const{toastSuccess:y,toastError:x,toastInfo:N,toastWarning:n,toastDefault:m}=ue(),g=ce(),{openDialog:A,closeDialog:h,isDialogOpen:U}=g,k=T;f([]);const u=f([]),d=f({name:""});f("");const p=_;function D(I){I.ctrlKey&&I.key==="Enter"&&r()}Z(()=>{window.addEventListener("keydown",D)}),oe(()=>{window.removeEventListener("keydown",D)});function r(){let I=p.editId>0?`/${p.editId}`:"",s=p.editId>0?"patch":"post";R[s]("/api/device-models"+I,d.value).then(v=>{k("save"),y("Device Model created","The device model has been created successfully."),h("DialogDeviceModelAdd"),d.value={name:""}}).catch(v=>{u.value=v.response.data.errors})}return(I,s)=>{const v=w("Icon"),P=w("Button"),j=w("UserIcon"),V=w("Label"),K=w("Input");return o(),E(e(Ve),{open:e(U)("DialogDeviceModelAdd")},{default:l(()=>[t(e(he),{"as-child":""},{default:l(()=>[t(P,{variant:"ghost",onClick:s[0]||(s[0]=i=>e(A)("DialogDeviceModelAdd")),class:"justify-start w-full p-1"},{default:l(()=>[t(v,{icon:"octicon:plus-16",class:"w-3 h-3 mt-1 mr-2 text-muted-foreground"}),s[8]||(s[8]=a("span",null,"Create new record",-1))]),_:1})]),_:1}),t(e($e),{class:"p-0 sm:max-w-1/3",onEscapeKeyDown:s[5]||(s[5]=i=>e(h)("DialogDeviceModelAdd")),onPointerDownOutside:s[6]||(s[6]=i=>e(h)("DialogDeviceModelAdd")),onCloseClicked:s[7]||(s[7]=i=>e(h)("DialogDeviceModelAdd"))},{default:l(()=>[t(e(Ce),{class:"rc-dialog-header"},{default:l(()=>[t(e(De),{class:"text-sm text-rcgray-200"},{default:l(()=>[a("div",Is,[t(j),a("span",Vs,$(_.editId>0?"Edit":"Add")+" Device Model "+$(_.editId>0?"(ID: "+_.editId+")":""),1)])]),_:1})]),_:1}),a("div",Ss,[a("div",Es,[t(V,{for:"name",class:"text-left"},{default:l(()=>s[9]||(s[9]=[c(" Device Model Name "),a("span",{class:"text-red-400"},"*",-1)])),_:1}),t(K,{modelValue:d.value.name,"onUpdate:modelValue":s[1]||(s[1]=i=>d.value.name=i),id:"name",class:"col-span-3",autocomplete:"off"},null,8,["modelValue"]),u.value.name?(o(),C("span",Ns,$(u.value.name[0]),1)):M("",!0)])]),t(e(Ie),{class:"rc-dialog-footer bg-rcgray-800"},{default:l(()=>[t(P,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:s[2]||(s[2]=i=>e(h)("DialogDeviceModelAdd")),size:"sm"},{default:l(()=>s[10]||(s[10]=[c(" Cancel "),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])),_:1}),p.editId===0?(o(),E(P,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:s[3]||(s[3]=i=>r()),variant:"primary"},{default:l(()=>[s[12]||(s[12]=c(" Save ")),a("div",Ps,[a("kbd",Ts,[s[11]||(s[11]=c(" Ctrl  ")),t(v,{icon:"uil:enter",class:""})])])]),_:1})):M("",!0),p.editId>0?(o(),E(P,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:s[4]||(s[4]=i=>r()),variant:"primary"},{default:l(()=>[s[14]||(s[14]=c(" Update ")),a("div",Ms,[a("kbd",As,[s[13]||(s[13]=c(" Ctrl  ")),t(v,{icon:"uil:enter",class:""})])])]),_:1})):M("",!0)]),_:1})]),_:1})]),_:1},8,["open"])}}},Us={class:"flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"},Ls={class:"relative items-center w-full"},Fs={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},js={class:"py-1"},zs=["onClick"],Os={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Ks={"data-size":"20"},Gs={class:"p-1 border-5"},qs=ge({__name:"DeviceModelMultiSelect",props:{modelValue:{type:Array,required:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(_,{emit:T}){const y=T,x=f([]);f([]);const N=f(!1),n=f(""),m=f([]),g=_,A=xe(()=>x.value.filter(d=>d.name.toLowerCase().includes(n.value.toLowerCase())&&!m.value.some(p=>p.id===d.id)));Y(()=>g.modelValue,d=>{m.value=d}),Z(()=>{k(),g.modelValue&&g.modelValue.length>0&&(m.value=g.modelValue)});function h(d){g.singleSelect?m.value=[d]:m.value.push(d),N.value=!1,n.value="",y("update:modelValue",m.value)}function U(d){const p=m.value.findIndex(D=>D.name===d);p!==-1&&m.value.splice(p,1),y("update:modelValue",m.value)}function k(){R.get("/api/device-models/?perPage=10000").then(d=>{x.value=d.data.data})}function u(){k()}return(d,p)=>{const D=w("Icon"),r=w("Button"),I=w("Input"),s=w("Separator");return o(),E(e(ie),null,{default:l(()=>[t(e(de),{class:"col-span-3"},{default:l(()=>[t(r,{variant:"ghost",class:be(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",m.value.length===0?"text-muted-foreground":" "]),style:Ke(m.value.length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:l(()=>[c($(m.value&&m.value.length===0?"Select device model":"")+" ",1),(o(!0),C(H,null,X(m.value,v=>(o(),C("span",{key:v.id,class:"relative my-1 group"},[a("span",Us,[c($(v.name)+" ",1),t(D,{icon:"si:close-line",class:"ml-1 cursor-pointer hover:text-white",onClick:le(P=>U(v.name),["stop"])},null,8,["onClick"])])]))),128))]),_:1},8,["class","style"])]),_:1}),t(e(re),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:l(()=>[a("div",Ls,[t(I,{id:"search",type:"text",modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=v=>n.value=v),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",Fs,[t(D,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),t(s),t(e(_e),{class:"h-64"},{default:l(()=>[a("div",js,[(o(!0),C(H,null,X(A.value,v=>(o(),C("div",{key:v.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:P=>h(v)},[a("span",Os,[a("span",Ks,$(v.name),1)])],8,zs))),128))])]),_:1}),t(s),a("div",Gs,[t(Bs,{onSave:p[1]||(p[1]=v=>u())})])]),_:1})]),_:1})}}}),Rs={class:"grid gap-4"},Hs={class:"space-y-2"},Ws={class:"flex items-center space-x-2"},Ys={class:"font-medium leading-none"},Xs={class:"text-sm text-muted-foreground"},He=ge({__name:"HelpPopover",props:{title:{type:String,required:!0},content:{type:String,required:!0}},setup(_){return(T,y)=>{const x=w("Icon");return o(),E(e(ie),null,{default:l(()=>[t(e(de),{"as-child":""},{default:l(()=>[t(e(Mt),{tabindex:"-1",variant:"ghost",class:"h-0 p-0 m-0 ml-1"},{default:l(()=>[t(x,{icon:"formkit:help"})]),_:1})]),_:1}),t(e(re),{class:"w-80",side:"top",align:"start"},{default:l(()=>[a("div",Rs,[a("div",Hs,[a("div",Ws,[t(x,{icon:"formkit:help"}),a("h4",Ys,$(_.title),1)]),a("p",Xs,$(_.content),1)])])]),_:1})]),_:1})}}}),Js={class:"flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"},Qs={class:"relative items-center w-full"},Zs={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},ea={class:"py-1"},ta=["onClick"],la={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},sa={"data-size":"20"},aa={class:"p-1 border-5"},oa=ge({__name:"TemplateMultiSelect",props:{modelValue:{type:Array,required:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(_,{emit:T}){const y=T,x=f([]);f([]);const N=f(!1),n=f(""),m=f([]),g=_,A=xe(()=>x.value.filter(u=>u.templateName.toLowerCase().includes(n.value.toLowerCase())&&!m.value.some(d=>d.id===u.id)));Y(()=>g.modelValue,u=>{m.value=u}),Z(()=>{k(),g.modelValue[0]&&g.modelValue[0].length>0&&(console.log("props.modelValue",g.modelValue),m.value=g.modelValue)});function h(u){g.singleSelect?m.value=[u]:m.value.push(u),N.value=!1,n.value="",y("update:modelValue",m.value)}function U(u){const d=m.value.findIndex(p=>p.templateName===u);d!==-1&&m.value.splice(d,1),y("update:modelValue",m.value)}function k(){R.get("/api/templates/?perPage=10000").then(u=>{x.value=u.data.data})}return(u,d)=>{const p=w("Icon"),D=w("Button"),r=w("Input"),I=w("Separator");return o(),E(e(ie),null,{default:l(()=>[t(e(de),{class:"col-span-3"},{default:l(()=>[t(D,{variant:"ghost",class:be(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",m.value.length===0?"text-muted-foreground":" "]),style:Ke(m.value.length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:l(()=>[c($(m.value&&m.value.length===0?"Select templates":"")+" ",1),(o(!0),C(H,null,X(m.value,s=>(o(),C("span",{key:s.id,class:"relative my-1 group"},[a("span",Js,[c($(s.templateName)+" ",1),t(p,{icon:"si:close-line",class:"ml-1 cursor-pointer hover:text-white",onClick:le(v=>U(s.templateName),["stop"])},null,8,["onClick"])])]))),128))]),_:1},8,["class","style"])]),_:1}),t(e(re),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:l(()=>[a("div",Qs,[t(r,{id:"search",type:"text",modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=s=>n.value=s),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",Zs,[t(p,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),t(I),t(e(_e),{class:"h-64"},{default:l(()=>[a("div",ea,[(o(!0),C(H,null,X(A.value,s=>(o(),C("div",{key:s.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:v=>h(s)},[a("span",la,[a("span",sa,$(s.templateName),1)])],8,ta))),128))])]),_:1}),t(I),a("div",aa,[t(D,{variant:"ghost",class:"justify-start w-full p-1"},{default:l(()=>[t(p,{icon:"octicon:plus-16",class:"w-3 h-3 mt-1 mr-2 text-muted-foreground"}),d[1]||(d[1]=a("span",null,"Create new record",-1))]),_:1})])]),_:1})]),_:1})}}}),na={class:"flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"},da={class:"relative items-center w-full"},ra={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},ia={class:"py-1"},ua=["onClick"],ca={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},ma={"data-size":"20"},va={class:"p-1 border-5"},pa=ge({__name:"VendorMultiSelect",props:{modelValue:{type:Array,required:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(_,{emit:T}){const y=T,x=f([]);f([]);const N=f(!1),n=f(""),m=f([]),g=_,A=xe(()=>x.value.filter(u=>u.vendorName.toLowerCase().includes(n.value.toLowerCase())&&!m.value.some(d=>d.id===u.id)));Y(()=>g.modelValue,u=>{m.value=u}),Z(()=>{k(),g.modelValue&&g.modelValue.length>0&&m.value.push(...g.modelValue)});function h(u){g.singleSelect?m.value=[u]:m.value.push(u),N.value=!1,n.value="",y("update:modelValue",m.value)}function U(u){const d=m.value.findIndex(p=>p.vendorName===u);d!==-1&&m.value.splice(d,1),y("update:modelValue",m.value)}function k(){R.get("/api/vendors/?perPage=10000").then(u=>{x.value=u.data.data})}return(u,d)=>{const p=w("Icon"),D=w("Button"),r=w("Input"),I=w("Separator");return o(),E(e(ie),null,{default:l(()=>[t(e(de),{class:"col-span-3"},{default:l(()=>[t(D,{variant:"ghost",class:be(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",m.value.length===0?"text-muted-foreground":" "]),style:Ke(m.value.length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:l(()=>[c($(m.value&&m.value.length===0?"Select vendors":"")+" ",1),(o(!0),C(H,null,X(m.value,s=>(o(),C("span",{key:s.id,class:"relative my-1 group"},[a("span",na,[c($(s.vendorName)+" ",1),t(p,{icon:"si:close-line",class:"ml-1 cursor-pointer hover:text-white",onClick:le(v=>U(s.vendorName),["stop"])},null,8,["onClick"])])]))),128))]),_:1},8,["class","style"])]),_:1}),t(e(re),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:l(()=>[a("div",da,[t(r,{id:"search",type:"text",modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=s=>n.value=s),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",ra,[t(p,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),t(I),t(e(_e),{class:"h-64"},{default:l(()=>[a("div",ia,[(o(!0),C(H,null,X(A.value,s=>(o(),C("div",{key:s.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:v=>h(s)},[a("span",ca,[a("span",ma,$(s.vendorName),1)])],8,ua))),128))])]),_:1}),t(I),a("div",va,[t(D,{variant:"ghost",class:"justify-start w-full p-1"},{default:l(()=>[t(p,{icon:"octicon:plus-16",class:"w-3 h-3 mt-1 mr-2 text-muted-foreground"}),d[1]||(d[1]=a("span",null,"Create new record",-1))]),_:1})])]),_:1})]),_:1})}}});function fa(_,T){const{toastSuccess:y,toastError:x,toastInfo:N,toastWarning:n,toastDefault:m}=ue(),g=ce(),{closeDialog:A,isDialogOpen:h}=g,U=f(!1),k=f(!1),u=f([]),d=f({device_name:"",device_ip:"",device_port_override:"",device_cred_id:0,device_cred:[],device_vendor:[],device_model:"",selectedCategoryArray:[],selectedModelArray:[],device_category_id:0,device_tags:[],device_username:"",device_password:"",device_enable_password:"",device_template:[],device_main_prompt:"",device_enable_prompt:""});Z(()=>{_>0&&(k.value=!0,R.get(`/api/devices/${_}`).then(P=>{d.value.device_name=P.data.device_name,d.value.device_ip=P.data.device_ip,d.value.device_port_override=P.data.device_port_override,d.value.device_cred_id=P.data.device_cred_id,d.value.device_cred.push(P.data.device_cred),d.value.device_vendor.push(P.data.vendor[0]),d.value.device_model=P.data.device_model,d.value.selectedCategoryArray.push(P.data.category[0]),d.value.selectedModelArray=[{name:P.data.device_model}],d.value.device_category_id=P.data.device_category_id,P.data.tag.forEach(j=>{d.value.device_tags.push(j)}),d.value.device_username=P.data.device_username,d.value.device_password=P.data.device_password,d.value.device_enable_password=P.data.device_enable_password,d.value.device_template.push(P.data.template[0]),d.value.device_main_prompt=P.data.device_main_prompt,d.value.device_enable_prompt=P.data.device_enable_prompt,k.value=!1})),window.addEventListener("keydown",p)}),oe(()=>{window.removeEventListener("keydown",p)});function p(P){P.ctrlKey&&P.key==="Enter"&&D()}function D(){d.value.selectedModelArray.length>0&&(d.value.device_model=d.value.selectedModelArray[0].name),d.value.selectedCategoryArray.length>0&&(d.value.device_category_id=d.value.selectedCategoryArray[0].id);let P=_>0?`/${_}`:"",j=_>0?"patch":"post";R[j]("/api/devices"+P,d.value).then(V=>{T("save",V.data),y("Device created","The device has been created successfully."),A("DialogNewDevice")}).catch(V=>{x("Error","There was an error saving the device."),console.log(V),V.response&&V.response.data&&V.response.data.errors&&(u.value=V.response.data.errors)})}function r(){d.value.device_main_prompt=d.value.device_name+"#",d.value.device_enable_prompt=d.value.device_name+">"}function I(){U.value=!0}function s(){U.value=!1}function v(){U.value=!1,A("DialogNewDevice")}return{isLoading:k,model:d,saveDialog:D,errors:u,isDialogOpen:h,generatePrompts:r,showConfirmCloseAlert:U,showConfirmCloseDialog:I,cancelCloseDialog:s,confirmCloseDialog:v}}const ga={class:"flex items-center"},_a={class:"ml-2"},ya={key:0},ba={class:"text-muted-foreground"},xa={key:0,class:"grid grid-cols-1 gap-6 px-4 lg:grid-cols-2"},ka={class:"flex flex-col col-span-1"},wa={key:0,class:"text-red-400"},ha={class:"flex flex-row space-x-4"},$a={class:"flex flex-col w-1/2"},Ca={key:0,class:"text-red-400"},Da={class:"flex flex-col w-1/2"},Ia={key:1,class:"text-red-400"},Va={key:2,class:"text-red-400"},Sa={key:3,class:"text-red-400"},Ea={key:4,class:"text-red-400"},Na={class:"flex flex-col col-span-1"},Pa={key:0,class:"text-sm text-muted-foreground"},Ta={class:"flex w-full max-w-full items-center gap-1.5"},Ma={key:0,class:"text-red-400"},Aa={key:3,class:"text-red-400"},Ba={key:6,class:"text-red-400"},Ua={key:7,class:"text-red-400"},La={key:8,class:"text-red-400"},Fa={key:9,class:"text-red-400"},ja={class:"pl-2 ml-auto"},za={class:"rc-kdb-class2"},Oa={class:"pl-2 ml-auto"},Ka={class:"rc-kdb-class2"},Ga={__name:"DeviceAddEditDialog",props:{editId:Number},emits:["save","close"],setup(_,{emit:T}){const y=_,x=T,{isLoading:N,model:n,saveDialog:m,errors:g,isDialogOpen:A,generatePrompts:h,showConfirmCloseAlert:U,showConfirmCloseDialog:k,cancelCloseDialog:u,confirmCloseDialog:d}=fa(y.editId,x);function p(D){if(D.length===0){n.value.device_cred=[],n.value.device_cred_id=0;return}n.value.device_cred=D,n.value.device_cred_id=D[0].id,n.value.device_username=D[0].cred_username,n.value.device_password="",n.value.device_enable_password=""}return(D,r)=>{const I=w("DeviceIcon"),s=w("Label"),v=w("Input"),P=w("Icon"),j=w("Button");return o(),C(H,null,[t(e(Ve),{open:e(A)("DialogNewDevice")},{default:l(()=>[t(e(he),{"as-child":""}),t(e($e),{onInteractOutside:r[18]||(r[18]=V=>e(k)()),onPointerDownOutside:r[19]||(r[19]=V=>e(k)()),class:"p-0 sm:max-w-7xl",onEscapeKeyDown:r[20]||(r[20]=V=>e(k)()),onCloseClicked:r[21]||(r[21]=V=>e(k)())},{default:l(()=>[t(e(Ce),{class:"rc-dialog-header"},{default:l(()=>[t(e(De),{class:"text-sm text-rcgray-200"},{default:l(()=>[a("div",ga,[t(I),a("span",_a,$(_.editId>0?"Edit":"Add")+" Device "+$(_.editId>0?"(ID: "+_.editId+")":""),1),e(n).device_name?(o(),C("span",ya,[r[22]||(r[22]=c(" :   ")),a("span",ba,$(e(n).device_name),1)])):M("",!0)])]),_:1})]),_:1}),t(e(_e),{class:"min-h-96 xl:h-auto"},{default:l(()=>[e(N)?(o(),E(ot,{key:0})):M("",!0),t(nt,{name:"fade"},{default:l(()=>[e(N)?M("",!0):(o(),C("div",xa,[a("div",ka,[r[30]||(r[30]=a("h3",{class:"text-lg font-semibold border-b"},"Device Information",-1)),t(s,{for:"device_name",class:"mt-4 mb-1 font-light"},{default:l(()=>r[23]||(r[23]=[c(" Device Name "),a("span",{class:"text-red-400"},"*",-1)])),_:1}),t(v,{modelValue:e(n).device_name,"onUpdate:modelValue":r[0]||(r[0]=V=>e(n).device_name=V),id:"device_name",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),e(g).device_name?(o(),C("span",wa,$(e(g).device_name[0]),1)):M("",!0),a("div",ha,[a("div",$a,[t(s,{for:"device_ip",class:"mt-4 mb-1 font-light"},{default:l(()=>r[24]||(r[24]=[c(" Device IP "),a("span",{class:"text-red-400"},"*",-1)])),_:1}),t(v,{modelValue:e(n).device_ip,"onUpdate:modelValue":r[1]||(r[1]=V=>e(n).device_ip=V),id:"device_ip",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),e(g).device_ip?(o(),C("span",Ca,$(e(g).device_ip[0]),1)):M("",!0)]),a("div",Da,[t(s,{for:"device_port_override",class:"mt-4 mb-1 font-light"},{default:l(()=>[r[25]||(r[25]=c(" Device Port ")),t(He,{title:"Device Port",content:"Set the connection port specific to this device. it overrides the value set in the connection template. Leave empty otherwise."})]),_:1}),t(v,{modelValue:e(n).device_port_override,"onUpdate:modelValue":r[2]||(r[2]=V=>e(n).device_port_override=V),id:"device_port_override",type:"number",autocomplete:"off",class:"w-full"},null,8,["modelValue"])])]),t(s,{for:"vector",class:"mt-4 mb-1 font-light"},{default:l(()=>r[26]||(r[26]=[c(" Vendor "),a("span",{class:"text-red-400"},"*",-1)])),_:1}),t(pa,{singleSelect:!0,modelValue:e(n).device_vendor,"onUpdate:modelValue":r[3]||(r[3]=V=>e(n).device_vendor=V),id:"device_vendor",class:"w-full"},null,8,["modelValue"]),e(g).device_vendor?(o(),C("span",Ia,$(e(g).device_vendor[0]),1)):M("",!0),t(s,{for:"device_category_id",class:"mt-4 mb-1 font-light"},{default:l(()=>r[27]||(r[27]=[c(" Category "),a("span",{class:"text-red-400"},"*",-1)])),_:1}),t(dt,{modelValue:e(n).selectedCategoryArray,"onUpdate:modelValue":r[4]||(r[4]=V=>e(n).selectedCategoryArray=V),id:"selectedCategoryArray",singleSelect:!0,class:"w-full"},null,8,["modelValue"]),e(g).device_category_id?(o(),C("span",Va,$(e(g).device_category_id[0]),1)):M("",!0),t(s,{for:"device_model",class:"mt-4 mb-1 font-light"},{default:l(()=>r[28]||(r[28]=[c(" Model "),a("span",{class:"text-red-400"},"*",-1)])),_:1}),t(qs,{singleSelect:!0,modelValue:e(n).selectedModelArray,"onUpdate:modelValue":r[5]||(r[5]=V=>e(n).selectedModelArray=V),id:"selectedModelArray",class:"w-full"},null,8,["modelValue"]),e(g).device_model?(o(),C("span",Sa,$(e(g).device_model[0]),1)):M("",!0),t(s,{for:"device_tags",class:"mt-4 mb-1 font-light"},{default:l(()=>r[29]||(r[29]=[c(" Tags "),a("span",{class:"text-red-400"},"*",-1)])),_:1}),t(Qt,{modelValue:e(n).device_tags,"onUpdate:modelValue":r[6]||(r[6]=V=>e(n).device_tags=V),id:"device_tags",class:"w-full"},null,8,["modelValue"]),e(g).device_tags?(o(),C("span",Ea,$(e(g).device_tags[0]),1)):M("",!0)]),a("div",Na,[r[39]||(r[39]=a("h3",{class:"text-lg font-semibold border-b"},"Connection Information",-1)),t(s,{for:"device_username",class:"mt-4 mb-1 font-light"},{default:l(()=>[r[31]||(r[31]=c(" Username ")),r[32]||(r[32]=a("span",{class:"text-red-400"},"*",-1)),e(n).device_cred_id!=0?(o(),C("span",Pa," - Credential set selected ")):M("",!0)]),_:1}),a("div",Ta,[t(v,{disabled:e(n).device_cred_id!=0,modelValue:e(n).device_username,"onUpdate:modelValue":r[7]||(r[7]=V=>e(n).device_username=V),id:"device_username",autocomplete:"current-password",class:"flex-grow w-2/3"},null,8,["disabled","modelValue"]),t(Ds,{modelValue:e(n).device_cred,"onUpdate:modelValue":r[8]||(r[8]=V=>p(V)),singleSelect:!0,class:"w-full"},null,8,["modelValue"])]),e(g).device_username?(o(),C("span",Ma,$(e(g).device_username[0]),1)):M("",!0),e(n).device_cred_id===0?(o(),E(s,{key:1,for:"device_password",class:"mt-4 mb-1 font-light"},{default:l(()=>r[33]||(r[33]=[c(" Device Password "),a("span",{class:"text-red-400"},"*",-1)])),_:1})):M("",!0),e(n).device_cred_id===0?(o(),E(e(Qe),{key:2,modelValue:e(n).device_password,"onUpdate:modelValue":r[9]||(r[9]=V=>e(n).device_password=V),id:"device_password",class:"w-full"},null,8,["modelValue"])):M("",!0),e(g).device_password?(o(),C("span",Aa,$(e(g).device_password[0]),1)):M("",!0),e(n).device_cred_id===0?(o(),E(s,{key:4,for:"device_enable_password",class:"mt-4 mb-1 font-light"},{default:l(()=>r[34]||(r[34]=[c(" Device Enable Password ")])),_:1})):M("",!0),e(n).device_cred_id===0?(o(),E(e(Qe),{key:5,modelValue:e(n).device_enable_password,"onUpdate:modelValue":r[10]||(r[10]=V=>e(n).device_enable_password=V),id:"device_enable_password",class:"w-full"},null,8,["modelValue"])):M("",!0),e(g).device_enable_password?(o(),C("span",Ba,$(e(g).device_enable_password[0]),1)):M("",!0),t(s,{for:"device_template",class:"mt-4 mb-1 font-light"},{default:l(()=>r[35]||(r[35]=[c(" Template "),a("span",{class:"text-red-400"},"*",-1)])),_:1}),t(oa,{singleSelect:!0,modelValue:e(n).device_template,"onUpdate:modelValue":r[11]||(r[11]=V=>e(n).device_template=V),id:"device_template",class:"w-full"},null,8,["modelValue"]),e(g).device_template?(o(),C("span",Ua,$(e(g).device_template[0]),1)):M("",!0),t(s,{for:"main_prompt",class:"mt-4 mb-1 font-light"},{default:l(()=>[r[36]||(r[36]=c(" Main Prompt ")),t(He,{title:"Device Main Prompt",content:"This is the 'Privileged EXEC' prompt. You will run show commands from this prompt and you can access configure mode. Usually 'router1#'"})]),_:1}),t(v,{modelValue:e(n).device_main_prompt,"onUpdate:modelValue":r[12]||(r[12]=V=>e(n).device_main_prompt=V),id:"device_main_prompt",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),e(g).device_main_prompt?(o(),C("span",La,$(e(g).device_main_prompt[0]),1)):M("",!0),t(s,{for:"enable_prompt",class:"mt-4 mb-1 font-light"},{default:l(()=>[r[37]||(r[37]=c(" Enable Prompt ")),t(He,{title:"Device Main Prompt",content:" This is the 'User EXEC' prompt. The first level of access prompt. Usually 'router1>'"})]),_:1}),t(v,{modelValue:e(n).device_enable_prompt,"onUpdate:modelValue":r[13]||(r[13]=V=>e(n).device_enable_prompt=V),id:"device_enable_prompt",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),a("button",{class:"flex items-center p-2 text-sm text-left rounded-lg pf-c-button pf-m-link pf-m-inline hover:bg-rcgray-800 max-w-fit text-muted-foreground hover:text-gray-200",type:"button",onClick:r[14]||(r[14]=V=>e(h)())},[t(P,{icon:"material-symbols:flash-auto",class:"w-4 h-4 mr-1"}),r[38]||(r[38]=c(" Auto generate prompts from device name "))]),e(g).device_enable_prompt?(o(),C("span",Fa,$(e(g).device_enable_prompt[0]),1)):M("",!0)])]))]),_:1})]),_:1}),t(e(Ie),{class:"rc-dialog-footer bg-rcgray-800"},{default:l(()=>[t(j,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:r[15]||(r[15]=V=>e(k)()),size:"sm"},{default:l(()=>r[40]||(r[40]=[c(" Cancel "),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])),_:1}),y.editId===0?(o(),E(j,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:r[16]||(r[16]=V=>e(m)()),variant:"primary"},{default:l(()=>[r[42]||(r[42]=c(" Save ")),a("div",ja,[a("kbd",za,[r[41]||(r[41]=c(" Ctrl  ")),t(P,{icon:"uil:enter",class:""})])])]),_:1})):M("",!0),y.editId>0?(o(),E(j,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:r[17]||(r[17]=V=>e(m)()),variant:"primary"},{default:l(()=>[r[44]||(r[44]=c(" Update ")),a("div",Oa,[a("kbd",Ka,[r[43]||(r[43]=c(" Ctrl  ")),t(P,{icon:"uil:enter",class:""})])])]),_:1})):M("",!0)]),_:1})]),_:1})]),_:1},8,["open"]),t(Zt,{showConfirmCloseAlert:e(U),onHandleClose:e(u),onHandleConfirm:e(d)},null,8,["showConfirmCloseAlert","onHandleClose","onHandleConfirm"])],64)}}},qa={key:0,class:"text-sm font-light"},Ra={class:"text-sm font-semibold"},Ha={class:"py-1"},Wa=["onClick"],Ya=["checked"],Xa={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Ja={"data-size":"20"},Qa=ge({__name:"StatusFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(_,{emit:T}){const y=T,x=f([{id:0,name:"Unreachable"},{id:1,name:"Reachable"},{id:2,name:"Unknown"},{id:100,name:"Disabled"},{id:200,name:"All"}]),N=f(!1),n=f([]),m=_;Y(()=>m.modelValue,A=>{n.value=A});function g(A){if(A.id===200)n.value.length===x.value.length?n.value=[]:n.value=[...x.value];else{const h=n.value.findIndex(U=>U.id===A.id);if(h!==-1){n.value.splice(h,1);const U=n.value.findIndex(k=>k.id===200);U!==-1&&n.value.splice(U,1)}else n.value.push(A)}N.value=!1,y("update:modelValue",n.value)}return(A,h)=>{const U=w("Icon"),k=w("Button");return o(),E(e(ie),null,{default:l(()=>[t(e(de),null,{default:l(()=>[t(k,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[t(U,{icon:"material-symbols-light:signal-wifi-statusbar-not-connected-rounded",class:"mr-2"}),n.value&&n.value.length===0?(o(),C(H,{key:0},[c("Status")],64)):(o(),C(H,{key:1},[n.value.length>0?(o(),C("span",qa,[h[0]||(h[0]=c(" Status ")),a("strong",Ra,$(n.value.length)+" selected",1)])):M("",!0)],64))]),_:1})]),_:1}),t(e(re),{side:"bottom",align:"start",class:"p-0 w-44"},{default:l(()=>[t(e(_e),{class:"h-44"},{default:l(()=>[a("div",Ha,[(o(!0),C(H,null,X(x.value,u=>(o(),C("div",{key:u.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:d=>g(u)},[a("input",{type:"checkbox",checked:n.value.some(d=>d.id===u.id),class:"mr-2"},null,8,Ya),a("span",Xa,[a("span",Ja,$(u.name),1)])],8,Wa))),128))])]),_:1})]),_:1})]),_:1})}}}),Za={key:0,class:"text-sm font-light"},eo={class:"text-sm font-semibold"},to={class:"relative items-center w-full"},lo={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},so={class:"py-1"},ao=["onClick"],oo=["checked"],no={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},ro={"data-size":"20"},io={class:"p-1 border-5"},uo=ge({__name:"TagFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(_,{emit:T}){const y=T,x=f([]),N=f(!1),n=f([]),m=f(""),g=f(!1),A=_;Z(()=>{U()}),Y(()=>A.modelValue,u=>{n.value=u,g.value=n.value.length===x.value.length});function h(u){if(u.id===9999999)g.value?(n.value=[],g.value=!1):(n.value=[...x.value],g.value=!0);else{const d=n.value.findIndex(p=>p.id===u.id);d!==-1?(n.value.splice(d,1),g.value=!1):(n.value.push(u),n.value.length===x.value.length&&(g.value=!0))}N.value=!1,y("update:modelValue",n.value)}function U(){R.get("/api/tags/?perPage=10000").then(u=>{x.value=u.data.data})}const k=xe(()=>x.value.filter(u=>u.tagname.toLowerCase().includes(m.value.toLowerCase())));return(u,d)=>{const p=w("Button"),D=w("Input"),r=w("Icon"),I=w("Separator");return o(),E(e(ie),null,{default:l(()=>[t(e(de),null,{default:l(()=>[t(p,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[t(At,{class:"mr-2"}),n.value&&n.value.length===0?(o(),C(H,{key:0},[c("Tags")],64)):(o(),C(H,{key:1},[n.value.length>0?(o(),C("span",Za,[d[2]||(d[2]=c(" Tag ")),a("strong",eo,$(n.value.length)+" selected",1)])):M("",!0)],64))]),_:1})]),_:1}),t(e(re),{side:"bottom",align:"start",class:"w-64 p-0"},{default:l(()=>[a("div",to,[t(D,{id:"search",type:"text",modelValue:m.value,"onUpdate:modelValue":d[0]||(d[0]=s=>m.value=s),placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",lo,[t(r,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),t(I),t(e(_e),{class:"h-44"},{default:l(()=>[a("div",so,[(o(!0),C(H,null,X(k.value,s=>(o(),C("div",{key:s.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:v=>h(s)},[a("input",{type:"checkbox",checked:n.value.some(v=>v.id===s.id),class:"mr-2"},null,8,oo),a("span",no,[a("span",ro,$(s.tagname),1)])],8,ao))),128))])]),_:1}),t(I),a("div",io,[t(p,{variant:"ghost",class:"justify-start w-full p-1",onClick:d[1]||(d[1]=s=>h({id:9999999}))},{default:l(()=>[t(r,{icon:g.value?"fluent:select-all-on-16-filled":"fluent:select-all-on-16-regular",class:"w-4 h-4 mr-2 text-muted-foreground"},null,8,["icon"]),a("span",null,$(g.value?"Deselect all":"Select all"),1)]),_:1})])]),_:1})]),_:1})}}}),co={class:"space-y-2"},mo={class:"mb-2 text-sm text-muted-foreground"},vo={key:0,class:"text-xs text-muted-foreground"},po={__name:"TagListPopover",props:{recordName:{type:String,required:!0},items:{type:Array,required:!0},displayField:{type:String,default:"name"},displayCount:{type:Number,default:100}},setup(_){return(T,y)=>{const x=w("Button"),N=w("router-link");return o(),E(e(ie),null,{default:l(()=>[t(e(de),{"as-child":""},{default:l(()=>[t(x,{variant:"outline",className:"mt-1 inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground"},{default:l(()=>y[0]||(y[0]=[c(" ... ")])),_:1})]),_:1}),t(e(re),{class:"max-w-max",style:{width:"800px"}},{default:l(()=>[a("div",co,[a("p",mo,"All tags associated with "+$(_.recordName)+". Showing "+$(_.displayCount)+" records.",1)]),(o(!0),C(H,null,X(_.items.slice(0,_.displayCount),n=>(o(),E(e(Ze),{key:n[_.displayField],variant:"outline",class:"py-1 mt-1 hover:bg-rcgray-900"},{default:l(()=>[t(N,{to:n.view_url},{default:l(()=>[c($(n[_.displayField]),1)]),_:2},1032,["to"])]),_:2},1024))),128)),_.displayCount>_.displayCount-1?(o(),C("span",vo,[y[2]||(y[2]=a("br",null,null,-1)),c(" Displaying only "+$(_.displayCount)+" records. Visit the ",1),t(N,{to:"/tags",class:"text-blue-500 hover:underline"},{default:l(()=>y[1]||(y[1]=[c(" Tags ")])),_:1}),y[3]||(y[3]=c(" page to view all tags. "))])):M("",!0)]),_:1})]),_:1})}}},fo={key:0,class:"text-sm font-light"},go={class:"text-sm font-semibold"},_o={class:"relative items-center w-full"},yo={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},bo={class:"py-1"},xo=["onClick"],ko=["checked"],wo={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},ho={"data-size":"20"},$o={class:"p-1 border-5"},Co=ge({__name:"VendorFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(_,{emit:T}){const y=T,x=f([]),N=f(!1),n=f([]),m=f(""),g=f(!1),A=_;Z(()=>{U()}),Y(()=>A.modelValue,u=>{n.value=u,g.value=n.value.length===x.value.length});function h(u){if(u.id===9999999)g.value?(n.value=[],g.value=!1):(n.value=[...x.value],g.value=!0);else{const d=n.value.findIndex(p=>p.id===u.id);d!==-1?(n.value.splice(d,1),g.value=!1):(n.value.push(u),n.value.length===x.value.length&&(g.value=!0))}N.value=!1,y("update:modelValue",n.value)}function U(){R.get("/api/vendors/?perPage=10000").then(u=>{x.value=u.data.data})}const k=xe(()=>x.value.filter(u=>u.vendorName.toLowerCase().includes(m.value.toLowerCase())));return(u,d)=>{const p=w("Button"),D=w("Input"),r=w("Icon"),I=w("Separator");return o(),E(e(ie),null,{default:l(()=>[t(e(de),null,{default:l(()=>[t(p,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[t(Bt,{class:"mr-2"}),n.value&&n.value.length===0?(o(),C(H,{key:0},[c("Vendor")],64)):(o(),C(H,{key:1},[n.value.length>0?(o(),C("span",fo,[d[2]||(d[2]=c(" Vendor ")),a("strong",go,$(n.value.length)+" selected",1)])):M("",!0)],64))]),_:1})]),_:1}),t(e(re),{side:"bottom",align:"start",class:"w-64 p-0"},{default:l(()=>[a("div",_o,[t(D,{id:"search",type:"text",modelValue:m.value,"onUpdate:modelValue":d[0]||(d[0]=s=>m.value=s),placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",yo,[t(r,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),t(I),t(e(_e),{class:"h-44"},{default:l(()=>[a("div",bo,[(o(!0),C(H,null,X(k.value,s=>(o(),C("div",{key:s.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:v=>h(s)},[a("input",{type:"checkbox",checked:n.value.some(v=>v.id===s.id),class:"mr-2"},null,8,ko),a("span",wo,[a("span",ho,$(s.vendorName),1)])],8,xo))),128))])]),_:1}),t(I),a("div",$o,[t(p,{variant:"ghost",class:"justify-start w-full p-1",onClick:d[1]||(d[1]=s=>h({id:9999999}))},{default:l(()=>[t(r,{icon:g.value?"fluent:select-all-on-16-filled":"fluent:select-all-on-16-regular",class:"w-4 h-4 mr-2 text-muted-foreground"},null,8,["icon"]),a("span",null,$(g.value?"Deselect all":"Select all"),1)]),_:1})])]),_:1})]),_:1})}}});function Do(){const _=f(1),T=f(parseInt(localStorage.getItem("perPage")||"10")),y=f("-id"),x=f(""),N=f({}),n=ce(),m=f(0),g=f(!1),A=f(1),h=f(1),U=f([]),k=f(!1),u=f([]),d=f([]),p=f([]),D=f([]),r=Oe(),I=at("formatters"),{openDialog:s}=n,{toastSuccess:v,toastError:P}=ue();async function j(L={}){g.value=!0;try{const J=await R.get("/api/devices",{params:{page:_.value,perPage:T.value,sort:y.value,...N.value}});U.value=J.data,A.value=J.data.last_page}catch(J){console.error("Error fetching devices:",J),P("Error","Failed to fetch devices.")}finally{g.value=!1}}const V=L=>{m.value=0,h.value=Math.random(),s("DialogNewDevice")};function K(L){m.value=L,h.value=Math.random(),s("DialogNewDevice")}const i=async L=>{try{await R.delete(`/api/devices/${L}`),j(),v("Device Deleted","The device has been deleted successfully.")}catch(J){console.error("Error deleting device:",J),P("Error","Failed to delete device.")}},S=async L=>{try{await R.post("/api/devices/delete-many",{ids:L}),j(),v("Devices Deleted","The tags have been deleted successfully."),k.value=!1,me.emit("deleteManyDevicesSuccess")}catch(J){console.error("Error deleting tags:",J),P("Error","Failed to delete devices."),k.value=!1}},B=async L=>{try{await R.get(`/api/device/disable/${L}`),j(),v("Device Disabled","The device has been disabled successfully.")}catch(J){console.error("Error disabling device:",J),P("Error","Failed to disable device.")}},F=async L=>{try{await R.get(`/api/device/enable/${L}`),j(),v("Device Enabled","The device has been disabled successfully.")}catch(J){console.error("Error enabling device:",J),P("Error","Failed to enabled device.")}},te=L=>{m.value=L,h.value=Math.random(),s("DialogNewDevice")},Q=()=>{j(),h.value=Math.random()};function ee(L){L.altKey&&L.key==="n"&&(L.preventDefault(),s("DialogNewDevice"))}const ae=Se(()=>{N.value["filter[q]"]=x.value,_.value=1,j()},500);Y([_,T],()=>{j()}),Y(x,()=>{ae()}),Y(T,L=>{localStorage.setItem("perPage",L.toString())}),Y(u,(L,J)=>{if(L&&L.length>0){const ve=L.map(pe=>pe.id);N.value["filter[status]"]=ve.join(",")}else delete N.value["filter[status]"];j()},{deep:!0}),Y(d,(L,J)=>{if(L&&L.length>0){const ve=L.map(pe=>pe.id);N.value["filter[category]"]=ve.join(",")}else delete N.value["filter[category]"];j()},{deep:!0}),Y(p,(L,J)=>{if(L&&L.length>0){const ve=L.map(pe=>pe.id);N.value["filter[tag]"]=ve.join(",")}else delete N.value["filter[tag]"];j()},{deep:!0}),Y(D,(L,J)=>{if(L&&L.length>0){const ve=L.map(pe=>pe.id);N.value["filter[vendor]"]=ve.join(",")}else delete N.value["filter[vendor]"];j()},{deep:!0});function b(L){y.value===L?y.value=`-${L}`:y.value=L,j()}function W(){N.value={},u.value=[],d.value=[],p.value=[],D.value=[],x.value="",j()}function ye(L){r.push({name:"devicesview",params:{id:parseInt(L)}})}return{clearFilters:W,createDevice:V,currentPage:_,deleteDevice:i,deleteManyDevices:S,devices:U,disableDevice:B,editId:m,enableDevice:F,fetchDevices:j,filterCategories:d,filterStatus:u,filterTags:p,filterVendor:D,formatters:I,handleKeyDown:ee,handleSave:Q,isLoading:g,lastPage:A,newDeviceModalKey:h,perPage:T,searchTerm:x,showConfirmDelete:k,sortParam:y,toggleSort:b,updateDevice:K,viewDeviceDetailsPane:ye,viewEditDialog:te}}const Io={class:"flex flex-col h-full gap-1 text-center"},Vo={class:"flex items-center justify-between p-4"},So={class:"flex items-center"},Eo={class:"flex gap-2"},No={class:"flex"},Po={class:"px-6"},To={class:"flex justify-between"},Mo={class:"border-b"},Ao={key:0,class:"ml-2"},Bo={key:0},Uo={key:1},Lo={key:0},Fo={key:1},jo={key:0},zo={key:1},Oo={key:0},Ko={key:1},Go={key:0,class:"mr-2"},qo={__name:"Main",setup(_){const{clearFilters:T,createDevice:y,currentPage:x,deleteDevice:N,deleteManyDevices:n,devices:m,disableDevice:g,editId:A,enableDevice:h,fetchDevices:U,filterCategories:k,filterStatus:u,filterTags:d,filterVendor:p,formatters:D,handleKeyDown:r,handleSave:I,isLoading:s,lastPage:v,newDeviceModalKey:P,perPage:j,searchTerm:V,showConfirmDelete:K,sortParam:i,toggleSort:S,updateDevice:B,viewDeviceDetailsPane:F,viewEditDialog:te}=Do(),{selectedRows:Q,selectAll:ee,toggleSelectAll:ae,toggleSelectRow:b}=Ne(m),W=st(),{openSheet:ye,closeSheet:L,isSheetOpen:J}=W,ve=f(null),pe=f(""),We=f(0);Z(()=>{U(),window.addEventListener("keydown",r),me.on("deleteManyDevicesSuccess",()=>{Q.value=[],ee.value=!1})}),oe(()=>{window.removeEventListener("keydown",r)});function it(qe){We.value+=1,ve.value=qe,pe.value=m.value.data.find(z=>z.id===qe).device_name,ye("DeviceCommentSheet")}return(qe,z)=>{const ut=w("Input"),ct=w("Separator"),ke=w("Button"),Ye=w("Checkbox"),je=w("Icon"),mt=w("StatusRedIcon"),vt=w("StatusGreenIcon"),pt=w("StatusYellowIcon"),ft=w("StatusGrayIcon"),gt=w("router-link"),_t=w("Badge"),yt=w("Toaster");return o(),C("div",Io,[a("div",Vo,[a("div",So,[t(ut,{class:"ml-2 min-w-32 lg:min-w-60",autocomplete:"off",placeholder:"Filter devices by ID, name or IP...",modelValue:e(V),"onUpdate:modelValue":z[0]||(z[0]=O=>se(V)?V.value=O:null)},null,8,["modelValue"]),t(ct,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),z[16]||(z[16]=a("span",{class:"mr-2 text-muted-foreground"},"Filters:",-1)),a("div",Eo,[t(ms,{modelValue:e(k),"onUpdate:modelValue":z[1]||(z[1]=O=>se(k)?k.value=O:null)},null,8,["modelValue"]),t(uo,{modelValue:e(d),"onUpdate:modelValue":z[2]||(z[2]=O=>se(d)?d.value=O:null)},null,8,["modelValue"]),t(Co,{modelValue:e(p),"onUpdate:modelValue":z[3]||(z[3]=O=>se(p)?p.value=O:null)},null,8,["modelValue"]),t(Qa,{modelValue:e(u),"onUpdate:modelValue":z[4]||(z[4]=O=>se(u)?u.value=O:null)},null,8,["modelValue"]),e(V)||e(k).length||e(d).length||e(p).length||e(u).length?(o(),E(tl,{key:0,"onUpdate:modelValue":e(T)},null,8,["onUpdate:modelValue"])):M("",!0)])]),a("div",No,[e(Q).length?(o(),E(ke,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:z[5]||(z[5]=le(O=>K.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[c(" Delete Selected "+$(e(Q).length)+" Device(s) ",1)]),_:1})):M("",!0),t(ke,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:le(e(y),["prevent"]),variant:"primary"},{default:l(()=>z[17]||(z[17]=[c(" New Device "),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])),_:1},8,["onClick"])])]),a("div",Po,[t(e(Ae),null,{default:l(()=>[t(e(Pe),null,{default:l(()=>[t(e(ne),null,{default:l(()=>[t(e(q),{class:"w-[2%]"},{default:l(()=>[t(Ye,{id:"selectAll",modelValue:e(ee),"onUpdate:modelValue":z[6]||(z[6]=O=>se(ee)?ee.value=O:null),checked:e(ee),onClick:z[7]||(z[7]=O=>e(ae)())},null,8,["modelValue","checked"])]),_:1}),t(e(q),{class:"w-[5%]"},{default:l(()=>[t(ke,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:z[8]||(z[8]=O=>e(S)("id"))},{default:l(()=>[t(je,{icon:e(i)==="id"?"lucide:sort-asc":e(i)==="-id"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),z[18]||(z[18]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),t(e(q),{class:"w-[2%]"},{default:l(()=>[t(ke,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:z[9]||(z[9]=O=>e(S)("status"))},{default:l(()=>[t(je,{icon:e(i)==="status"?"lucide:sort-asc":e(i)==="-status"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),z[19]||(z[19]=a("span",{class:"ml-2"},null,-1))]),_:1})]),_:1}),t(e(q),{class:"w-[20%]"},{default:l(()=>[t(ke,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:z[10]||(z[10]=O=>e(S)("device_name"))},{default:l(()=>[t(je,{icon:e(i)==="device_name"?"lucide:sort-asc":e(i)==="-device_name"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),z[20]||(z[20]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),t(e(q),{class:"w-[10%]"},{default:l(()=>z[21]||(z[21]=[c("IP Address")])),_:1}),t(e(q),{class:"w-[10%]"},{default:l(()=>z[22]||(z[22]=[c("C'Group")])),_:1}),t(e(q),{class:"w-[10%]"},{default:l(()=>z[23]||(z[23]=[c("Vendor")])),_:1}),t(e(q),{class:"w-[10%]"},{default:l(()=>z[24]||(z[24]=[c("Model")])),_:1}),t(e(q),{class:"w-[10%]"},{default:l(()=>z[25]||(z[25]=[c("Config Count")])),_:1}),t(e(q),{class:"w-[10%]"},{default:l(()=>z[26]||(z[26]=[c("Config Failures")])),_:1}),t(e(q),{class:"w-[10%]"},{default:l(()=>z[27]||(z[27]=[c("Last Config")])),_:1}),t(e(q),{class:"w-[10%]"},{default:l(()=>z[28]||(z[28]=[c("Tags")])),_:1}),t(e(q),{class:"w-[10%]"},{default:l(()=>z[29]||(z[29]=[c("Actions")])),_:1})]),_:1})]),_:1}),t(e(Te),null,{default:l(()=>[e(s)?(o(),E(Ee,{key:0})):e(s)?(o(),E(Me,{key:2})):(o(!0),C(H,{key:1},X(e(m).data,O=>(o(),E(e(ne),{key:O.id},{default:l(()=>[t(e(G),{class:"text-start"},{default:l(()=>[t(Ye,{class:"cursor-pointer",id:"select-"+O.id,checked:!!e(Q).includes(O.id),onClick:fe=>e(b)(O.id)},null,8,["id","checked","onClick"])]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[c($(O.id),1)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[O.status===0?(o(),E(mt,{key:0})):M("",!0),O.status===1?(o(),E(vt,{key:1})):M("",!0),O.status===2?(o(),E(pt,{key:2})):M("",!0),O.status===100?(o(),E(ft,{key:3})):M("",!0)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[a("div",To,[t(ke,{class:"px-2 py-0 hover:bg-rcgray-800 rounded-xl",variant:"ghost",onClick:fe=>e(F)(O.id)},{default:l(()=>[a("span",Mo,$(O.device_name),1)]),_:2},1032,["onClick"]),t(ke,{class:"px-2 py-0 hover:bg-rcgray-800 rounded-xl text-muted-foreground",variant:"ghost",onClick:fe=>it(O.id)},{default:l(()=>[t(je,{icon:"vaadin:comments-o"}),O.comments.length>0?(o(),C("span",Ao,$(O.comments.length),1)):M("",!0)]),_:2},1032,["onClick"])])]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[c($(O.device_ip),1)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[O.category.length>0?(o(),C("span",Bo,$(O.category[0].categoryName),1)):(o(),C("span",Uo,"--"))]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[O.vendor.length>0?(o(),C("span",Lo,$(O.vendor[0].vendorName),1)):(o(),C("span",Fo,"--"))]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[c($(O.device_model),1)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[c($(O.config_good_count),1)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[O.config_bad_count?(o(),C("span",jo,$(O.config_bad_count),1)):(o(),C("span",zo,"--"))]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[O.last_config?(o(),C("span",Oo,$(e(D).formatTime(O.last_config.created_at)),1)):(o(),C("span",Ko,"--"))]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[(o(!0),C(H,null,X(O.tag.slice(0,3),(fe,Kn)=>(o(),C("span",{key:fe.tagname,class:"mr-2"},[t(_t,{variant:"outline",class:"py-1 mt-1 hover:bg-rcgray-800"},{default:l(()=>[t(gt,{to:fe.view_url},{default:l(()=>[c($(fe.tagname),1)]),_:2},1032,["to"])]),_:2},1024)]))),128)),O.tag.length>3?(o(),C("span",Go,[t(po,{recordName:O.device_name,items:O.tag,displayField:"tagname"},null,8,["recordName","items"])])):M("",!0)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[t(ts,{rowData:O,onOnEnable:fe=>e(h)(O.id),onOnDisable:fe=>e(g)(O.id),onOnEdit:fe=>e(te)(O.id),onOnDelete:fe=>e(N)(O.id)},null,8,["rowData","onOnEnable","onOnDisable","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(Be,{currentPage:e(x),lastPage:e(v),perPage:e(j),"onUpdate:currentPage":z[11]||(z[11]=O=>x.value=O),"onUpdate:perPage":z[12]||(z[12]=O=>j.value=O)},null,8,["currentPage","lastPage","perPage"]),(o(),E(Ga,{onSave:z[13]||(z[13]=O=>e(I)()),key:e(P),editId:e(A)},null,8,["editId"])),t(we,{ids:e(Q),showConfirmDelete:e(K),onClose:z[14]||(z[14]=O=>K.value=!1),onHandleDelete:z[15]||(z[15]=O=>e(n)(e(Q)))},null,8,["ids","showConfirmDelete"]),(o(),E(bs,{deviceId:ve.value,deviceName:pe.value,key:We.value},null,8,["deviceId","deviceName"])),t(yt)])])}}},Ro={class:"grid gap-2 py-4"},Ho={class:"grid items-center grid-cols-4 gap-4"},Wo={class:"grid items-center grid-cols-4 gap-4"},Yo={class:"flex flex-col w-full space-y-2"},Xo={key:0,class:"text-red-400"},Jo={key:1,class:"text-red-400"},Qo={class:"pl-2 ml-auto"},Zo={class:"rc-kdb-class2"},en={class:"pl-2 ml-auto"},tn={class:"rc-kdb-class2"},ln={__name:"TagAddEditDialog",props:{editId:Number},emits:["save"],setup(_,{emit:T}){const{toastSuccess:y,toastError:x,toastInfo:N,toastWarning:n,toastDefault:m}=ue(),g=ce(),{openDialog:A,closeDialog:h,isDialogOpen:U}=g,k=T;f([]);const u=f([]),d=f({tagname:"",tagDescription:""}),p=_;function D(I){I.ctrlKey&&I.key==="Enter"&&r()}Z(()=>{p.editId>0&&R.get(`/api/tags/${p.editId}`).then(I=>{d.value=I.data}),window.addEventListener("keydown",D)}),oe(()=>{window.removeEventListener("keydown",D)});function r(){let I=p.editId>0?`/${p.editId}`:"",s=p.editId>0?"patch":"post";R[s]("/api/tags"+I,d.value).then(v=>{k("save",v.data),y("Tag created","The tag has been created successfully."),h("DialogNewTag")}).catch(v=>{u.value=v.response.data.errors})}return(I,s)=>{const v=w("Label"),P=w("Input"),j=w("Button"),V=w("Icon");return o(),E(e(Ve),{open:e(U)("DialogNewTag")},{default:l(()=>[t(e(he),{"as-child":""}),t(e($e),{class:"w-full",onEscapeKeyDown:s[5]||(s[5]=K=>e(h)("DialogNewTag")),onPointerDownOutside:s[6]||(s[6]=K=>e(h)("DialogNewTag")),onCloseClicked:s[7]||(s[7]=K=>e(h)("DialogNewTag"))},{default:l(()=>[t(e(Ce),null,{default:l(()=>[t(e(De),null,{default:l(()=>[c($(_.editId>0?"Edit":"Add")+" Tag "+$(_.editId>0?"(ID: "+_.editId+")":""),1)]),_:1}),t(e(ze),null,{default:l(()=>[c("Make changes to your tag here. Click "+$(_.editId>0?"update":"save")+" when you're done.",1)]),_:1})]),_:1}),a("div",Ro,[a("div",Ho,[t(v,{for:"tagname",class:"text-right"},{default:l(()=>s[8]||(s[8]=[c(" Tag Name ")])),_:1}),t(P,{modelValue:d.value.tagname,"onUpdate:modelValue":s[0]||(s[0]=K=>d.value.tagname=K),id:"tagname",class:"col-span-3"},null,8,["modelValue"])]),a("div",Wo,[t(v,{for:"tagDescription",class:"text-right"},{default:l(()=>s[9]||(s[9]=[c(" Description ")])),_:1}),t(P,{modelValue:d.value.tagDescription,"onUpdate:modelValue":s[1]||(s[1]=K=>d.value.tagDescription=K),id:"tagDescription",class:"col-span-3"},null,8,["modelValue"])])]),a("div",Yo,[u.value.tagDescription?(o(),C("span",Xo,$(u.value.tagDescription[0]),1)):M("",!0),u.value.tagname?(o(),C("span",Jo,$(u.value.tagname[0]),1)):M("",!0)]),t(e(Ie),null,{default:l(()=>[t(j,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:s[2]||(s[2]=K=>e(h)("DialogNewTag")),size:"sm"},{default:l(()=>s[10]||(s[10]=[c(" Cancel "),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])),_:1}),p.editId===0?(o(),E(j,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:s[3]||(s[3]=K=>r()),variant:"primary"},{default:l(()=>[s[12]||(s[12]=c(" Save ")),a("div",Qo,[a("kbd",Zo,[s[11]||(s[11]=c(" Ctrl  ")),t(V,{icon:"uil:enter",class:""})])])]),_:1})):M("",!0),p.editId>0?(o(),E(j,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:s[4]||(s[4]=K=>r()),variant:"primary"},{default:l(()=>[s[14]||(s[14]=c(" Update ")),a("div",en,[a("kbd",tn,[s[13]||(s[13]=c(" Ctrl  ")),t(V,{icon:"uil:enter",class:""})])])]),_:1})):M("",!0)]),_:1})]),_:1})]),_:1},8,["open"])}}};function sn(){const _=f(1),T=f(parseInt(localStorage.getItem("perPage")||"10")),y=f("-id"),x=f(""),N=f({}),n=ce(),m=f(0),g=f(!1),A=f(1),h=f(1),U=f([]),k=f(!1),{openDialog:u}=n,{toastSuccess:d,toastError:p}=ue();async function D(S={}){g.value=!0;try{const B=await R.get("/api/tags",{params:{page:_.value,perPage:T.value,sort:y.value,...N.value}});U.value=B.data,A.value=B.data.last_page}catch(B){console.error("Error fetching tags:",B),p("Error","Failed to fetch tags.")}finally{g.value=!1}}const r=S=>{m.value=0,h.value=Math.random(),u("DialogNewTag")};function I(S){m.value=S,h.value=Math.random(),u("DialogNewTag")}const s=async S=>{try{await R.delete(`/api/tags/${S}`),D(),d("Tag Deleted","The tag has been deleted successfully."),k.value=!1}catch(B){console.error("Error deleting tag:",B),p("Error","Failed to delete tag."),k.value=!1}},v=async S=>{try{await R.post("/api/tags/delete-many",{ids:S}),D(),d("Tags Deleted","The tags have been deleted successfully."),k.value=!1,me.emit("deleteManyTagsSuccess")}catch(B){console.error("Error deleting tags:",B),p("Error","Failed to delete tags."),k.value=!1}},P=S=>{m.value=S,h.value=Math.random(),u("DialogNewTag")},j=()=>{D(),h.value=Math.random()};function V(S){S.altKey&&S.key==="n"&&(S.preventDefault(),u("DialogNewTag"))}const K=Se(()=>{N.value["filter[tagname]"]=x.value,_.value=1,D()},500);Y([_,T],()=>{D()}),Y(x,()=>{K()}),Y(T,S=>{localStorage.setItem("perPage",S.toString())});function i(S){y.value===S?y.value=`-${S}`:y.value=S,D()}return{tags:U,isLoading:g,currentPage:_,perPage:T,lastPage:A,editId:m,newTagModalKey:h,searchTerm:x,openDialog:u,fetchTags:D,createTag:r,updateTag:I,deleteTag:s,deleteManyTags:v,handleSave:j,handleKeyDown:V,viewEditDialog:P,toggleSort:i,sortParam:y,showConfirmDelete:k}}const an={class:"flex flex-col h-full gap-1 text-center"},on={class:"flex items-center justify-between p-4"},nn={class:"flex items-center"},dn={class:"flex"},rn={class:"px-6"},un={key:0,class:"mr-2"},cn={__name:"Main",setup(_){const{editId:T,tags:y,currentPage:x,perPage:N,searchTerm:n,lastPage:m,isLoading:g,fetchTags:A,viewEditDialog:h,createTag:U,deleteTag:k,deleteManyTags:u,handleSave:d,showConfirmDelete:p,handleKeyDown:D,newTagModalKey:r,toggleSort:I,sortParam:s}=sn(),{selectedRows:v,selectAll:P,toggleSelectAll:j,toggleSelectRow:V}=Ne(y);return Z(()=>{A(),window.addEventListener("keydown",D),me.on("deleteManyTagsSuccess",()=>{v.value=[],P.value=!1})}),oe(()=>{window.removeEventListener("keydown",D)}),(K,i)=>{const S=w("Input"),B=w("Button"),F=w("Checkbox"),te=w("Icon"),Q=w("router-link"),ee=w("Badge"),ae=w("Toaster");return o(),C("div",an,[a("div",on,[a("div",nn,[t(S,{class:"max-w-sm ml-4",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter tags...",modelValue:e(n),"onUpdate:modelValue":i[0]||(i[0]=b=>se(n)?n.value=b:null)},null,8,["modelValue"]),t(B,{class:"ml-2 hover:bg-gray-800",variant:"outline",onClick:i[1]||(i[1]=b=>n.value="")},{default:l(()=>i[12]||(i[12]=[c(" Clear Filter ")])),_:1})]),a("div",dn,[e(v).length?(o(),E(B,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:i[2]||(i[2]=le(b=>p.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[c(" Delete Selected "+$(e(v).length)+" Tag(s) ",1)]),_:1})):M("",!0),t(B,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:le(e(U),["prevent"]),variant:"primary"},{default:l(()=>i[13]||(i[13]=[c(" New Tag "),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])),_:1},8,["onClick"])])]),a("div",rn,[t(e(Ae),null,{default:l(()=>[t(e(Pe),null,{default:l(()=>[t(e(ne),null,{default:l(()=>[t(e(q),{class:"w-[2%]"},{default:l(()=>[t(F,{id:"selectAll",modelValue:e(P),"onUpdate:modelValue":i[3]||(i[3]=b=>se(P)?P.value=b:null),checked:e(P),onClick:i[4]||(i[4]=b=>e(j)())},null,8,["modelValue","checked"])]),_:1}),t(e(q),{class:"w-[5%]"},{default:l(()=>[t(B,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[5]||(i[5]=b=>e(I)("id"))},{default:l(()=>[t(te,{icon:e(s)==="id"?"lucide:sort-asc":e(s)==="-id"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),i[14]||(i[14]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),t(e(q),{class:"w-[20%]"},{default:l(()=>[t(B,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[6]||(i[6]=b=>e(I)("tagname"))},{default:l(()=>[t(te,{icon:e(s)==="tagname"?"lucide:sort-asc":e(s)==="-tagname"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),i[15]||(i[15]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),t(e(q),{class:"w-[20%]"},{default:l(()=>i[16]||(i[16]=[c("Description")])),_:1}),t(e(q),{class:"w-[40%]"},{default:l(()=>i[17]||(i[17]=[c("Devices")])),_:1}),t(e(q),{class:"w-[10%]"},{default:l(()=>i[18]||(i[18]=[c("Actions")])),_:1})]),_:1})]),_:1}),t(e(Te),null,{default:l(()=>[e(g)?(o(),E(Ee,{key:0})):e(g)?(o(),E(Me,{key:2})):(o(!0),C(H,{key:1},X(e(y).data,b=>(o(),E(e(ne),{key:b.id},{default:l(()=>[t(e(G),{class:"text-start"},{default:l(()=>[t(F,{class:"cursor-pointer",id:"select-"+b.id,checked:!!e(v).includes(b.id),onClick:W=>e(V)(b.id)},null,8,["id","checked","onClick"])]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[c($(b.id),1)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[c($(b.tagname),1)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[c($(b.tagDescription),1)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[(o(!0),C(H,null,X(b.device.slice(0,8),(W,ye)=>(o(),C("span",{key:W.device_name,class:"mr-2"},[t(ee,{variant:"outline",class:"py-1 mt-1 hover:bg-rcgray-800"},{default:l(()=>[t(Q,{to:W.view_url},{default:l(()=>[c($(W.device_name),1)]),_:2},1032,["to"])]),_:2},1024)]))),128)),b.device.length>8?(o(),C("span",un,[t(Ge,{recordName:b.tagname,items:b.device,displayField:"device_name"},null,8,["recordName","items"])])):M("",!0)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[t(Fe,{rowData:b,onOnEdit:W=>e(h)(b.id),onOnDelete:W=>e(k)(b.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(Be,{currentPage:e(x),lastPage:e(m),perPage:e(N),"onUpdate:currentPage":i[7]||(i[7]=b=>x.value=b),"onUpdate:perPage":i[8]||(i[8]=b=>N.value=b)},null,8,["currentPage","lastPage","perPage"]),(o(),E(ln,{onSave:i[9]||(i[9]=b=>e(d)()),key:e(r),editId:e(T)},null,8,["editId"])),t(we,{ids:e(v),showConfirmDelete:e(p),onClose:i[10]||(i[10]=b=>p.value=!1),onHandleDelete:i[11]||(i[11]=b=>e(u)(e(v)))},null,8,["ids","showConfirmDelete"]),t(ae)])])}}};function mn(_){const T=f(1),y=f(parseInt(localStorage.getItem("perPage")||"10")),x=f("-id"),N=f(""),n=f({}),m=ce(),g=f(0),A=f(!1),h=f(1),U=f(1),k=f([]),u=f(!1),d=Oe(),{openDialog:p}=m,{toastSuccess:D,toastError:r}=ue();async function I(B={}){A.value=!0;try{const F=await R.get("/api/templates",{params:{page:T.value,perPage:y.value,sort:x.value,...n.value}});k.value=F.data,h.value=F.data.last_page}catch(F){console.error("Error fetching templates:",F),r("Error","Failed to fetch templates.")}finally{A.value=!1}}function s(B){d.push({name:"templatesview",params:{id:B}})}const v=async B=>{try{await R.delete(`/api/templates/${B}`),I(),D("Template Deleted","The template has been deleted successfully.")}catch(F){console.error("Error deleting template:",F),r("Error","Failed to delete template.")}},P=async B=>{try{await R.post("/api/templates/delete-many",{ids:B}),I(),D("Templates Deleted","The templates have been deleted successfully."),u.value=!1,me.emit("deleteManyTemplatesSuccess")}catch(F){console.error("Error deleting templates:",F),r("Error","Failed to delete templates."),u.value=!1}},j=B=>{g.value=B,U.value=Math.random(),p("DialogNewTemplate")},V=()=>{I(),U.value=Math.random()};function K(B){B.altKey&&B.key==="n"&&(B.preventDefault(),p("DialogNewTemplate"))}const i=Se(()=>{n.value["filter[templateName]"]=N.value,T.value=1,I()},500);Y([T,y],()=>{I()}),Y(N,()=>{i()}),Y(y,B=>{localStorage.setItem("perPage",B.toString())});function S(B){x.value===B?x.value=`-${B}`:x.value=B,I()}return{templates:k,isLoading:A,currentPage:T,perPage:y,lastPage:h,editId:g,newTemplateModalKey:U,searchTerm:N,openDialog:p,fetchTemplates:I,viewTemplateDetailsPane:s,deleteTemplate:v,deleteManyTemplates:P,handleSave:V,handleKeyDown:K,viewEditDialog:j,toggleSort:S,sortParam:x,showConfirmDelete:u}}const vn={class:"flex flex-col h-full gap-1 text-center"},pn={class:"flex items-center justify-between p-4"},fn={class:"flex items-center"},gn={class:"flex"},_n={class:"px-6"},yn={class:"border-b"},bn={key:0,class:"mr-2"},xn={__name:"Main",setup(_){const{templates:T,isLoading:y,currentPage:x,perPage:N,lastPage:n,editId:m,newTemplateModalKey:g,searchTerm:A,openDialog:h,fetchTemplates:U,viewTemplateDetailsPane:k,deleteTemplate:u,deleteManyTemplates:d,handleSave:p,handleKeyDown:D,viewEditDialog:r,toggleSort:I,sortParam:s,showConfirmDelete:v}=mn(),{importTemplates:P,importingTemplates:j}=sl(),{selectedRows:V,selectAll:K,toggleSelectAll:i,toggleSelectRow:S}=Ne(T);return Z(()=>{U(),window.addEventListener("keydown",D),me.on("deleteManyTemplatesSuccess",()=>{V.value=[],K.value=!1,document.getElementById("selectAll").checked=!1})}),oe(()=>{window.removeEventListener("keydown",D)}),(B,F)=>{const te=w("Input"),Q=w("Button"),ee=w("Icon"),ae=w("Checkbox"),b=w("router-link"),W=w("Badge"),ye=w("Toaster");return o(),C("div",vn,[a("div",pn,[a("div",fn,[t(te,{class:"max-w-sm ml-4",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter templates...",modelValue:e(A),"onUpdate:modelValue":F[0]||(F[0]=L=>se(A)?A.value=L:null)},null,8,["modelValue"]),t(Q,{class:"ml-2 hover:bg-gray-800",variant:"outline",onClick:F[1]||(F[1]=L=>A.value="")},{default:l(()=>F[13]||(F[13]=[c(" Clear Filter ")])),_:1})]),a("div",gn,[e(V).length?(o(),E(Q,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:F[2]||(F[2]=le(L=>v.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[c(" Delete Selected "+$(e(V).length)+" Template(s) ",1)]),_:1})):M("",!0),t(Q,{type:"close",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700",onClick:F[3]||(F[3]=L=>e(P)()),variant:"outline"},{default:l(()=>[e(j)?M("",!0):(o(),E(ee,{key:0,icon:"mdi:github",class:"mr-2"})),t(rt,{state:e(j)},null,8,["state"]),F[14]||(F[14]=c(" Import Templates "))]),_:1}),t(Q,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:F[4]||(F[4]=le(L=>e(k)(0),["prevent"])),variant:"primary"},{default:l(()=>F[15]||(F[15]=[c(" New Template "),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])),_:1})])]),a("div",_n,[t(e(Ae),null,{default:l(()=>[t(e(Pe),null,{default:l(()=>[t(e(ne),null,{default:l(()=>[t(e(q),{class:"w-[2%]"},{default:l(()=>[t(ae,{id:"selectAll",modelValue:e(K),"onUpdate:modelValue":F[5]||(F[5]=L=>se(K)?K.value=L:null),checked:e(K),onClick:F[6]||(F[6]=L=>e(i)())},null,8,["modelValue","checked"])]),_:1}),t(e(q),{class:"w-[5%]"},{default:l(()=>[t(Q,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:F[7]||(F[7]=L=>e(I)("id"))},{default:l(()=>[t(ee,{icon:e(s)==="id"?"lucide:sort-asc":e(s)==="-id"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),F[16]||(F[16]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),t(e(q),{class:"w-[20%]"},{default:l(()=>[t(Q,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:F[8]||(F[8]=L=>e(I)("templateName"))},{default:l(()=>[t(ee,{icon:e(s)==="templateName"?"lucide:sort-asc":e(s)==="-templateName"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),F[17]||(F[17]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),t(e(q),{class:"w-[20%]"},{default:l(()=>F[18]||(F[18]=[c("Description")])),_:1}),t(e(q),{class:"w-[40%]"},{default:l(()=>F[19]||(F[19]=[c("Devices")])),_:1}),t(e(q),{class:"w-[10%]"},{default:l(()=>F[20]||(F[20]=[c("Actions")])),_:1})]),_:1})]),_:1}),t(e(Te),null,{default:l(()=>[e(y)?(o(),E(Ee,{key:0})):e(y)?(o(),E(Me,{key:2})):(o(!0),C(H,{key:1},X(e(T).data,L=>(o(),E(e(ne),{key:L.id},{default:l(()=>[t(e(G),{class:"text-start"},{default:l(()=>[t(ae,{class:"cursor-pointer",id:"select-"+L.id,checked:!!e(V).includes(L.id),onClick:J=>e(S)(L.id)},null,8,["id","checked","onClick"])]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[c($(L.id),1)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[t(Q,{class:"px-2 py-0 text-sm hover:bg-rcgray-800 rounded-xl",variant:"ghost",onClick:J=>e(k)(L.id)},{default:l(()=>[a("span",yn,$(L.templateName),1)]),_:2},1032,["onClick"])]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[c($(L.description),1)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[(o(!0),C(H,null,X(L.device.slice(0,8),(J,ve)=>(o(),C("span",{key:J.device_name,class:"mr-2"},[t(W,{variant:"outline",class:"py-1 mt-1 hover:bg-rcgray-800"},{default:l(()=>[t(b,{to:J.view_url},{default:l(()=>[c($(J.device_name),1)]),_:2},1032,["to"])]),_:2},1024)]))),128)),L.device.length>8?(o(),C("span",bn,[t(Ge,{recordName:L.templateName,items:L.device,displayField:"device_name"},null,8,["recordName","items"])])):M("",!0)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[t(Fe,{rowData:L,onOnEdit:J=>e(k)(L.id),onOnDelete:J=>e(u)(L.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(Be,{currentPage:e(x),lastPage:e(n),perPage:e(N),"onUpdate:currentPage":F[9]||(F[9]=L=>x.value=L),"onUpdate:perPage":F[10]||(F[10]=L=>N.value=L)},null,8,["currentPage","lastPage","perPage"]),t(we,{ids:e(V),showConfirmDelete:e(v),onClose:F[11]||(F[11]=L=>v.value=!1),onHandleDelete:F[12]||(F[12]=L=>e(d)(e(V)))},null,8,["ids","showConfirmDelete"]),t(ye)])])}}},kn={class:"grid gap-2 py-4"},wn={class:"grid items-center grid-cols-4 gap-4"},hn={class:"flex flex-col w-full space-y-2"},$n={key:0,class:"text-red-400"},Cn={class:"pl-2 ml-auto"},Dn={class:"rc-kdb-class2"},In={class:"pl-2 ml-auto"},Vn={class:"rc-kdb-class2"},Sn={__name:"VendorAddEditDialog",props:{editId:Number},emits:["save"],setup(_,{emit:T}){const{toastSuccess:y,toastError:x,toastInfo:N,toastWarning:n,toastDefault:m}=ue(),g=ce(),{openDialog:A,closeDialog:h,isDialogOpen:U}=g,k=T;f([]);const u=f([]),d=f({vendorName:""}),p=_;function D(I){I.ctrlKey&&I.key==="Enter"&&r()}Z(()=>{p.editId>0&&R.get(`/api/vendors/${p.editId}`).then(I=>{d.value=I.data}),window.addEventListener("keydown",D)}),oe(()=>{window.removeEventListener("keydown",D)});function r(){let I=p.editId>0?`/${p.editId}`:"",s=p.editId>0?"patch":"post";R[s]("/api/vendors"+I,d.value).then(v=>{k("save",v.data),y("Vendor created","The vendor has been created successfully."),h("DialogNewVendor")}).catch(v=>{u.value=v.response.data.errors})}return(I,s)=>{const v=w("Label"),P=w("Input"),j=w("Button"),V=w("Icon");return o(),E(e(Ve),{open:e(U)("DialogNewVendor")},{default:l(()=>[t(e(he),{"as-child":""}),t(e($e),{class:"w-full",onEscapeKeyDown:s[4]||(s[4]=K=>e(h)("DialogNewVendor")),onPointerDownOutside:s[5]||(s[5]=K=>e(h)("DialogNewVendor")),onCloseClicked:s[6]||(s[6]=K=>e(h)("DialogNewVendor"))},{default:l(()=>[t(e(Ce),null,{default:l(()=>[t(e(De),null,{default:l(()=>[c($(_.editId>0?"Edit":"Add")+" Vendor "+$(_.editId>0?"(ID: "+_.editId+")":""),1)]),_:1}),t(e(ze),null,{default:l(()=>[c("Make changes to your vendor here. Click "+$(_.editId>0?"update":"save")+" when you're done.",1)]),_:1})]),_:1}),a("div",kn,[a("div",wn,[t(v,{for:"vendorName",class:"text-right"},{default:l(()=>s[7]||(s[7]=[c(" Vendor Name ")])),_:1}),t(P,{modelValue:d.value.vendorName,"onUpdate:modelValue":s[0]||(s[0]=K=>d.value.vendorName=K),id:"vendorName",class:"col-span-3"},null,8,["modelValue"])])]),a("div",hn,[u.value.vendorName?(o(),C("span",$n,$(u.value.vendorName[0]),1)):M("",!0)]),t(e(Ie),null,{default:l(()=>[t(j,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:s[1]||(s[1]=K=>e(h)("DialogNewVendor")),size:"sm"},{default:l(()=>s[8]||(s[8]=[c(" Cancel "),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])),_:1}),p.editId===0?(o(),E(j,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:s[2]||(s[2]=K=>r()),variant:"primary"},{default:l(()=>[s[10]||(s[10]=c(" Save ")),a("div",Cn,[a("kbd",Dn,[s[9]||(s[9]=c(" Ctrl  ")),t(V,{icon:"uil:enter",class:""})])])]),_:1})):M("",!0),p.editId>0?(o(),E(j,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:s[3]||(s[3]=K=>r()),variant:"primary"},{default:l(()=>[s[12]||(s[12]=c(" Update ")),a("div",In,[a("kbd",Vn,[s[11]||(s[11]=c(" Ctrl  ")),t(V,{icon:"uil:enter",class:""})])])]),_:1})):M("",!0)]),_:1})]),_:1})]),_:1},8,["open"])}}};function En(){const _=f(1),T=f(parseInt(localStorage.getItem("perPage")||"10")),y=f("-id"),x=f(""),N=f({}),n=ce(),m=f(0),g=f(!1),A=f(1),h=f(1),U=f([]),k=f(!1),{openDialog:u}=n,{toastSuccess:d,toastError:p}=ue();async function D(S={}){g.value=!0;try{const B=await R.get("/api/vendors",{params:{page:_.value,perPage:T.value,sort:y.value,...N.value}});U.value=B.data,A.value=B.data.last_page}catch(B){console.error("Error fetching vendors:",B),p("Error","Failed to fetch vendors.")}finally{g.value=!1}}const r=S=>{m.value=0,h.value=Math.random(),u("DialogNewVendor")};function I(S){m.value=S,h.value=Math.random(),u("DialogNewVendor")}const s=async S=>{try{await R.delete(`/api/vendors/${S}`),D(),d("Vendor Deleted","The vendor has been deleted successfully.")}catch(B){console.error("Error deleting vendor:",B),p("Error","Failed to delete vendor.")}},v=async S=>{try{await R.post("/api/vendors/delete-many",{ids:S}),D(),d("Vendors Deleted","The vendors have been deleted successfully."),k.value=!1,me.emit("deleteManyVendorsSuccess")}catch(B){console.error("Error deleting vendors:",B),p("Error","Failed to delete vendors."),k.value=!1}},P=S=>{m.value=S,h.value=Math.random(),u("DialogNewVendor")},j=()=>{D(),h.value=Math.random()};function V(S){S.altKey&&S.key==="n"&&(S.preventDefault(),u("DialogNewVendor"))}const K=Se(()=>{N.value["filter[vendorName]"]=x.value,_.value=1,D()},500);Y([_,T],()=>{D()}),Y(x,()=>{K()}),Y(T,S=>{localStorage.setItem("perPage",S.toString())});function i(S){y.value===S?y.value=`-${S}`:y.value=S,D()}return{vendors:U,isLoading:g,currentPage:_,perPage:T,lastPage:A,editId:m,newVendorModalKey:h,searchTerm:x,openDialog:u,fetchVendors:D,createVendor:r,updateVendor:I,deleteVendor:s,deleteManyVendors:v,handleSave:j,handleKeyDown:V,viewEditDialog:P,toggleSort:i,sortParam:y,showConfirmDelete:k}}const Nn={class:"flex flex-col h-full gap-1 text-center"},Pn={class:"flex items-center justify-between p-4"},Tn={class:"flex items-center"},Mn={class:"flex"},An={class:"px-6"},Bn={key:0,class:"mr-2"},Un={__name:"Main",setup(_){const{editId:T,vendors:y,currentPage:x,perPage:N,searchTerm:n,lastPage:m,isLoading:g,fetchVendors:A,viewEditDialog:h,createVendor:U,deleteVendor:k,deleteManyVendors:u,handleSave:d,handleKeyDown:p,newVendorModalKey:D,toggleSort:r,sortParam:I,showConfirmDelete:s}=En(),{selectedRows:v,selectAll:P,toggleSelectAll:j,toggleSelectRow:V}=Ne(y);return Z(()=>{A(),window.addEventListener("keydown",p),me.on("deleteManyVendorsSuccess",()=>{v.value=[],P.value=!1,document.getElementById("selectAll").checked=!1})}),oe(()=>{window.removeEventListener("keydown",p)}),(K,i)=>{const S=w("Input"),B=w("Button"),F=w("Checkbox"),te=w("Icon"),Q=w("router-link"),ee=w("Badge"),ae=w("Toaster");return o(),C("div",Nn,[a("div",Pn,[a("div",Tn,[t(S,{class:"max-w-sm ml-4",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter vendors...",modelValue:e(n),"onUpdate:modelValue":i[0]||(i[0]=b=>se(n)?n.value=b:null)},null,8,["modelValue"]),t(B,{class:"ml-2 hover:bg-gray-800",variant:"outline",onClick:i[1]||(i[1]=b=>n.value="")},{default:l(()=>i[12]||(i[12]=[c(" Clear Filter ")])),_:1})]),a("div",Mn,[e(v).length?(o(),E(B,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:i[2]||(i[2]=le(b=>s.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[c(" Delete Selected "+$(e(v).length)+" Tag(s) ",1)]),_:1})):M("",!0),t(B,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:le(e(U),["prevent"]),variant:"primary"},{default:l(()=>i[13]||(i[13]=[c(" New Vendor "),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])),_:1},8,["onClick"])])]),a("div",An,[t(e(Ae),null,{default:l(()=>[t(e(Pe),null,{default:l(()=>[t(e(ne),null,{default:l(()=>[t(e(q),{class:"w-[2%]"},{default:l(()=>[t(F,{id:"selectAll",modelValue:e(P),"onUpdate:modelValue":i[3]||(i[3]=b=>se(P)?P.value=b:null),checked:e(P),onClick:i[4]||(i[4]=b=>e(j)())},null,8,["modelValue","checked"])]),_:1}),t(e(q),{class:"w-[5%]"},{default:l(()=>[t(B,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[5]||(i[5]=b=>e(r)("id"))},{default:l(()=>[t(te,{icon:e(I)==="id"?"lucide:sort-asc":e(I)==="-id"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),i[14]||(i[14]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),t(e(q),{class:"w-[20%]"},{default:l(()=>[t(B,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[6]||(i[6]=b=>e(r)("vendorName"))},{default:l(()=>[t(te,{icon:e(I)==="vendorName"?"lucide:sort-asc":e(I)==="-vendorName"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),i[15]||(i[15]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),t(e(q),{class:"w-[50%]"},{default:l(()=>i[16]||(i[16]=[c("Devices")])),_:1}),t(e(q),{class:"w-[10%]"},{default:l(()=>i[17]||(i[17]=[c("Actions")])),_:1})]),_:1})]),_:1}),t(e(Te),null,{default:l(()=>[e(g)?(o(),E(Ee,{key:0})):e(g)?(o(),E(Me,{key:2})):(o(!0),C(H,{key:1},X(e(y).data,b=>(o(),E(e(ne),{key:b.id},{default:l(()=>[t(e(G),{class:"text-start"},{default:l(()=>[t(F,{class:"cursor-pointer",id:"select-"+b.id,checked:!!e(v).includes(b.id),onClick:W=>e(V)(b.id)},null,8,["id","checked","onClick"])]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[c($(b.id),1)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[c($(b.vendorName),1)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[(o(!0),C(H,null,X(b.device.slice(0,8),(W,ye)=>(o(),C("span",{key:W.device_name,class:"mr-2"},[t(ee,{variant:"outline",class:"py-1 mt-1 hover:bg-rcgray-800"},{default:l(()=>[t(Q,{to:W.view_url},{default:l(()=>[c($(W.device_name),1)]),_:2},1032,["to"])]),_:2},1024)]))),128)),b.device.length>8?(o(),C("span",Bn,[t(Ge,{recordName:b.vendorName,items:b.device,displayField:"device_name"},null,8,["recordName","items"])])):M("",!0)]),_:2},1024),t(e(G),{class:"text-start"},{default:l(()=>[t(Fe,{rowData:b,onOnEdit:W=>e(h)(b.id),onOnDelete:W=>e(k)(b.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(Be,{currentPage:e(x),lastPage:e(m),perPage:e(N),"onUpdate:currentPage":i[7]||(i[7]=b=>x.value=b),"onUpdate:perPage":i[8]||(i[8]=b=>N.value=b)},null,8,["currentPage","lastPage","perPage"]),(o(),E(Sn,{onSave:i[9]||(i[9]=b=>e(d)()),key:e(D),editId:e(T)},null,8,["editId"])),t(we,{ids:e(v),showConfirmDelete:e(s),onClose:i[10]||(i[10]=b=>s.value=!1),onHandleDelete:i[11]||(i[11]=b=>e(u)(e(v)))},null,8,["ids","showConfirmDelete"]),t(ae)])])}}},Ln={class:"flex flex-col flex-1 gap-2 dark:bg-rcgray-900"},Fn={class:"border-t border-b topRow"},jn={class:"flex items-center gap-2"},zn={class:"flex items-center gap-2 mr-4"},On={class:"flex items-center gap-2"},ld={__name:"Main",props:{},setup(_){const T=Ut(),y=f(localStorage.getItem("inventorySelectedView")||"devices"),x=Lt(),N=Oe(),n=[{id:"devices",label:"Devices",icon:"DeviceIcon",isFavorite:f(!1),route:"/devices"},{id:"commandgroups",label:"Command Groups",icon:"CommandGroupIcon",isFavorite:f(!1),route:"/commandgroups"},{id:"commands",label:"Commands",icon:"CommandsIcon",isFavorite:f(!1),route:"/commands"},{id:"templates",label:"Templates",icon:"TemplateIcon",isFavorite:f(!1),route:"/templates"},{id:"vendors",label:"Vendors",icon:"VendorIcon",isFavorite:f(!1),route:"/vendors"},{id:"tags",label:"Tags",icon:"TagIcon",isFavorite:f(!1),route:"/tags"}];Z(()=>{x.params.view?m(x.params.view):x.name==="devicesview"?m(x.name):x.path.includes("inventory")||m(x.name),n.forEach(A=>{A.isFavorite.value=T.isFavorite(A.id)})});function m(A){localStorage.setItem("inventorySelectedView",A),y.value=A,N.push({name:A})}function g(A){const h=n.find(U=>U.id===A);h&&(h.isFavorite.value=!h.isFavorite.value,T.toggleFavorite(h))}return(A,h)=>{const U=w("Icon"),k=w("Button"),u=w("StarUnselected"),d=w("StarSelected");return o(),C("main",Ln,[a("div",Fn,[t(e(lt),null,{default:l(()=>{var p,D;return[t(e(et),{"as-child":"",class:"p-4 ml-2"},{default:l(()=>[t(k,{variant:"outline"},{default:l(()=>[a("span",jn,[t(U,{icon:"fluent-color:pin-16"}),h[0]||(h[0]=c(" Select View "))])]),_:1})]),_:1}),a("div",zn,[(o(),E(Je(((p=n.find(r=>r.id===y.value))==null?void 0:p.icon)||""))),c(" "+$(((D=n.find(r=>r.id===y.value))==null?void 0:D.label)||""),1)]),t(e(tt),{class:"w-56",align:"start"},{default:l(()=>[t(e(Jt),null,{default:l(()=>[(o(),C(H,null,X(n,r=>t(e(Ue),{key:r.id,onClick:I=>m(r.id)},{default:l(()=>[a("span",On,[(o(),E(Je(r.icon))),c(" "+$(r.label),1)]),t(e(Ft),null,{default:l(()=>[t(e(jt),null,{default:l(()=>[t(e(zt),{"as-child":""},{default:l(()=>[t(e(Le),{onClick:le(I=>g(r.id),["stop","prevent"])},{default:l(()=>[r.isFavorite.value?M("",!0):(o(),E(u,{key:0})),r.isFavorite.value?(o(),E(d,{key:1})):M("",!0)]),_:2},1032,["onClick"])]),_:2},1024),t(e(Ot),null,{default:l(()=>[a("p",null,$(r.isFavorite.value?"Remove from favorites":"Add to favorites"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1})]}),_:1})]),a("div",null,[y.value==="devices"||y.value==="devicesview"?(o(),E(qo,{key:0})):M("",!0),y.value==="commandgroups"?(o(),E(Zl,{key:1})):M("",!0),y.value==="commands"?(o(),E(Sl,{key:2})):M("",!0),y.value==="templates"?(o(),E(xn,{key:3})):M("",!0),y.value==="vendors"?(o(),E(Un,{key:4})):M("",!0),y.value==="tags"?(o(),E(cn,{key:5})):M("",!0)])])}}};export{ld as default};
