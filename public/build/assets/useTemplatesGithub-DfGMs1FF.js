import{au as Ae,a as L,ab as Me,r as m,b as de,ak as Q,A as H,s as ge,c as T,o as p,d as S,e as o,j as s,w as r,f as e,a6 as re,G as R,t as E,z,k as P,a7 as ye,F as O,W as Z,$ as Te,X as Pe,Y as je,Z as Le,as as xe,a2 as Y,a0 as oe,B as le,T as F,v as ee,q as X,am as ae,h as A,x as te,y as se,u as G,I as J,J as ne,K as ce,L as ue,M as me,N as ve,Q as pe,R as fe,ag as ze,ah as Ue,ai as Be,aj as Fe,U as he}from"./app-D3DFbhTy.js";import{w as Ke}from"./useRowSelection-CtxXvdhY.js";import{d as be,_ as Oe,e as qe}from"./TagMultiSelect.vue_vue_type_script_setup_true_lang-Csgo5gGz.js";import{u as Re,a as He,b as _e}from"./useCredentials-BBTYW6ce.js";import{e as we}from"./eventBus-CGRXT3Tn.js";const We=Ae("comments",{state:()=>({commentCounters:{},initializedDevices:{}}),actions:{async initializeCommentsForDevice(u){if(!this.initializedDevices[u])try{const g=(await L.get(`/api/device-comments/${u}`)).data;this.commentCounters[u]=g.length,this.initializedDevices[u]=!0}catch(C){console.error(`Failed to load comments for device ${u}:`,C)}},incrementCounter(u){this.commentCounters[u]||(this.commentCounters[u]=0),this.commentCounters[u]++},decrementCounter(u){this.commentCounters[u]&&this.commentCounters[u]--}},persist:{storage:localStorage,paths:["commentCounters","initializedDevices"]}});function Xe(u,C){const g=Me(),b=We(),{incrementCounter:V,decrementCounter:n}=b,{openSheet:a,closeSheet:f,isSheetOpen:N}=g,y=m([]),D=m(!1),M=de(),w=Q("formatters"),c=m(!0),i=m(!1),_=m(1);H(()=>{u.deviceId!=0&&b.initializeCommentsForDevice(u.deviceId),(N("DeviceCommentSheet")||u.isDeviceCommentsPanelView)&&(c.value&&t(),i.value&&h())});function t(){y.value=[],D.value=!0,L.get(`/api/device-comments/${u.deviceId}`).then($=>{y.value=$.data,D.value=!1}).catch($=>{console.error($),D.value=!1})}function h(){y.value=[],D.value=!0,L.get(`/api/device-closed-comments/${u.deviceId}`).then($=>{y.value=$.data,D.value=!1}).catch($=>{console.error($),D.value=!1})}function l($){f("DeviceCommentSheet"),M.push({name:"device",params:{id:$}})}function v(){y.value.unshift({user:{name:"New User"},created_at:new Date().toISOString(),comment:"",is_open:!0,isEditable:!0})}function k($){_.value++,L.post("/api/device/comments",{comment:$,device_id:u.deviceId}).then(j=>{C("commentsaved"),t(),V(u.deviceId)}).catch(j=>{console.error(j)})}function d($){L.get(`/api/device/comments/${$}/close`).then(j=>{C("commentsaved"),t(),n(u.deviceId)}).catch(j=>{console.error(j)})}function x($){L.delete(`/api/device/comments/${$}`).then(j=>{C("commentsaved"),t(),n(u.deviceId)}).catch(j=>{console.error(j)})}function U(){c.value=!c.value,i.value=!i.value,c.value&&t(),i.value&&h()}return{changeView:U,addComment:v,closeSheet:f,comments:y,formatters:w,isLoading:D,isSheetOpen:N,saveComment:k,viewDevice:l,closeComment:d,deleteComment:x,activeCommentsView:c,closedCommentsView:i,newCommentKey:_}}const Ye={},Ge={class:"flex flex-col items-center pt-48 text-sm text-center text-muted-foreground"};function Je(u,C){const g=T("Icon");return p(),S("div",Ge,[o(g,{icon:"fluent-color:chat-bubbles-question-20",class:"mb-2 text-4xl"}),C[0]||(C[0]=s("span",null,"No Comments, yet.",-1))])}const Qe=ge(Ye,[["render",Je]]),Ze={"data-visible":"true",class:"opacity-100 absolute top-1.5 right-1.5"},et={class:"flex flex-row items-center p-0.5 bg-rcgray-900 rounded-lg shadow-inner border",style:{"box-shadow":"rgb(49, 51, 55) 0px 0px 0px 0px"}},tt={"data-is-small-ghost":"false",class:"inline-flex items-center justify-center"},st={__name:"CommentsListMenu",props:{},emits:["resolveComment","deleteComment"],setup(u,{emit:C}){const g=C;m(!1);function b(){g("resolveComment")}function V(){g("deleteComment")}return(n,a)=>{const f=T("Icon");return p(),S("div",Ze,[s("div",et,[o(e(re),{onClick:a[0]||(a[0]=N=>b()),variant:"ghost","aria-label":"Resolve comment",title:"Resolve comment","data-state":"closed",class:"flex items-center justify-center h-6 px-2 cursor-pointer"},{default:r(()=>[s("div",tt,[o(f,{icon:"teenyicons:tick-circle-outline",class:"text-gray-500 hover:text-green-500"})])]),_:1}),o(e(re),{onClick:a[1]||(a[1]=N=>V()),variant:"ghost","aria-label":"Delete",title:"Delete","data-state":"closed",class:"h-6 px-2 cursor-pointer"},{default:r(()=>[o(f,{icon:"iconamoon:trash",class:"text-red-500"})]),_:1})])])}}},ot={class:"relative p-3 transition-colors border border-gray-700 shadow-inner cursor-pointer rounded-xl bg-rcgray-800 hover:bg-rcgray-900 group",style:{"border-color":"rgb(49, 51, 55)"}},lt={class:"flex flex-col items-stretch justify-start gap-2 group"},at={class:"relative flex flex-col gap-1"},nt={class:"flex flex-row items-start justify-between gap-1.5 h-6 mb-[-1]"},it={class:"flex flex-row items-center gap-1.5"},rt={class:"relative inline-flex items-center justify-center w-4 h-4 overflow-hidden rounded-full"},dt={class:"flex items-center justify-center w-full h-full bg-blue-700 text-blue-100 font-semibold text-[10px] uppercase"},ct={class:"flex flex-row items-baseline justify-start min-w-0 gap-1"},ut={class:"text-sm font-semibold text-white truncate",style:{color:"rgb(238, 239, 241)"}},mt={class:"text-xs text-gray-400 truncate"},vt={"data-indent":"true",class:"flex pl-[22px]"},pt={class:"flex flex-1 flex-col items-stretch justify-start gap-1.5 min-w-0"},ft={class:"min-w-0"},_t={class:"flex flex-wrap text-sm font-medium text-white break-words truncate","data-expanded":"false",style:{color:"rgb(238, 239, 241)"}},gt={"aria-autocomplete":"none","aria-readonly":"true",contenteditable:"false",role:"textbox",spellcheck:"true",class:"break-words whitespace-pre-wrap select-text"},yt={dir:"ltr"},xt={class:"hidden group-hover:block"},ht={"data-visible":"true",class:"absolute opacity-100 top-3 right-3"},bt={__name:"CommentsList",props:{comments:{type:Array,required:!0}},emits:["resolveComment","deleteComment"],setup(u,{emit:C}){const g=C,b=Q("formatters");function V(a){g("resolveComment",a)}function n(a){g("deleteComment",a)}return(a,f)=>{const N=T("Icon");return p(!0),S(O,null,R(u.comments,y=>(p(),S("div",null,[s("div",ot,[s("div",lt,[s("div",at,[s("div",nt,[s("div",it,[s("span",rt,[s("span",dt,E(e(b).getFirstLetterCapitalized(y.user.name)),1)]),s("div",ct,[s("div",ut,E(y.user.name),1),s("div",mt,E(e(b).timeFrom(y.created_at)),1)])])]),s("div",vt,[s("div",pt,[s("div",ft,[s("div",_t,[s("div",null,[s("div",gt,[s("p",yt,[s("span",null,E(y.comment),1)])])])])]),f[0]||(f[0]=s("div",null,null,-1))])])])]),o(ye,{name:"fade"},{default:r(()=>[s("div",xt,[y.is_open?(p(),z(st,{key:0,onResolveComment:D=>V(y.id),onDeleteComment:D=>n(y.id)},null,8,["onResolveComment","onDeleteComment"])):P("",!0)])]),_:2},1024),s("div",ht,[y.is_open?P("",!0):(p(),z(N,{key:0,icon:"teenyicons:tick-circle-outline",class:"text-green-500 opacity-50"}))])])]))),256)}}},wt={style:{transform:"translateY(0px)"}},Ct=["data-state"],$t={class:"max-h-[25vh] min-h-0 flex flex-col"},Dt={dir:"ltr",class:"relative flex flex-col w-full h-full overflow-hidden",style:{position:"relative","--radix-scroll-area-corner-width":"0px","--radix-scroll-area-corner-height":"0px"}},kt={"data-radix-scroll-area-viewport":"",class:"flex flex-col w-full h-full flex-auto min-h-0 max-h-[400px] p-[12px_12px_0_0]",style:{overflow:"hidden scroll"}},Vt={"data-radix-scroll-area-content":""},It={class:"flex flex-row items-start justify-start gap-2 pb-1 pl-[14px]"},St={class:"relative inline-flex items-center justify-center w-4 h-4 overflow-hidden rounded-full"},Et={class:"flex items-center justify-center w-full h-full bg-blue-700 text-blue-100 font-semibold text-[10px] uppercase"},Nt={class:"flex flex-col flex-1 min-w-0"},At={class:"relative font-sans tracking-tight font-medium leading-5 text-sm text-[#eef0f1] [font-feature-settings:'liga','calt']"},Mt={key:0,class:"absolute top-0 left-0 font-sans text-sm font-medium leading-5 tracking-tight text-gray-500 pointer-events-none select-none"},Tt={class:"flex flex-none flex-row items-center justify-between gap-2 p-[4px_8px_8px_12px]"},Pt={class:"flex flex-row items-center justify-start gap-2"},jt={type:"button","aria-label":"Mention",class:""},Lt={"data-is-small-ghost":"true",class:""},zt={key:0,type:"button",class:"relative flex shrink-0 grow-0 items-center justify-center opacity-40 cursor-default gap-1.5 bg-[#266df0] p-[6px_10px] rounded-[9px] shadow-[inset_0_0_0_1px_rgba(244,245,246,0.1)]"},Ut={__name:"NewCommentCard",props:{},emits:["submitComment"],setup(u,{emit:C}){const g=C,b=Q("formatters"),V=Q("username"),n=m("default"),a=m(!0),f=m("");function N(){n.value="focus-within"}function y(){n.value="default"}function D(w){const c=w.target.textContent.trim();f.value=c,a.value=c===""}function M(){f.value.trim()!==""&&g("submitComment",f.value.trim())}return(w,c)=>{const i=T("Icon");return p(),S("div",wt,[s("div",{tabindex:"0",onClick:N,onFocusout:y,class:"mt-4 new-comment-border","aria-disabled":"false","data-state":n.value},[s("div",$t,[s("div",Dt,[s("div",kt,[s("div",Vt,[c[3]||(c[3]=s("div",{"aria-hidden":"true",class:"w-full"},null,-1)),s("div",It,[s("span",St,[s("span",Et,E(e(b).getFirstLetterCapitalized(e(V))),1)]),s("div",Nt,[s("div",At,[s("div",{class:"outline-none",contenteditable:"true",role:"textbox",spellcheck:"false",style:{"user-select":"text","white-space":"pre-wrap","word-break":"break-word"},"data-lexical-editor":"true",onInput:D,"data-ms-editor":"true"},c[2]||(c[2]=[s("p",null,[s("br")],-1)]),32),a.value?(p(),S("div",Mt," Add comment... ")):P("",!0)])])]),c[4]||(c[4]=s("div",{"aria-hidden":"true",class:"w-full"},null,-1))])])]),c[7]||(c[7]=s("div",{"data-visible":"false","data-position":"bottom","aria-hidden":"true",class:"w-full h-px flex-none bg-[rgba(244,245,246,0.04)] transition-opacity duration-[140ms] opacity-1 data-[visible='false']:opacity-0"},null,-1)),s("div",Tt,[s("div",Pt,[s("button",jt,[s("div",Lt,[o(i,{icon:"meteor-icons:at",class:"text-sm text-muted-foreground hover:text-white"})])])]),n.value==="default"?(p(),S("button",zt,c[5]||(c[5]=[s("div",{class:"inline-block overflow-hidden text-sm font-medium leading-5 tracking-tight align-bottom text-ellipsis whitespace-nowrap text-gray-50"},"Comment",-1)]))):P("",!0),n.value==="focus-within"?(p(),S("button",{key:1,onMousedown:c[0]||(c[0]=Z(()=>{},["prevent"])),type:"button",onClick:c[1]||(c[1]=_=>M()),class:"relative flex shrink-0 grow-0 items-center justify-center opacity-100 cursor-pointer gap-1.5 bg-[#266df0] p-[6px_10px] rounded-[9px] shadow-[inset_0_0_0_1px_rgba(244,245,246,0.1)] transition-colors transition-shadow"},c[6]||(c[6]=[s("div",{class:"inline-block overflow-hidden text-sm font-medium leading-5 tracking-tight align-bottom text-ellipsis whitespace-nowrap text-gray-50"},"Comment",-1)]),32)):P("",!0)])])],40,Ct)])}}},Bt=ge(Ut,[["__scopeId","data-v-e3b60231"]]),Ft={class:"mt-4 mr-3 space-y-4"},Kt={class:"flex items-center justify-between ml-1 text-sm"},Ot={class:"cursor-pointer"},qt={key:1,class:"space-y-4"},To={__name:"CommentsMainPanel",props:{deviceId:{type:Number,required:!0},deviceName:{type:String,required:!0},isDeviceCommentsPanelView:{type:Boolean,required:!1,default:!1}},emits:["commentsaved"],setup(u,{emit:C}){const g=C,b=u,{changeView:V,comments:n,isLoading:a,saveComment:f,closeComment:N,deleteComment:y,activeCommentsView:D,newCommentKey:M}=Xe(b,g);return(w,c)=>{const i=T("Icon"),_=T("Button"),t=T("Separator");return p(),z(e(Y),{class:"h-[90vh]"},{default:r(()=>[s("div",Ft,[s("div",Kt,[s("span",null,"All "+E(e(D)?"Open":"Closed")+" Comments",1),o(e(Te),null,{default:r(()=>[o(e(Pe),{"as-child":""},{default:r(()=>[o(_,{variant:"ghost"},{default:r(()=>[o(i,{icon:"mage:filter"})]),_:1})]),_:1}),o(e(je),{side:"bottom",align:"end"},{default:r(()=>[o(e(Ke),null,{default:r(()=>[o(e(Le),{onClick:c[0]||(c[0]=h=>e(V)())},{default:r(()=>[s("span",Ot,"Show "+E(e(D)?"resolved":"open")+" comments",1)]),_:1})]),_:1})]),_:1})]),_:1})]),(p(),z(Bt,{key:e(M),class:"mt-2",onSubmitComment:c[1]||(c[1]=h=>e(f)(h))})),o(t),e(a)?(p(),z(xe,{key:0,class:"mt-4"})):P("",!0),e(a)?P("",!0):(p(),S("div",qt,[e(n).length>0?(p(),z(bt,{key:0,onResolveComment:c[2]||(c[2]=h=>e(N)(h)),onDeleteComment:c[3]||(c[3]=h=>e(y)(h)),comments:e(n)},null,8,["comments"])):P("",!0),e(n).length===0?(p(),z(Qe,{key:1})):P("",!0)]))])]),_:1})}}},Rt={class:"relative items-center w-full"},Ht={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},Wt={class:"py-1"},Xt=["onClick"],Yt={"data-size":"20"},Gt={class:"p-1 border-5"},Jt=oe({__name:"CredentialsMultiSelect",props:{modelValue:{type:Array,required:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(u,{emit:C}){const g=C,b=m([]);m([]);const V=m(!1),n=m(""),a=m([]),{createCred:f,newCredModalKey:N,handleSave:y}=Re(),D=u,M=le(()=>b.value.filter(_=>_.cred_name.toLowerCase().includes(n.value.toLowerCase())&&!a.value.some(t=>t.id===_.id)));H(()=>{i(),D.modelValue[0]!=null?a.value=D.modelValue:a.value=[]}),F(()=>D.modelValue,_=>{a.value=_}),F(N,()=>{i()});function w(_){D.singleSelect?a.value=[_]:a.value.push(_),V.value=!1,n.value="",g("update:modelValue",a.value)}function c(_){const t=a.value.findIndex(h=>h.cred_name===_);t!==-1&&a.value.splice(t,1),g("update:modelValue",a.value)}function i(){L.get("/api/device-credentials/?perPage=10000").then(_=>{b.value=_.data.data})}return(_,t)=>{const h=T("Icon"),l=T("Button"),v=T("Input"),k=T("Separator");return p(),z(e(se),null,{default:r(()=>[t[3]||(t[3]=s("div",{class:"hidden text-yellow-200 text-teal-100 bg-yellow-700 bg-teal-700 border-yellow-500 border-teal-500 bg-stone-700 text-stone-200 border-stone-500 bg-lime-700 text-lime-200 border-lime-500 bg-sky-700 text-sky-100 border-sky-500 bg-violet-700 text-violet-200 border-violet-500 bg-fuchsia-700 text-fuchsia-200 border-fuchsia-500"},null,-1)),o(e(ee),{class:"col-span-3"},{default:r(()=>[o(l,{variant:"ghost",class:X(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",a.value.length===0?"text-muted-foreground":" "]),style:ae(a.value.length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:r(()=>[A(E(a.value&&a.value.length===0?"Select credentials":"")+" ",1),(p(!0),S(O,null,R(a.value,d=>(p(),S("span",{key:d.id,class:"relative my-1 group"},[s("span",{class:X([d.badgeColor?d.badgeColor:"bg-gray-600 text-gray-200 border-gray-500","flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"])},[A(E(d.cred_name)+" ",1),o(h,{icon:"si:close-line",class:"ml-1 cursor-pointer hover:text-white",onClick:Z(x=>c(d.cred_name),["stop"])},null,8,["onClick"])],2)]))),128))]),_:1},8,["class","style"])]),_:1}),o(e(te),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:r(()=>[s("div",Rt,[o(v,{id:"search",type:"text",modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=d=>n.value=d),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),s("span",Ht,[o(h,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),o(k),o(e(Y),{class:"h-64"},{default:r(()=>[s("div",Wt,[(p(!0),S(O,null,R(M.value,d=>(p(),S("div",{key:d.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:x=>w(d)},[s("span",{"data-size":"20",class:X(["cursor-default text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border",d.badgeColor?d.badgeColor:"bg-gray-600 text-gray-200 border-gray-500"])},[s("span",Yt,E(d.cred_name),1)],2)],8,Xt))),128))])]),_:1}),o(k),s("div",Gt,[o(l,{variant:"ghost",onClick:e(f),class:"justify-start w-full p-1"},{default:r(()=>[o(h,{icon:"octicon:plus-16",class:"w-3 h-3 mt-1 mr-2 text-muted-foreground"}),t[2]||(t[2]=s("span",null,"Create new record",-1))]),_:1},8,["onClick"])])]),_:1}),(p(),z(He,{onSave:t[1]||(t[1]=d=>e(y)()),key:e(N),editId:0}))]),_:1})}}}),Qt={class:"flex items-center"},Zt={class:"ml-2"},es={class:"grid gap-2 p-4"},ts={class:"grid items-center grid-cols-1 gap-4"},ss={key:0,class:"col-start-2 -mt-4 text-sm text-red-400"},os={class:"pl-2 ml-auto"},ls={class:"rc-kdb-class2"},as={class:"pl-2 ml-auto"},ns={class:"rc-kdb-class2"},is={__name:"DeviceModelAddDialog",props:{editId:{type:Number,default:0}},emits:["save"],setup(u,{emit:C}){const{toastSuccess:g,toastError:b,toastInfo:V,toastWarning:n,toastDefault:a}=G(),f=J(),{openDialog:N,closeDialog:y,isDialogOpen:D}=f,M=C;m([]);const w=m([]),c=m({name:""});m("");const i=u;function _(h){h.ctrlKey&&h.key==="Enter"&&t()}H(()=>{window.addEventListener("keydown",_)}),ne(()=>{window.removeEventListener("keydown",_)});function t(){let h=i.editId>0?`/${i.editId}`:"",l=i.editId>0?"patch":"post";L[l]("/api/device-models"+h,c.value).then(v=>{M("save"),g("Device Model created","The device model has been created successfully."),y("DialogDeviceModelAdd"),c.value={name:""}}).catch(v=>{w.value=v.response.data.errors})}return(h,l)=>{const v=T("Icon"),k=T("Button"),d=T("UserIcon"),x=T("Label"),U=T("Input");return p(),z(e(fe),{open:e(D)("DialogDeviceModelAdd")},{default:r(()=>[o(e(ce),{"as-child":""},{default:r(()=>[o(k,{variant:"ghost",onClick:l[0]||(l[0]=$=>e(N)("DialogDeviceModelAdd")),class:"justify-start w-full p-1"},{default:r(()=>[o(v,{icon:"octicon:plus-16",class:"w-3 h-3 mt-1 mr-2 text-muted-foreground"}),l[8]||(l[8]=s("span",null,"Create new record",-1))]),_:1})]),_:1}),o(e(ue),{class:"p-0 sm:max-w-1/3",onEscapeKeyDown:l[5]||(l[5]=$=>e(y)("DialogDeviceModelAdd")),onPointerDownOutside:l[6]||(l[6]=$=>e(y)("DialogDeviceModelAdd")),onCloseClicked:l[7]||(l[7]=$=>e(y)("DialogDeviceModelAdd"))},{default:r(()=>[o(e(me),{class:"rc-dialog-header"},{default:r(()=>[o(e(ve),{class:"text-sm text-rcgray-200"},{default:r(()=>[s("div",Qt,[o(d),s("span",Zt,E(u.editId>0?"Edit":"Add")+" Device Model "+E(u.editId>0?"(ID: "+u.editId+")":""),1)])]),_:1})]),_:1}),s("div",es,[s("div",ts,[o(x,{for:"name",class:"text-left"},{default:r(()=>l[9]||(l[9]=[A(" Device Model Name "),s("span",{class:"text-red-400"},"*",-1)])),_:1}),o(U,{modelValue:c.value.name,"onUpdate:modelValue":l[1]||(l[1]=$=>c.value.name=$),id:"name",class:"col-span-3",autocomplete:"off"},null,8,["modelValue"]),w.value.name?(p(),S("span",ss,E(w.value.name[0]),1)):P("",!0)])]),o(e(pe),{class:"rc-dialog-footer bg-rcgray-800"},{default:r(()=>[o(k,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:l[2]||(l[2]=$=>e(y)("DialogDeviceModelAdd")),size:"sm"},{default:r(()=>l[10]||(l[10]=[A(" Cancel "),s("div",{class:"pl-2 ml-auto"},[s("kbd",{class:"rc-kdb-class"},"ESC")],-1)])),_:1}),i.editId===0?(p(),z(k,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:l[3]||(l[3]=$=>t()),variant:"primary"},{default:r(()=>[l[12]||(l[12]=A(" Save ")),s("div",os,[s("kbd",ls,[l[11]||(l[11]=A(" Ctrl  ")),o(v,{icon:"uil:enter",class:""})])])]),_:1})):P("",!0),i.editId>0?(p(),z(k,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:l[4]||(l[4]=$=>t()),variant:"primary"},{default:r(()=>[l[14]||(l[14]=A(" Update ")),s("div",as,[s("kbd",ns,[l[13]||(l[13]=A(" Ctrl  ")),o(v,{icon:"uil:enter",class:""})])])]),_:1})):P("",!0)]),_:1})]),_:1})]),_:1},8,["open"])}}},rs={class:"flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"},ds={class:"relative items-center w-full"},cs={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},us={class:"py-1"},ms=["onClick"],vs={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},ps={"data-size":"20"},fs={class:"p-1 border-5"},_s={__name:"DeviceModelMultiSelect",props:{modelValue:{type:Array,required:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(u,{emit:C}){const g=C,b=m([]),V=m(!1),n=m(""),a=m([]),f=u,N=le(()=>b.value.filter(c=>c.name.toLowerCase().includes(n.value.toLowerCase())&&!a.value.some(i=>i.id===c.id)));F(()=>f.modelValue,c=>{a.value=c}),H(()=>{M(),f.modelValue&&f.modelValue.length>0&&(a.value=f.modelValue)});function y(c){f.singleSelect?a.value=[c]:a.value.push(c),V.value=!1,n.value="",g("update:modelValue",a.value)}function D(c){const i=a.value.findIndex(_=>_.name===c);i!==-1&&a.value.splice(i,1),g("update:modelValue",a.value)}function M(){L.get("/api/device-models/?perPage=10000").then(c=>{b.value=c.data.data})}function w(){M()}return(c,i)=>{const _=T("Icon"),t=T("Button"),h=T("Input"),l=T("Separator");return p(),z(e(se),null,{default:r(()=>[o(e(ee),{class:"col-span-3"},{default:r(()=>[o(t,{variant:"ghost",class:X(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",a.value.length===0?"text-muted-foreground":" "]),style:ae(a.value.length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:r(()=>[A(E(a.value&&a.value.length===0?"Select device model":"")+" ",1),(p(!0),S(O,null,R(a.value,v=>(p(),S("span",{key:v.id,class:"relative my-1 group"},[s("span",rs,[A(E(v.name)+" ",1),o(_,{icon:"si:close-line",class:"ml-1 cursor-pointer hover:text-white",onClick:Z(k=>D(v.name),["stop"])},null,8,["onClick"])])]))),128))]),_:1},8,["class","style"])]),_:1}),o(e(te),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:r(()=>[s("div",ds,[o(h,{id:"search",type:"text",modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=v=>n.value=v),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),s("span",cs,[o(_,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),o(l),o(e(Y),{class:"h-64"},{default:r(()=>[s("div",us,[(p(!0),S(O,null,R(N.value,v=>(p(),S("div",{key:v.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:k=>y(v)},[s("span",vs,[s("span",ps,E(v.name),1)])],8,ms))),128))])]),_:1}),o(l),s("div",fs,[o(is,{onSave:i[1]||(i[1]=v=>w())})])]),_:1})]),_:1})}}},gs={class:"grid gap-4"},ys={class:"space-y-2"},xs={class:"flex items-center space-x-2"},hs={class:"font-medium leading-none"},bs={class:"text-sm text-muted-foreground"},ie=oe({__name:"HelpPopover",props:{title:{type:String,required:!0},content:{type:String,required:!0}},setup(u){return(C,g)=>{const b=T("Icon");return p(),z(e(se),null,{default:r(()=>[o(e(ee),{"as-child":""},{default:r(()=>[o(e(re),{tabindex:"-1",variant:"ghost",class:"h-0 p-0 m-0 ml-1"},{default:r(()=>[o(b,{icon:"formkit:help"})]),_:1})]),_:1}),o(e(te),{class:"w-80",side:"top",align:"start"},{default:r(()=>[s("div",gs,[s("div",ys,[s("div",xs,[o(b,{icon:"formkit:help"}),s("h4",hs,E(u.title),1)]),s("p",bs,E(u.content),1)])])]),_:1})]),_:1})}}});function ws(u,C,g){const b=m(!1);H(()=>{window.addEventListener("keydown",V)}),ne(()=>{window.removeEventListener("keydown",V)});function V(N){N.ctrlKey&&N.key==="Enter"&&(b.value=!1)}function n(){b.value=!0}function a(){b.value=!1}function f(){b.value=!1}return{showConfirmCloseAlert:b,showConfirmCloseDialog:n,cancelCloseDialog:a,confirmCloseDialog:f}}const Cs={class:"flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"},$s={class:"relative items-center w-full"},Ds={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},ks={class:"py-1"},Vs=["onClick"],Is={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Ss={"data-size":"20"},Es={class:"p-1 border-5"},Ns=oe({__name:"TemplateMultiSelect",props:{modelValue:{type:Array,required:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(u,{emit:C}){const g=C,b=m([]);m([]);const V=m(!1),n=m(""),a=m([]),f=de(),{showConfirmCloseAlert:N,showConfirmCloseDialog:y,cancelCloseDialog:D,confirmCloseDialog:M}=ws(),w=u,c=le(()=>b.value.filter(l=>l.templateName.toLowerCase().includes(n.value.toLowerCase())&&!a.value.some(v=>v.id===l.id)));F(()=>w.modelValue,l=>{a.value=l}),H(()=>{t(),w.modelValue[0]&&w.modelValue[0].length>0&&(console.log("props.modelValue",w.modelValue),a.value=w.modelValue)});function i(l){w.singleSelect?a.value=[l]:a.value.push(l),V.value=!1,n.value="",g("update:modelValue",a.value)}function _(l){const v=a.value.findIndex(k=>k.templateName===l);v!==-1&&a.value.splice(v,1),g("update:modelValue",a.value)}function t(){L.get("/api/templates/?perPage=10000").then(l=>{b.value=l.data.data})}function h(){f.push({path:"/templates/view/0"})}return(l,v)=>{const k=T("Icon"),d=T("Button"),x=T("Input"),U=T("Separator");return p(),z(e(se),null,{default:r(()=>[o(e(ee),{class:"col-span-3"},{default:r(()=>[o(d,{variant:"ghost",class:X(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",a.value.length===0?"text-muted-foreground":" "]),style:ae(a.value.length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:r(()=>[A(E(a.value&&a.value.length===0?"Select templates":"")+" ",1),(p(!0),S(O,null,R(a.value,$=>(p(),S("span",{key:$.id,class:"relative my-1 group"},[s("span",Cs,[A(E($.templateName)+" ",1),o(k,{icon:"si:close-line",class:"ml-1 cursor-pointer hover:text-white",onClick:Z(j=>_($.templateName),["stop"])},null,8,["onClick"])])]))),128))]),_:1},8,["class","style"])]),_:1}),o(e(te),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:r(()=>[s("div",$s,[o(x,{id:"search",type:"text",modelValue:n.value,"onUpdate:modelValue":v[0]||(v[0]=$=>n.value=$),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),s("span",Ds,[o(k,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),o(U),o(e(Y),{class:"h-64"},{default:r(()=>[s("div",ks,[(p(!0),S(O,null,R(c.value,$=>(p(),S("div",{key:$.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:j=>i($)},[s("span",Is,[s("span",Ss,E($.templateName),1)])],8,Vs))),128))])]),_:1}),o(U),s("div",Es,[o(d,{variant:"ghost",onClick:v[1]||(v[1]=$=>e(y)()),class:"justify-start w-full p-1"},{default:r(()=>[o(k,{icon:"octicon:plus-16",class:"w-3 h-3 mt-1 mr-2 text-muted-foreground"}),v[4]||(v[4]=s("span",null,"Create new record",-1)),o(e(ze),null,{default:r(()=>[o(e(Ue),null,{default:r(()=>[o(e(Be),{"as-child":""},{default:r(()=>[o(k,{icon:"pajamas:issue-new",class:"w-3 h-3 mt-1 ml-auto text-muted-foreground"})]),_:1}),o(e(Fe),{class:"text-white bg-rcgray-800"},{default:r(()=>v[3]||(v[3]=[s("p",null,"Navigate to new template page",-1)])),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),o(be,{showConfirmCloseAlert:e(N),onHandleClose:e(D),onHandleConfirm:v[2]||(v[2]=$=>h())},null,8,["showConfirmCloseAlert","onHandleClose"])]),_:1})}}}),As={class:"flex items-center"},Ms={class:"ml-2"},Ts={class:"grid gap-2 py-4"},Ps={class:"grid items-center grid-cols-4 gap-2"},js={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},Ls={class:"pl-2 ml-auto"},zs={class:"rc-kdb-class2"},Us={class:"pl-2 ml-auto"},Bs={class:"rc-kdb-class2"},Fs={__name:"VendorAddEditDialog",props:{editId:Number},emits:["save"],setup(u,{emit:C}){const{toastSuccess:g,toastError:b,toastInfo:V,toastWarning:n,toastDefault:a}=G(),f=J(),{openDialog:N,closeDialog:y,isDialogOpen:D}=f,M=C;m([]);const w=m([]),c=m({vendorName:""}),i=u;function _(h){h.ctrlKey&&h.key==="Enter"&&t()}H(()=>{i.editId>0&&L.get(`/api/vendors/${i.editId}`).then(h=>{c.value=h.data}),window.addEventListener("keydown",_)}),ne(()=>{window.removeEventListener("keydown",_)});function t(){let h=i.editId>0?`/${i.editId}`:"",l=i.editId>0?"patch":"post";L[l]("/api/vendors"+h,c.value).then(v=>{M("save",v.data),g("Vendor created","The vendor has been created successfully."),y("DialogNewVendor")}).catch(v=>{w.value=v.response.data.errors})}return(h,l)=>{const v=T("CommandsIcon"),k=T("Label"),d=T("Input"),x=T("Button"),U=T("Icon");return p(),z(e(fe),{open:e(D)("DialogNewVendor")},{default:r(()=>[o(e(ce),{"as-child":""}),o(e(ue),{class:"w-full p-0",onEscapeKeyDown:l[4]||(l[4]=$=>e(y)("DialogNewVendor")),onPointerDownOutside:l[5]||(l[5]=$=>e(y)("DialogNewVendor")),onCloseClicked:l[6]||(l[6]=$=>e(y)("DialogNewVendor"))},{default:r(()=>[o(e(me),{class:"rc-dialog-header"},{default:r(()=>[o(e(ve),{class:"text-sm text-rcgray-200"},{default:r(()=>[s("div",As,[o(v),s("span",Ms,E(u.editId>0?"Edit":"Add")+" Vendor "+E(u.editId>0?"(ID: "+u.editId+")":""),1)])]),_:1})]),_:1}),s("div",Ts,[s("div",Ps,[o(k,{for:"vendorName",class:"text-right"},{default:r(()=>l[7]||(l[7]=[A(" Vendor Name ")])),_:1}),o(d,{modelValue:c.value.vendorName,"onUpdate:modelValue":l[0]||(l[0]=$=>c.value.vendorName=$),id:"vendorName",class:"col-span-3"},null,8,["modelValue"]),w.value.vendorName?(p(),S("span",js,E(w.value.vendorName[0]),1)):P("",!0)])]),o(e(pe),{class:"rc-dialog-footer bg-rcgray-800"},{default:r(()=>[o(x,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:l[1]||(l[1]=$=>e(y)("DialogNewVendor")),size:"sm"},{default:r(()=>l[8]||(l[8]=[A(" Cancel "),s("div",{class:"pl-2 ml-auto"},[s("kbd",{class:"rc-kdb-class"},"ESC")],-1)])),_:1}),i.editId===0?(p(),z(x,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:l[2]||(l[2]=$=>t()),variant:"primary"},{default:r(()=>[l[10]||(l[10]=A(" Save ")),s("div",Ls,[s("kbd",zs,[l[9]||(l[9]=A(" Ctrl  ")),o(U,{icon:"uil:enter",class:""})])])]),_:1})):P("",!0),i.editId>0?(p(),z(x,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:l[3]||(l[3]=$=>t()),variant:"primary"},{default:r(()=>[l[12]||(l[12]=A(" Update ")),s("div",Us,[s("kbd",Bs,[l[11]||(l[11]=A(" Ctrl  ")),o(U,{icon:"uil:enter",class:""})])])]),_:1})):P("",!0)]),_:1})]),_:1})]),_:1},8,["open"])}}};function Ks(){const u=m(1),C=m(parseInt(localStorage.getItem("perPage")||"10")),g=m("-id"),b=m(""),V=m({}),n=J(),a=m(0),f=m(!1),N=m(1),y=m(1),D=m([]),M=m(!1),{openDialog:w}=n,{toastSuccess:c,toastError:i}=G();async function _(j={}){f.value=!0;try{const K=await L.get("/api/vendors",{params:{page:u.value,perPage:C.value,sort:g.value,...V.value}});D.value=K.data,N.value=K.data.last_page}catch(K){console.error("Error fetching vendors:",K),i("Error","Failed to fetch vendors.")}finally{f.value=!1}}const t=j=>{a.value=0,y.value=Math.random(),w("DialogNewVendor")};function h(j){a.value=j,y.value=Math.random(),w("DialogNewVendor")}const l=async j=>{try{await L.delete(`/api/vendors/${j}`),_(),c("Vendor Deleted","The vendor has been deleted successfully.")}catch(K){K.status===422?i("Error",K.response.data.message):(console.error("Error deleting Command:",K),i("Error","Failed to delete Command."))}},v=async j=>{try{await L.post("/api/vendors/delete-many",{ids:j}),_(),c("Vendors Deleted","The vendors have been deleted successfully."),M.value=!1,we.emit("deleteManyVendorsSuccess")}catch(K){K.status===422?i("Error",K.response.data.message):(console.error("Error deleting Commands:",K),i("Error","Failed to delete Commands.")),M.value=!1}},k=j=>{a.value=j,y.value=Math.random(),w("DialogNewVendor")},d=()=>{_(),y.value=Math.random()};function x(j){j.altKey&&j.key==="n"&&(j.preventDefault(),w("DialogNewVendor"))}const U=he(()=>{V.value["filter[vendorName]"]=b.value,u.value=1,_()},500);F([u,C],()=>{_()}),F(b,()=>{U()}),F(C,j=>{localStorage.setItem("perPage",j.toString())});function $(j){g.value===j?g.value=`-${j}`:g.value=j,_()}return{vendors:D,isLoading:f,currentPage:u,perPage:C,lastPage:N,editId:a,newVendorModalKey:y,searchTerm:b,openDialog:w,fetchVendors:_,createVendor:t,updateVendor:h,deleteVendor:l,deleteManyVendors:v,handleSave:d,handleKeyDown:x,viewEditDialog:k,toggleSort:$,sortParam:g,showConfirmDelete:M}}const Os={class:"flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"},qs={class:"relative items-center w-full"},Rs={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},Hs={class:"py-1"},Ws=["onClick"],Xs={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Ys={"data-size":"20"},Gs={class:"p-1 border-5"},Js=oe({__name:"VendorMultiSelect",props:{modelValue:{type:Array,required:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(u,{emit:C}){const g=C,b=m([]);m([]);const V=m(!1),n=m(""),a=m([]),{createVendor:f,newVendorModalKey:N,handleSave:y}=Ks(),D=u,M=le(()=>b.value.filter(_=>_.vendorName.toLowerCase().includes(n.value.toLowerCase())&&!a.value.some(t=>t.id===_.id)));H(()=>{i(),D.modelValue&&D.modelValue.length>0&&a.value.push(...D.modelValue)}),F(()=>D.modelValue,_=>{a.value=_}),F(N,()=>{i()});function w(_){D.singleSelect?a.value=[_]:a.value.push(_),V.value=!1,n.value="",g("update:modelValue",a.value)}function c(_){const t=a.value.findIndex(h=>h.vendorName===_);t!==-1&&a.value.splice(t,1),g("update:modelValue",a.value)}function i(){L.get("/api/vendors/?perPage=10000").then(_=>{b.value=_.data.data})}return(_,t)=>{const h=T("Icon"),l=T("Button"),v=T("Input"),k=T("Separator");return p(),z(e(se),null,{default:r(()=>[o(e(ee),{class:"col-span-3"},{default:r(()=>[o(l,{variant:"ghost",class:X(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",a.value.length===0?"text-muted-foreground":" "]),style:ae(a.value.length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:r(()=>[A(E(a.value&&a.value.length===0?"Select vendors":"")+" ",1),(p(!0),S(O,null,R(a.value,d=>(p(),S("span",{key:d.id,class:"relative my-1 group"},[s("span",Os,[A(E(d.vendorName)+" ",1),o(h,{icon:"si:close-line",class:"ml-1 cursor-pointer hover:text-white",onClick:Z(x=>c(d.vendorName),["stop"])},null,8,["onClick"])])]))),128))]),_:1},8,["class","style"])]),_:1}),o(e(te),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:r(()=>[s("div",qs,[o(v,{id:"search",type:"text",modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=d=>n.value=d),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),s("span",Rs,[o(h,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),o(k),o(e(Y),{class:"h-64"},{default:r(()=>[s("div",Hs,[(p(!0),S(O,null,R(M.value,d=>(p(),S("div",{key:d.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:x=>w(d)},[s("span",Xs,[s("span",Ys,E(d.vendorName),1)])],8,Ws))),128))])]),_:1}),o(k),s("div",Gs,[o(l,{variant:"ghost",onClick:t[1]||(t[1]=d=>e(f)()),class:"justify-start w-full p-1"},{default:r(()=>[o(h,{icon:"octicon:plus-16",class:"w-3 h-3 mt-1 mr-2 text-muted-foreground"}),t[3]||(t[3]=s("span",null,"Create new record",-1))]),_:1})])]),_:1}),(p(),z(Fs,{onSave:t[2]||(t[2]=d=>e(y)()),key:e(N),editId:0}))]),_:1})}}});function Qs(u,C,g){const{toastSuccess:b,toastError:V,toastInfo:n,toastWarning:a,toastDefault:f}=G(),N=J(),{closeDialog:y,isDialogOpen:D}=N,M=m(!1),w=m(!1),c=m([]),i=m({device_name:"",device_ip:"",device_port_override:"",device_cred_id:0,device_cred:[],device_vendor:[],device_model:"",selectedCategoryArray:[],selectedModelArray:[],device_category_id:0,device_tags:[],device_username:"",device_password:"",device_enable_password:"",device_template:[],device_main_prompt:"",device_enable_prompt:""});H(()=>{u>0&&(w.value=!0,L.get(`/api/devices/${u}`).then(d=>{i.value.device_name=d.data.device_name,i.value.device_ip=d.data.device_ip,g===!0&&(i.value.device_name=d.data.device_name+"-Clone",i.value.device_ip=d.data.device_ip+"-Clone"),i.value.device_port_override=d.data.device_port_override,i.value.device_cred_id=d.data.device_cred_id,i.value.device_cred.push(d.data.device_cred),i.value.device_vendor.push(d.data.vendor[0]),i.value.device_model=d.data.device_model,i.value.selectedCategoryArray.push(d.data.category[0]),i.value.selectedModelArray=[{name:d.data.device_model}],i.value.device_category_id=d.data.device_category_id,d.data.tag.forEach(x=>{i.value.device_tags.push(x)}),i.value.device_username=d.data.device_username,i.value.device_password=d.data.device_password,i.value.device_enable_password=d.data.device_enable_password,i.value.device_template.push(d.data.template[0]),i.value.device_main_prompt=d.data.device_main_prompt,i.value.device_enable_prompt=d.data.device_enable_prompt,w.value=!1})),window.addEventListener("keydown",_)}),ne(()=>{window.removeEventListener("keydown",_)});function _(d){d.ctrlKey&&d.key==="Enter"&&t()}function t(){i.value.selectedModelArray.length>0&&(i.value.device_model=i.value.selectedModelArray[0].name),i.value.selectedCategoryArray.length>0&&(i.value.device_category_id=i.value.selectedCategoryArray[0].id);let d=u>0?`/${u}`:"",x=u>0?"patch":"post";g===!0&&(d="",x="post",console.log("id",d)),L[x]("/api/devices"+d,i.value).then(U=>{C("save",U.data),b("Device created","The device has been created successfully."),y("DialogNewDevice")}).catch(U=>{V("Error","There was an error saving the device."),console.log(U),U.response&&U.response.data&&U.response.data.errors&&(c.value=U.response.data.errors)})}function h(){i.value.device_main_prompt=i.value.device_name+"#",i.value.device_enable_prompt=i.value.device_name+">"}function l(){M.value=!0}function v(){M.value=!1}function k(){M.value=!1,C("close"),y("DialogNewDevice")}return{isLoading:w,model:i,saveDialog:t,errors:c,isDialogOpen:D,generatePrompts:h,showConfirmCloseAlert:M,showConfirmCloseDialog:l,cancelCloseDialog:v,confirmCloseDialog:k}}const Zs={class:"flex items-center"},eo={class:"ml-2"},to={key:0},so={key:0},oo={class:"text-muted-foreground"},lo={key:0,class:"grid grid-cols-1 gap-6 px-4 lg:grid-cols-2"},ao={class:"flex flex-col col-span-1"},no={key:0,class:"text-red-400"},io={class:"flex flex-row space-x-4"},ro={class:"flex flex-col w-1/2"},co={key:0,class:"text-red-400"},uo={class:"flex flex-col w-1/2"},mo={key:1,class:"text-red-400"},vo={key:2,class:"text-red-400"},po={key:3,class:"text-red-400"},fo={key:4,class:"text-red-400"},_o={class:"flex flex-col col-span-1"},go={key:0,class:"text-sm text-muted-foreground"},yo={class:"flex w-full max-w-full items-center gap-1.5"},xo={key:0,class:"text-red-400"},ho={key:3,class:"text-red-400"},bo={key:6,class:"text-red-400"},wo={key:7,class:"text-red-400"},Co={key:8,class:"text-red-400"},$o={key:9,class:"text-red-400"},Do={class:"pl-2 ml-auto"},ko={class:"rc-kdb-class2"},Vo={class:"pl-2 ml-auto"},Io={class:"rc-kdb-class2"},Po={__name:"DeviceAddEditDialog",props:{editId:Number,isClone:{type:Boolean,default:!1}},emits:["save","close"],setup(u,{emit:C}){const g=u,b=C,{isLoading:V,model:n,saveDialog:a,errors:f,isDialogOpen:N,generatePrompts:y,showConfirmCloseAlert:D,showConfirmCloseDialog:M,cancelCloseDialog:w,confirmCloseDialog:c}=Qs(g.editId,b,g.isClone);function i(_){if(_.length===0){n.value.device_cred=[],n.value.device_cred_id=0;return}n.value.device_cred=_,n.value.device_cred_id=_[0].id,n.value.device_username=_[0].cred_username,n.value.device_password="",n.value.device_enable_password=""}return(_,t)=>{const h=T("DeviceIcon"),l=T("Label"),v=T("Input"),k=T("Icon"),d=T("Button");return p(),S(O,null,[o(e(fe),{open:e(N)("DialogNewDevice")},{default:r(()=>[o(e(ce),{"as-child":""}),o(e(ue),{onInteractOutside:t[18]||(t[18]=x=>e(M)()),onPointerDownOutside:t[19]||(t[19]=x=>e(M)()),class:"p-0 sm:max-w-7xl",onEscapeKeyDown:t[20]||(t[20]=x=>e(M)()),onCloseClicked:t[21]||(t[21]=x=>e(M)())},{default:r(()=>[o(e(me),{class:"rc-dialog-header"},{default:r(()=>[o(e(ve),{class:"text-sm text-rcgray-200"},{default:r(()=>[s("div",Zs,[o(h),s("span",eo,[A(E(u.editId===0?u.isClone?"":"Add":u.isClone?"Clone":"Edit")+" Device ",1),u.editId>0&&!u.isClone?(p(),S("span",to,"(ID: "+E(u.editId)+")",1)):P("",!0)]),e(n).device_name?(p(),S("span",so,[t[22]||(t[22]=A(" :   ")),s("span",oo,E(e(n).device_name),1)])):P("",!0)])]),_:1})]),_:1}),o(e(Y),{class:"min-h-96 xl:h-auto"},{default:r(()=>[e(V)?(p(),z(xe,{key:0})):P("",!0),o(ye,{name:"fade"},{default:r(()=>[e(V)?P("",!0):(p(),S("div",lo,[s("div",ao,[t[30]||(t[30]=s("h3",{class:"text-lg font-semibold border-b"},"Device Information",-1)),o(l,{for:"device_name",class:"mt-4 mb-1 font-light"},{default:r(()=>t[23]||(t[23]=[A(" Device Name "),s("span",{class:"text-red-400"},"*",-1)])),_:1}),o(v,{modelValue:e(n).device_name,"onUpdate:modelValue":t[0]||(t[0]=x=>e(n).device_name=x),id:"device_name",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),e(f).device_name?(p(),S("span",no,E(e(f).device_name[0]),1)):P("",!0),s("div",io,[s("div",ro,[o(l,{for:"device_ip",class:"mt-4 mb-1 font-light"},{default:r(()=>t[24]||(t[24]=[A(" Device IP "),s("span",{class:"text-red-400"},"*",-1)])),_:1}),o(v,{modelValue:e(n).device_ip,"onUpdate:modelValue":t[1]||(t[1]=x=>e(n).device_ip=x),id:"device_ip",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),e(f).device_ip?(p(),S("span",co,E(e(f).device_ip[0]),1)):P("",!0)]),s("div",uo,[o(l,{for:"device_port_override",class:"mt-4 mb-1 font-light"},{default:r(()=>[t[25]||(t[25]=A(" Device Port ")),o(ie,{title:"Device Port",content:"Set the connection port specific to this device. it overrides the value set in the connection template. Leave empty otherwise."})]),_:1}),o(v,{modelValue:e(n).device_port_override,"onUpdate:modelValue":t[2]||(t[2]=x=>e(n).device_port_override=x),id:"device_port_override",type:"number",autocomplete:"off",class:"w-full"},null,8,["modelValue"])])]),o(l,{for:"vector",class:"mt-4 mb-1 font-light"},{default:r(()=>t[26]||(t[26]=[A(" Vendor "),s("span",{class:"text-red-400"},"*",-1)])),_:1}),o(Js,{singleSelect:!0,modelValue:e(n).device_vendor,"onUpdate:modelValue":t[3]||(t[3]=x=>e(n).device_vendor=x),id:"device_vendor",class:"w-full"},null,8,["modelValue"]),e(f).device_vendor?(p(),S("span",mo,E(e(f).device_vendor[0]),1)):P("",!0),o(l,{for:"device_category_id",class:"mt-4 mb-1 font-light"},{default:r(()=>t[27]||(t[27]=[A(" Category "),s("span",{class:"text-red-400"},"*",-1)])),_:1}),o(Oe,{modelValue:e(n).selectedCategoryArray,"onUpdate:modelValue":t[4]||(t[4]=x=>e(n).selectedCategoryArray=x),id:"selectedCategoryArray",singleSelect:!0,class:"w-full"},null,8,["modelValue"]),e(f).device_category_id?(p(),S("span",vo,E(e(f).device_category_id[0]),1)):P("",!0),o(l,{for:"device_model",class:"mt-4 mb-1 font-light"},{default:r(()=>t[28]||(t[28]=[A(" Model "),s("span",{class:"text-red-400"},"*",-1)])),_:1}),o(_s,{singleSelect:!0,modelValue:e(n).selectedModelArray,"onUpdate:modelValue":t[5]||(t[5]=x=>e(n).selectedModelArray=x),id:"selectedModelArray",class:"w-full"},null,8,["modelValue"]),e(f).device_model?(p(),S("span",po,E(e(f).device_model[0]),1)):P("",!0),o(l,{for:"device_tags",class:"mt-4 mb-1 font-light"},{default:r(()=>t[29]||(t[29]=[A(" Tags "),s("span",{class:"text-red-400"},"*",-1)])),_:1}),o(qe,{modelValue:e(n).device_tags,"onUpdate:modelValue":t[6]||(t[6]=x=>e(n).device_tags=x),id:"device_tags",class:"w-full"},null,8,["modelValue"]),e(f).device_tags?(p(),S("span",fo,E(e(f).device_tags[0]),1)):P("",!0)]),s("div",_o,[t[39]||(t[39]=s("h3",{class:"text-lg font-semibold border-b"},"Connection Information",-1)),o(l,{for:"device_username",class:"mt-4 mb-1 font-light"},{default:r(()=>[t[31]||(t[31]=A(" Username ")),t[32]||(t[32]=s("span",{class:"text-red-400"},"*",-1)),e(n).device_cred_id!=0?(p(),S("span",go," - Credential set selected ")):P("",!0)]),_:1}),s("div",yo,[o(v,{disabled:e(n).device_cred_id!=0,modelValue:e(n).device_username,"onUpdate:modelValue":t[7]||(t[7]=x=>e(n).device_username=x),id:"device_username",autocomplete:"current-password",class:"flex-grow w-2/3"},null,8,["disabled","modelValue"]),o(Jt,{modelValue:e(n).device_cred,"onUpdate:modelValue":t[8]||(t[8]=x=>i(x)),singleSelect:!0,class:"w-full"},null,8,["modelValue"])]),e(f).device_username?(p(),S("span",xo,E(e(f).device_username[0]),1)):P("",!0),e(n).device_cred_id===0?(p(),z(l,{key:1,for:"device_password",class:"mt-4 mb-1 font-light"},{default:r(()=>t[33]||(t[33]=[A(" Device Password "),s("span",{class:"text-red-400"},"*",-1)])),_:1})):P("",!0),e(n).device_cred_id===0?(p(),z(e(_e),{key:2,modelValue:e(n).device_password,"onUpdate:modelValue":t[9]||(t[9]=x=>e(n).device_password=x),id:"device_password",class:"w-full"},null,8,["modelValue"])):P("",!0),e(f).device_password?(p(),S("span",ho,E(e(f).device_password[0]),1)):P("",!0),e(n).device_cred_id===0?(p(),z(l,{key:4,for:"device_enable_password",class:"mt-4 mb-1 font-light"},{default:r(()=>t[34]||(t[34]=[A(" Device Enable Password ")])),_:1})):P("",!0),e(n).device_cred_id===0?(p(),z(e(_e),{key:5,modelValue:e(n).device_enable_password,"onUpdate:modelValue":t[10]||(t[10]=x=>e(n).device_enable_password=x),id:"device_enable_password",class:"w-full"},null,8,["modelValue"])):P("",!0),e(f).device_enable_password?(p(),S("span",bo,E(e(f).device_enable_password[0]),1)):P("",!0),o(l,{for:"device_template",class:"mt-4 mb-1 font-light"},{default:r(()=>t[35]||(t[35]=[A(" Template "),s("span",{class:"text-red-400"},"*",-1)])),_:1}),o(Ns,{singleSelect:!0,modelValue:e(n).device_template,"onUpdate:modelValue":t[11]||(t[11]=x=>e(n).device_template=x),id:"device_template",class:"w-full"},null,8,["modelValue"]),e(f).device_template?(p(),S("span",wo,E(e(f).device_template[0]),1)):P("",!0),o(l,{for:"main_prompt",class:"mt-4 mb-1 font-light"},{default:r(()=>[t[36]||(t[36]=A(" Main Prompt ")),o(ie,{title:"Device Main Prompt",content:"This is the 'Privileged EXEC' prompt. You will run show commands from this prompt and you can access configure mode. Usually 'router1#'"})]),_:1}),o(v,{modelValue:e(n).device_main_prompt,"onUpdate:modelValue":t[12]||(t[12]=x=>e(n).device_main_prompt=x),id:"device_main_prompt",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),e(f).device_main_prompt?(p(),S("span",Co,E(e(f).device_main_prompt[0]),1)):P("",!0),o(l,{for:"enable_prompt",class:"mt-4 mb-1 font-light"},{default:r(()=>[t[37]||(t[37]=A(" Enable Prompt ")),o(ie,{title:"Device Main Prompt",content:" This is the 'User EXEC' prompt. The first level of access prompt. Usually 'router1>'"})]),_:1}),o(v,{modelValue:e(n).device_enable_prompt,"onUpdate:modelValue":t[13]||(t[13]=x=>e(n).device_enable_prompt=x),id:"device_enable_prompt",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),s("button",{class:"flex items-center p-2 text-sm text-left rounded-lg pf-c-button pf-m-link pf-m-inline hover:bg-rcgray-800 max-w-fit text-muted-foreground hover:text-gray-200",type:"button",onClick:t[14]||(t[14]=x=>e(y)())},[o(k,{icon:"material-symbols:flash-auto",class:"w-4 h-4 mr-1"}),t[38]||(t[38]=A(" Auto generate prompts from device name "))]),e(f).device_enable_prompt?(p(),S("span",$o,E(e(f).device_enable_prompt[0]),1)):P("",!0)])]))]),_:1})]),_:1}),o(e(pe),{class:"rc-dialog-footer bg-rcgray-800"},{default:r(()=>[o(d,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:t[15]||(t[15]=x=>e(M)()),size:"sm"},{default:r(()=>t[40]||(t[40]=[A(" Cancel "),s("div",{class:"pl-2 ml-auto"},[s("kbd",{class:"rc-kdb-class"},"ESC")],-1)])),_:1}),g.editId===0||g.isClone?(p(),z(d,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:t[16]||(t[16]=x=>e(a)()),variant:"primary"},{default:r(()=>[t[42]||(t[42]=A(" Save ")),s("div",Do,[s("kbd",ko,[t[41]||(t[41]=A(" Ctrl  ")),o(k,{icon:"uil:enter",class:""})])])]),_:1})):P("",!0),g.editId>0&&!g.isClone?(p(),z(d,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:t[17]||(t[17]=x=>e(a)()),variant:"primary"},{default:r(()=>[t[44]||(t[44]=A(" Update ")),s("div",Vo,[s("kbd",Io,[t[43]||(t[43]=A(" Ctrl  ")),o(k,{icon:"uil:enter",class:""})])])]),_:1})):P("",!0)]),_:1})]),_:1})]),_:1},8,["open"]),o(be,{showConfirmCloseAlert:e(D),onHandleClose:e(w),onHandleConfirm:e(c)},null,8,["showConfirmCloseAlert","onHandleClose","onHandleConfirm"])],64)}}};function jo(){const u=m(1),C=m(parseInt(localStorage.getItem("perPage")||"10")),g=m("-id"),b=m(""),V=m({}),n=J(),a=m(0),f=m(!1),N=m(1),y=m(1),D=m([]),M=m(!1),w=m([]),c=m([]),i=m([]),_=m([]),t=de(),h=Q("formatters"),{openDialog:l}=n,{toastSuccess:v,toastError:k}=G();async function d(I={}){if(f.value=!0,w.value.length>0){const B=w.value.map(q=>q.id);V.value["filter[status]"]=B.join(",")}try{const B=await L.get("/api/devices",{params:{page:u.value,perPage:C.value,sort:g.value,...V.value}});D.value=B.data,N.value=B.data.last_page}catch(B){console.error("Error fetching devices:",B),k("Error","Failed to fetch devices.")}finally{f.value=!1}}const x=I=>{a.value=0,y.value=Math.random(),l("DialogNewDevice")};function U(I){a.value=I,y.value=Math.random(),l("DialogNewDevice")}function $(I){console.log("Purge device configs:",I),L.post("/api/device/purge-failed-configs",{device_id:I}).then(B=>{v("Device Configurations Purged","The device failed configurations purge jobs has been successfully sent to the queue.")}).catch(B=>{console.error("Error Purge device configs:",B),k("Error","Failed to purge device configurations.")})}const j=async I=>{try{await L.delete(`/api/devices/${I}`),d(),v("Device Deleted","The device has been deleted successfully.")}catch(B){console.error("Error deleting device:",B),k("Error","Failed to delete device.")}},K=async I=>{try{await L.post("/api/devices/delete-many",{ids:I}),d(),v("Devices Deleted","The tags have been deleted successfully."),M.value=!1,we.emit("deleteManyDevicesSuccess")}catch(B){console.error("Error deleting tags:",B),k("Error","Failed to delete devices."),M.value=!1}},Ce=async I=>{try{await L.get(`/api/device/disable/${I}`),d(),v("Device Disabled","The device has been disabled successfully.")}catch(B){console.error("Error disabling device:",B),k("Error","Failed to disable device.")}},$e=async I=>{try{await L.get(`/api/device/enable/${I}`),d(),v("Device Enabled","The device has been disabled successfully.")}catch(B){console.error("Error enabling device:",B),k("Error","Failed to enabled device.")}},De=I=>{a.value=I,y.value=Math.random(),l("DialogNewDevice")},ke=()=>{d(),y.value=Math.random()};function Ve(I){I.altKey&&I.key==="n"&&(I.preventDefault(),l("DialogNewDevice"))}const Ie=he(()=>{V.value["filter[q]"]=b.value,u.value=1,d()},500);F([u,C],()=>{d()}),F(b,()=>{Ie()}),F(C,I=>{localStorage.setItem("perPage",I.toString())}),F(w,(I,B)=>{if(console.log("Filter status:",I),I&&I.length>0){const q=I.map(W=>W.id);V.value["filter[status]"]=q.join(",")}else delete V.value["filter[status]"];d()},{deep:!0}),F(c,(I,B)=>{if(I&&I.length>0){const q=I.map(W=>W.id);V.value["filter[category]"]=q.join(",")}else delete V.value["filter[category]"];d()},{deep:!0}),F(i,(I,B)=>{if(I&&I.length>0){const q=I.map(W=>W.id);V.value["filter[tag]"]=q.join(",")}else delete V.value["filter[tag]"];d()},{deep:!0}),F(_,(I,B)=>{if(I&&I.length>0){const q=I.map(W=>W.id);V.value["filter[vendor]"]=q.join(",")}else delete V.value["filter[vendor]"];d()},{deep:!0});function Se(I){g.value===I?g.value=`-${I}`:g.value=I,d()}function Ee(){V.value={},w.value=[],c.value=[],i.value=[],_.value=[],b.value="",d()}function Ne(I){t.push({name:"devicesview",params:{id:parseInt(I)}})}return{clearFilters:Ee,createDevice:x,currentPage:u,deleteDevice:j,deleteManyDevices:K,devices:D,disableDevice:Ce,editId:a,enableDevice:$e,fetchDevices:d,filterCategories:c,filterStatus:w,filterTags:i,filterVendor:_,formatters:h,handleKeyDown:Ve,handleSave:ke,isLoading:f,lastPage:N,newDeviceModalKey:y,perPage:C,purgeDeviceConfigs:$,searchTerm:b,showConfirmDelete:M,sortParam:g,toggleSort:Se,updateDevice:U,viewDeviceDetailsPane:Ne,viewEditDialog:De}}function Lo(u){const{toastSuccess:C,toastError:g}=G(),b=J(),{openDialog:V}=b,n=m(!1),a=m(!1),f=m([]),N=m("");m(null);const y=m(!1),D=m([]),M=m(!1),w=m(""),c=m("");function i(){n.value=!0,L.get("/api/import-github-templates",{fileName:this.fileName,code:this.code}).then(v=>{C("Templates imported from github successfully")}).catch(v=>{g("Error importing templates from github")}),setTimeout(()=>{n.value=!1},1e3)}F(N,()=>{N.value!==""&&h(N.value)}),F(w,()=>{w.value!==null&&l(w.value)});function _(){V("DialogTemplateImport")}function t(){n.value=!0,L.get("/api/list-template-repo-folders").then(v=>{f.value=v.data.data,a.value=!0,n.value=!1}).catch(v=>{console.log(v),v.response.data.message.msg==='rConfig-templates is empty, or does not exist. Clone from "https://github.com/rconfig/rconfig-templates" may have failed! Try importing the templates again.!'?a.value=!1:g("Error getting vendor templates"),n.value=!1})}function h(v){y.value=!1,M.value=!1,L.post("/api/list-repo-folders-contents",{directory:v}).then(k=>{D.value=k.data.data,y.value=!0,typeof k.data.data.readme<"u"&&(M.value=!0)}).catch(k=>{console.log(k),g("Error getting file list")})}function l(v){L.post("/api/get-template-file-contents",{filepath:v}).then(k=>{c.value=k.data.data.data.code}).catch(k=>{g("Error getting file contents")})}return{fileOptionSelected:w,getTemplateFileContents:l,getTemplateRepoFolders:t,getTemplatesList:h,hasReadmeFile:M,hasVendorTemplateOptions:a,importTemplates:i,importingTemplates:n,listedFiles:D,openImportDialog:_,selectedTemplateCode:c,showFileOptions:y,vendorOptionSelected:N,vendorTemplateOptions:f}}export{To as _,We as a,jo as b,Po as c,Lo as d,Ks as e,Fs as f,Xe as u};
