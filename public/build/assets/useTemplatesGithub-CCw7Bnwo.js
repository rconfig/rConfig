import{a3 as te,r as c,B as le,A as R,T as F,a as L,c as N,o as p,z,w as r,j as o,e as l,f as t,v as Q,q as G,aq as se,h as w,t as I,d as k,F as q,G as H,W as oe,x as Y,a5 as Z,y as ee,u as X,I as J,J as ae,K as de,L as ie,M as re,N as ue,k as P,Q as ce,R as me,ax as ke,b as pe,al as Ie,am as Se,an as Ee,ao as Ne,U as fe,a9 as Me,ac as Te,a7 as Ae}from"./app-BJXfwFB0.js";import{d as ge,_ as Pe,e as Ue}from"./TagMultiSelect.vue_vue_type_script_setup_true_lang-DTETQbSc.js";import{u as Le,a as Be,b as ve}from"./useCredentials-fOo2zZa8.js";import{e as _e}from"./eventBus-CGRXT3Tn.js";const ze={class:"relative items-center w-full"},je={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},Fe={class:"py-1"},Ke=["onClick"],Oe={"data-size":"20"},qe={class:"p-1 border-5"},He=te({__name:"CredentialsMultiSelect",props:{modelValue:{type:Array,required:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(g,{emit:T}){const y=T,V=c([]);c([]);const $=c(!1),d=c(""),a=c([]),{createCred:f,newCredModalKey:A,handleSave:C}=Le(),M=g,S=le(()=>V.value.filter(m=>m.cred_name.toLowerCase().includes(d.value.toLowerCase())&&!a.value.some(e=>e.id===m.id)));R(()=>{i(),M.modelValue[0]!=null?a.value=M.modelValue:a.value=[]}),F(()=>M.modelValue,m=>{a.value=m}),F(A,()=>{i()});function h(m){M.singleSelect?a.value=[m]:a.value.push(m),$.value=!1,d.value="",y("update:modelValue",a.value)}function x(m){const e=a.value.findIndex(D=>D.cred_name===m);e!==-1&&a.value.splice(e,1),y("update:modelValue",a.value)}function i(){L.get("/api/device-credentials/?perPage=10000").then(m=>{V.value=m.data.data})}return(m,e)=>{const D=N("Icon"),s=N("Button"),u=N("Input"),b=N("Separator");return p(),z(t(ee),null,{default:r(()=>[e[3]||(e[3]=o("div",{class:"hidden text-yellow-200 text-teal-100 bg-yellow-700 bg-teal-700 border-yellow-500 border-teal-500 bg-stone-700 text-stone-200 border-stone-500 bg-lime-700 text-lime-200 border-lime-500 bg-sky-700 text-sky-100 border-sky-500 bg-violet-700 text-violet-200 border-violet-500 bg-fuchsia-700 text-fuchsia-200 border-fuchsia-500"},null,-1)),l(t(Q),{class:"col-span-3"},{default:r(()=>[l(s,{variant:"ghost",class:G(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",a.value.length===0?"text-muted-foreground":" "]),style:se(a.value.length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:r(()=>[w(I(a.value&&a.value.length===0?"Select credentials":"")+" ",1),(p(!0),k(q,null,H(a.value,n=>(p(),k("span",{key:n.id,class:"relative my-1 group"},[o("span",{class:G([n.badgeColor?n.badgeColor:"bg-gray-600 text-gray-200 border-gray-500","flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"])},[w(I(n.cred_name)+" ",1),l(D,{icon:"si:close-line",class:"ml-1 cursor-pointer hover:text-white",onClick:oe(v=>x(n.cred_name),["stop"])},null,8,["onClick"])],2)]))),128))]),_:1},8,["class","style"])]),_:1}),l(t(Y),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:r(()=>[o("div",ze,[l(u,{id:"search",type:"text",modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=n=>d.value=n),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),o("span",je,[l(D,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),l(b),l(t(Z),{class:"h-64"},{default:r(()=>[o("div",Fe,[(p(!0),k(q,null,H(S.value,n=>(p(),k("div",{key:n.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:v=>h(n)},[o("span",{"data-size":"20",class:G(["cursor-default text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border",n.badgeColor?n.badgeColor:"bg-gray-600 text-gray-200 border-gray-500"])},[o("span",Oe,I(n.cred_name),1)],2)],8,Ke))),128))])]),_:1}),l(b),o("div",qe,[l(s,{variant:"ghost",onClick:t(f),class:"justify-start w-full p-1"},{default:r(()=>[l(D,{icon:"octicon:plus-16",class:"w-3 h-3 mt-1 mr-2 text-muted-foreground"}),e[2]||(e[2]=o("span",null,"Create new record",-1))]),_:1},8,["onClick"])])]),_:1}),(p(),z(Be,{onSave:e[1]||(e[1]=n=>t(C)()),key:t(A),editId:0}))]),_:1})}}}),Re={class:"flex items-center"},We={class:"ml-2"},Ge={class:"grid gap-2 p-4"},Xe={class:"grid items-center grid-cols-1 gap-4"},Je={key:0,class:"col-start-2 -mt-4 text-sm text-red-400"},Qe={class:"pl-2 ml-auto"},Ye={class:"rc-kdb-class2"},Ze={class:"pl-2 ml-auto"},et={class:"rc-kdb-class2"},tt={__name:"DeviceModelAddDialog",props:{editId:{type:Number,default:0}},emits:["save"],setup(g,{emit:T}){const{toastSuccess:y,toastError:V,toastInfo:$,toastWarning:d,toastDefault:a}=X(),f=J(),{openDialog:A,closeDialog:C,isDialogOpen:M}=f,S=T;c([]);const h=c([]),x=c({name:""});c("");const i=g;function m(D){D.ctrlKey&&D.key==="Enter"&&e()}R(()=>{window.addEventListener("keydown",m)}),ae(()=>{window.removeEventListener("keydown",m)});function e(){let D=i.editId>0?`/${i.editId}`:"",s=i.editId>0?"patch":"post";L[s]("/api/device-models"+D,x.value).then(u=>{S("save"),y("Device Model created","The device model has been created successfully."),C("DialogDeviceModelAdd"),x.value={name:""}}).catch(u=>{h.value=u.response.data.errors})}return(D,s)=>{const u=N("Icon"),b=N("Button"),n=N("UserIcon"),v=N("Label"),j=N("Input");return p(),z(t(me),{open:t(M)("DialogDeviceModelAdd")},{default:r(()=>[l(t(de),{"as-child":""},{default:r(()=>[l(b,{variant:"ghost",onClick:s[0]||(s[0]=E=>t(A)("DialogDeviceModelAdd")),class:"justify-start w-full p-1"},{default:r(()=>[l(u,{icon:"octicon:plus-16",class:"w-3 h-3 mt-1 mr-2 text-muted-foreground"}),s[8]||(s[8]=o("span",null,"Create new record",-1))]),_:1})]),_:1}),l(t(ie),{class:"p-0 sm:max-w-1/3",onEscapeKeyDown:s[5]||(s[5]=E=>t(C)("DialogDeviceModelAdd")),onPointerDownOutside:s[6]||(s[6]=E=>t(C)("DialogDeviceModelAdd")),onCloseClicked:s[7]||(s[7]=E=>t(C)("DialogDeviceModelAdd"))},{default:r(()=>[l(t(re),{class:"rc-dialog-header"},{default:r(()=>[l(t(ue),{class:"text-sm text-rcgray-200"},{default:r(()=>[o("div",Re,[l(n),o("span",We,I(g.editId>0?"Edit":"Add")+" Device Model "+I(g.editId>0?"(ID: "+g.editId+")":""),1)])]),_:1})]),_:1}),o("div",Ge,[o("div",Xe,[l(v,{for:"name",class:"text-left"},{default:r(()=>s[9]||(s[9]=[w(" Device Model Name "),o("span",{class:"text-red-400"},"*",-1)])),_:1}),l(j,{modelValue:x.value.name,"onUpdate:modelValue":s[1]||(s[1]=E=>x.value.name=E),id:"name",class:"col-span-3",autocomplete:"off"},null,8,["modelValue"]),h.value.name?(p(),k("span",Je,I(h.value.name[0]),1)):P("",!0)])]),l(t(ce),{class:"rc-dialog-footer bg-rcgray-800"},{default:r(()=>[l(b,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:s[2]||(s[2]=E=>t(C)("DialogDeviceModelAdd")),size:"sm"},{default:r(()=>s[10]||(s[10]=[w(" Cancel "),o("div",{class:"pl-2 ml-auto"},[o("kbd",{class:"rc-kdb-class"},"ESC")],-1)])),_:1}),i.editId===0?(p(),z(b,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:s[3]||(s[3]=E=>e()),variant:"primary"},{default:r(()=>[s[12]||(s[12]=w(" Save ")),o("div",Qe,[o("kbd",Ye,[s[11]||(s[11]=w(" Ctrl  ")),l(u,{icon:"uil:enter",class:""})])])]),_:1})):P("",!0),i.editId>0?(p(),z(b,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:s[4]||(s[4]=E=>e()),variant:"primary"},{default:r(()=>[s[14]||(s[14]=w(" Update ")),o("div",Ze,[o("kbd",et,[s[13]||(s[13]=w(" Ctrl  ")),l(u,{icon:"uil:enter",class:""})])])]),_:1})):P("",!0)]),_:1})]),_:1})]),_:1},8,["open"])}}},lt={class:"flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"},st={class:"relative items-center w-full"},ot={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},at={class:"py-1"},nt=["onClick"],dt={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},it={"data-size":"20"},rt={class:"p-1 border-5"},ut={__name:"DeviceModelMultiSelect",props:{modelValue:{type:Array,required:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(g,{emit:T}){const y=T,V=c([]),$=c(!1),d=c(""),a=c([]),f=g,A=le(()=>V.value.filter(x=>x.name.toLowerCase().includes(d.value.toLowerCase())&&!a.value.some(i=>i.id===x.id)));F(()=>f.modelValue,x=>{a.value=x}),R(()=>{S(),f.modelValue&&f.modelValue.length>0&&(a.value=f.modelValue)});function C(x){f.singleSelect?a.value=[x]:a.value.push(x),$.value=!1,d.value="",y("update:modelValue",a.value)}function M(x){const i=a.value.findIndex(m=>m.name===x);i!==-1&&a.value.splice(i,1),y("update:modelValue",a.value)}function S(){L.get("/api/device-models/?perPage=10000").then(x=>{V.value=x.data.data})}function h(){S()}return(x,i)=>{const m=N("Icon"),e=N("Button"),D=N("Input"),s=N("Separator");return p(),z(t(ee),null,{default:r(()=>[l(t(Q),{class:"col-span-3"},{default:r(()=>[l(e,{variant:"ghost",class:G(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",a.value.length===0?"text-muted-foreground":" "]),style:se(a.value.length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:r(()=>[w(I(a.value&&a.value.length===0?"Select device model":"")+" ",1),(p(!0),k(q,null,H(a.value,u=>(p(),k("span",{key:u.id,class:"relative my-1 group"},[o("span",lt,[w(I(u.name)+" ",1),l(m,{icon:"si:close-line",class:"ml-1 cursor-pointer hover:text-white",onClick:oe(b=>M(u.name),["stop"])},null,8,["onClick"])])]))),128))]),_:1},8,["class","style"])]),_:1}),l(t(Y),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:r(()=>[o("div",st,[l(D,{id:"search",type:"text",modelValue:d.value,"onUpdate:modelValue":i[0]||(i[0]=u=>d.value=u),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),o("span",ot,[l(m,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),l(s),l(t(Z),{class:"h-64"},{default:r(()=>[o("div",at,[(p(!0),k(q,null,H(A.value,u=>(p(),k("div",{key:u.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:b=>C(u)},[o("span",dt,[o("span",it,I(u.name),1)])],8,nt))),128))])]),_:1}),l(s),o("div",rt,[l(tt,{onSave:i[1]||(i[1]=u=>h())})])]),_:1})]),_:1})}}},ct={class:"grid gap-4"},mt={class:"space-y-2"},vt={class:"flex items-center space-x-2"},pt={class:"font-medium leading-none"},ft={class:"text-sm text-muted-foreground"},ne=te({__name:"HelpPopover",props:{title:{type:String,required:!0},content:{type:String,required:!0}},setup(g){return(T,y)=>{const V=N("Icon");return p(),z(t(ee),null,{default:r(()=>[l(t(Q),{"as-child":""},{default:r(()=>[l(t(ke),{tabindex:"-1",variant:"ghost",class:"h-0 p-0 m-0 ml-1"},{default:r(()=>[l(V,{icon:"formkit:help"})]),_:1})]),_:1}),l(t(Y),{class:"w-80",side:"top",align:"start"},{default:r(()=>[o("div",ct,[o("div",mt,[o("div",vt,[l(V,{icon:"formkit:help"}),o("h4",pt,I(g.title),1)]),o("p",ft,I(g.content),1)])])]),_:1})]),_:1})}}});function gt(g,T,y){const V=c(!1);R(()=>{window.addEventListener("keydown",$)}),ae(()=>{window.removeEventListener("keydown",$)});function $(A){A.ctrlKey&&A.key==="Enter"&&(V.value=!1)}function d(){V.value=!0}function a(){V.value=!1}function f(){V.value=!1}return{showConfirmCloseAlert:V,showConfirmCloseDialog:d,cancelCloseDialog:a,confirmCloseDialog:f}}const _t={class:"flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"},yt={class:"relative items-center w-full"},bt={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},ht={class:"py-1"},xt=["onClick"],wt={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Ct={"data-size":"20"},Dt={class:"p-1 border-5"},Vt=te({__name:"TemplateMultiSelect",props:{modelValue:{type:Array,required:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(g,{emit:T}){const y=T,V=c([]);c([]);const $=c(!1),d=c(""),a=c([]),f=pe(),{showConfirmCloseAlert:A,showConfirmCloseDialog:C,cancelCloseDialog:M,confirmCloseDialog:S}=gt(),h=g,x=le(()=>V.value.filter(s=>s.templateName.toLowerCase().includes(d.value.toLowerCase())&&!a.value.some(u=>u.id===s.id)));F(()=>h.modelValue,s=>{a.value=s}),R(()=>{e(),h.modelValue[0]&&h.modelValue[0].length>0&&(console.log("props.modelValue",h.modelValue),a.value=h.modelValue)});function i(s){h.singleSelect?a.value=[s]:a.value.push(s),$.value=!1,d.value="",y("update:modelValue",a.value)}function m(s){const u=a.value.findIndex(b=>b.templateName===s);u!==-1&&a.value.splice(u,1),y("update:modelValue",a.value)}function e(){L.get("/api/templates/?perPage=10000").then(s=>{V.value=s.data.data})}function D(){f.push({path:"/templates/view/0"})}return(s,u)=>{const b=N("Icon"),n=N("Button"),v=N("Input"),j=N("Separator");return p(),z(t(ee),null,{default:r(()=>[l(t(Q),{class:"col-span-3"},{default:r(()=>[l(n,{variant:"ghost",class:G(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",a.value.length===0?"text-muted-foreground":" "]),style:se(a.value.length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:r(()=>[w(I(a.value&&a.value.length===0?"Select templates":"")+" ",1),(p(!0),k(q,null,H(a.value,E=>(p(),k("span",{key:E.id,class:"relative my-1 group"},[o("span",_t,[w(I(E.templateName)+" ",1),l(b,{icon:"si:close-line",class:"ml-1 cursor-pointer hover:text-white",onClick:oe(U=>m(E.templateName),["stop"])},null,8,["onClick"])])]))),128))]),_:1},8,["class","style"])]),_:1}),l(t(Y),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:r(()=>[o("div",yt,[l(v,{id:"search",type:"text",modelValue:d.value,"onUpdate:modelValue":u[0]||(u[0]=E=>d.value=E),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),o("span",bt,[l(b,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),l(j),l(t(Z),{class:"h-64"},{default:r(()=>[o("div",ht,[(p(!0),k(q,null,H(x.value,E=>(p(),k("div",{key:E.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:U=>i(E)},[o("span",wt,[o("span",Ct,I(E.templateName),1)])],8,xt))),128))])]),_:1}),l(j),o("div",Dt,[l(n,{variant:"ghost",onClick:u[1]||(u[1]=E=>t(C)()),class:"justify-start w-full p-1"},{default:r(()=>[l(b,{icon:"octicon:plus-16",class:"w-3 h-3 mt-1 mr-2 text-muted-foreground"}),u[4]||(u[4]=o("span",null,"Create new record",-1)),l(t(Ie),null,{default:r(()=>[l(t(Se),null,{default:r(()=>[l(t(Ee),{"as-child":""},{default:r(()=>[l(b,{icon:"pajamas:issue-new",class:"w-3 h-3 mt-1 ml-auto text-muted-foreground"})]),_:1}),l(t(Ne),{class:"text-white bg-rcgray-800"},{default:r(()=>u[3]||(u[3]=[o("p",null,"Navigate to new template page",-1)])),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),l(ge,{showConfirmCloseAlert:t(A),onHandleClose:t(M),onHandleConfirm:u[2]||(u[2]=E=>D())},null,8,["showConfirmCloseAlert","onHandleClose"])]),_:1})}}}),$t={class:"flex items-center"},kt={class:"ml-2"},It={class:"grid gap-2 py-4"},St={class:"grid items-center grid-cols-4 gap-2"},Et={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},Nt={class:"pl-2 ml-auto"},Mt={class:"rc-kdb-class2"},Tt={class:"pl-2 ml-auto"},At={class:"rc-kdb-class2"},Pt={__name:"VendorAddEditDialog",props:{editId:Number},emits:["save"],setup(g,{emit:T}){const{toastSuccess:y,toastError:V,toastInfo:$,toastWarning:d,toastDefault:a}=X(),f=J(),{openDialog:A,closeDialog:C,isDialogOpen:M}=f,S=T;c([]);const h=c([]),x=c({vendorName:""}),i=g;function m(D){D.ctrlKey&&D.key==="Enter"&&e()}R(()=>{i.editId>0&&L.get(`/api/vendors/${i.editId}`).then(D=>{x.value=D.data}),window.addEventListener("keydown",m)}),ae(()=>{window.removeEventListener("keydown",m)});function e(){let D=i.editId>0?`/${i.editId}`:"",s=i.editId>0?"patch":"post";L[s]("/api/vendors"+D,x.value).then(u=>{S("save",u.data),y("Vendor created","The vendor has been created successfully."),C("DialogNewVendor")}).catch(u=>{h.value=u.response.data.errors})}return(D,s)=>{const u=N("CommandsIcon"),b=N("Label"),n=N("Input"),v=N("Button"),j=N("Icon");return p(),z(t(me),{open:t(M)("DialogNewVendor")},{default:r(()=>[l(t(de),{"as-child":""}),l(t(ie),{class:"w-full p-0",onEscapeKeyDown:s[4]||(s[4]=E=>t(C)("DialogNewVendor")),onPointerDownOutside:s[5]||(s[5]=E=>t(C)("DialogNewVendor")),onCloseClicked:s[6]||(s[6]=E=>t(C)("DialogNewVendor"))},{default:r(()=>[l(t(re),{class:"rc-dialog-header"},{default:r(()=>[l(t(ue),{class:"text-sm text-rcgray-200"},{default:r(()=>[o("div",$t,[l(u),o("span",kt,I(g.editId>0?"Edit":"Add")+" Vendor "+I(g.editId>0?"(ID: "+g.editId+")":""),1)])]),_:1})]),_:1}),o("div",It,[o("div",St,[l(b,{for:"vendorName",class:"text-right"},{default:r(()=>s[7]||(s[7]=[w(" Vendor Name ")])),_:1}),l(n,{modelValue:x.value.vendorName,"onUpdate:modelValue":s[0]||(s[0]=E=>x.value.vendorName=E),id:"vendorName",class:"col-span-3"},null,8,["modelValue"]),h.value.vendorName?(p(),k("span",Et,I(h.value.vendorName[0]),1)):P("",!0)])]),l(t(ce),{class:"rc-dialog-footer bg-rcgray-800"},{default:r(()=>[l(v,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:s[1]||(s[1]=E=>t(C)("DialogNewVendor")),size:"sm"},{default:r(()=>s[8]||(s[8]=[w(" Cancel "),o("div",{class:"pl-2 ml-auto"},[o("kbd",{class:"rc-kdb-class"},"ESC")],-1)])),_:1}),i.editId===0?(p(),z(v,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:s[2]||(s[2]=E=>e()),variant:"primary"},{default:r(()=>[s[10]||(s[10]=w(" Save ")),o("div",Nt,[o("kbd",Mt,[s[9]||(s[9]=w(" Ctrl  ")),l(j,{icon:"uil:enter",class:""})])])]),_:1})):P("",!0),i.editId>0?(p(),z(v,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:s[3]||(s[3]=E=>e()),variant:"primary"},{default:r(()=>[s[12]||(s[12]=w(" Update ")),o("div",Tt,[o("kbd",At,[s[11]||(s[11]=w(" Ctrl  ")),l(j,{icon:"uil:enter",class:""})])])]),_:1})):P("",!0)]),_:1})]),_:1})]),_:1},8,["open"])}}};function Ut(){const g=c(1),T=c(parseInt(localStorage.getItem("perPage")||"10")),y=c("-id"),V=c(""),$=c({}),d=J(),a=c(0),f=c(!1),A=c(1),C=c(1),M=c([]),S=c(!1),{openDialog:h}=d,{toastSuccess:x,toastError:i}=X();async function m(U={}){f.value=!0;try{const K=await L.get("/api/vendors",{params:{page:g.value,perPage:T.value,sort:y.value,...$.value}});M.value=K.data,A.value=K.data.last_page}catch(K){console.error("Error fetching vendors:",K),i("Error","Failed to fetch vendors.")}finally{f.value=!1}}const e=U=>{a.value=0,C.value=Math.random(),h("DialogNewVendor")};function D(U){a.value=U,C.value=Math.random(),h("DialogNewVendor")}const s=async U=>{try{await L.delete(`/api/vendors/${U}`),m(),x("Vendor Deleted","The vendor has been deleted successfully.")}catch(K){K.status===422?i("Error",K.response.data.message):(console.error("Error deleting Command:",K),i("Error","Failed to delete Command."))}},u=async U=>{try{await L.post("/api/vendors/delete-many",{ids:U}),m(),x("Vendors Deleted","The vendors have been deleted successfully."),S.value=!1,_e.emit("deleteManyVendorsSuccess")}catch(K){K.status===422?i("Error",K.response.data.message):(console.error("Error deleting Commands:",K),i("Error","Failed to delete Commands.")),S.value=!1}},b=U=>{a.value=U,C.value=Math.random(),h("DialogNewVendor")},n=()=>{m(),C.value=Math.random()};function v(U){U.altKey&&U.key==="n"&&(U.preventDefault(),h("DialogNewVendor"))}const j=fe(()=>{$.value["filter[vendorName]"]=V.value,g.value=1,m()},500);F([g,T],()=>{m()}),F(V,()=>{j()}),F(T,U=>{localStorage.setItem("perPage",U.toString())});function E(U){y.value===U?y.value=`-${U}`:y.value=U,m()}return{vendors:M,isLoading:f,currentPage:g,perPage:T,lastPage:A,editId:a,newVendorModalKey:C,searchTerm:V,openDialog:h,fetchVendors:m,createVendor:e,updateVendor:D,deleteVendor:s,deleteManyVendors:u,handleSave:n,handleKeyDown:v,viewEditDialog:b,toggleSort:E,sortParam:y,showConfirmDelete:S}}const Lt={class:"flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"},Bt={class:"relative items-center w-full"},zt={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},jt={class:"py-1"},Ft=["onClick"],Kt={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Ot={"data-size":"20"},qt={class:"p-1 border-5"},Ht=te({__name:"VendorMultiSelect",props:{modelValue:{type:Array,required:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(g,{emit:T}){const y=T,V=c([]);c([]);const $=c(!1),d=c(""),a=c([]),{createVendor:f,newVendorModalKey:A,handleSave:C}=Ut(),M=g,S=le(()=>V.value.filter(m=>m.vendorName.toLowerCase().includes(d.value.toLowerCase())&&!a.value.some(e=>e.id===m.id)));R(()=>{i(),M.modelValue&&M.modelValue.length>0&&a.value.push(...M.modelValue)}),F(()=>M.modelValue,m=>{a.value=m}),F(A,()=>{i()});function h(m){M.singleSelect?a.value=[m]:a.value.push(m),$.value=!1,d.value="",y("update:modelValue",a.value)}function x(m){const e=a.value.findIndex(D=>D.vendorName===m);e!==-1&&a.value.splice(e,1),y("update:modelValue",a.value)}function i(){L.get("/api/vendors/?perPage=10000").then(m=>{V.value=m.data.data})}return(m,e)=>{const D=N("Icon"),s=N("Button"),u=N("Input"),b=N("Separator");return p(),z(t(ee),null,{default:r(()=>[l(t(Q),{class:"col-span-3"},{default:r(()=>[l(s,{variant:"ghost",class:G(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",a.value.length===0?"text-muted-foreground":" "]),style:se(a.value.length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:r(()=>[w(I(a.value&&a.value.length===0?"Select vendors":"")+" ",1),(p(!0),k(q,null,H(a.value,n=>(p(),k("span",{key:n.id,class:"relative my-1 group"},[o("span",Lt,[w(I(n.vendorName)+" ",1),l(D,{icon:"si:close-line",class:"ml-1 cursor-pointer hover:text-white",onClick:oe(v=>x(n.vendorName),["stop"])},null,8,["onClick"])])]))),128))]),_:1},8,["class","style"])]),_:1}),l(t(Y),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:r(()=>[o("div",Bt,[l(u,{id:"search",type:"text",modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=n=>d.value=n),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),o("span",zt,[l(D,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),l(b),l(t(Z),{class:"h-64"},{default:r(()=>[o("div",jt,[(p(!0),k(q,null,H(S.value,n=>(p(),k("div",{key:n.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:v=>h(n)},[o("span",Kt,[o("span",Ot,I(n.vendorName),1)])],8,Ft))),128))])]),_:1}),l(b),o("div",qt,[l(s,{variant:"ghost",onClick:e[1]||(e[1]=n=>t(f)()),class:"justify-start w-full p-1"},{default:r(()=>[l(D,{icon:"octicon:plus-16",class:"w-3 h-3 mt-1 mr-2 text-muted-foreground"}),e[3]||(e[3]=o("span",null,"Create new record",-1))]),_:1})])]),_:1}),(p(),z(Pt,{onSave:e[2]||(e[2]=n=>t(C)()),key:t(A),editId:0}))]),_:1})}}});function Rt(g,T,y){const{toastSuccess:V,toastError:$,toastInfo:d,toastWarning:a,toastDefault:f}=X(),A=J(),{closeDialog:C,isDialogOpen:M}=A,S=c(!1),h=c(!1),x=c([]),i=c({device_name:"",device_ip:"",device_port_override:"",device_cred_id:0,device_cred:[],device_vendor:[],device_model:"",selectedCategoryArray:[],selectedModelArray:[],device_category_id:0,device_tags:[],device_username:"",device_password:"",device_enable_password:"",device_template:[],device_main_prompt:"",device_enable_prompt:""});R(()=>{g>0&&(h.value=!0,L.get(`/api/devices/${g}`).then(n=>{i.value.device_name=n.data.device_name,i.value.device_ip=n.data.device_ip,y===!0&&(i.value.device_name=n.data.device_name+"-Clone",i.value.device_ip=n.data.device_ip+"-Clone"),i.value.device_port_override=n.data.device_port_override,i.value.device_cred_id=n.data.device_cred_id,i.value.device_cred.push(n.data.device_cred),i.value.device_vendor.push(n.data.vendor[0]),i.value.device_model=n.data.device_model,i.value.selectedCategoryArray.push(n.data.category[0]),i.value.selectedModelArray=[{name:n.data.device_model}],i.value.device_category_id=n.data.device_category_id,n.data.tag.forEach(v=>{i.value.device_tags.push(v)}),i.value.device_username=n.data.device_username,i.value.device_password=n.data.device_password,i.value.device_enable_password=n.data.device_enable_password,i.value.device_template.push(n.data.template[0]),i.value.device_main_prompt=n.data.device_main_prompt,i.value.device_enable_prompt=n.data.device_enable_prompt,h.value=!1})),window.addEventListener("keydown",m)}),ae(()=>{window.removeEventListener("keydown",m)});function m(n){n.ctrlKey&&n.key==="Enter"&&e()}function e(){i.value.selectedModelArray.length>0&&(i.value.device_model=i.value.selectedModelArray[0].name),i.value.selectedCategoryArray.length>0&&(i.value.device_category_id=i.value.selectedCategoryArray[0].id);let n=g>0?`/${g}`:"",v=g>0?"patch":"post";y===!0&&(n="",v="post",console.log("id",n)),L[v]("/api/devices"+n,i.value).then(j=>{T("save",j.data),V("Device created","The device has been created successfully."),C("DialogNewDevice")}).catch(j=>{$("Error","There was an error saving the device."),console.log(j),j.response&&j.response.data&&j.response.data.errors&&(x.value=j.response.data.errors)})}function D(){i.value.device_main_prompt=i.value.device_name+"#",i.value.device_enable_prompt=i.value.device_name+">"}function s(){S.value=!0}function u(){S.value=!1}function b(){S.value=!1,T("close"),C("DialogNewDevice")}return{isLoading:h,model:i,saveDialog:e,errors:x,isDialogOpen:M,generatePrompts:D,showConfirmCloseAlert:S,showConfirmCloseDialog:s,cancelCloseDialog:u,confirmCloseDialog:b}}const Wt={class:"flex items-center"},Gt={class:"ml-2"},Xt={key:0},Jt={key:0},Qt={class:"text-muted-foreground"},Yt={key:0,class:"grid grid-cols-1 gap-6 px-4 lg:grid-cols-2"},Zt={class:"flex flex-col col-span-1"},el={key:0,class:"text-red-400"},tl={class:"flex flex-row space-x-4"},ll={class:"flex flex-col w-1/2"},sl={key:0,class:"text-red-400"},ol={class:"flex flex-col w-1/2"},al={key:1,class:"text-red-400"},nl={key:2,class:"text-red-400"},dl={key:3,class:"text-red-400"},il={key:4,class:"text-red-400"},rl={class:"flex flex-col col-span-1"},ul={key:0,class:"text-sm text-muted-foreground"},cl={class:"flex w-full max-w-full items-center gap-1.5"},ml={key:0,class:"text-red-400"},vl={key:3,class:"text-red-400"},pl={key:6,class:"text-red-400"},fl={key:7,class:"text-red-400"},gl={key:8,class:"text-red-400"},_l={key:9,class:"text-red-400"},yl={class:"pl-2 ml-auto"},bl={class:"rc-kdb-class2"},hl={class:"pl-2 ml-auto"},xl={class:"rc-kdb-class2"},$l={__name:"DeviceAddEditDialog",props:{editId:Number,isClone:{type:Boolean,default:!1}},emits:["save","close"],setup(g,{emit:T}){const y=g,V=T,{isLoading:$,model:d,saveDialog:a,errors:f,isDialogOpen:A,generatePrompts:C,showConfirmCloseAlert:M,showConfirmCloseDialog:S,cancelCloseDialog:h,confirmCloseDialog:x}=Rt(y.editId,V,y.isClone);function i(m){if(m.length===0){d.value.device_cred=[],d.value.device_cred_id=0;return}d.value.device_cred=m,d.value.device_cred_id=m[0].id,d.value.device_username=m[0].cred_username,d.value.device_password="",d.value.device_enable_password=""}return(m,e)=>{const D=N("DeviceIcon"),s=N("Label"),u=N("Input"),b=N("Icon"),n=N("Button");return p(),k(q,null,[l(t(me),{open:t(A)("DialogNewDevice")},{default:r(()=>[l(t(de),{"as-child":""}),l(t(ie),{onInteractOutside:e[18]||(e[18]=v=>t(S)()),onPointerDownOutside:e[19]||(e[19]=v=>t(S)()),class:"p-0 sm:max-w-7xl",onEscapeKeyDown:e[20]||(e[20]=v=>t(S)()),onCloseClicked:e[21]||(e[21]=v=>t(S)())},{default:r(()=>[l(t(re),{class:"rc-dialog-header"},{default:r(()=>[l(t(ue),{class:"text-sm text-rcgray-200"},{default:r(()=>[o("div",Wt,[l(D),o("span",Gt,[w(I(g.editId===0?g.isClone?"":"Add":g.isClone?"Clone":"Edit")+" Device ",1),g.editId>0&&!g.isClone?(p(),k("span",Xt,"(ID: "+I(g.editId)+")",1)):P("",!0)]),t(d).device_name?(p(),k("span",Jt,[e[22]||(e[22]=w(" :   ")),o("span",Qt,I(t(d).device_name),1)])):P("",!0)])]),_:1})]),_:1}),l(t(Z),{class:"min-h-96 xl:h-auto"},{default:r(()=>[t($)?(p(),z(Me,{key:0})):P("",!0),l(Te,{name:"fade"},{default:r(()=>[t($)?P("",!0):(p(),k("div",Yt,[o("div",Zt,[e[30]||(e[30]=o("h3",{class:"text-lg font-semibold border-b"},"Device Information",-1)),l(s,{for:"device_name",class:"mt-4 mb-1 font-light"},{default:r(()=>e[23]||(e[23]=[w(" Device Name "),o("span",{class:"text-red-400"},"*",-1)])),_:1}),l(u,{modelValue:t(d).device_name,"onUpdate:modelValue":e[0]||(e[0]=v=>t(d).device_name=v),id:"device_name",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),t(f).device_name?(p(),k("span",el,I(t(f).device_name[0]),1)):P("",!0),o("div",tl,[o("div",ll,[l(s,{for:"device_ip",class:"mt-4 mb-1 font-light"},{default:r(()=>e[24]||(e[24]=[w(" Device IP "),o("span",{class:"text-red-400"},"*",-1)])),_:1}),l(u,{modelValue:t(d).device_ip,"onUpdate:modelValue":e[1]||(e[1]=v=>t(d).device_ip=v),id:"device_ip",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),t(f).device_ip?(p(),k("span",sl,I(t(f).device_ip[0]),1)):P("",!0)]),o("div",ol,[l(s,{for:"device_port_override",class:"mt-4 mb-1 font-light"},{default:r(()=>[e[25]||(e[25]=w(" Device Port ")),l(ne,{title:"Device Port",content:"Set the connection port specific to this device. it overrides the value set in the connection template. Leave empty otherwise."})]),_:1}),l(u,{modelValue:t(d).device_port_override,"onUpdate:modelValue":e[2]||(e[2]=v=>t(d).device_port_override=v),id:"device_port_override",type:"number",autocomplete:"off",class:"w-full"},null,8,["modelValue"])])]),l(s,{for:"vector",class:"mt-4 mb-1 font-light"},{default:r(()=>e[26]||(e[26]=[w(" Vendor "),o("span",{class:"text-red-400"},"*",-1)])),_:1}),l(Ht,{singleSelect:!0,modelValue:t(d).device_vendor,"onUpdate:modelValue":e[3]||(e[3]=v=>t(d).device_vendor=v),id:"device_vendor",class:"w-full"},null,8,["modelValue"]),t(f).device_vendor?(p(),k("span",al,I(t(f).device_vendor[0]),1)):P("",!0),l(s,{for:"device_category_id",class:"mt-4 mb-1 font-light"},{default:r(()=>e[27]||(e[27]=[w(" Category "),o("span",{class:"text-red-400"},"*",-1)])),_:1}),l(Pe,{modelValue:t(d).selectedCategoryArray,"onUpdate:modelValue":e[4]||(e[4]=v=>t(d).selectedCategoryArray=v),id:"selectedCategoryArray",singleSelect:!0,class:"w-full"},null,8,["modelValue"]),t(f).device_category_id?(p(),k("span",nl,I(t(f).device_category_id[0]),1)):P("",!0),l(s,{for:"device_model",class:"mt-4 mb-1 font-light"},{default:r(()=>e[28]||(e[28]=[w(" Model "),o("span",{class:"text-red-400"},"*",-1)])),_:1}),l(ut,{singleSelect:!0,modelValue:t(d).selectedModelArray,"onUpdate:modelValue":e[5]||(e[5]=v=>t(d).selectedModelArray=v),id:"selectedModelArray",class:"w-full"},null,8,["modelValue"]),t(f).device_model?(p(),k("span",dl,I(t(f).device_model[0]),1)):P("",!0),l(s,{for:"device_tags",class:"mt-4 mb-1 font-light"},{default:r(()=>e[29]||(e[29]=[w(" Tags "),o("span",{class:"text-red-400"},"*",-1)])),_:1}),l(Ue,{modelValue:t(d).device_tags,"onUpdate:modelValue":e[6]||(e[6]=v=>t(d).device_tags=v),id:"device_tags",class:"w-full"},null,8,["modelValue"]),t(f).device_tags?(p(),k("span",il,I(t(f).device_tags[0]),1)):P("",!0)]),o("div",rl,[e[39]||(e[39]=o("h3",{class:"text-lg font-semibold border-b"},"Connection Information",-1)),l(s,{for:"device_username",class:"mt-4 mb-1 font-light"},{default:r(()=>[e[31]||(e[31]=w(" Username ")),e[32]||(e[32]=o("span",{class:"text-red-400"},"*",-1)),t(d).device_cred_id!=0?(p(),k("span",ul," - Credential set selected ")):P("",!0)]),_:1}),o("div",cl,[l(u,{disabled:t(d).device_cred_id!=0,modelValue:t(d).device_username,"onUpdate:modelValue":e[7]||(e[7]=v=>t(d).device_username=v),id:"device_username",autocomplete:"current-password",class:"flex-grow w-2/3"},null,8,["disabled","modelValue"]),l(He,{modelValue:t(d).device_cred,"onUpdate:modelValue":e[8]||(e[8]=v=>i(v)),singleSelect:!0,class:"w-full"},null,8,["modelValue"])]),t(f).device_username?(p(),k("span",ml,I(t(f).device_username[0]),1)):P("",!0),t(d).device_cred_id===0?(p(),z(s,{key:1,for:"device_password",class:"mt-4 mb-1 font-light"},{default:r(()=>e[33]||(e[33]=[w(" Device Password "),o("span",{class:"text-red-400"},"*",-1)])),_:1})):P("",!0),t(d).device_cred_id===0?(p(),z(t(ve),{key:2,modelValue:t(d).device_password,"onUpdate:modelValue":e[9]||(e[9]=v=>t(d).device_password=v),id:"device_password",class:"w-full"},null,8,["modelValue"])):P("",!0),t(f).device_password?(p(),k("span",vl,I(t(f).device_password[0]),1)):P("",!0),t(d).device_cred_id===0?(p(),z(s,{key:4,for:"device_enable_password",class:"mt-4 mb-1 font-light"},{default:r(()=>e[34]||(e[34]=[w(" Device Enable Password ")])),_:1})):P("",!0),t(d).device_cred_id===0?(p(),z(t(ve),{key:5,modelValue:t(d).device_enable_password,"onUpdate:modelValue":e[10]||(e[10]=v=>t(d).device_enable_password=v),id:"device_enable_password",class:"w-full"},null,8,["modelValue"])):P("",!0),t(f).device_enable_password?(p(),k("span",pl,I(t(f).device_enable_password[0]),1)):P("",!0),l(s,{for:"device_template",class:"mt-4 mb-1 font-light"},{default:r(()=>e[35]||(e[35]=[w(" Template "),o("span",{class:"text-red-400"},"*",-1)])),_:1}),l(Vt,{singleSelect:!0,modelValue:t(d).device_template,"onUpdate:modelValue":e[11]||(e[11]=v=>t(d).device_template=v),id:"device_template",class:"w-full"},null,8,["modelValue"]),t(f).device_template?(p(),k("span",fl,I(t(f).device_template[0]),1)):P("",!0),l(s,{for:"main_prompt",class:"mt-4 mb-1 font-light"},{default:r(()=>[e[36]||(e[36]=w(" Main Prompt ")),l(ne,{title:"Device Main Prompt",content:"This is the 'Privileged EXEC' prompt. You will run show commands from this prompt and you can access configure mode. Usually 'router1#'"})]),_:1}),l(u,{modelValue:t(d).device_main_prompt,"onUpdate:modelValue":e[12]||(e[12]=v=>t(d).device_main_prompt=v),id:"device_main_prompt",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),t(f).device_main_prompt?(p(),k("span",gl,I(t(f).device_main_prompt[0]),1)):P("",!0),l(s,{for:"enable_prompt",class:"mt-4 mb-1 font-light"},{default:r(()=>[e[37]||(e[37]=w(" Enable Prompt ")),l(ne,{title:"Device Main Prompt",content:" This is the 'User EXEC' prompt. The first level of access prompt. Usually 'router1>'"})]),_:1}),l(u,{modelValue:t(d).device_enable_prompt,"onUpdate:modelValue":e[13]||(e[13]=v=>t(d).device_enable_prompt=v),id:"device_enable_prompt",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),o("button",{class:"flex items-center p-2 text-sm text-left rounded-lg pf-c-button pf-m-link pf-m-inline hover:bg-rcgray-800 max-w-fit text-muted-foreground hover:text-gray-200",type:"button",onClick:e[14]||(e[14]=v=>t(C)())},[l(b,{icon:"material-symbols:flash-auto",class:"w-4 h-4 mr-1"}),e[38]||(e[38]=w(" Auto generate prompts from device name "))]),t(f).device_enable_prompt?(p(),k("span",_l,I(t(f).device_enable_prompt[0]),1)):P("",!0)])]))]),_:1})]),_:1}),l(t(ce),{class:"rc-dialog-footer bg-rcgray-800"},{default:r(()=>[l(n,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:e[15]||(e[15]=v=>t(S)()),size:"sm"},{default:r(()=>e[40]||(e[40]=[w(" Cancel "),o("div",{class:"pl-2 ml-auto"},[o("kbd",{class:"rc-kdb-class"},"ESC")],-1)])),_:1}),y.editId===0||y.isClone?(p(),z(n,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:e[16]||(e[16]=v=>t(a)()),variant:"primary"},{default:r(()=>[e[42]||(e[42]=w(" Save ")),o("div",yl,[o("kbd",bl,[e[41]||(e[41]=w(" Ctrl  ")),l(b,{icon:"uil:enter",class:""})])])]),_:1})):P("",!0),y.editId>0&&!y.isClone?(p(),z(n,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:e[17]||(e[17]=v=>t(a)()),variant:"primary"},{default:r(()=>[e[44]||(e[44]=w(" Update ")),o("div",hl,[o("kbd",xl,[e[43]||(e[43]=w(" Ctrl  ")),l(b,{icon:"uil:enter",class:""})])])]),_:1})):P("",!0)]),_:1})]),_:1})]),_:1},8,["open"]),l(ge,{showConfirmCloseAlert:t(M),onHandleClose:t(h),onHandleConfirm:t(x)},null,8,["showConfirmCloseAlert","onHandleClose","onHandleConfirm"])],64)}}};function kl(){const g=c(1),T=c(parseInt(localStorage.getItem("perPage")||"10")),y=c("-id"),V=c(""),$=c({}),d=J(),a=c(0),f=c(!1),A=c(1),C=c(1),M=c([]),S=c(!1),h=c([]),x=c([]),i=c([]),m=c([]),e=pe(),D=Ae("formatters"),{openDialog:s}=d,{toastSuccess:u,toastError:b}=X();async function n(_={}){if(f.value=!0,h.value.length>0){const B=h.value.map(O=>O.id);$.value["filter[status]"]=B.join(",")}try{const B=await L.get("/api/devices",{params:{page:g.value,perPage:T.value,sort:y.value,...$.value}});M.value=B.data,A.value=B.data.last_page}catch(B){console.error("Error fetching devices:",B),b("Error","Failed to fetch devices.")}finally{f.value=!1}}const v=_=>{a.value=0,C.value=Math.random(),s("DialogNewDevice")};function j(_){a.value=_,C.value=Math.random(),s("DialogNewDevice")}function E(_){console.log("Purge device configs:",_),L.post("/api/device/purge-failed-configs",{device_id:_}).then(B=>{u("Device Configurations Purged","The device failed configurations purge jobs has been successfully sent to the queue.")}).catch(B=>{console.error("Error Purge device configs:",B),b("Error","Failed to purge device configurations.")})}const U=async _=>{try{await L.delete(`/api/devices/${_}`),n(),u("Device Deleted","The device has been deleted successfully.")}catch(B){console.error("Error deleting device:",B),b("Error","Failed to delete device.")}},K=async _=>{try{await L.post("/api/devices/delete-many",{ids:_}),n(),u("Devices Deleted","The tags have been deleted successfully."),S.value=!1,_e.emit("deleteManyDevicesSuccess")}catch(B){console.error("Error deleting tags:",B),b("Error","Failed to delete devices."),S.value=!1}},ye=async _=>{try{await L.get(`/api/device/disable/${_}`),n(),u("Device Disabled","The device has been disabled successfully.")}catch(B){console.error("Error disabling device:",B),b("Error","Failed to disable device.")}},be=async _=>{try{await L.get(`/api/device/enable/${_}`),n(),u("Device Enabled","The device has been disabled successfully.")}catch(B){console.error("Error enabling device:",B),b("Error","Failed to enabled device.")}},he=_=>{a.value=_,C.value=Math.random(),s("DialogNewDevice")},xe=()=>{n(),C.value=Math.random()};function we(_){_.altKey&&_.key==="n"&&(_.preventDefault(),s("DialogNewDevice"))}const Ce=fe(()=>{$.value["filter[q]"]=V.value,g.value=1,n()},500);F([g,T],()=>{n()}),F(V,()=>{Ce()}),F(T,_=>{localStorage.setItem("perPage",_.toString())}),F(h,(_,B)=>{if(console.log("Filter status:",_),_&&_.length>0){const O=_.map(W=>W.id);$.value["filter[status]"]=O.join(",")}else delete $.value["filter[status]"];n()},{deep:!0}),F(x,(_,B)=>{if(_&&_.length>0){const O=_.map(W=>W.id);$.value["filter[category]"]=O.join(",")}else delete $.value["filter[category]"];n()},{deep:!0}),F(i,(_,B)=>{if(_&&_.length>0){const O=_.map(W=>W.id);$.value["filter[tag]"]=O.join(",")}else delete $.value["filter[tag]"];n()},{deep:!0}),F(m,(_,B)=>{if(_&&_.length>0){const O=_.map(W=>W.id);$.value["filter[vendor]"]=O.join(",")}else delete $.value["filter[vendor]"];n()},{deep:!0});function De(_){y.value===_?y.value=`-${_}`:y.value=_,n()}function Ve(){$.value={},h.value=[],x.value=[],i.value=[],m.value=[],V.value="",n()}function $e(_){e.push({name:"devicesview",params:{id:parseInt(_)}})}return{clearFilters:Ve,createDevice:v,currentPage:g,deleteDevice:U,deleteManyDevices:K,devices:M,disableDevice:ye,editId:a,enableDevice:be,fetchDevices:n,filterCategories:x,filterStatus:h,filterTags:i,filterVendor:m,formatters:D,handleKeyDown:we,handleSave:xe,isLoading:f,lastPage:A,newDeviceModalKey:C,perPage:T,purgeDeviceConfigs:E,searchTerm:V,showConfirmDelete:S,sortParam:y,toggleSort:De,updateDevice:j,viewDeviceDetailsPane:$e,viewEditDialog:he}}function Il(g){const{toastSuccess:T,toastError:y}=X(),V=J(),{openDialog:$}=V,d=c(!1),a=c(!1),f=c([]),A=c("");c(null);const C=c(!1),M=c([]),S=c(!1),h=c(""),x=c("");function i(){d.value=!0,L.get("/api/import-github-templates",{fileName:this.fileName,code:this.code}).then(u=>{T("Templates imported from github successfully")}).catch(u=>{y("Error importing templates from github")}),setTimeout(()=>{d.value=!1},1e3)}F(A,()=>{A.value!==""&&D(A.value)}),F(h,()=>{h.value!==null&&s(h.value)});function m(){$("DialogTemplateImport")}function e(){d.value=!0,L.get("/api/list-template-repo-folders").then(u=>{f.value=u.data.data,a.value=!0,d.value=!1}).catch(u=>{console.log(u),u.response.data.message.msg==='rConfig-templates is empty, or does not exist. Clone from "https://github.com/rconfig/rconfig-templates" may have failed! Try importing the templates again.!'?a.value=!1:y("Error getting vendor templates"),d.value=!1})}function D(u){C.value=!1,S.value=!1,L.post("/api/list-repo-folders-contents",{directory:u}).then(b=>{M.value=b.data.data,C.value=!0,typeof b.data.data.readme<"u"&&(S.value=!0)}).catch(b=>{console.log(b),y("Error getting file list")})}function s(u){L.post("/api/get-template-file-contents",{filepath:u}).then(b=>{x.value=b.data.data.data.code}).catch(b=>{y("Error getting file contents")})}return{fileOptionSelected:h,getTemplateFileContents:s,getTemplateRepoFolders:e,getTemplatesList:D,hasReadmeFile:S,hasVendorTemplateOptions:a,importTemplates:i,importingTemplates:d,listedFiles:M,openImportDialog:m,selectedTemplateCode:x,showFileOptions:C,vendorOptionSelected:A,vendorTemplateOptions:f}}export{$l as _,Il as a,Ut as b,Pt as c,kl as u};
