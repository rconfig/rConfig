import{_ as L,i as N,f as g,g as F,r as u,o as l,c as r,a as e,d as V,b as m,w as h,h as v,t as _,y as I,q as D,l as T,F as P,k as j,e as O,s as z,j as y,z as $,m as B,x as R,A as E}from"./app-jAvOudJp.js";import{D as K}from"./DeviceViewDeviceDetailsDescr-Cvo982WC.js";import{D as H}from"./DevicesBreadcrumbs-Uy8Hpyqk.js";import{D as W}from"./DevicesForm-D0a7n3Th.js";import{L as U}from"./LoadingSpinner-BUiGzFl7.js";import{P as G}from"./PageHeader-C6NCWsA1.js";import{S as J}from"./SideDrawer-DQBQIuzk.js";import{a as Q,u as Y}from"./ViewFunctions-DwBLl11m.js";/* empty css            */import"./CopyLogo-C0cUA8Ok.js";import"./DeviceCategoryField-CC5NQf2x.js";import"./MultiSelect-BiRQUTzf.js";const X={props:{model:{type:Object,default:()=>({})}},components:{},setup(c,{emit:t}){const s=N("create-notification"),{toClipboard:o}=I(),d=g(!1),f=g(null);F(()=>{n()});function n(){axios.get("/api/app-dir-path").then(p=>{d.value=p.data})}function a(){f.value="Downloading...",s({type:"success",title:"Download Started",message:"Download started for device "+c.model.device_name}),axios.post("/api/device/download-now",{device_id:c.model.id}).then(p=>{f.value="Queued...",s({type:"success",title:"Download Started",message:"Download job for "+c.model.device_name+" was pushed to the queue."}),i()}).catch(p=>{s({type:"danger",title:"Error",message:p.response.data.message})})}function i(){const p=setInterval(function(){axios.get("/api/tracked-jobs/"+c.model.id).then(w=>{f.value=w.data.data.status}),f.value==="finished"&&(s({type:"success",title:"Download Finished",message:"Download finished for device "+c.model.device_name}),clearInterval(p),setTimeout(()=>{f.value=null},3e3))},2e3)}function k(){axios.post("/api/device/purge-failed-configs",{device_id:c.model.id}).then(p=>{s({type:"success",title:"Purge Successful",message:"Purge successful for device "+c.model.device_name})}).catch(p=>{s({type:"danger",title:"Error",message:p.response.data.message})})}function S(p){try{o(p),s({type:"success",message:"Copied to clipboard!",duration:3})}catch(w){s({type:"danger",title:"Error",message:w.response})}}function x(p,w=!1){t("openDrawer",{id:p,isClone:w})}return{appDirPath:d,copyDebug:S,downloadNow:a,downloadStatus:f,openDrawer:x,purgeFailedConfigs:k}}},Z={class:"pf-c-card"},ee={class:"pf-c-menu"},te={class:"pf-c-menu__content"},oe={class:"pf-c-menu__list"},se={class:"pf-c-menu__list-item"},ie={class:"pf-c-menu__list-item"},ne={class:"pf-c-menu__list-item"},ae={key:0,class:"pf-c-menu__list-item",style:{cursor:"auto"}},le={class:"pf-c-menu__item"},de={class:"pf-c-menu__item-main"},ce={class:"pf-c-menu__item-icon"},re={key:0,class:"pf-c-spinner pf-m-md",role:"progressbar",viewBox:"0 0 100 100","aria-label":"Loading..."},fe={key:1,class:"fa fa-check-circle pf-u-success-color-100","aria-hidden":"true"},pe={key:2,class:"fa fa-exclamation-circle pf-u-danger-color-100","aria-hidden":"true"},me={class:"pf-c-menu__item-description pf-u-text-break-word",style:{"word-wrap":"normal"}},_e={class:"pf-c-menu__list-item"},ue={class:"pf-c-menu__list-item"};function ve(c,t,s,o,d,f){const n=u("router-link");return l(),r("div",null,[e("div",Z,[t[11]||(t[11]=e("div",{class:"pf-c-card__title"},[e("h2",{class:"pf-c-title pf-m-xl"},"Common Actions")],-1)),e("div",ee,[e("div",te,[e("ul",oe,[e("li",se,[e("button",{class:"pf-c-menu__item",type:"button",onClick:t[0]||(t[0]=a=>o.copyDebug("cd "+o.appDirPath+" && php artisan rconfig:download-device "+s.model.id+" -d"))},t[4]||(t[4]=[V('<span class="pf-c-menu__item-main"><span class="pf-c-menu__item-icon"><i class="fas fa-code" aria-hidden="true"></i></span><span class="pf-c-menu__item-text">Copy debug CLI command</span></span><span class="pf-c-menu__item-description pf-u-text-break-word">Copy command for CLI debug to clipboard</span>',2)]))]),e("li",ie,[m(n,{to:{path:"/device/view/configs/"+s.model.id,query:{id:s.model.id,devicename:s.model.device_name,status:"all"}},class:"pf-c-menu__item",type:"button"},{default:h(()=>t[5]||(t[5]=[e("span",{class:"pf-c-menu__item-main"},[e("span",{class:"pf-c-menu__item-icon"},[e("i",{class:"pficon pf-icon-storage-domain","aria-hidden":"true"})]),e("span",{class:"pf-c-menu__item-text"},"View configuration downloads")],-1),e("span",{class:"pf-c-menu__item-description"},"View configuration files for this device",-1)])),_:1},8,["to"])]),e("li",ne,[e("button",{class:"pf-c-menu__item",onClick:t[1]||(t[1]=a=>o.downloadNow())},t[6]||(t[6]=[V('<span class="pf-c-menu__item-main"><span class="pf-c-menu__item-icon"><i class="pficon pf-icon-save" aria-hidden="true"></i></span><span class="pf-c-menu__item-text">Download now</span></span><span class="pf-c-menu__item-description pf-u-text-break-word" style="word-wrap:normal;">Start a download for this device</span>',2)]))]),o.downloadStatus?(l(),r("li",ae,[e("button",le,[e("span",de,[e("span",ce,[o.downloadStatus!="The job finished, check configs and logs for details."?(l(),r("svg",re,t[7]||(t[7]=[e("circle",{class:"pf-c-spinner__path",cx:"50",cy:"50",r:"45",fill:"none"},null,-1)]))):v("",!0),o.downloadStatus==="The job finished, check configs and logs for details."?(l(),r("i",fe)):v("",!0),o.downloadStatus==="Failed"?(l(),r("i",pe)):v("",!0)]),t[8]||(t[8]=e("span",{class:"pf-c-menu__item-text"},"Download status",-1))]),e("span",me,_(o.downloadStatus),1)])])):v("",!0),e("li",_e,[e("button",{class:"pf-c-menu__item",onClick:t[2]||(t[2]=a=>o.openDrawer(s.model.id,!0))},t[9]||(t[9]=[V('<span class="pf-c-menu__item-main"><span class="pf-c-menu__item-icon"><i class="fas fa-copy" aria-hidden="true"></i></span><span class="pf-c-menu__item-text">Clone device</span></span><span class="pf-c-menu__item-description pf-u-text-break-word" style="word-wrap:normal;">Create a new device with similar configuration</span>',2)]))]),e("li",ue,[e("button",{class:"pf-c-menu__item",onClick:t[3]||(t[3]=a=>o.purgeFailedConfigs())},t[10]||(t[10]=[V('<span class="pf-c-menu__item-main"><span class="pf-c-menu__item-icon"><i class="fas fa-trash" aria-hidden="true"></i></span><span class="pf-c-menu__item-text">Purge failed configs</span></span><span class="pf-c-menu__item-description pf-u-text-break-word" style="word-wrap:normal;">Purge all Failed Configs for this device</span>',2)]))])])])])])])}const ge=L(X,[["render",ve]]),we={props:{model:{type:Object,default:()=>({})}},emits:["openDrawer","deleteRow","pagechanged"],components:{DeviceViewDeviceDetailsDescr:K},setup(c,{emit:t}){const s=N("formatTime");function o(d,f=!1){t("openDrawer",{id:d,isClone:f})}return{openDrawer:o,formatTime:s}}},be={class:"pf-c-card"},xe={class:"pf-c-card__body"},ye={class:"pf-c-description-list pf-m-horizontal pf-m-vertical-on-md pf-m-horizontal-on-lg pf-m-vertical-on-xl pf-m-horizontal-on-2xl"},he={class:"pf-c-description-list__group"},De={class:"pf-c-description-list__group"},ke={class:"pf-c-description-list__group"},Ce={class:"pf-c-description-list__group"},Se={class:"pf-l-flex pf-m-space-items-sm"},Te={class:"pf-l-flex__item"},Le={class:"pf-l-flex pf-m-column pf-m-space-items-none pf-m-flex-1"},Me={class:"pf-l-flex__item"},Ne={class:"pf-l-flex__item"},Ve={class:"pf-u-color-400"},Oe={class:"pf-c-description-list__group"},Pe={class:"pf-c-description-list__group"},je={class:"pf-c-description-list__group"},Fe={class:"pf-c-description-list__group"},Ae={class:"pf-c-description-list__group"},qe={class:"pf-c-description-list__group"},Ee={class:"pf-c-description-list__description"},Re=["alt","title"],Ie={class:"pf-c-card__footer",style:{"padding-top":"15px","padding-bottom":"15px","padding-left":"9px"}};function ze(c,t,s,o,d,f){const n=u("device-view-device-details-descr");return l(),r("div",be,[t[11]||(t[11]=e("div",{class:"pf-c-card__title"},[e("h2",{class:"pf-c-title pf-m-xl"},"Device Details")],-1)),e("div",xe,[e("dl",ye,[e("div",he,[t[1]||(t[1]=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Device ID")],-1)),m(n,{text:s.model.id},null,8,["text"])]),e("div",De,[t[2]||(t[2]=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Hostname")],-1)),m(n,{text:s.model.device_name},null,8,["text"])]),e("div",ke,[t[3]||(t[3]=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"IP Address")],-1)),m(n,{text:s.model.device_ip},null,8,["text"])]),e("div",Ce,[t[4]||(t[4]=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Status")],-1)),e("div",Se,[e("div",Te,[e("i",{class:D(s.model.status=="1"?"fa fa-check-circle pf-u-success-color-100 ":"fa fa-exclamation-triangle pf-u-warning-color-100")},null,2)]),e("div",Le,[e("div",Me,_(s.model.status=="1"?"Online":"Unreachable"),1),e("div",Ne,[e("span",Ve,"Last seen: "+_(s.model.last_seen?o.formatTime(s.model.last_seen):"-"),1)])])])]),e("div",Oe,[t[5]||(t[5]=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Category")],-1)),s.model.category.length!=0?(l(),T(n,{key:0,text:s.model.category[0].categoryName},null,8,["text"])):v("",!0)]),e("div",Pe,[t[6]||(t[6]=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Vendor")],-1)),m(n,{text:s.model.vendor[0].vendorName},null,8,["text"])]),e("div",je,[t[7]||(t[7]=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Model")],-1)),m(n,{text:s.model.device_model},null,8,["text"])]),e("div",Fe,[t[8]||(t[8]=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Template")],-1)),s.model.template.length!=0?(l(),T(n,{key:0,text:s.model.template[0].templateName},null,8,["text"])):v("",!0)]),e("div",Ae,[t[9]||(t[9]=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Created")],-1)),s.model.template.length!=0?(l(),T(n,{key:0,text:o.formatTime(s.model.created_at)},null,8,["text"])):v("",!0)]),e("div",qe,[t[10]||(t[10]=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Tags")],-1)),e("dd",Ee,[(l(!0),r(P,null,j(s.model.tag,a=>(l(),r("div",{class:"pf-c-chip",key:a.id},[e("span",{class:"pf-c-chip__text",alt:a.tagDescription,title:a.tagDescription},_(a.tagname),9,Re)]))),128))])])])]),t[12]||(t[12]=e("hr",{class:"pf-c-divider"},null,-1)),e("div",Ie,[e("button",{class:"pf-c-button pf-m-link",style:{float:"right"},type:"button",onClick:t[0]||(t[0]=a=>o.openDrawer(s.model.id)),alt:"Edit",title:"Edit"},"Edit Settings")])])}const $e=L(we,[["render",ze]]),Be={props:{model:{type:Object,default:()=>({})}},components:{},setup(c){const t=O({}),s=g(!0),o=N("formatTime");F(()=>{d()});function d(){axios.get("/api/configs/latest-by-deviceid/"+c.model.id).then(f=>{Object.assign(t,f.data),s.value=!1}).catch(f=>{console.log(f)})}return z(()=>{c.model.config_good_count&&d()}),{formatTime:o,isLoading:s,latestConfigs:t}}},Ke={class:"pf-c-card",style:{"margin-top":"18px"}},He={class:"pf-c-table pf-m-compact pf-m-grid-lg",role:"grid"},We={role:"rowgroup"},Ue={lass:"pf-m-break-word",role:"columnheader","data-label":"Command"},Ge={class:"pf-m-break-word",role:"cell","data-label":"Filename"},Je={class:"pf-m-break-word",role:"cell","data-label":"Downloaded"},Qe={class:"pf-c-table__icon",role:"cell","data-label":"Status"},Ye={role:"cell","data-label":"Action"},Xe={class:"pf-c-card__footer",style:{"padding-top":"15px","padding-bottom":"15px","padding-left":"9px"}};function Ze(c,t,s,o,d,f){const n=u("router-link");return l(),r("div",Ke,[t[3]||(t[3]=V('<div class="pf-c-toolbar"><div class="pf-c-toolbar__content"><div class="pf-c-toolbar__content-section pf-m-nowrap"><div class="pf-c-toolbar__group pf-m-toggle-group pf-m-show-on-xl"><h2 class="pf-c-title pf-m-xl">Latest downloads</h2></div></div></div></div>',1)),e("table",He,[t[1]||(t[1]=e("thead",null,[e("tr",{role:"row"},[e("th",{role:"columnheader",scope:"col"},"Command"),e("th",{role:"columnheader",scope:"col"},"Filename"),e("th",{role:"columnheader",scope:"col"},"Downloaded"),e("th",{class:"pf-c-table__icon",role:"columnheader",scope:"col"},"Status"),e("th",{role:"columnheader"})])],-1)),e("tbody",We,[(l(!0),r(P,null,j(o.latestConfigs.data,a=>(l(),r("tr",{role:"row",key:a.id},[e("th",Ue,_(a.command),1),e("td",Ge,_(a.config_filename),1),e("td",Je,_(o.formatTime(a.created_at)),1),e("td",Qe,[e("i",{class:D(a.download_status=="0"?"fa fa-exclamation-circle pf-u-danger-color-100":"")},null,2),e("i",{class:D(a.download_status=="1"?"fa fa-check-circle pf-u-success-color-100 ":"")},null,2),e("i",{class:D(a.download_status=="2"?"fa fa-exclamation-triangle pf-u-warning-color-100":"")},null,2),e("i",{class:D(a.download_status===null?"fa fa-exclamation-triangle pf-u-warning-color-100":"")},null,2)]),e("td",Ye,[m(n,{type:"button",class:"pf-c-button pf-m-link",to:"/device/view/configs/view-config/"+a.id},{default:h(()=>t[0]||(t[0]=[y("View")])),_:2},1032,["to"])])]))),128))])]),e("div",Xe,[m(n,{type:"button",class:"pf-c-button pf-m-link",style:{float:"right"},to:{path:"/device/view/configs/"+s.model.id,query:{id:s.model.id,devicename:s.model.device_name,status:"all"}}},{default:h(()=>t[2]||(t[2]=[y("View all")])),_:1},8,["to"])])])}const et=L(Be,[["render",Ze]]),tt={props:{},setup(c){return{}}},ot={class:"pf-c-tooltip pf-m-top-left",role:"tooltip",style:{"z-index":"999",position:"absolute",top:"26%"}},st={class:"pf-c-tooltip__content",id:"tooltip-top-content"};function it(c,t,s,o,d,f){return l(),r("div",ot,[t[0]||(t[0]=e("div",{class:"pf-c-tooltip__arrow"},null,-1)),e("div",st,[$(c.$slots,"default")])])}const nt=L(tt,[["render",it]]),at={props:{editid:{type:[Number,Array,String,Object],required:!0}},setup(c,{emit:t}){const s=g(null);B(s,f=>o());function o(){t("closeModal")}function d(){t("confirmClear",c.editid)}return{clickOutsidetargetModal:s,close:o,confirmClear:d}}},lt={class:"pf-c-backdrop"},dt={class:"pf-l-bullseye"},ct={class:"pf-c-modal-box pf-m-sm pf-m-warning",role:"dialog",ref:"clickOutsidetargetModal"},rt={class:"pf-c-modal-box__header"},ft={class:"pf-c-modal-box__title",id:"modal-title-modal-basic-example-modal"},pt={class:"pf-c-modal-box__footer"};function mt(c,t,s,o,d,f){return l(),r("div",lt,[e("div",dt,[e("div",ct,[e("button",{class:"pf-c-button pf-m-plain",type:"button","aria-label":"Close",onClick:t[0]||(t[0]=(...n)=>o.close&&o.close(...n))},t[3]||(t[3]=[e("i",{class:"fas fa-times","aria-hidden":"true"},null,-1)])),e("header",rt,[e("h1",ft," Clear device logs for "+_(s.editid)+"? ",1)]),t[4]||(t[4]=e("div",{class:"pf-c-modal-box__body",id:"modal-description"},[e("p",null,"Are you absolutely sure you want to clear all logs device? You will not be able to retrieve cleared logs after this operation.")],-1)),e("footer",pt,[e("button",{class:"pf-c-button pf-m-primary pf-m-small",type:"button",onClick:t[1]||(t[1]=n=>o.confirmClear())}," Confirm "),e("button",{class:"pf-c-button pf-m-link",type:"button",onClick:t[2]||(t[2]=n=>o.close())}," Cancel ")])],512)])])}const _t=L(at,[["render",mt]]),ut={props:{model:{type:Object,default:()=>({})}},components:{Tooltip:nt,ModalClearAllDeviceLogs:_t},emits:["rerenderStatusPanel"],setup(c,{emit:t}){const s=g(!0),o=g(!1),d=g(!1),f=g(!1),n=O({}),a=O({}),i=g(!0);R();const k=N("create-notification"),S=N("formatTime"),x=g(!1),p=O({default:{type:"default",color:"pf-u-default-color-200",notherColor:"pf-m-cyan",icon:"fas fa-info-circle"},info:{type:"default",color:"pf-u-default-color-200",notherColor:"pf-m-cyan",icon:"fas fa-info-circle"},warn:{type:"warning",color:"pf-u-warning-color-200",notherColor:"pf-m-orange",icon:"fas fa-exclamation-triangle"},error:{type:"danger",color:"pf-u-danger-color-200",notherColor:"pf-m-red",icon:"fas fa-exclamation-circle"}});F(()=>{M(),w()});function w(){E.get("/api/activitylogs/device-stats/"+c.model.id).then(C=>{Object.assign(a,C.data),i.value=!1}).catch(C=>{k({type:"danger",title:"Error",message:C.response.data.message})})}function M(){E.get("/api/activitylogs/last5/"+c.model.id).then(C=>{Object.assign(n,C.data),i.value=!1}).catch(C=>{k({type:"danger",title:"Error",message:C.response.data.message})})}function b(){s.value=!s.value}function A(){x.value=!0}function q(C){E.get("/api/activitylogs/clear-logs/"+c.model.id).then(_o=>{k({type:"success",title:"Success",message:"Logs cleared successfully."}),x.value=!1,M(),w(),t("rerenderStatusPanel")})}return{allConfigsTooptip:f,badConfigsTooptip:d,clearLogs:q,clearAllLogsModal:A,formatTime:S,goodConfigsTooptip:o,isHiddenNotifications:s,logLookup:p,notificationResults:n,notificationStats:a,showClearModal:x,toggleNotifications:b}}},vt={class:"pf-c-card"},gt={class:"pf-c-card__body"},wt={class:"pf-l-grid pf-m-all-6-col-on-sm pf-m-all-3-col-on-lg pf-m-gutter"},bt={class:"pf-l-grid__item"},xt={class:"pf-l-flex pf-m-space-items-sm"},yt={class:"pf-l-flex pf-m-column pf-m-space-items-none pf-m-flex-1"},ht={class:"pf-l-grid__item"},Dt={class:"pf-l-flex pf-m-space-items-sm"},kt={class:"pf-l-flex pf-m-column pf-m-space-items-none pf-m-flex-1"},Ct={class:"pf-l-grid__item"},St={class:"pf-l-flex pf-m-space-items-sm"},Tt={class:"pf-l-flex pf-m-column pf-m-space-items-none pf-m-flex-1"},Lt={class:"pf-l-flex__item"},Mt={class:"pf-l-grid__item"},Nt={class:"pf-l-flex pf-m-space-items-sm"},Vt={class:"pf-l-flex pf-m-column pf-m-space-items-none pf-m-flex-1"},Ot={key:0,class:"pf-l-flex__item"},Pt={class:"pf-c-notification-drawer"},jt={class:"pf-c-notification-drawer__body"},Ft={class:"pf-c-notification-drawer__group pf-m-expanded"},At=["disabled"],qt={class:"pf-c-notification-drawer__group-toggle-title"},Et={class:"pf-l-flex"},Rt={class:"pf-c-notification-drawer__group-toggle-title"},It={class:"pf-l-flex pf-m-space-items-sm"},zt={class:"pf-l-flex__item pf-m-spacer-md"},$t={key:0},Bt={key:0},Kt={class:"pf-c-label__content"},Ht={class:"pf-c-label__icon"},Wt={key:0,class:"pf-c-notification-drawer__group-toggle-icon",alt:"view recent",title:"view recent"},Ut={key:0,class:"pf-c-notification-drawer__list"},Gt={class:"pf-c-notification-drawer__list-item-header"},Jt={class:"pf-c-notification-drawer__list-item-action pf-u-font-size-sm pf-u-disabled-color-100"},Qt={class:"pf-c-notification-drawer__list-item-description"},Yt={class:"pf-c-notification-drawer__list-item pf-m-hoverable",tabindex:"0"},Xt={class:"pf-l-grid pf-m-gutter"},Zt={class:"pf-l-grid__item pf-m-2-col"},eo={class:"pf-l-grid__item pf-m-2-col"};function to(c,t,s,o,d,f){const n=u("router-link"),a=u("modal-clear-all-device-logs");return l(),r("div",vt,[t[26]||(t[26]=e("div",{class:"pf-c-card__header"},[e("h2",{class:"pf-c-title pf-m-xl"},"Config Status")],-1)),e("div",gt,[e("div",wt,[e("div",bt,[e("div",xt,[t[13]||(t[13]=e("div",{class:"pf-l-flex__item"},[e("i",{class:"fas fa-check-circle pf-u-success-color-100","aria-hidden":"true"})],-1)),e("div",yt,[m(n,{class:"alink",to:{path:"/device/view/configs/"+s.model.id,query:{id:s.model.id,devicename:s.model.device_name,status:1}},onMouseover:t[0]||(t[0]=i=>o.goodConfigsTooptip=!0),onMouseleave:t[1]||(t[1]=i=>o.goodConfigsTooptip=!1)},{default:h(()=>[y(_(s.model.config_good_count),1)]),_:1},8,["to"]),t[12]||(t[12]=e("div",{class:"pf-l-flex__item"},[e("span",{class:"pf-u-color-400"},"Good Configs")],-1))])])]),e("div",ht,[e("div",Dt,[t[15]||(t[15]=e("div",{class:"pf-l-flex__item"},[e("i",{class:"fa fa-exclamation-triangle pf-u-warning-color-100","aria-hidden":"true"})],-1)),e("div",kt,[m(n,{class:"alink",to:{path:"/device/view/configs/"+s.model.id,query:{id:s.model.id,devicename:s.model.device_name,status:2}},onMouseover:t[2]||(t[2]=i=>o.goodConfigsTooptip=!0),onMouseleave:t[3]||(t[3]=i=>o.goodConfigsTooptip=!1)},{default:h(()=>[y(_(s.model.config_unknown_count),1)]),_:1},8,["to"]),t[14]||(t[14]=e("div",{class:"pf-l-flex__item"},[e("span",{class:"pf-u-color-400"},"Unknown Configs")],-1))])])]),e("div",Ct,[e("div",St,[t[17]||(t[17]=e("div",{class:"pf-l-flex__item"},[e("i",{class:"fas fa-exclamation-circle pf-u-danger-color-100","aria-hidden":"true"})],-1)),e("div",Tt,[e("div",Lt,[m(n,{to:{path:"/device/view/configs/"+s.model.id,query:{id:s.model.id,devicename:s.model.device_name,status:0}},onMouseover:t[4]||(t[4]=i=>o.badConfigsTooptip=!0),onMouseleave:t[5]||(t[5]=i=>o.badConfigsTooptip=!1)},{default:h(()=>[y(_(s.model.config_bad_count),1)]),_:1},8,["to"])]),t[16]||(t[16]=e("div",{class:"pf-l-flex__item"},[e("span",{class:"pf-u-color-400"},"Failed Configs")],-1))])])]),e("div",Mt,[e("div",Nt,[t[19]||(t[19]=e("div",{class:"pf-l-flex__item"},[e("i",{class:"fas fa-check-circle pf-u-success-color-100","aria-hidden":"true"})],-1)),e("div",Vt,[s.model.last_config?(l(),r("div",Ot,[m(n,{to:{path:"/device/view/configs/"+s.model.id,query:{id:s.model.id,devicename:s.model.device_name,status:"all"}},append:"",onMouseover:t[6]||(t[6]=i=>o.allConfigsTooptip=!0),onMouseleave:t[7]||(t[7]=i=>o.allConfigsTooptip=!1)},{default:h(()=>[y(_(o.formatTime(s.model.last_config.created_at)),1)]),_:1},8,["to"])])):v("",!0),t[18]||(t[18]=e("div",{class:"pf-l-flex__item"},[e("span",{class:"pf-u-color-400"},"Last Download")],-1))])])])])]),t[27]||(t[27]=e("hr",{class:"pf-c-divider"},null,-1)),e("div",Pt,[e("div",jt,[e("section",Ft,[e("button",{class:"pf-c-notification-drawer__group-toggle","aria-expanded":"true",onClick:t[8]||(t[8]=(...i)=>o.toggleNotifications&&o.toggleNotifications(...i)),disabled:!o.notificationResults},[e("div",qt,[e("div",Et,[e("div",Rt,[e("div",It,[e("div",zt,[e("span",null,[t[20]||(t[20]=y(" Notifications ")),o.notificationResults?v("",!0):(l(),r("span",$t,"clear"))])]),o.notificationStats?(l(),r("div",Bt,[(l(!0),r(P,null,j(o.notificationStats,i=>(l(),r("span",{class:D(["pf-c-label",o.logLookup[i.log_name].notherColor]),key:i.total},[e("span",Kt,[e("span",Ht,[e("i",{class:D(["fas fa-fw",o.logLookup[i.log_name].icon]),"aria-hidden":"true"},null,2)]),y(" "+_(i.total),1)])],2))),128))])):v("",!0)])])])]),o.notificationResults?(l(),r("span",Wt,t[21]||(t[21]=[e("i",{class:"fas fa-angle-right","aria-hidden":"true"},null,-1)]))):v("",!0)],8,At),!o.isHiddenNotifications&&!0?(l(),r("ul",Ut,[(l(!0),r(P,null,j(o.notificationResults,i=>(l(),r("li",{class:D(["pf-c-notification-drawer__list-item pf-m-hoverable","pf-m-"+o.logLookup[i.log_name].type]),tabindex:"0",key:i.id},[e("div",Gt,[t[23]||(t[23]=e("span",{class:"pf-c-notification-drawer__list-item-header-icon"},[e("i",{class:"fas fa-exclamation-circle","aria-hidden":"true"})],-1)),e("h2",{class:D(["pf-c-notification-drawer__list-item-header-title",o.logLookup[i.log_name].color])},[t[22]||(t[22]=e("span",{class:"pf-screen-reader"},"Danger notification:",-1)),y(" "+_(i.event_type.charAt(0).toUpperCase()+i.event_type.slice(1)),1)],2)]),e("div",Jt,_(o.formatTime(i.created_at)),1),e("div",Qt,_(i.description),1)],2))),128)),e("li",Yt,[e("div",Xt,[t[25]||(t[25]=e("div",{class:"pf-l-grid__item pf-m-8-col"},null,-1)),e("div",Zt,[m(n,{type:"button",to:{path:"/device/view/eventlog/"+s.model.id,query:{id:s.model.id,devicename:s.model.device_name}},class:"pf-c-button pf-m-secondary pf-m-small"},{default:h(()=>t[24]||(t[24]=[y(" View All ")])),_:1},8,["to"])]),e("div",eo,[e("button",{onClick:t[9]||(t[9]=i=>o.clearAllLogsModal()),class:"pf-c-button pf-m-secondary pf-m-danger pf-m-small"}," Clear All ")])])])])):v("",!0)])])]),o.showClearModal?(l(),T(a,{key:0,editid:s.model.id,onCloseModal:t[10]||(t[10]=i=>o.showClearModal=!1),onConfirmClear:t[11]||(t[11]=i=>o.clearLogs(i))},null,8,["editid"])):v("",!0)])}const oo=L(ut,[["render",to]]),so={components:{PageHeader:G,DevicesBreadcrumbs:H,DeviceViewDeviceDetails:$e,DeviceViewStatusPanel:oo,DeviceViewLatestDownloads:et,DeviceViewActionsMenu:ge,LoadingSpinner:U,SideDrawer:J,DevicesForm:W},setup(){const c=g("Device View"),t=g("Device details dashboard"),s=R(),o=N("create-notification"),d=O({editid:s.params.id,pagename:"Devices",pagedesc:"All devices",pagenamesingle:"Device",modelName:"devices",openDrawerState:!1,drawerOuterWidth:"pf-m-width-75-on-xl pf-m-width-100 ",showDeleteModal:!1,sideDrawerComponentKey:1,pageOptionsState:{page:1,per_page:10},modelObject:{device_name:"",device_ip:"",device_vendor:"",device_model:"",device_category_id:"",device_tags:"",device_username:"",device_password:"",device_template:"",device_main_prompt:""}}),{errors:f,model:n,getModel:a,isLoading:i}=Q(d.modelName,d.modelObject),{isLoading:k,openDrawer:S,closeDrawerState:x}=Y(d,d.modelName,d.modelObject),p=g(1);F(()=>{a(d.editid)});function w(q){o({type:"success",message:q,duration:3}),a(d.editid),d.openDrawerState=!1}function M(){a(d.editid)}function b(){x()}function A(){p.value++}return{closeDrawer:b,closeDrawerState:x,downloadFinished:M,errors:f,formLoading:k,formSubmittedDeviceView:w,isLoading:i,model:n,openDrawer:S,pagedesc:t,pagename:c,viewstate:d,statusPanelComponentKey:p,rerenderStatusPanel:A}}},io={class:"pf-c-page__main",tabindex:"-1"},no={class:"pf-c-page__main-section pf-m-no-padding"},ao={class:"pf-c-drawer__main"},lo={class:"pf-c-drawer__content pf-m-no-background"},co={class:"pf-c-drawer__body pf-m-padding"},ro={key:0,class:"pf-l-grid pf-m-gutter"},fo={class:"pf-l-grid__item pf-m-12-col pf-m-3-col-on-md"},po={class:"pf-l-grid__item pf-m-12-col pf-m-6-col-on-md"};function mo(c,t,s,o,d,f){const n=u("devices-breadcrumbs"),a=u("page-header"),i=u("loading-spinner"),k=u("device-view-device-details"),S=u("device-view-status-panel"),x=u("device-view-latest-downloads"),p=u("device-view-actions-menu"),w=u("devices-form"),M=u("side-drawer");return l(),r("main",io,[m(a,{pagename:o.pagename},{breadcrumbs:h(()=>[m(n,{devicename:o.model.device_name,deviceId:o.model.id},null,8,["devicename","deviceId"])]),_:1},8,["pagename"]),t[6]||(t[6]=e("div",{class:"pf-c-divider",role:"separator"},null,-1)),e("section",no,[e("div",{class:D(["pf-c-drawer",{"pf-m-expanded":o.viewstate.openDrawerState}])},[e("div",ao,[e("div",lo,[e("div",co,[m(i,{showSpinner:o.isLoading},null,8,["showSpinner"]),o.isLoading?v("",!0):(l(),r("div",ro,[e("div",fo,[m(k,{model:o.model,onOpenDrawer:t[0]||(t[0]=b=>o.openDrawer(b))},null,8,["model"])]),e("div",po,[(l(),T(S,{model:o.model,key:o.statusPanelComponentKey,onRerenderStatusPanel:o.rerenderStatusPanel},null,8,["model","onRerenderStatusPanel"])),m(x,{model:o.model},null,8,["model"])]),m(p,{class:"pf-l-grid__item pf-m-12-col pf-m-3-col-on-md",model:o.model,onOpenDrawer:t[1]||(t[1]=b=>o.openDrawer(b)),onDownloadFinished:t[2]||(t[2]=b=>o.downloadFinished())},null,8,["model"])]))])]),(l(),T(M,{pagename:o.viewstate.pagenamesingle,drawerState:o.viewstate.openDrawerState,outerWidth:o.viewstate.drawerOuterWidth,editid:o.viewstate.editid,isClone:o.viewstate.isClone,onCloseDrawer:t[5]||(t[5]=b=>o.closeDrawer()),key:o.viewstate.sideDrawerComponentKey},{form:h(()=>[(l(),T(w,{viewstate:o.viewstate,onCloseDrawer:t[3]||(t[3]=b=>o.closeDrawer()),onFormsubmitted:t[4]||(t[4]=b=>o.formSubmittedDeviceView(b)),key:o.viewstate.sideDrawerComponentKey},null,8,["viewstate"]))]),_:1},8,["pagename","drawerState","outerWidth","editid","isClone"]))])],2)])])}const To=L(so,[["render",mo]]);export{To as default};
