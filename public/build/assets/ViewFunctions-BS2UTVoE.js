import{a0 as S,E as y,Z as E,N as d}from"./app-DPEN0t_k.js";function N(t,f){const o=S({}),p=S({}),r=y(!0),l=y(t),n=E("create-notification"),a=y(""),m=async(e,s,c,D,b)=>{let C=e||1,O=s||10,_=c||"",w=D||"",P=b||"";const $="?page="+C+"&perPage="+O+"&filter="+_+"&sortCol="+w+"&sortOrd="+P;d.get("/api/"+l.value+"/"+$,{}).then(u=>{Object.assign(p,u.data),r.value=!1}).catch(u=>{a.status=u.response.status,a.message=u.response.data.message,n({type:"danger",title:"Error",message:u.response.data.message})})},i=async()=>{Object.assign(o,f)};return{errors:a,model:o,models:p,clearModel:i,getModel:async e=>{if(e===0){i(),r.value=!1;return}a.value="";try{let s=await d.get(`/api/${l.value+"/"+e}`);Object.assign(o,s.data),t==="devices"&&(o.device_vendor=o.vendor[0].id),r.value=!1}catch(s){s.response.status===422?a.value=s.response.data.errors:(r.value=!1,a.status=s.response.status,a.message=s.response.data.message,n({type:"danger",title:"Error: "+s.response.status,message:s.response.data.message}))}},getModelClone:async e=>{if(e===0){i(),r.value=!1;return}a.value="";try{let s=await d.get(`/api/${l.value+"/"+e}`);Object.assign(o,s.data),t==="devices"&&(o.device_name=s.data.device_name+"-clone",o.device_ip=s.data.device_ip+"-clone"),r.value=!1}catch(s){s.response.status===422?a.value=s.response.data.errors:(r.value=!1,a.status=s.response.status,a.message=s.response.data.message,n({type:"danger",title:"Error",message:s.response.data.message}))}},getModels:m,storeModel:async e=>{a.value="";try{await d.post("/api/"+l.value,e)}catch(s){s.response.status===422?a.value=s.response.data.errors:(a.status=s.response.status,a.message=s.response.data.message,n({type:"danger",title:"Error",message:s.response.data.message}))}},updateModel:async e=>{a.value="";try{await d.patch(`/api/${l.value+"/"+e.id}`,e)}catch(s){s.response.status===422?a.value=s.response.data.errors:n({type:"danger",title:"Error",message:s.response.data.message})}},destroyModel:async(e,s)=>{await d.delete(`/api/${l.value+"/"+e}`).then(c=>{n({type:"success",message:s+" deleted successfully",duration:3})}).catch(c=>{a.status=c.response.status,a.message=c.response.data.message,n({type:"danger",title:"Error",message:c.response.data.message})})},isLoading:r}}function L(t,f,o){const p=E("create-notification"),{models:r,getModels:l,destroyModel:n,isLoading:a}=N(f,o);function m(e){t.editid=e.id,t.isClone=!!e.isClone,t.openDrawerState=!t.openDrawerState}function i(){t.openDrawerState=!1}function M(e){t.editid=e,t.showDeleteModal=!0}function v(e){t.editid=e,t.showDeleteModal=!0}function g(e){Object.assign(t.pageOptionsState,e),l(e.page,e.per_page,e.filters,e.sortby,e.sortOrder)}function h(e){p({type:"success",message:e,duration:3}),g(t.pageOptionsState),t.openDrawerState=!1}return{models:r,isLoading:a,dataTablePageChanged:g,openDrawer:m,closeDrawerState:i,deleteRow:M,deleteManyRows:v,formSubmitted:h,confirmDelete:async e=>{t.showDeleteModal=!1,await n(e,t.pagenamesingle),g(t.pageOptionsState)},destroyModel:n}}export{N as a,L as u};
