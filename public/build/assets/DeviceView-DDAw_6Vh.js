import{u as Y}from"./index-D8A2K2Td.js";import{T,Z as j,E as u,G as q,s as y,o as i,c as r,a as t,$ as H,b as g,w as h,v as m,t as v,i as O,f as S,J as E,K as F,a0 as N,a1 as J,d as C,r as I,a2 as A,W,N as R,x as X,B as Q,C as Z,Y as U,a3 as K,a4 as z}from"./app-DPEN0t_k.js";import{D as $}from"./DeviceViewDeviceDetailsDescr-CBPqrZIA.js";import{D as ee}from"./DevicesBreadcrumbs-dYK4sAyT.js";import{D as te}from"./DeviceCategoryField-edxL3taj.js";import{M as oe,u as le}from"./MultiSelect-Cyjb2CdX.js";import{u as B,a as G}from"./ViewFunctions-BS2UTVoE.js";import{L as se}from"./LoadingSpinner-D-fKDd1c.js";import{P as ie}from"./PageHeader-exbGmhKH.js";import{S as ae}from"./SideDrawer-BBRDM8SO.js";/* empty css               */import"./CopyLogo-u_4xHkkV.js";const ne={props:{model:{type:Object,default:()=>({})}},components:{},setup(n,{emit:e}){const l=j("create-notification"),{toClipboard:o}=Y(),a=u(!1),p=u(null);q(()=>{s()});function s(){axios.get("/api/app-dir-path").then(_=>{a.value=_.data})}function c(){p.value="Downloading...",l({type:"success",title:"Download Started",message:"Download started for device "+n.model.device_name}),axios.post("/api/device/download-now",{device_id:n.model.id}).then(_=>{p.value="Queued...",l({type:"success",title:"Download Started",message:"Download job for "+n.model.device_name+" was pushed to the queue."}),f()}).catch(_=>{l({type:"danger",title:"Error",message:_.response.data.message})})}function f(){const _=setInterval(function(){axios.get("/api/tracked-jobs/"+n.model.id).then(d=>{p.value=d.data.data.status}),p.value==="finished"&&(l({type:"success",title:"Download Finished",message:"Download finished for device "+n.model.device_name}),clearInterval(_),setTimeout(()=>{p.value=null},3e3))},2e3)}function b(){axios.post("/api/device/purge-failed-configs",{device_id:n.model.id}).then(_=>{l({type:"success",title:"Purge Successful",message:"Purge successful for device "+n.model.device_name})}).catch(_=>{l({type:"danger",title:"Error",message:_.response.data.message})})}function w(_){try{o(_),l({type:"success",message:"Copied to clipboard!",duration:3})}catch(d){l({type:"danger",title:"Error",message:d.response})}}function x(_,d=!1){e("openDrawer",{id:_,isClone:d})}return{appDirPath:a,copyDebug:w,downloadNow:c,downloadStatus:p,openDrawer:x,purgeFailedConfigs:b}}},de={class:"pf-c-card"},re={class:"pf-c-menu"},ce={class:"pf-c-menu__content"},pe={class:"pf-c-menu__list"},fe={class:"pf-c-menu__list-item"},me={class:"pf-c-menu__list-item"},_e={class:"pf-c-menu__list-item"},ue={key:0,class:"pf-c-menu__list-item",style:{cursor:"auto"}},ve={class:"pf-c-menu__item"},ge={class:"pf-c-menu__item-main"},be={class:"pf-c-menu__item-icon"},we={key:0,class:"pf-c-spinner pf-m-md",role:"progressbar",viewBox:"0 0 100 100","aria-label":"Loading..."},ye={key:1,class:"fa fa-check-circle pf-u-success-color-100","aria-hidden":"true"},xe={key:2,class:"fa fa-exclamation-circle pf-u-danger-color-100","aria-hidden":"true"},he={class:"pf-c-menu__item-description pf-u-text-break-word",style:{"word-wrap":"normal"}},ke={class:"pf-c-menu__list-item"},Ce={class:"pf-c-menu__list-item"};function Ve(n,e,l,o,a,p){const s=y("router-link");return i(),r("div",null,[t("div",de,[e[11]||(e[11]=t("div",{class:"pf-c-card__title"},[t("h2",{class:"pf-c-title pf-m-xl"},"Common Actions")],-1)),t("div",re,[t("div",ce,[t("ul",pe,[t("li",fe,[t("button",{class:"pf-c-menu__item",type:"button",onClick:e[0]||(e[0]=c=>o.copyDebug("cd "+o.appDirPath+" && php artisan rconfig:download-device "+l.model.id+" -d"))},e[4]||(e[4]=[H('<span class="pf-c-menu__item-main"><span class="pf-c-menu__item-icon"><i class="fas fa-code" aria-hidden="true"></i></span><span class="pf-c-menu__item-text">Copy debug CLI command</span></span><span class="pf-c-menu__item-description pf-u-text-break-word">Copy command for CLI debug to clipboard</span>',2)]))]),t("li",me,[g(s,{to:{path:"/device/view/configs/"+l.model.id,query:{id:l.model.id,devicename:l.model.device_name,status:"all"}},class:"pf-c-menu__item",type:"button"},{default:h(()=>e[5]||(e[5]=[t("span",{class:"pf-c-menu__item-main"},[t("span",{class:"pf-c-menu__item-icon"},[t("i",{class:"pficon pf-icon-storage-domain","aria-hidden":"true"})]),t("span",{class:"pf-c-menu__item-text"},"View configuration downloads")],-1),t("span",{class:"pf-c-menu__item-description"},"View configuration files for this device",-1)])),_:1},8,["to"])]),t("li",_e,[t("button",{class:"pf-c-menu__item",onClick:e[1]||(e[1]=c=>o.downloadNow())},e[6]||(e[6]=[H('<span class="pf-c-menu__item-main"><span class="pf-c-menu__item-icon"><i class="pficon pf-icon-save" aria-hidden="true"></i></span><span class="pf-c-menu__item-text">Download now</span></span><span class="pf-c-menu__item-description pf-u-text-break-word" style="word-wrap:normal;">Start a download for this device</span>',2)]))]),o.downloadStatus?(i(),r("li",ue,[t("button",ve,[t("span",ge,[t("span",be,[o.downloadStatus!="The job finished, check configs and logs for details."?(i(),r("svg",we,e[7]||(e[7]=[t("circle",{class:"pf-c-spinner__path",cx:"50",cy:"50",r:"45",fill:"none"},null,-1)]))):m("",!0),o.downloadStatus==="The job finished, check configs and logs for details."?(i(),r("i",ye)):m("",!0),o.downloadStatus==="Failed"?(i(),r("i",xe)):m("",!0)]),e[8]||(e[8]=t("span",{class:"pf-c-menu__item-text"},"Download status",-1))]),t("span",he,v(o.downloadStatus),1)])])):m("",!0),t("li",ke,[t("button",{class:"pf-c-menu__item",onClick:e[2]||(e[2]=c=>o.openDrawer(l.model.id,!0))},e[9]||(e[9]=[H('<span class="pf-c-menu__item-main"><span class="pf-c-menu__item-icon"><i class="fas fa-copy" aria-hidden="true"></i></span><span class="pf-c-menu__item-text">Clone device</span></span><span class="pf-c-menu__item-description pf-u-text-break-word" style="word-wrap:normal;">Create a new device with similar configuration</span>',2)]))]),t("li",Ce,[t("button",{class:"pf-c-menu__item",onClick:e[3]||(e[3]=c=>o.purgeFailedConfigs())},e[10]||(e[10]=[H('<span class="pf-c-menu__item-main"><span class="pf-c-menu__item-icon"><i class="fas fa-trash" aria-hidden="true"></i></span><span class="pf-c-menu__item-text">Purge failed configs</span></span><span class="pf-c-menu__item-description pf-u-text-break-word" style="word-wrap:normal;">Purge all Failed Configs for this device</span>',2)]))])])])])])])}const Se=T(ne,[["render",Ve]]),De={props:{model:{type:Object,default:()=>({})}},emits:["openDrawer","deleteRow","pagechanged"],components:{DeviceViewDeviceDetailsDescr:$},setup(n,{emit:e}){const l=j("formatTime");function o(a,p=!1){e("openDrawer",{id:a,isClone:p})}return{openDrawer:o,formatTime:l}}},Te={class:"pf-c-card"},Le={class:"pf-c-card__body"},Oe={class:"pf-c-description-list pf-m-horizontal pf-m-vertical-on-md pf-m-horizontal-on-lg pf-m-vertical-on-xl pf-m-horizontal-on-2xl"},Ne={class:"pf-c-description-list__group"},Me={class:"pf-c-description-list__group"},Pe={class:"pf-c-description-list__group"},Ue={class:"pf-c-description-list__group"},Ee={class:"pf-l-flex pf-m-space-items-sm"},Fe={class:"pf-l-flex__item"},je={class:"pf-l-flex pf-m-column pf-m-space-items-none pf-m-flex-1"},qe={class:"pf-l-flex__item"},He={class:"pf-l-flex__item"},Ae={class:"pf-u-color-400"},Ie={class:"pf-c-description-list__group"},Re={class:"pf-c-description-list__group"},Ke={class:"pf-c-description-list__group"},Be={class:"pf-c-description-list__group"},ze={class:"pf-c-description-list__group"},We={class:"pf-c-description-list__group"},Ge={class:"pf-c-description-list__description"},Ye=["alt","title"],Je={class:"pf-c-card__footer",style:{"padding-top":"15px","padding-bottom":"15px","padding-left":"9px"}};function Xe(n,e,l,o,a,p){const s=y("device-view-device-details-descr");return i(),r("div",Te,[e[11]||(e[11]=t("div",{class:"pf-c-card__title"},[t("h2",{class:"pf-c-title pf-m-xl"},"Device Details")],-1)),t("div",Le,[t("dl",Oe,[t("div",Ne,[e[1]||(e[1]=t("dt",{class:"pf-c-description-list__term"},[t("span",{class:"pf-c-description-list__text"},"Device ID")],-1)),g(s,{text:l.model.id},null,8,["text"])]),t("div",Me,[e[2]||(e[2]=t("dt",{class:"pf-c-description-list__term"},[t("span",{class:"pf-c-description-list__text"},"Hostname")],-1)),g(s,{text:l.model.device_name},null,8,["text"])]),t("div",Pe,[e[3]||(e[3]=t("dt",{class:"pf-c-description-list__term"},[t("span",{class:"pf-c-description-list__text"},"IP Address")],-1)),g(s,{text:l.model.device_ip},null,8,["text"])]),t("div",Ue,[e[4]||(e[4]=t("dt",{class:"pf-c-description-list__term"},[t("span",{class:"pf-c-description-list__text"},"Status")],-1)),t("div",Ee,[t("div",Fe,[t("i",{class:O(l.model.status=="1"?"fa fa-check-circle pf-u-success-color-100 ":"fa fa-exclamation-triangle pf-u-warning-color-100")},null,2)]),t("div",je,[t("div",qe,v(l.model.status=="1"?"Online":"Unreachable"),1),t("div",He,[t("span",Ae,"Last seen: "+v(l.model.last_seen?o.formatTime(l.model.last_seen):"-"),1)])])])]),t("div",Ie,[e[5]||(e[5]=t("dt",{class:"pf-c-description-list__term"},[t("span",{class:"pf-c-description-list__text"},"Category")],-1)),l.model.category.length!=0?(i(),S(s,{key:0,text:l.model.category[0].categoryName},null,8,["text"])):m("",!0)]),t("div",Re,[e[6]||(e[6]=t("dt",{class:"pf-c-description-list__term"},[t("span",{class:"pf-c-description-list__text"},"Vendor")],-1)),g(s,{text:l.model.vendor[0].vendorName},null,8,["text"])]),t("div",Ke,[e[7]||(e[7]=t("dt",{class:"pf-c-description-list__term"},[t("span",{class:"pf-c-description-list__text"},"Model")],-1)),g(s,{text:l.model.device_model},null,8,["text"])]),t("div",Be,[e[8]||(e[8]=t("dt",{class:"pf-c-description-list__term"},[t("span",{class:"pf-c-description-list__text"},"Template")],-1)),l.model.template.length!=0?(i(),S(s,{key:0,text:l.model.template[0].templateName},null,8,["text"])):m("",!0)]),t("div",ze,[e[9]||(e[9]=t("dt",{class:"pf-c-description-list__term"},[t("span",{class:"pf-c-description-list__text"},"Created")],-1)),l.model.template.length!=0?(i(),S(s,{key:0,text:o.formatTime(l.model.created_at)},null,8,["text"])):m("",!0)]),t("div",We,[e[10]||(e[10]=t("dt",{class:"pf-c-description-list__term"},[t("span",{class:"pf-c-description-list__text"},"Tags")],-1)),t("dd",Ge,[(i(!0),r(E,null,F(l.model.tag,c=>(i(),r("div",{class:"pf-c-chip",key:c.id},[t("span",{class:"pf-c-chip__text",alt:c.tagDescription,title:c.tagDescription},v(c.tagname),9,Ye)]))),128))])])])]),e[12]||(e[12]=t("hr",{class:"pf-c-divider"},null,-1)),t("div",Je,[t("button",{class:"pf-c-button pf-m-link",style:{float:"right"},type:"button",onClick:e[0]||(e[0]=c=>o.openDrawer(l.model.id)),alt:"Edit",title:"Edit"},"Edit Settings")])])}const Qe=T(De,[["render",Xe]]),Ze={props:{model:{type:Object,default:()=>({})}},components:{},setup(n){const e=N({}),l=u(!0),o=j("formatTime");q(()=>{a()});function a(){axios.get("/api/configs/latest-by-deviceid/"+n.model.id).then(p=>{Object.assign(e,p.data),l.value=!1}).catch(p=>{console.log(p)})}return J(()=>{n.model.config_good_count&&a()}),{formatTime:o,isLoading:l,latestConfigs:e}}},$e={class:"pf-c-card",style:{"margin-top":"18px"}},et={class:"pf-c-table pf-m-compact pf-m-grid-lg",role:"grid"},tt={role:"rowgroup"},ot={lass:"pf-m-break-word",role:"columnheader","data-label":"Command"},lt={class:"pf-m-break-word",role:"cell","data-label":"Filename"},st={class:"pf-m-break-word",role:"cell","data-label":"Downloaded"},it={class:"pf-c-table__icon",role:"cell","data-label":"Status"},at={role:"cell","data-label":"Action"},nt={class:"pf-c-card__footer",style:{"padding-top":"15px","padding-bottom":"15px","padding-left":"9px"}};function dt(n,e,l,o,a,p){const s=y("router-link");return i(),r("div",$e,[e[3]||(e[3]=H('<div class="pf-c-toolbar"><div class="pf-c-toolbar__content"><div class="pf-c-toolbar__content-section pf-m-nowrap"><div class="pf-c-toolbar__group pf-m-toggle-group pf-m-show-on-xl"><h2 class="pf-c-title pf-m-xl">Latest downloads</h2></div></div></div></div>',1)),t("table",et,[e[1]||(e[1]=t("thead",null,[t("tr",{role:"row"},[t("th",{role:"columnheader",scope:"col"},"Command"),t("th",{role:"columnheader",scope:"col"},"Filename"),t("th",{role:"columnheader",scope:"col"},"Downloaded"),t("th",{class:"pf-c-table__icon",role:"columnheader",scope:"col"},"Status"),t("th",{role:"columnheader"})])],-1)),t("tbody",tt,[(i(!0),r(E,null,F(o.latestConfigs.data,c=>(i(),r("tr",{role:"row",key:c.id},[t("th",ot,v(c.command),1),t("td",lt,v(c.config_filename),1),t("td",st,v(o.formatTime(c.created_at)),1),t("td",it,[t("i",{class:O(c.download_status=="0"?"fa fa-exclamation-circle pf-u-danger-color-100":"")},null,2),t("i",{class:O(c.download_status=="1"?"fa fa-check-circle pf-u-success-color-100 ":"")},null,2),t("i",{class:O(c.download_status=="2"?"fa fa-exclamation-triangle pf-u-warning-color-100":"")},null,2),t("i",{class:O(c.download_status===null?"fa fa-exclamation-triangle pf-u-warning-color-100":"")},null,2)]),t("td",at,[g(s,{type:"button",class:"pf-c-button pf-m-link",to:"/device/view/configs/view-config/"+c.id},{default:h(()=>e[0]||(e[0]=[C("View")])),_:2},1032,["to"])])]))),128))])]),t("div",nt,[g(s,{type:"button",class:"pf-c-button pf-m-link",style:{float:"right"},to:{path:"/device/view/configs/"+l.model.id,query:{id:l.model.id,devicename:l.model.device_name,status:"all"}}},{default:h(()=>e[2]||(e[2]=[C("View all")])),_:1},8,["to"])])])}const rt=T(Ze,[["render",dt]]),ct={props:{},setup(n){return{}}},pt={class:"pf-c-tooltip pf-m-top-left",role:"tooltip",style:{"z-index":"999",position:"absolute",top:"26%"}},ft={class:"pf-c-tooltip__content",id:"tooltip-top-content"};function mt(n,e,l,o,a,p){return i(),r("div",pt,[e[0]||(e[0]=t("div",{class:"pf-c-tooltip__arrow"},null,-1)),t("div",ft,[I(n.$slots,"default")])])}const _t=T(ct,[["render",mt]]),ut={props:{editid:{type:[Number,Array,String,Object],required:!0}},setup(n,{emit:e}){const l=u(null);A(l,p=>o());function o(){e("closeModal")}function a(){e("confirmClear",n.editid)}return{clickOutsidetargetModal:l,close:o,confirmClear:a}}},vt={class:"pf-c-backdrop"},gt={class:"pf-l-bullseye"},bt={class:"pf-c-modal-box pf-m-sm pf-m-warning",role:"dialog",ref:"clickOutsidetargetModal"},wt={class:"pf-c-modal-box__header"},yt={class:"pf-c-modal-box__title",id:"modal-title-modal-basic-example-modal"},xt={class:"pf-c-modal-box__footer"};function ht(n,e,l,o,a,p){return i(),r("div",vt,[t("div",gt,[t("div",bt,[t("button",{class:"pf-c-button pf-m-plain",type:"button","aria-label":"Close",onClick:e[0]||(e[0]=(...s)=>o.close&&o.close(...s))},e[3]||(e[3]=[t("i",{class:"fas fa-times","aria-hidden":"true"},null,-1)])),t("header",wt,[t("h1",yt," Clear device logs for "+v(l.editid)+"? ",1)]),e[4]||(e[4]=t("div",{class:"pf-c-modal-box__body",id:"modal-description"},[t("p",null,"Are you absolutely sure you want to clear all logs device? You will not be able to retrieve cleared logs after this operation.")],-1)),t("footer",xt,[t("button",{class:"pf-c-button pf-m-primary pf-m-small",type:"button",onClick:e[1]||(e[1]=s=>o.confirmClear())}," Confirm "),t("button",{class:"pf-c-button pf-m-link",type:"button",onClick:e[2]||(e[2]=s=>o.close())}," Cancel ")])],512)])])}const kt=T(ut,[["render",ht]]),Ct={props:{model:{type:Object,default:()=>({})}},components:{Tooltip:_t,ModalClearAllDeviceLogs:kt},emits:["rerenderStatusPanel"],setup(n,{emit:e}){const l=u(!0),o=u(!1),a=u(!1),p=u(!1),s=N({}),c=N({}),f=u(!0);W();const b=j("create-notification"),w=j("formatTime"),x=u(!1),_=N({default:{type:"default",color:"pf-u-default-color-200",notherColor:"pf-m-cyan",icon:"fas fa-info-circle"},info:{type:"default",color:"pf-u-default-color-200",notherColor:"pf-m-cyan",icon:"fas fa-info-circle"},warn:{type:"warning",color:"pf-u-warning-color-200",notherColor:"pf-m-orange",icon:"fas fa-exclamation-triangle"},error:{type:"danger",color:"pf-u-danger-color-200",notherColor:"pf-m-red",icon:"fas fa-exclamation-circle"}});q(()=>{D(),d()});function d(){R.get("/api/activitylogs/device-stats/"+n.model.id).then(L=>{Object.assign(c,L.data),f.value=!1}).catch(L=>{b({type:"danger",title:"Error",message:L.response.data.message})})}function D(){R.get("/api/activitylogs/last5/"+n.model.id).then(L=>{Object.assign(s,L.data),f.value=!1}).catch(L=>{b({type:"danger",title:"Error",message:L.response.data.message})})}function V(){l.value=!l.value}function M(){x.value=!0}function k(L){R.get("/api/activitylogs/clear-logs/"+n.model.id).then(P=>{b({type:"success",title:"Success",message:"Logs cleared successfully."}),x.value=!1,D(),d(),e("rerenderStatusPanel")})}return{allConfigsTooptip:p,badConfigsTooptip:a,clearLogs:k,clearAllLogsModal:M,formatTime:w,goodConfigsTooptip:o,isHiddenNotifications:l,logLookup:_,notificationResults:s,notificationStats:c,showClearModal:x,toggleNotifications:V}}},Vt={class:"pf-c-card"},St={class:"pf-c-card__body"},Dt={class:"pf-l-grid pf-m-all-6-col-on-sm pf-m-all-3-col-on-lg pf-m-gutter"},Tt={class:"pf-l-grid__item"},Lt={class:"pf-l-flex pf-m-space-items-sm"},Ot={class:"pf-l-flex pf-m-column pf-m-space-items-none pf-m-flex-1"},Nt={class:"pf-l-grid__item"},Mt={class:"pf-l-flex pf-m-space-items-sm"},Pt={class:"pf-l-flex pf-m-column pf-m-space-items-none pf-m-flex-1"},Ut={class:"pf-l-grid__item"},Et={class:"pf-l-flex pf-m-space-items-sm"},Ft={class:"pf-l-flex pf-m-column pf-m-space-items-none pf-m-flex-1"},jt={class:"pf-l-flex__item"},qt={class:"pf-l-grid__item"},Ht={class:"pf-l-flex pf-m-space-items-sm"},At={class:"pf-l-flex pf-m-column pf-m-space-items-none pf-m-flex-1"},It={key:0,class:"pf-l-flex__item"},Rt={class:"pf-c-notification-drawer"},Kt={class:"pf-c-notification-drawer__body"},Bt={class:"pf-c-notification-drawer__group pf-m-expanded"},zt=["disabled"],Wt={class:"pf-c-notification-drawer__group-toggle-title"},Gt={class:"pf-l-flex"},Yt={class:"pf-c-notification-drawer__group-toggle-title"},Jt={class:"pf-l-flex pf-m-space-items-sm"},Xt={class:"pf-l-flex__item pf-m-spacer-md"},Qt={key:0},Zt={key:0},$t={class:"pf-c-label__content"},eo={class:"pf-c-label__icon"},to={key:0,class:"pf-c-notification-drawer__group-toggle-icon",alt:"view recent",title:"view recent"},oo={key:0,class:"pf-c-notification-drawer__list"},lo={class:"pf-c-notification-drawer__list-item-header"},so={class:"pf-c-notification-drawer__list-item-action pf-u-font-size-sm pf-u-disabled-color-100"},io={class:"pf-c-notification-drawer__list-item-description"},ao={class:"pf-c-notification-drawer__list-item pf-m-hoverable",tabindex:"0"},no={class:"pf-l-grid pf-m-gutter"},ro={class:"pf-l-grid__item pf-m-2-col"},co={class:"pf-l-grid__item pf-m-2-col"};function po(n,e,l,o,a,p){const s=y("router-link"),c=y("modal-clear-all-device-logs");return i(),r("div",Vt,[e[26]||(e[26]=t("div",{class:"pf-c-card__header"},[t("h2",{class:"pf-c-title pf-m-xl"},"Config Status")],-1)),t("div",St,[t("div",Dt,[t("div",Tt,[t("div",Lt,[e[13]||(e[13]=t("div",{class:"pf-l-flex__item"},[t("i",{class:"fas fa-check-circle pf-u-success-color-100","aria-hidden":"true"})],-1)),t("div",Ot,[g(s,{class:"alink",to:{path:"/device/view/configs/"+l.model.id,query:{id:l.model.id,devicename:l.model.device_name,status:1}},onMouseover:e[0]||(e[0]=f=>o.goodConfigsTooptip=!0),onMouseleave:e[1]||(e[1]=f=>o.goodConfigsTooptip=!1)},{default:h(()=>[C(v(l.model.config_good_count),1)]),_:1},8,["to"]),e[12]||(e[12]=t("div",{class:"pf-l-flex__item"},[t("span",{class:"pf-u-color-400"},"Good Configs")],-1))])])]),t("div",Nt,[t("div",Mt,[e[15]||(e[15]=t("div",{class:"pf-l-flex__item"},[t("i",{class:"fa fa-exclamation-triangle pf-u-warning-color-100","aria-hidden":"true"})],-1)),t("div",Pt,[g(s,{class:"alink",to:{path:"/device/view/configs/"+l.model.id,query:{id:l.model.id,devicename:l.model.device_name,status:2}},onMouseover:e[2]||(e[2]=f=>o.goodConfigsTooptip=!0),onMouseleave:e[3]||(e[3]=f=>o.goodConfigsTooptip=!1)},{default:h(()=>[C(v(l.model.config_unknown_count),1)]),_:1},8,["to"]),e[14]||(e[14]=t("div",{class:"pf-l-flex__item"},[t("span",{class:"pf-u-color-400"},"Unknown Configs")],-1))])])]),t("div",Ut,[t("div",Et,[e[17]||(e[17]=t("div",{class:"pf-l-flex__item"},[t("i",{class:"fas fa-exclamation-circle pf-u-danger-color-100","aria-hidden":"true"})],-1)),t("div",Ft,[t("div",jt,[g(s,{to:{path:"/device/view/configs/"+l.model.id,query:{id:l.model.id,devicename:l.model.device_name,status:0}},onMouseover:e[4]||(e[4]=f=>o.badConfigsTooptip=!0),onMouseleave:e[5]||(e[5]=f=>o.badConfigsTooptip=!1)},{default:h(()=>[C(v(l.model.config_bad_count),1)]),_:1},8,["to"])]),e[16]||(e[16]=t("div",{class:"pf-l-flex__item"},[t("span",{class:"pf-u-color-400"},"Failed Configs")],-1))])])]),t("div",qt,[t("div",Ht,[e[19]||(e[19]=t("div",{class:"pf-l-flex__item"},[t("i",{class:"fas fa-check-circle pf-u-success-color-100","aria-hidden":"true"})],-1)),t("div",At,[l.model.last_config?(i(),r("div",It,[g(s,{to:{path:"/device/view/configs/"+l.model.id,query:{id:l.model.id,devicename:l.model.device_name,status:"all"}},append:"",onMouseover:e[6]||(e[6]=f=>o.allConfigsTooptip=!0),onMouseleave:e[7]||(e[7]=f=>o.allConfigsTooptip=!1)},{default:h(()=>[C(v(o.formatTime(l.model.last_config.created_at)),1)]),_:1},8,["to"])])):m("",!0),e[18]||(e[18]=t("div",{class:"pf-l-flex__item"},[t("span",{class:"pf-u-color-400"},"Last Download")],-1))])])])])]),e[27]||(e[27]=t("hr",{class:"pf-c-divider"},null,-1)),t("div",Rt,[t("div",Kt,[t("section",Bt,[t("button",{class:"pf-c-notification-drawer__group-toggle","aria-expanded":"true",onClick:e[8]||(e[8]=(...f)=>o.toggleNotifications&&o.toggleNotifications(...f)),disabled:!o.notificationResults},[t("div",Wt,[t("div",Gt,[t("div",Yt,[t("div",Jt,[t("div",Xt,[t("span",null,[e[20]||(e[20]=C(" Notifications ")),o.notificationResults?m("",!0):(i(),r("span",Qt,"clear"))])]),o.notificationStats?(i(),r("div",Zt,[(i(!0),r(E,null,F(o.notificationStats,f=>(i(),r("span",{class:O(["pf-c-label",o.logLookup[f.log_name].notherColor]),key:f.total},[t("span",$t,[t("span",eo,[t("i",{class:O(["fas fa-fw",o.logLookup[f.log_name].icon]),"aria-hidden":"true"},null,2)]),C(" "+v(f.total),1)])],2))),128))])):m("",!0)])])])]),o.notificationResults?(i(),r("span",to,e[21]||(e[21]=[t("i",{class:"fas fa-angle-right","aria-hidden":"true"},null,-1)]))):m("",!0)],8,zt),!o.isHiddenNotifications&&!0?(i(),r("ul",oo,[(i(!0),r(E,null,F(o.notificationResults,f=>(i(),r("li",{class:O(["pf-c-notification-drawer__list-item pf-m-hoverable","pf-m-"+o.logLookup[f.log_name].type]),tabindex:"0",key:f.id},[t("div",lo,[e[23]||(e[23]=t("span",{class:"pf-c-notification-drawer__list-item-header-icon"},[t("i",{class:"fas fa-exclamation-circle","aria-hidden":"true"})],-1)),t("h2",{class:O(["pf-c-notification-drawer__list-item-header-title",o.logLookup[f.log_name].color])},[e[22]||(e[22]=t("span",{class:"pf-screen-reader"},"Danger notification:",-1)),C(" "+v(f.event_type.charAt(0).toUpperCase()+f.event_type.slice(1)),1)],2)]),t("div",so,v(o.formatTime(f.created_at)),1),t("div",io,v(f.description),1)],2))),128)),t("li",ao,[t("div",no,[e[25]||(e[25]=t("div",{class:"pf-l-grid__item pf-m-8-col"},null,-1)),t("div",ro,[g(s,{type:"button",to:{path:"/device/view/eventlog/"+l.model.id,query:{id:l.model.id,devicename:l.model.device_name}},class:"pf-c-button pf-m-secondary pf-m-small"},{default:h(()=>e[24]||(e[24]=[C(" View All ")])),_:1},8,["to"])]),t("div",co,[t("button",{onClick:e[9]||(e[9]=f=>o.clearAllLogsModal()),class:"pf-c-button pf-m-secondary pf-m-danger pf-m-small"}," Clear All ")])])])])):m("",!0)])])]),o.showClearModal?(i(),S(c,{key:0,editid:l.model.id,onCloseModal:e[10]||(e[10]=f=>o.showClearModal=!1),onConfirmClear:e[11]||(e[11]=f=>o.clearLogs(f))},null,8,["editid"])):m("",!0)])}const fo=T(Ct,[["render",po]]),mo={props:{modelValue:{type:String},errors:""},setup(n,{emit:e}){const l=u(!1),o=u(null),a=u(""),p=u([]),s=u(!1),c=u([]),f=u("");A(o,k=>M()),q(()=>{x()});const b=X(()=>{if(a.value==="")return p.value;let k=0;return p.value.filter(L=>{if(L.toLowerCase().includes(a.value.toLowerCase())&&k<10)return k++,L})});function w(){_(a.value),l.value=!0}function x(){s.value=!0,axios.get("/api/get-device-models").then(k=>{p.value=k.data.data,c.value=p,s.value=!1}).catch(k=>{console.log(k.response.data.errors)})}function _(k){a.value=k,e("update:modelValue",k),M()}function d(){l.value===!1&&x(),l.value=!l.value}function D(){a.value="",l.value=!1}function V(){M()}function M(){l.value=!1}return n.modelValue?a.value=n.modelValue:a.value="",{searchTerm:a,clickOutsidetarget:o,selected:f,makeSelection:_,toggleSelect:d,showSelect:l,models:p,results:c,searchModels:b,onChange:w,clearall:D,isLoading:s,onEsc:V}}},_o={class:"pf-c-form__group"},uo={id:"select-single-typeahead-expanded-label",hidden:""},vo={class:"pf-c-select__toggle pf-m-typeahead"},go={class:"pf-c-select__toggle-wrapper"},bo={key:0,class:"pf-c-select__menu multi-select-dropdown-overflow","aria-labelledby":"select-single-typeahead-expanded-label",role:"listbox"},wo={key:0},yo=["onClick"],xo={key:0,class:"pf-c-select__menu-item-icon"},ho={key:1,role:"presentation",class:"pf-c-select__list-item pf-m-loading"},ko={key:0,class:"pf-c-form__helper-text pf-m-error",id:"device_model_error","aria-live":"polite"};function Co(n,e,l,o,a,p){return i(),r("div",_o,[e[9]||(e[9]=t("div",{class:"pf-c-form__group-label"},[t("label",{class:"pf-c-form__label",for:"device_category"},[t("span",{class:"pf-c-form__label-text"},"Model"),t("span",{class:"pf-c-form__label-required","aria-hidden":"true"},"*")])],-1)),t("div",{class:O(["pf-c-select pf-m-expanded",l.errors.device_model?"pf-m-invalid":""]),ref:"clickOutsidetarget"},[t("span",uo,v(o.searchTerm?o.searchTerm:"Select model"),1),t("div",vo,[t("div",go,[Q(t("input",{class:"pf-c-form-control pf-c-select__toggle-typeahead",type:"text",id:"select-single-typeahead-expanded-typeahead","aria-label":"Type to filter",placeholder:"Select a model or type to create a new one...","onUpdate:modelValue":e[0]||(e[0]=s=>o.searchTerm=s),onInput:e[1]||(e[1]=(...s)=>o.onChange&&o.onChange(...s)),autocomplete:"off"},null,544),[[Z,o.searchTerm]])]),t("button",{tabindex:"-1",class:"pf-c-button pf-m-plain pf-c-select__toggle-clear",type:"button","aria-label":"Clear all",onClick:e[2]||(e[2]=U((...s)=>o.clearall&&o.clearall(...s),["prevent"]))},e[5]||(e[5]=[t("i",{class:"fas fa-times-circle","aria-hidden":"true"},null,-1)])),t("button",{tabindex:"-1",class:"pf-c-button pf-m-plain pf-c-select__toggle-button",type:"button",id:"select-single-typeahead-expanded-toggle","aria-haspopup":"true","aria-expanded":"true","aria-labelledby":"select-single-typeahead-expanded-label select-single-typeahead-expanded-toggle","aria-label":"Select",onClick:e[3]||(e[3]=U((...s)=>o.toggleSelect&&o.toggleSelect(...s),["prevent"])),onKeydown:e[4]||(e[4]=K((...s)=>o.onEsc&&o.onEsc(...s),["esc"]))},e[6]||(e[6]=[t("i",{class:"fas fa-caret-down pf-c-select__toggle-arrow","aria-hidden":"true"},null,-1)]),32)]),o.showSelect||!1?(i(),r("ul",bo,[o.isLoading?m("",!0):(i(),r("div",wo,[(i(!0),r(E,null,F(o.searchModels,s=>(i(),r("li",{role:"presentation",key:s.id},[t("button",{class:"pf-c-select__menu-item",role:"option",onClick:U(c=>o.makeSelection(s),["prevent"])},[C(v(s)+" ",1),s===o.searchTerm?(i(),r("span",xo,e[7]||(e[7]=[t("i",{class:"fas fa-check","aria-hidden":"true"},null,-1)]))):m("",!0)],8,yo)]))),128))])),o.isLoading?(i(),r("li",ho,e[8]||(e[8]=[t("span",{class:"pf-c-spinner pf-m-lg",role:"progressbar","aria-label":"Loading item"},[t("span",{class:"pf-c-spinner__clipper"}),t("span",{class:"pf-c-spinner__lead-ball"}),t("span",{class:"pf-c-spinner__tail-ball"})],-1)]))):m("",!0)])):m("",!0)],2),l.errors.device_model?(i(),r("p",ko,v(l.errors.device_model[0]),1)):m("",!0)])}const Vo=T(mo,[["render",Co]]),So={props:{modelValue:{type:Object},fieldname:{type:String,required:!0},errors:""},components:{MultiSelect:oe},setup(n,{emit:e}){const{results:l,isLoading:o}=le("tags"),a=u([]);function p(s){e("update:updateValue",s)}if(a.value=n.modelValue.tag,a.value){let s=[];a.value.forEach(c=>{s.push(c)}),e("update:updateValue",s)}return{getTags:l,updateOptions:p,isLoading:o,modelOptions:a}}},Do=["id"],To={key:1};function Lo(n,e,l,o,a,p){const s=y("multi-select");return i(),S(s,{options:o.getTags,modelOptions:o.modelOptions,msLabel:"tagname",msValue:"id",errors:l.errors.hasOwnProperty("device_tags"),onOptionsUpdated:e[0]||(e[0]=c=>o.updateOptions(c)),isLoading:o.isLoading,fieldType:"tags"},{"multi-select-label":h(()=>e[1]||(e[1]=[C("Choose tags")])),"multi-select-subtext":h(()=>[l.errors.device_tags?(i(),r("p",{key:0,class:"pf-c-form__helper-text pf-m-error",id:l.fieldname+"_error","aria-live":"polite"},v(l.errors.device_tags[0]),9,Do)):(i(),r("span",To,"You must associate one or multiple tags."))]),_:1},8,["options","modelOptions","errors","isLoading"])}const Oo=T(So,[["render",Lo]]),No={props:{modelValue:{type:Object},errors:""},setup(n,{emit:e}){const l=u(!1),o=u(null);A(o,d=>_());const a=N({id:"",templateName:""}),p=N({modelName:"templates",pageOptionsState:{page:1,per_page:1e4},modelObject:{templateName:""}}),{models:s,isLoading:c,dataTablePageChanged:f}=B(p,p.modelName,p.modelObject);function b(d){Object.assign(a,s.data.find(D=>D.id===d)),e("update:updateValue",d),_()}function w(){l.value===!1&&f(p.pageOptionsState),l.value=!l.value}function x(){_()}function _(){l.value=!1}return"template"in n.modelValue?(a.id=n.modelValue.template[0].id,a.templateName=n.modelValue.template[0].templateName):(a.id="",a.templateName="Select a template"),{clickOutsidetarget:o,selected:a,makeSelection:b,toggleSelect:w,showSelect:l,models:s,isLoading:c,onEsc:x}}},Mo={class:"pf-c-form__group"},Po={class:"pf-c-input-group"},Uo={class:"pf-c-select__toggle-wrapper"},Eo={key:0,class:"pf-c-select__toggle-text"},Fo={key:1,class:"pf-c-select__toggle-text"},jo={key:0,class:"pf-c-select__menu multi-select-dropdown-overflow",role:"listbox","aria-labelledby":"device_template-label",style:{width:"auto"}},qo={key:0},Ho=["onClick"],Ao={key:0,class:"pf-c-select__menu-item-icon"},Io={class:"pf-c-select__menu-item-description"},Ro={key:1,role:"presentation",class:"pf-c-select__list-item pf-m-loading"},Ko={key:0,class:"pf-c-form__helper-text pf-m-error",id:"device_template_error","aria-live":"polite"};function Bo(n,e,l,o,a,p){return i(),r("div",Mo,[e[6]||(e[6]=t("div",{class:"pf-c-form__group-label"},[t("label",{class:"pf-c-form__label",for:"device_template"},[t("span",{class:"pf-c-form__label-text"},"Template "),t("span",{class:"pf-c-form__label-required","aria-hidden":"true"},"*")])],-1)),t("div",Po,[t("div",{class:O(["pf-c-select",l.errors.device_template?"pf-m-invalid":""]),ref:"clickOutsidetarget"},[t("button",{class:"pf-c-select__toggle",type:"button",id:"device_template-toggle","aria-haspopup":"true","aria-expanded":"false","aria-labelledby":"device_template-label device_template-toggle",onClick:e[0]||(e[0]=U((...s)=>o.toggleSelect&&o.toggleSelect(...s),["prevent"])),onKeydown:e[1]||(e[1]=K((...s)=>o.onEsc&&o.onEsc(...s),["esc"]))},[t("div",Uo,[o.selected.id?(i(),r("span",Fo,v(o.selected.templateName),1)):(i(),r("span",Eo,"Select a template"))]),e[2]||(e[2]=t("span",{class:"pf-c-select__toggle-arrow"},[t("i",{class:"fas fa-caret-down","aria-hidden":"true"})],-1))],32),o.showSelect||!1?(i(),r("ul",jo,[e[5]||(e[5]=t("div",{class:"pf-c-select__menu-group-title","aria-hidden":"true",id:"select-checkbox-expanded-selected-group-template"}," Select Template ",-1)),o.isLoading?m("",!0):(i(),r("div",qo,[(i(!0),r(E,null,F(o.models.data,s=>(i(),r("li",{role:"presentation",key:s.id},[t("button",{class:"pf-c-select__menu-item",role:"option",onClick:U(c=>o.makeSelection(s.id),["prevent"])},[C(v(s.templateName)+" ",1),s.id===o.selected.id?(i(),r("span",Ao,e[3]||(e[3]=[t("i",{class:"fas fa-check","aria-hidden":"true"},null,-1)]))):m("",!0),t("span",Io,v(s.templateDescription),1)],8,Ho)]))),128))])),o.isLoading?(i(),r("li",Ro,e[4]||(e[4]=[t("span",{class:"pf-c-spinner pf-m-lg",role:"progressbar","aria-label":"Loading item"},[t("span",{class:"pf-c-spinner__clipper"}),t("span",{class:"pf-c-spinner__lead-ball"}),t("span",{class:"pf-c-spinner__tail-ball"})],-1)]))):m("",!0)])):m("",!0)],2)]),l.errors.device_template?(i(),r("p",Ko,v(l.errors.device_template[0]),1)):m("",!0)])}const zo=T(No,[["render",Bo]]),Wo={props:{fieldlabel:{type:String,required:!0},fieldname:{type:String,required:!0},fieldtype:{type:String,required:!0},btnHelperTxt:{type:String,default:""},cred_id:{type:Number,default:0},errors:"",modelValue:""},emit:["update:modelValue","setCreds"],setup(n,{emit:e}){const l=u(!1),o=u(!1),a=u({}),p=u(null);A(p,w=>b());const s=N({device_username:"",device_username:""});function c(){l.value=!0,axios.get("/api/settings/credentials?page=1&perPage=100").then(w=>{a.value=w.data.data,l.value=!1}),o.value=!o.value}function f(w){e("setCreds",w),b()}function b(){o.value=!1}return{clickOutsidetargetCreds:p,creds:a,isLoadingCreds:l,model:s,setCreds:f,showCredsSelect:o,toggleCreds:c}}},Go={class:"pf-c-form__group"},Yo={class:"pf-c-input-group"},Jo=["type","id","name","value","alt","title","aria-invalid"],Xo={key:0,class:"pf-c-form__helper-text pf-m-error",id:"device_username_error","aria-live":"polite"};function Qo(n,e,l,o,a,p){return i(),r("div",Go,[e[1]||(e[1]=t("div",{class:"pf-c-form__group-label"},[t("label",{class:"pf-c-form__label",for:"device_username"},[t("span",{class:"pf-c-form__label-text"},"Username"),t("span",{class:"pf-c-form__label-required","aria-hidden":"true"},"*")])],-1)),t("div",Yo,[t("input",{class:"pf-c-form-control",type:l.fieldtype,id:l.fieldname,name:l.fieldname,value:l.modelValue,alt:l.btnHelperTxt,title:l.btnHelperTxt,onChange:e[0]||(e[0]=s=>n.$emit("update:modelValue",s.target.value)),spellcheck:"false","data-ms-editor":"true","aria-label":"Device Username","aria-invalid":!!l.errors[l.fieldname]},null,40,Jo)]),l.errors.device_username?(i(),r("p",Xo,v(l.errors.device_username[0]),1)):m("",!0)])}const Zo=T(Wo,[["render",Qo]]),$o={props:{modelValue:{type:Object},errors:""},setup(n,{emit:e}){const l=u(!1),o=u(null);A(o,d=>_());const a=N({id:"",vendorName:""}),p=N({modelName:"vendors",pageOptionsState:{page:1,per_page:1e4},modelObject:{templateName:""}}),{models:s,isLoading:c,dataTablePageChanged:f}=B(p,p.modelName,p.modelObject);function b(d){Object.assign(a,s.data.find(D=>D.id===d)),e("update:updateValue",a.id),_()}function w(){l.value===!1&&f(p.pageOptionsState),l.value=!l.value}function x(){_()}function _(){l.value=!1}return"vendor"in n.modelValue?(a.id=n.modelValue.vendor[0].id,a.vendorName=n.modelValue.vendor[0].vendorName,e("update:updateValue",a.id)):(a.id="",a.vendorName="Select a vendor"),{clickOutsidetarget:o,selected:a,makeSelection:b,toggleSelect:w,showSelect:l,models:s,isLoading:c,onEsc:x}}},el={class:"pf-c-form__group"},tl={class:"pf-c-input-group"},ol={class:"pf-c-select__toggle-wrapper"},ll={class:"pf-c-select__toggle-text"},sl={key:0,class:"pf-c-select__menu multi-select-dropdown-overflow",role:"listbox","aria-labelledby":"device_vendor-label",style:{width:"auto"}},il={key:0},al=["onClick"],nl={key:0,class:"pf-c-select__menu-item-icon"},dl={key:1,role:"presentation",class:"pf-c-select__list-item pf-m-loading"},rl={key:0,class:"pf-c-form__helper-text pf-m-error",id:"device_vendor_error","aria-live":"polite"};function cl(n,e,l,o,a,p){return i(),r("div",el,[e[6]||(e[6]=t("div",{class:"pf-c-form__group-label"},[t("label",{class:"pf-c-form__label",for:"device_vendor"},[t("span",{class:"pf-c-form__label-text"},"Vendor"),t("span",{class:"pf-c-form__label-required","aria-hidden":"true"},"*")])],-1)),t("div",tl,[t("div",{class:O(["pf-c-select",l.errors.device_vendor?"pf-m-invalid":""]),ref:"clickOutsidetarget"},[t("button",{class:"pf-c-select__toggle",type:"button",id:"device_vendor-toggle","aria-haspopup":"true","aria-expanded":"false","aria-labelledby":"device_vendor-label device_vendor-toggle",onClick:e[0]||(e[0]=U((...s)=>o.toggleSelect&&o.toggleSelect(...s),["prevent"])),onKeydown:e[1]||(e[1]=K((...s)=>o.onEsc&&o.onEsc(...s),["esc"]))},[t("div",ol,[t("span",ll,v(o.selected.vendorName),1)]),e[2]||(e[2]=t("span",{class:"pf-c-select__toggle-arrow"},[t("i",{class:"fas fa-caret-down","aria-hidden":"true"})],-1))],32),o.showSelect||!1?(i(),r("ul",sl,[e[5]||(e[5]=t("div",{class:"pf-c-select__menu-group-title","aria-hidden":"true",id:"select-checkbox-expanded-selected-group-vendor"}," Select Vendor ",-1)),o.isLoading?m("",!0):(i(),r("div",il,[(i(!0),r(E,null,F(o.models.data,s=>(i(),r("li",{role:"presentation",key:s.id},[t("button",{class:"pf-c-select__menu-item",role:"option",onClick:U(c=>o.makeSelection(s.id),["prevent"])},[C(v(s.vendorName)+" ",1),s.id===o.selected.id?(i(),r("span",nl,e[3]||(e[3]=[t("i",{class:"fas fa-check","aria-hidden":"true"},null,-1)]))):m("",!0)],8,al)]))),128))])),o.isLoading?(i(),r("li",dl,e[4]||(e[4]=[t("span",{class:"pf-c-spinner pf-m-lg",role:"progressbar","aria-label":"Loading item"},[t("span",{class:"pf-c-spinner__clipper"}),t("span",{class:"pf-c-spinner__lead-ball"}),t("span",{class:"pf-c-spinner__tail-ball"})],-1)]))):m("",!0)])):m("",!0)],2)]),l.errors.device_vendor?(i(),r("p",rl,v(l.errors.device_vendor[0]),1)):m("",!0)])}const pl=T($o,[["render",cl]]),fl={props:{fieldlabel:{type:String,required:!0},fieldname:{type:String,required:!0},fieldtype:{type:String,required:!0},btnHelperTxt:{type:String,default:""},errors:"",modelValue:"",tooltip:!1},setup(n,{emit:e}){return{tooltipShow:u(!1)}}},ml={class:"pf-c-form__group"},_l={class:"pf-c-form__group-label",style:{position:"relative"}},ul=["for"],vl={class:"pf-c-form__label-text"},gl={key:0,class:"pf-v5-c-form__label-required"},bl={key:1,class:"pf-c-tooltip pf-m-bottom-left",role:"tooltip",style:{position:"absolute"}},wl={class:"pf-c-tooltip__content",id:"tooltip-top-content"},yl={class:"pf-c-input-group"},xl=["type","id","name","value","alt","title","aria-invalid"],hl={class:"pf-c-form__helper-text"},kl=["id"];function Cl(n,e,l,o,a,p){return i(),r("div",ml,[t("div",_l,[t("label",{class:"pf-c-form__label",for:l.fieldname},[t("span",vl,v(l.fieldlabel),1),n.required?(i(),r("span",gl," * ")):m("",!0)],8,ul),l.tooltip?(i(),r("button",{key:0,class:"pf-c-form__group-label-help",onMouseover:e[0]||(e[0]=s=>o.tooltipShow=!0),onMouseleave:e[1]||(e[1]=s=>o.tooltipShow=!1),tabindex:"-1"},e[3]||(e[3]=[t("i",{class:"pficon pf-icon-help","aria-hidden":"true"},null,-1)]),32)):m("",!0),o.tooltipShow?(i(),r("div",bl,[e[4]||(e[4]=t("div",{class:"pf-c-tooltip__arrow"},null,-1)),t("div",wl,[I(n.$slots,"tooltip-text")])])):m("",!0)]),t("div",yl,[t("input",{class:"pf-c-form-control",type:l.fieldtype,id:l.fieldname,name:l.fieldname,value:l.modelValue,alt:l.btnHelperTxt,title:l.btnHelperTxt,onChange:e[2]||(e[2]=s=>n.$emit("update:modelValue",s.target.value)),spellcheck:"false","data-ms-editor":"true","aria-label":"Device Username","aria-invalid":!!l.errors[l.fieldname]},null,40,xl),I(n.$slots,"btnIcon")]),t("div",hl,[I(n.$slots,"helper-text")]),l.errors[l.fieldname]?(i(),r("p",{key:0,class:"pf-c-form__helper-text pf-m-error",id:l.fieldname+"_error","aria-live":"polite"},v(l.errors[l.fieldname][0]),9,kl)):m("",!0)])}const Vl=T(fl,[["render",Cl]]),Sl={props:{viewstate:{type:Object}},emits:["closeDrawer","formsubmitted"],components:{DeviceVendorField:pl,DeviceModelField:Vo,DeviceCategoryField:te,DeviceTagField:Oo,DeviceUsernameField:Zo,DeviceTemplateField:zo,ReusableInputField:Vl},setup(n,{emit:e}){const l=u(!1),o=N({1:"password",2:"password"});if(n.viewstate.isClone)var a="clon";else var a=n.viewstate.editid===0?"add":"edit";const p=u(a),{errors:s,model:c,clearModel:f,updateModel:b,getModel:w,getModelClone:x,storeModel:_,isLoading:d}=G(n.viewstate.modelName,n.viewstate.modelObject);q(()=>{n.viewstate.isClone?x(n.viewstate.editid):w(n.viewstate.editid)});function D(P){this.passwordFieldType[P]=this.passwordFieldType[P]==="password"?"text":"password"}const V=async()=>{n.viewstate.editid!=0&&!n.viewstate.isClone?await b(c):await _(c),s.value===""&&(e("formsubmitted",n.viewstate.pagenamesingle+" "+p.value+"ed!"),f(),k())};function M(P){c.device_username=P.cred_username,c.device_password=P.cred_password,c.device_enable_password=P.cred_enable_password,c.device_cred_id=P.id}function k(){e("closeDrawer")}function L(){c.device_main_prompt=c.device_name+"#",c.device_enable_prompt=c.device_name+">"}return{clearModel:f,close:k,errors:s,generatePrompts:L,isLoading:d,model:c,passwordFieldType:o,saveModels:V,setCreds:M,showRoleOptions:l,switchVisibility:D}}},Dl=["value"],Tl={class:"pf-l-grid pf-m-gutter"},Ll={key:0,class:"pf-c-spinner pf-m-xl",role:"progressbar","aria-label":"Loading items",style:{margin:"0 auto",display:"table"}},Ol={class:"pf-l-grid__item pf-m-12-col pf-m-6-col-on-md"},Nl={key:0,novalidate:"",class:"pf-c-form"},Ml={class:"pf-l-grid pf-m-all-6-col-on-md pf-m-gutter"},Pl={class:"pf-l-grid__item pf-m-12-col pf-m-6-col-on-md"},Ul={key:0,novalidate:"",class:"pf-c-form"},El={key:0,class:"pf-c-form__group pf-m-action"},Fl={class:"pf-c-form__group-control"},jl={class:"pf-c-form__actions"};function ql(n,e,l,o,a,p){const s=y("reusable-input-field"),c=y("device-vendor-field"),f=y("device-model-field"),b=y("device-category-field"),w=y("device-tag-field"),x=y("device-username-field"),_=y("device-template-field");return i(),r(E,null,[t("input",{id:"editid",name:"editid",type:"hidden",value:l.viewstate.editid,autocomplete:"off"},null,8,Dl),t("div",Tl,[o.isLoading?(i(),r("span",Ll,e[23]||(e[23]=[t("span",{class:"pf-c-spinner__clipper"},null,-1),t("span",{class:"pf-c-spinner__lead-ball"},null,-1),t("span",{class:"pf-c-spinner__tail-ball"},null,-1)]))):m("",!0),t("div",Ol,[o.isLoading?m("",!0):(i(),r("form",Nl,[e[25]||(e[25]=t("div",{class:"pf-u-color-300"},"Device Information",-1)),(i(),S(s,{tabindex:"1",modelValue:o.model.device_name,"onUpdate:modelValue":e[0]||(e[0]=d=>o.model.device_name=d),fieldlabel:"Device Name",fieldname:"device_name",fieldtype:"text",btnHelperTxt:"Device Name",errors:o.errors,key:"device_name",required:!0},null,8,["modelValue","errors"])),t("div",Ml,[(i(),S(s,{tabindex:"1",modelValue:o.model.device_ip,"onUpdate:modelValue":e[1]||(e[1]=d=>o.model.device_ip=d),fieldlabel:"Hostname (or IP Address)",fieldname:"device_ip",fieldtype:"text",btnHelperTxt:"Hostname (or IP Address)",errors:o.errors,key:"device_ip",required:!0},null,8,["modelValue","errors"])),(i(),S(s,{tabindex:"1",modelValue:o.model.device_port_override,"onUpdate:modelValue":e[2]||(e[2]=d=>o.model.device_port_override=d),fieldlabel:"Default Port Override",fieldname:"device_port_override",fieldtype:"number",btnHelperTxt:"Default Port Override",errors:o.errors,key:"device_port_override",tooltip:!0},{"tooltip-text":h(()=>e[24]||(e[24]=[C("Set the connection port specific to this device. it overrides the value set in the connection template. Leave empty otherwise.")])),_:1},8,["modelValue","errors"]))]),g(c,{modelValue:o.model,"onUpdate:modelValue":e[3]||(e[3]=d=>o.model=d),updateValue:o.model.device_vendor,"onUpdate:updateValue":e[4]||(e[4]=d=>o.model.device_vendor=d),errors:o.errors},null,8,["modelValue","updateValue","errors"]),g(f,{modelValue:o.model.device_model,"onUpdate:modelValue":e[5]||(e[5]=d=>o.model.device_model=d),errors:o.errors},null,8,["modelValue","errors"]),g(b,{modelValue:o.model,"onUpdate:modelValue":e[6]||(e[6]=d=>o.model=d),updateValue:o.model.device_category_id,"onUpdate:updateValue":e[7]||(e[7]=d=>o.model.device_category_id=d),errors:o.errors},null,8,["modelValue","updateValue","errors"]),g(w,{modelValue:o.model,"onUpdate:modelValue":e[8]||(e[8]=d=>o.model=d),fieldname:"device_tag",updateValue:o.model.device_tags,"onUpdate:updateValue":e[9]||(e[9]=d=>o.model.device_tags=d),errors:o.errors},null,8,["modelValue","updateValue","errors"])]))]),t("div",Pl,[o.isLoading?m("",!0):(i(),r("form",Ul,[e[30]||(e[30]=t("div",{class:"pf-u-color-300"},"Connection Information",-1)),(i(),S(x,{modelValue:o.model.device_username,"onUpdate:modelValue":e[10]||(e[10]=d=>o.model.device_username=d),onSetCreds:e[11]||(e[11]=d=>o.setCreds(d)),fieldlabel:"Username",fieldname:"device_username",fieldtype:"text",cred_id:o.model.device_cred_id,btnHelperTxt:"Username",errors:o.errors,key:"device_username"},null,8,["modelValue","cred_id","errors"])),(i(),S(s,{tabindex:"1",modelValue:o.model.device_password,"onUpdate:modelValue":e[13]||(e[13]=d=>o.model.device_password=d),fieldlabel:"Password",fieldname:"device_password",fieldtype:o.passwordFieldType[1],btnHelperTxt:"Main Password",errors:o.errors,key:"device_password"},z({_:2},[n.$userName==="admin"?{name:"btnIcon",fn:h(()=>[t("button",{tabindex:"-1",class:"pf-c-button pf-m-control",type:"button",onClick:e[12]||(e[12]=d=>o.switchVisibility(1))},e[26]||(e[26]=[t("i",{class:"fas fa-eye","aria-hidden":"true"},null,-1)]))]),key:"0"}:void 0]),1032,["modelValue","fieldtype","errors"])),(i(),S(s,{tabindex:"1",modelValue:o.model.device_enable_password,"onUpdate:modelValue":e[15]||(e[15]=d=>o.model.device_enable_password=d),fieldlabel:"Enable Password",fieldname:"device_enable_password",fieldtype:o.passwordFieldType[2],btnHelperTxt:"Enable Password",errors:o.errors,key:"device_enable_password"},z({_:2},[n.$userName==="admin"?{name:"btnIcon",fn:h(()=>[t("button",{tabindex:"-1",class:"pf-c-button pf-m-control",type:"button",onClick:e[14]||(e[14]=d=>o.switchVisibility(2))},e[27]||(e[27]=[t("i",{class:"fas fa-eye","aria-hidden":"true"},null,-1)]))]),key:"0"}:void 0]),1032,["modelValue","fieldtype","errors"])),g(_,{modelValue:o.model,"onUpdate:modelValue":e[16]||(e[16]=d=>o.model=d),updateValue:o.model.device_template,"onUpdate:updateValue":e[17]||(e[17]=d=>o.model.device_template=d),errors:o.errors},null,8,["modelValue","updateValue","errors"]),(i(),S(s,{tabindex:"1",modelValue:o.model.device_main_prompt,"onUpdate:modelValue":e[18]||(e[18]=d=>o.model.device_main_prompt=d),fieldlabel:"Main Prompt",fieldname:"device_main_prompt",fieldtype:"text",btnHelperTxt:"Main Prompt",errors:o.errors,key:"device_main_prompt",tooltip:!0},{"tooltip-text":h(()=>e[28]||(e[28]=[C("This is the 'Privileged EXEC' prompt. You will run show commands from this prompt and you can access configure mode. Usually 'router1#'")])),_:1},8,["modelValue","errors"])),(i(),S(s,{tabindex:"1",modelValue:o.model.device_enable_prompt,"onUpdate:modelValue":e[20]||(e[20]=d=>o.model.device_enable_prompt=d),fieldlabel:"Enable Prompt",fieldname:"device_enable_prompt",fieldtype:"text",btnHelperTxt:"Enable Prompt",errors:o.errors,key:"device_enable_prompt",tooltip:!0},{"tooltip-text":h(()=>e[29]||(e[29]=[C("This is the 'User EXEC' prompt. The first level of access prompt. Usually 'router1>'")])),"helper-text":h(()=>[t("button",{class:"pf-c-button pf-m-link pf-m-inline",type:"button",onClick:e[19]||(e[19]=d=>o.generatePrompts())}," Auto generate prompts from device name ")]),_:1},8,["modelValue","errors"]))]))])]),o.isLoading?m("",!0):(i(),r("div",El,[t("div",Fl,[t("div",jl,[t("button",{class:"pf-c-button pf-m-primary",type:"submit",onClick:e[21]||(e[21]=U((...d)=>o.saveModels&&o.saveModels(...d),["prevent"]))}," Save "),t("button",{class:"pf-c-button pf-m-link",type:"button",onClick:e[22]||(e[22]=(...d)=>o.close&&o.close(...d))}," Cancel ")])])]))],64)}const Hl=T(Sl,[["render",ql]]),Al={components:{PageHeader:ie,DevicesBreadcrumbs:ee,DeviceViewDeviceDetails:Qe,DeviceViewStatusPanel:fo,DeviceViewLatestDownloads:rt,DeviceViewActionsMenu:Se,LoadingSpinner:se,SideDrawer:ae,DevicesForm:Hl},setup(){const n=u("Device View"),e=u("Device details dashboard"),l=W(),o=j("create-notification"),a=N({editid:l.params.id,pagename:"Devices",pagedesc:"All devices",pagenamesingle:"Device",modelName:"devices",openDrawerState:!1,drawerOuterWidth:"pf-m-width-75-on-xl pf-m-width-100 ",showDeleteModal:!1,sideDrawerComponentKey:1,pageOptionsState:{page:1,per_page:10},modelObject:{device_name:"",device_ip:"",device_vendor:"",device_model:"",device_category_id:"",device_tags:"",device_username:"",device_password:"",device_template:"",device_main_prompt:""}}),{errors:p,model:s,getModel:c,isLoading:f}=G(a.modelName,a.modelObject),{isLoading:b,openDrawer:w,closeDrawerState:x}=B(a,a.modelName,a.modelObject),_=u(1);q(()=>{c(a.editid)});function d(k){o({type:"success",message:k,duration:3}),c(a.editid),a.openDrawerState=!1}function D(){c(a.editid)}function V(){x()}function M(){_.value++}return{closeDrawer:V,closeDrawerState:x,downloadFinished:D,errors:p,formLoading:b,formSubmittedDeviceView:d,isLoading:f,model:s,openDrawer:w,pagedesc:e,pagename:n,viewstate:a,statusPanelComponentKey:_,rerenderStatusPanel:M}}},Il={class:"pf-c-page__main",tabindex:"-1"},Rl={class:"pf-c-page__main-section pf-m-no-padding"},Kl={class:"pf-c-drawer__main"},Bl={class:"pf-c-drawer__content pf-m-no-background"},zl={class:"pf-c-drawer__body pf-m-padding"},Wl={key:0,class:"pf-l-grid pf-m-gutter"},Gl={class:"pf-l-grid__item pf-m-12-col pf-m-3-col-on-md"},Yl={class:"pf-l-grid__item pf-m-12-col pf-m-6-col-on-md"};function Jl(n,e,l,o,a,p){const s=y("devices-breadcrumbs"),c=y("page-header"),f=y("loading-spinner"),b=y("device-view-device-details"),w=y("device-view-status-panel"),x=y("device-view-latest-downloads"),_=y("device-view-actions-menu"),d=y("devices-form"),D=y("side-drawer");return i(),r("main",Il,[g(c,{pagename:o.pagename},{breadcrumbs:h(()=>[g(s,{devicename:o.model.device_name,deviceId:o.model.id},null,8,["devicename","deviceId"])]),_:1},8,["pagename"]),e[6]||(e[6]=t("div",{class:"pf-c-divider",role:"separator"},null,-1)),t("section",Rl,[t("div",{class:O(["pf-c-drawer",{"pf-m-expanded":o.viewstate.openDrawerState}])},[t("div",Kl,[t("div",Bl,[t("div",zl,[g(f,{showSpinner:o.isLoading},null,8,["showSpinner"]),o.isLoading?m("",!0):(i(),r("div",Wl,[t("div",Gl,[g(b,{model:o.model,onOpenDrawer:e[0]||(e[0]=V=>o.openDrawer(V))},null,8,["model"])]),t("div",Yl,[(i(),S(w,{model:o.model,key:o.statusPanelComponentKey,onRerenderStatusPanel:o.rerenderStatusPanel},null,8,["model","onRerenderStatusPanel"])),g(x,{model:o.model},null,8,["model"])]),g(_,{class:"pf-l-grid__item pf-m-12-col pf-m-3-col-on-md",model:o.model,onOpenDrawer:e[1]||(e[1]=V=>o.openDrawer(V)),onDownloadFinished:e[2]||(e[2]=V=>o.downloadFinished())},null,8,["model"])]))])]),(i(),S(D,{pagename:o.viewstate.pagenamesingle,drawerState:o.viewstate.openDrawerState,outerWidth:o.viewstate.drawerOuterWidth,editid:o.viewstate.editid,isClone:o.viewstate.isClone,onCloseDrawer:e[5]||(e[5]=V=>o.closeDrawer()),key:o.viewstate.sideDrawerComponentKey},{form:h(()=>[(i(),S(d,{viewstate:o.viewstate,onCloseDrawer:e[3]||(e[3]=V=>o.closeDrawer()),onFormsubmitted:e[4]||(e[4]=V=>o.formSubmittedDeviceView(V)),key:o.viewstate.sideDrawerComponentKey},null,8,["viewstate"]))]),_:1},8,["pagename","drawerState","outerWidth","editid","isClone"]))])],2)])])}const ds=T(Al,[["render",Jl]]);export{ds as default};
