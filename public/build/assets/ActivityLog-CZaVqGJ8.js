import{u as j}from"./ViewFunctions-BS2UTVoE.js";import{P as V}from"./PageHeader-exbGmhKH.js";import{T as B,E as h,a2 as z,o as l,c as i,a as t,t as k,d as v,v as f,J as C,a0 as D,Z as P,a1 as J,s as u,b as F,w as I,r as R,f as x,K as T,i as y,G as K}from"./app-DPEN0t_k.js";import{a as U,b as W,D as q,u as G,c as H}from"./DeleteModal-ZEvTaIan.js";import{D as Z}from"./DataTableSpinner-xKQOEap9.js";import{u as Q}from"./index-D8A2K2Td.js";import{U as X}from"./UsersForm-C7aq5NwH.js";/* empty css               */import"./LoadingSpinner-D-fKDd1c.js";const Y={props:{},emits:["filter"],setup(d,{emit:e}){const o=h(!1),a=h(),_=h(null);z(_,p=>s());function m(p){a.value=p.target.innerText!="All"?p.target.innerText:"",o.value=!1,e("filter",a.value.toLowerCase())}function s(){o.value=!1}return{showOptions:o,clickOutsidetarget:_,selectFilter:m,selectedFilter:a}}},$={class:"pf-c-toolbar__group pf-m-filter-group",ref:"clickOutsidetarget"},ee={class:"pf-c-toolbar__item"},te={class:"pf-c-select",style:{width:"150px"}},ae={class:"pf-c-select__toggle-wrapper"},oe=["textContent"],ne=["hidden"],le={role:"presentation"},se={class:"pf-c-select__menu-item-icon"},ie={key:0,class:"fas fa-check","aria-hidden":"true"},re={role:"presentation"},ce={class:"pf-c-select__menu-item-icon"},de={key:0,class:"fas fa-check","aria-hidden":"true"},pe={role:"presentation"},fe={class:"pf-c-select__menu-item-icon"},_e={key:0,class:"fas fa-check","aria-hidden":"true"},me={role:"presentation"},be={class:"pf-c-select__menu-item-icon"},ge={key:0,class:"fas fa-check","aria-hidden":"true"},ue={role:"presentation"},ye={class:"pf-c-select__menu-item-icon"},we={key:0,class:"fas fa-check","aria-hidden":"true"};function ke(d,e,o,a,_,m){return l(),i(C,null,[e[13]||(e[13]=t("hr",{class:"pf-c-divider pf-m-vertical"},null,-1)),t("div",$,[t("div",ee,[t("div",te,[e[12]||(e[12]=t("span",{hidden:""},"Filter on type",-1)),t("button",{class:"pf-c-select__toggle",type:"button",onClick:e[0]||(e[0]=s=>a.showOptions=!a.showOptions)},[t("div",ae,[t("span",{class:"pf-c-select__toggle-text",textContent:k(a.selectedFilter?a.selectedFilter:"Filter on type")},null,8,oe)]),e[6]||(e[6]=t("span",{class:"pf-c-select__toggle-arrow"},[t("i",{class:"fas fa-caret-down","aria-hidden":"true"})],-1))]),t("ul",{class:"pf-c-select__menu multi-select-dropdown-overflow",role:"listbox",hidden:!a.showOptions},[t("li",le,[t("button",{class:"pf-c-select__menu-item",role:"option",onClick:e[1]||(e[1]=(...s)=>a.selectFilter&&a.selectFilter(...s))},[e[7]||(e[7]=v(" Info")),t("span",se,[a.selectedFilter==="Info"?(l(),i("i",ie)):f("",!0)])])]),t("li",re,[t("button",{class:"pf-c-select__menu-item",role:"option",onClick:e[2]||(e[2]=(...s)=>a.selectFilter&&a.selectFilter(...s))},[e[8]||(e[8]=v(" Warning")),t("span",ce,[a.selectedFilter==="Warning"?(l(),i("i",de)):f("",!0)])])]),t("li",pe,[t("button",{class:"pf-c-select__menu-item",role:"option",onClick:e[3]||(e[3]=(...s)=>a.selectFilter&&a.selectFilter(...s))},[e[9]||(e[9]=v(" Error")),t("span",fe,[a.selectedFilter==="Error"?(l(),i("i",_e)):f("",!0)])])]),t("li",me,[t("button",{class:"pf-c-select__menu-item",role:"option",onClick:e[4]||(e[4]=(...s)=>a.selectFilter&&a.selectFilter(...s))},[e[10]||(e[10]=v(" Critical")),t("span",be,[a.selectedFilter==="Critical"?(l(),i("i",ge)):f("",!0)])])]),t("li",ue,[t("button",{class:"pf-c-select__menu-item",role:"option",onClick:e[5]||(e[5]=(...s)=>a.selectFilter&&a.selectFilter(...s))},[e[11]||(e[11]=v(" All")),t("span",ye,[a.selectedFilter===""?(l(),i("i",we)):f("",!0)])])])],8,ne)])])],512)],64)}const ve=B(Y,[["render",ke]]),he={components:{ActivityLogFilter:ve,DataTableEmptyState:U,DataTablePaginate:W,DataTableSpinner:Z,DataTableToolbar:q},props:{pagename:{type:String},tabledata:{type:Object,required:[]},searchInputDisabled:{type:Boolean,default:!0},newBtnEnabled:{type:Boolean,default:!0},taskRunBtnEnabled:{type:Boolean,default:!1},editBtnEnabled:{type:Boolean,default:!0}},emits:["openDrawer","deleteRow","pagechanged","showTaskRunConfirmModal","actionLink"],setup(d,{emit:e}){const o=D({pageParams:{page:1,per_page:10,filters:null,sortby:null,sortOrder:"desc"},sortIcon:{base:"fas fa-arrows-alt-v",is:"fa-sort",up:"fas fa-long-arrow-alt-up",down:"fas fa-long-arrow-alt-down"}}),a=D({critical:"fas fa-exclamation-circle pf-u-danger-color-100",error:"fas fa-exclamation-circle pf-u-danger-color-100",warn:"fa fa-exclamation-triangle pf-u-warning-color-100",info:"fas fa-fw fa-info-circle pf-u-info-color-100",default:"fas fa-fw fa-info-circle pf-u-info-color-100"}),_=P("formatTime"),m=h(o.sortIcon.base),s=h(0),p=h([]),w=P("create-notification"),{toClipboard:b}=Q(),{setupResizableTable:O}=G();J(()=>{d.tabledata.isLoading||O()});function n(r,g=!1){e("openDrawer",{id:r,isClone:g})}function c(r){e("deleteRow",r)}function E(){o.pageParams.filters="",e("pagechanged",o.pageParams)}function S(r){o.pageParams.filters=r,e("pagechanged",o.pageParams)}function L(r){o.pageParams.page=r.page,o.pageParams.per_page=r.per_page,e("pagechanged",o.pageParams)}function M(r,g){m.value=o.pageParams.sortOrder==="desc"?o.sortIcon.up:o.sortIcon.down,s.value=g,o.pageParams.sortby=r,o.pageParams.sortOrder=o.pageParams.sortOrder==="desc"?"asc":"desc",e("pagechanged",o.pageParams)}function A(r){e("showTaskRunConfirmModal",r)}function N(r){const g=p.value.indexOf(r);g>-1?p.value.splice(g,1):p.value.push(r)}return{activityLogIconTable:a,addFilters:S,clearFilters:E,copy:async r=>{try{await b(JSON.stringify(r)),w({type:"success",title:"Copy Success",message:"Output copied to clipboard"})}catch(g){w({type:"danger",title:"Error",message:g})}},data:o,deleteRow:c,formatTime:_,emitShowTaskRunConfirmModal:A,expanded:p,isSorted:s,openDrawer:n,pageChanged:L,sortBy:M,sortIcon:m,toggleRowExpansion:N}}},Ce={class:"pf-c-drawer__content pf-m-no-background"},xe={class:"pf-c-drawer__body pf-m-padding"},De={class:"pf-c-card"},Fe={class:"pf-c-table pf-m-compact pf-m-grid-lg",role:"grid",id:"resizeMe"},Oe={role:"row",id:"headerRow"},Te={key:0},Pe=["onClick"],Be={class:"pf-c-table__button-content"},Ee={class:"pf-c-table__text"},Ie={class:"pf-c-table__sort-indicator"},Re={role:"row"},Se={class:"pf-c-table__toggle",role:"cell"},Le=["onClick"],Me=["data-label"],Ae={class:"pf-c-button__icon pf-m-start"},Ne={key:0},je={key:1},Ve={role:"cell","data-label":"Actions",class:"pf-m-fit-content"},ze=["onClick"],Je={role:"cell",colspan:"4",id:"table-expandable-content1"},Ke={class:"pf-c-table__expandable-row-content"},Ue={class:"pf-c-code-block"},We={class:"pf-c-code-block__header"},qe={class:"pf-c-code-block__actions"},Ge={class:"pf-c-code-block__actions-item"},He=["onClick"],Ze={class:"pf-c-code-block__content"},Qe={class:"pf-c-code-block__pre"},Xe={class:"pf-c-code-block__code"};function Ye(d,e,o,a,_,m){const s=u("activity-log-filter"),p=u("data-table-toolbar"),w=u("data-table-spinner"),b=u("data-table-empty-state"),O=u("data-table-paginate");return l(),i("div",Ce,[t("div",xe,[t("div",De,[F(p,{pagename:o.pagename,onSearchInput:e[1]||(e[1]=n=>a.addFilters(n)),onOpenDrawer:e[2]||(e[2]=n=>a.openDrawer(n)),newBtnEnabled:o.newBtnEnabled,searchInputDisabled:o.searchInputDisabled},{customFilter:I(()=>[R(d.$slots,"customFilter",{},()=>[F(s,{onFilter:e[0]||(e[0]=n=>a.addFilters(n))})])]),customButtons:I(()=>[R(d.$slots,"customButtons")]),_:3},8,["pagename","newBtnEnabled","searchInputDisabled"]),o.tabledata.isLoading?(l(),x(w,{key:0})):f("",!0),t("table",Fe,[t("thead",null,[t("tr",Oe,[e[4]||(e[4]=t("td",{class:"pf-c-table__toggle",role:"cell"},null,-1)),(l(!0),i(C,null,T(o.tabledata.headers,(n,c)=>(l(),i("th",{key:n.name,class:y(["pf-m-truncate pf-c-table__sort pf-c-table__icon",a.isSorted===c?"pf-m-selected":""])},[n.sortable?f("",!0):(l(),i("span",Te,k(n.label),1)),n.sortable?(l(),i("button",{key:1,class:"pf-c-table__button",onClick:E=>a.sortBy(n.key,c)},[t("div",Be,[t("span",Ee,k(n.label),1),t("span",Ie,[t("i",{class:y(a.isSorted===c?a.sortIcon:a.data.sortIcon.base)},null,2)])])],8,Pe)):f("",!0)],2))),128)),e[5]||(e[5]=t("th",{class:"pf-c-table__icon pf-m-fit-content",role:"columnheader",scope:"col"},"Actions",-1))])]),o.tabledata.data.data&&Object.keys(o.tabledata.data.data).length>0?(l(!0),i(C,{key:0},T(o.tabledata.data.data,n=>(l(),i("tbody",{role:"rowgroup",key:n.name,class:y({"pf-m-expanded":a.expanded.includes(n.id)})},[t("tr",Re,[t("td",Se,[t("button",{class:y(["pf-c-button pf-m-plain",{"pf-m-expanded":a.expanded.includes(n.id)}]),"aria-labelledby":"table-expandable-node1 table-expandable-expandable-toggle1",id:"table-expandable-expandable-toggle1","aria-label":"Details","aria-controls":"table-expandable-content1","aria-expanded":"true",onClick:c=>a.toggleRowExpansion(n.id)},e[6]||(e[6]=[t("div",{class:"pf-c-table__toggle-icon"},[t("i",{class:"fas fa-angle-down","aria-hidden":"true"})],-1)]),10,Le)]),(l(!0),i(C,null,T(o.tabledata.headers,c=>(l(),i("td",{key:c.label,role:"cell","data-label":c.label},[t("span",Ae,[c.key==="log_name"?(l(),i("i",{key:0,class:y(a.activityLogIconTable[n.log_name])},null,2)):f("",!0)]),c.key==="created_at"?(l(),i("div",Ne,k(a.formatTime(n[c.key])),1)):(l(),i("span",je,k(n[c.key]),1))],8,Me))),128)),t("td",Ve,[t("div",null,[t("button",{class:"pf-c-button pf-m-link pf-m-danger pf-m-small",type:"button",onClick:c=>a.deleteRow(n.id),alt:"Delete",title:"Delete"},e[7]||(e[7]=[t("span",{class:"pf-c-button__icon pf-m-start"},[t("i",{class:"fas fa-trash","aria-hidden":"true"})],-1),v(" Delete ")]),8,ze)])])]),t("tr",{class:y(["pf-c-table__expandable-row",{"pf-m-expanded":a.expanded.includes(n.id)}]),role:"row"},[e[9]||(e[9]=t("td",null,null,-1)),e[10]||(e[10]=t("td",null,null,-1)),t("td",Je,[t("div",Ke,[t("div",Ue,[t("div",We,[t("div",qe,[t("div",Ge,[t("button",{class:"pf-c-button pf-m-plain",type:"button","aria-label":"Copy to clipboard",onClick:c=>a.copy(n)},e[8]||(e[8]=[t("i",{class:"fas fa-copy","aria-hidden":"true"},null,-1)]),8,He)])])]),t("div",Ze,[t("pre",Qe,[t("code",Xe,k(n),1)])])])])]),e[11]||(e[11]=t("td",null,null,-1))],2)],2))),128)):f("",!0),o.tabledata.data.data&&Object.keys(o.tabledata.data.data).length<1?(l(),x(b,{key:1,onClear:a.clearFilters},null,8,["onClear"])):f("",!0)]),o.tabledata.isLoading?f("",!0):(l(),x(O,{key:1,from:o.tabledata.data.from,to:o.tabledata.data.to,total:o.tabledata.data.total,current_page:o.tabledata.data.current_page,last_page:o.tabledata.data.last_page,onPagechanged:e[3]||(e[3]=n=>a.pageChanged(n))},null,8,["from","to","total","current_page","last_page"]))])])])}const $e=B(he,[["render",Ye]]),et={components:{UsersForm:X,PageHeader:V,DataTableActivityLogs:$e,DeleteModal:H},setup(){P("create-notification");const d=D({editid:0,pagename:"Activity Log",pagedesc:"rConfig system activity log",pagenamesingle:"Activity Log",modelName:"activitylogs",openDrawerState:!1,showDeleteModal:!1,sideDrawerComponentKey:1,pageOptionsState:{page:1,per_page:10},modelObject:{log_name:"",description:"",created_at:""}}),{models:e,isLoading:o,dataTablePageChanged:a,deleteRow:_,confirmDelete:m,destroyModel:s}=j(d,d.modelName,d.modelObject);K(()=>{a(d.pageOptionsState)});const p=D({headers:[{key:"log_name",label:"Type",sortable:!0,hasActivityIcon:!0},{key:"description",label:"Description",sortable:!1},{key:"created_at",label:"Created",sortable:!1}],data:e,isLoading:o});return{viewstate:d,dataTablePageChanged:a,deleteRow:_,confirmDelete:m,table:p,destroyModel:s}}},tt={class:"pf-c-page__main",tabindex:"-1"},at={class:"pf-c-page__main-section pf-m-no-padding"},ot={class:"pf-c-drawer__main"};function nt(d,e,o,a,_,m){const s=u("page-header"),p=u("data-table-activity-logs"),w=u("delete-modal");return l(),i(C,null,[t("main",tt,[F(s,{pagename:a.viewstate.pagename,desc:a.viewstate.pagedesc},null,8,["pagename","desc"]),e[3]||(e[3]=t("div",{class:"pf-c-divider",role:"separator"},null,-1)),t("section",at,[t("div",{class:y(["pf-c-drawer",{"pf-m-expanded":a.viewstate.openDrawerState}])},[t("div",ot,[F(p,{pagename:a.viewstate.pagenamesingle,tabledata:a.table,onPagechanged:a.dataTablePageChanged,onOpenDrawer:e[0]||(e[0]=b=>d.openDrawer(b)),onDeleteRow:e[1]||(e[1]=b=>a.deleteRow(b)),newBtnEnabled:!1,editBtnEnabled:!1},null,8,["pagename","tabledata","onPagechanged"])])],2)])]),a.viewstate.showDeleteModal?(l(),x(w,{key:0,editid:a.viewstate.editid,onCloseModal:e[2]||(e[2]=b=>a.viewstate.showDeleteModal=!1),onConfirmDelete:a.confirmDelete},null,8,["editid","onConfirmDelete"])):f("",!0)],64)}const bt=B(et,[["render",nt]]);export{bt as default};
