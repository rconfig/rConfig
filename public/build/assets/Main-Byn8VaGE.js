import{ap as O,aq as L,ar as D,u as t,o as g,c as _,M as E,n as N,a as P,b,e as U,f as h,x as C,l as a,h as s,w as u,j as f,N as $,H as z,T as R,V as I,g as F,t as S,F as w,O as j,P as q,m as V,E as y,as as H,at as A,v as T,au as Y}from"./app-Crb4C5ld.js";import{_ as x,a as G}from"./Separator-COwxiLnU.js";import{_ as J,a as K,b as Q}from"./PopoverContent-B6vJiH8K.js";import{_ as W,a as X,b as Z,c as ee,d as te,e as B}from"./SelectScrollDownButton-DqO5bH0r.js";import{_ as se}from"./SelectLabel-CpiIwo-X.js";import{_ as M}from"./Spinner-B59Ly69n.js";/* empty css               */const ae={__name:"Textarea",props:{class:{type:null,required:!1},defaultValue:{type:[String,Number],required:!1},modelValue:{type:[String,Number],required:!1}},emits:["update:modelValue"],setup(m,{emit:l}){const n=m,r=O(n,"modelValue",l,{passive:!0,defaultValue:n.defaultValue});return(c,o)=>L((g(),_("textarea",{"onUpdate:modelValue":o[0]||(o[0]=e=>E(r)?r.value=e:null),class:N(t(P)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 focus:outline-none focus-visible:ring-0",n.class))},null,2)),[[D,t(r)]])}};function ne(){const m=b(""),{toastSuccess:l,toastError:n}=U();function d(){h.get("/api/settings/banner/1").then(o=>{m.value=o.data.login_banner}).catch(o=>{console.log(o.response),n("Error","Failed to load banner")})}function r(){h.patch("/api/settings/banner/1",{login_banner:m.value}).then(o=>{l("Success","Banner saved successfully")}).catch(o=>{console.log(o),n("Error","Failed to save banner")})}function c(){m.value="Authorization message - You must be an authorized user to login and use this system.",r()}return{banner:m,getLoginBanner:d,saveBanner:r,resetBanner:c}}const le={class:"grid w-full max-w-full items-center gap-1.5"},oe={class:"flex justify-end jap-2"},ie={__name:"SystemSettingsFormBanner",props:{},setup(m){const{banner:l,getLoginBanner:n,saveBanner:d,resetBanner:r}=ne();return C(()=>{n()}),(c,o)=>(g(),_("div",le,[o[4]||(o[4]=a("h3",{class:"mb-4 text-2xl font-semibold leading-7 tracking-tight font-inter"},"Banner",-1)),o[5]||(o[5]=a("p",{class:"text-sm text-muted-foreground"},"The standard banner to display on the login page.",-1)),s(t(ae),{placeholder:t(l)||"Enter your banner here...",modelValue:t(l),"onUpdate:modelValue":o[0]||(o[0]=e=>E(l)?l.value=e:null)},null,8,["placeholder","modelValue"]),a("div",oe,[s(t(z),{variant:"outline",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",onClick:o[1]||(o[1]=$(e=>t(d)(),["prevent"])),size:"sm"},{default:u(()=>o[2]||(o[2]=[f(" Save ")])),_:1}),s(t(z),{variant:"outline",class:"px-2 py-1 ml-2 text-sm bg-rcgray-900 hover:bg-rcgray-800 hover:animate-pulse",onClick:$(t(r),["prevent"]),size:"sm"},{default:u(()=>o[3]||(o[3]=[f(" Reset ")])),_:1},8,["onClick"])]),s(t(x),{class:"my-6"})]))}};function re(){const{toastSuccess:m,toastError:l}=U(),n=b(!1),d=R({}),r=b(""),c=b(""),o=I(()=>c.value?Object.fromEntries(Object.entries(d).filter(([i,k])=>k.toLowerCase().includes(c.value.toLowerCase()))):d);C(()=>{e(),p()});function e(){h.get("/api/settings/timezone/1",{}).then(i=>{r.value=i.data.timezone}).catch(i=>{console.log(i)})}function p(){h.get("/api/settings/get-timezone-list").then(i=>{Object.assign(d,i.data)}).catch(i=>(console.log(i),l("Error","Failed to get Timezone list"),[]))}function v(i){h.patch("/api/settings/timezone/1",{timezone:i}).then(k=>{n.value=!1,m("Timezone set successfully","Timezone offset set to "+i)}).catch(k=>{console.log(k),l("Error","Failed to set timezone"),n.value=!1})}return{popoverState:n,changeTimezone:v,currentTimezone:r,searchTerm:c,filteredTimezones:o}}const ue={class:"grid w-full max-w-full items-center gap-1.5"},me={class:"w-full text-sm text-muted-foreground"},de={class:"grid w-full max-w-full items-center gap-1.5"},ce={class:"relative items-center w-full"},pe={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},fe=["onClick"],ge={key:0,class:"ml-2 pf-c-select__menu-item-icon"},_e={__name:"SystemSettingsFormTimezone",setup(m){const{popoverState:l,changeTimezone:n,currentTimezone:d,searchTerm:r,filteredTimezones:c}=re();return(o,e)=>{const p=F("Icon");return g(),_("div",ue,[e[4]||(e[4]=a("h3",{class:"mb-2 text-2xl font-semibold leading-7 tracking-tight font-inter"},"Timezone",-1)),a("span",me,"Current timezone: "+S(t(d)),1),a("div",de,[s(t(Q),{open:t(l)},{default:u(()=>[s(t(J),{class:"col-span-3"},{default:u(()=>[s(t(z),{onClick:e[0]||(e[0]=v=>l.value=!t(l)),variant:"ghost",class:"flex flex-wrap items-start justify-start w-full p-1 pl-2 whitespace-normal border h-fit"},{default:u(()=>[f(S(t(d)??"Select timezone"),1)]),_:1})]),_:1}),s(t(K),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:u(()=>[a("div",ce,[s(t(w),{id:"search",type:"text",modelValue:t(r),"onUpdate:modelValue":e[1]||(e[1]=v=>E(r)?r.value=v:null),placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",pe,[s(p,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),s(t(x)),s(t(G),{class:"w-full h-64"},{default:u(()=>[(g(!0),_(j,null,q(t(c),(v,i)=>(g(),_("div",{class:"p-1 mx-2 rounded-sm text-md font-inter hover:bg-rcgray-600",key:v},[a("div",{class:"flex items-center justify-between text-xs font-medium cursor-default",onClick:$(k=>t(n)(i),["prevent"])},[f(S(v)+" ",1),i===t(d)?(g(),_("div",ge,[s(p,{icon:"octicon:check-16",class:"w-3 h-3 text-blue-400"})])):V("",!0)],8,fe)]))),128))]),_:1}),s(t(x)),e[2]||(e[2]=a("div",{class:"p-1 border-5"},null,-1))]),_:1}),e[3]||(e[3]=a("span",{class:"w-full text-sm text-muted-foreground"},[a("span",{class:"w-full text-sm text-warning"},"Selecting a new timezone will cause a full page reload, wait for a second...")],-1))]),_:1},8,["open"])]),s(t(x),{class:"my-6"})])}}};function ve(){const{toastSuccess:m,toastError:l}=U(),n=b({}),d=b(!1),r=b(!1);C(()=>{c()});function c(){h.get("/api/settings/email/1").then(p=>{n.value=p.data})}function o(){h.patch("/api/settings/email/1",{mail_driver:"smtp",mail_host:n.value.mail_host,mail_port:n.value.mail_port,mail_username:n.value.mail_username,mail_password:n.value.mail_password,mail_from_email:n.value.mail_from_email,mail_to_email:n.value.mail_to_email,mail_authcheck:n.value.mail_authcheck,mail_encryption:n.value.mail_encryption}).then(p=>{m(p.data.message)}).catch(p=>{l(p.response.data.message)})}function e(p){switch(p){case"email":d.value=!0;break;case"notification":r.value=!0;break}h.get("/api/settings/test-"+p).then(v=>{m(v.data.message),d.value=!1,r.value=!1}).catch(v=>{l(v.response.data.message)})}return{settings:n,test1Loading:d,test2Loading:r,testEmail:e,updateEmail:o}}const xe={class:"grid w-full max-w-full items-center gap-1.5"},ye={class:"grid gap-2 py-4"},be={class:"grid items-center grid-cols-4 gap-4"},he={class:"grid items-center grid-cols-4 gap-4"},we={class:"grid items-center grid-cols-4 gap-4"},$e={class:"grid items-center grid-cols-4 gap-4"},ke={class:"grid items-center grid-cols-4 gap-4"},Se={class:"inline-flex items-center cursor-pointer"},Ve=["checked"],ze={key:0,class:"grid gap-2 pt-2"},Fe={class:"grid items-center grid-cols-4 gap-4"},Ce={class:"grid items-center grid-cols-4 gap-4"},Te={class:"grid items-center grid-cols-4 gap-4"},Ee={class:"flex justify-between"},Ue={class:"flex justify-end jap-2"},je={class:"flex justify-end jap-2"},Be={__name:"SystemSettingsFormEmail",props:{},setup(m){const{settings:l,test1Loading:n,test2Loading:d,testEmail:r,updateEmail:c}=ve();return(o,e)=>{const p=F("Icon"),v=F("Button");return g(),_(j,null,[a("div",xe,[e[27]||(e[27]=a("h3",{class:"mb-2 text-2xl font-semibold leading-7 tracking-tight font-inter"},"Email",-1)),e[28]||(e[28]=a("p",{class:"text-sm text-muted-foreground"},"Configure the email settings for the system notifications.",-1)),a("div",ye,[a("div",be,[s(t(y),{for:"mail_host",class:"text-right"},{default:u(()=>e[11]||(e[11]=[f(" Mail Host "),a("span",{class:"text-red-600"},"*",-1)])),_:1}),s(t(w),{id:"mail_host",modelValue:t(l).mail_host,"onUpdate:modelValue":e[0]||(e[0]=i=>t(l).mail_host=i),autocomplete:"off",class:"col-span-3"},null,8,["modelValue"])]),a("div",he,[s(t(y),{for:"mail_port",class:"text-right"},{default:u(()=>e[12]||(e[12]=[f(" Mail Port "),a("span",{class:"text-red-600"},"*",-1)])),_:1}),s(t(w),{id:"mail_port",type:"number",modelValue:t(l).mail_port,"onUpdate:modelValue":e[1]||(e[1]=i=>t(l).mail_port=i),autocomplete:"off",class:"col-span-3"},null,8,["modelValue"])]),a("div",we,[s(t(y),{for:"mail_from_email",class:"text-right"},{default:u(()=>e[13]||(e[13]=[f(" Mail From Email "),a("span",{class:"text-red-600"},"*",-1)])),_:1}),s(t(w),{id:"mail_from_email",modelValue:t(l).mail_from_email,"onUpdate:modelValue":e[2]||(e[2]=i=>t(l).mail_from_email=i),autocomplete:"off",class:"col-span-3"},null,8,["modelValue"])]),a("div",$e,[s(t(y),{for:"mail_to_email",class:"text-right"},{default:u(()=>e[14]||(e[14]=[f(" Mail To Email "),a("span",{class:"text-red-600"},"*",-1)])),_:1}),s(t(w),{id:"mail_to_email",modelValue:t(l).mail_to_email,"onUpdate:modelValue":e[3]||(e[3]=i=>t(l).mail_to_email=i),autocomplete:"off",class:"col-span-3"},null,8,["modelValue"])]),a("div",ke,[s(t(y),{for:"mail_authcheck",class:"text-right"},{default:u(()=>e[15]||(e[15]=[f(" Mail Auth Check "),a("span",{class:"text-red-600"},"*",-1)])),_:1}),e[17]||(e[17]=a("input",{type:"checkbox",value:"",class:"sr-only peer"},null,-1)),a("label",Se,[L(a("input",{type:"checkbox",value:"",checked:t(l).mail_authcheck===1,"onUpdate:modelValue":e[4]||(e[4]=i=>t(l).mail_authcheck=i),class:"sr-only peer"},null,8,Ve),[[H,t(l).mail_authcheck]]),e[16]||(e[16]=a("div",{class:"relative w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))])]),s(A,{name:"fade"},{default:u(()=>[t(l).mail_authcheck?(g(),_("div",ze,[a("div",Fe,[s(t(y),{for:"mail_username",class:"text-right"},{default:u(()=>e[18]||(e[18]=[f(" Mail Username "),a("span",{class:"text-red-600"},"*",-1)])),_:1}),s(t(w),{id:"mail_username",modelValue:t(l).mail_username,"onUpdate:modelValue":e[5]||(e[5]=i=>t(l).mail_username=i),autocomplete:"off",class:"col-span-3"},null,8,["modelValue"])]),a("div",Ce,[s(t(y),{for:"mail_password",class:"text-right"},{default:u(()=>e[19]||(e[19]=[f(" Mail Password "),a("span",{class:"text-red-600"},"*",-1)])),_:1}),s(t(w),{id:"mail_password",modelValue:t(l).mail_password,"onUpdate:modelValue":e[6]||(e[6]=i=>t(l).mail_password=i),autocomplete:"off",class:"col-span-3"},null,8,["modelValue"])]),a("div",Te,[s(t(y),{for:"mail_encryption",class:"text-right"},{default:u(()=>e[20]||(e[20]=[f(" Mail Encryption "),a("span",{class:"text-red-600"},"*",-1)])),_:1}),s(t(W),{modelValue:t(l).mail_encryption,"onUpdate:modelValue":e[7]||(e[7]=i=>t(l).mail_encryption=i)},{default:u(()=>[s(t(X),{class:"w-full focus:outline-none focus:ring-0"},{default:u(()=>[s(t(Z),{placeholder:"Select an encryption option.."})]),_:1}),s(t(ee),{class:""},{default:u(()=>[s(t(te),null,{default:u(()=>[s(t(se),null,{default:u(()=>e[21]||(e[21]=[f("-- Select an option --")])),_:1}),s(t(B),{value:"tls"},{default:u(()=>e[22]||(e[22]=[f("TLS")])),_:1}),s(t(B),{value:"ssl"},{default:u(()=>e[23]||(e[23]=[f("SSL")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])):V("",!0)]),_:1})]),a("div",Ee,[a("div",Ue,[s(v,{variant:"outline",class:"px-2 py-1 ml-2 text-sm bg-rcgray-900 hover:bg-rcgray-800",onClick:e[8]||(e[8]=$(i=>t(r)("email"),["prevent"])),size:"sm"},{default:u(()=>[s(M,{state:t(n)},null,8,["state"]),t(n)?V("",!0):(g(),T(p,{key:0,icon:"fluent-color:mail-multiple-32",class:"w-4 h-4 mr-2"})),e[24]||(e[24]=f(" Send Test Email "))]),_:1}),s(v,{variant:"outline",class:"px-2 py-1 ml-2 text-sm bg-rcgray-900 hover:bg-rcgray-800",onClick:e[9]||(e[9]=$(i=>t(r)("notification"),["prevent"])),size:"sm"},{default:u(()=>[s(M,{state:t(d)},null,8,["state"]),t(d)?V("",!0):(g(),T(p,{key:0,icon:"fluent-color:alert-32",class:"w-4 h-4 mr-2"})),e[25]||(e[25]=f(" Send Test Notification "))]),_:1})]),a("div",je,[s(v,{variant:"outline",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700",onClick:e[10]||(e[10]=$(i=>t(c)(),["prevent"])),size:"sm"},{default:u(()=>e[26]||(e[26]=[f(" Save ")])),_:1})])])]),s(t(x),{class:"my-6"})],64)}}},Me={class:"flex justify-center"},Le={class:"flex flex-col items-center w-1/2 gap-4"},Ne={__name:"SystemSettingsForm",setup(m){return(l,n)=>(g(),_("div",Me,[a("div",Le,[s(_e),s(ie),s(Be)])]))}},Ie={__name:"SecurityForm",setup(m){return(l,n)=>(g(),_("div",null,[n[0]||(n[0]=a("h3",{class:"text-lg font-medium"},"Security",-1)),n[1]||(n[1]=a("p",{class:"text-sm text-muted-foreground"},"Update your account settings. Set your preferred language and timezone.",-1)),s(t(x),{class:"my-6"})]))}},qe={__name:"AboutForm",setup(m){return(l,n)=>(g(),_("div",null,[n[0]||(n[0]=a("h3",{class:"text-lg font-medium"},"AboutForm",-1)),n[1]||(n[1]=a("p",{class:"text-sm text-muted-foreground"},"Update your account settings. Set your preferred language and timezone.",-1)),s(t(x),{class:"my-6"})]))}},Ae={__name:"LogsForm",setup(m){return(l,n)=>(g(),_("div",null,[n[0]||(n[0]=a("h3",{class:"text-lg font-medium"},"LogsForm",-1)),n[1]||(n[1]=a("p",{class:"text-sm text-muted-foreground"},"Update your account settings. Set your preferred language and timezone.",-1)),s(t(x),{class:"my-6"})]))}},Oe={__name:"UpgradeForm",setup(m){return(l,n)=>(g(),_("div",null,[n[0]||(n[0]=a("h3",{class:"text-lg font-medium"},"UpgradeForm",-1)),n[1]||(n[1]=a("p",{class:"text-sm text-muted-foreground"},"Update your account settings. Set your preferred language and timezone.",-1)),s(t(x),{class:"my-6"})]))}};function De(){const m=b("/settings/system"),l={"/settings/system":Ne,"/settings/security":Ie,"/settings/about":qe,"/settings/logs":Ae,"/settings/upgrade":Oe};function n(r){m.value=r,localStorage.setItem("activeForm",r)}const d=I(()=>l[m.value]||null);return{activeForm:m,setForm:n,formComponents:l,activeFormComponent:d}}const Pe={class:"flex space-x-2 lg:flex-col lg:space-x-0 lg:space-y-1"},Re={__name:"SidebarNav",props:{activeForm:String},emits:["nav"],setup(m,{emit:l}){const n=[{title:"System",href:"/settings/system"},{title:"Security",href:"/settings/security"},{title:"About",href:"/settings/about"},{title:"Logs",href:"/settings/logs"},{title:"Upgrade",href:"/settings/upgrade"}],d=l;function r(c){d("nav",c)}return(c,o)=>(g(),_("nav",Pe,[(g(),_(j,null,q(n,e=>s(t(z),{key:e.title,onClick:p=>r(e.href),variant:"ghost",class:N([[m.activeForm===e.href?"  bg-rcgray-600":"text-rcgray-300"],"inline-flex items-center justify-start w-full px-4 py-2 text-sm font-medium text-left transition-colors rounded-md whitespace-nowrap focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 hover:text-accent-foreground h-9 hover:bg-rcgray-800"])},{default:u(()=>[f(S(e.title),1)]),_:2},1032,["onClick","class"])),64))]))}},He={class:"pb-16 pl-10 space-y-6 md:block"},Ye={class:"space-y-0.5"},Ge={class:"flex items-center space-x-2 text-2xl font-bold tracking-tight"},Je={class:"flex flex-col space-y-8 lg:flex-row lg:space-x-12 lg:space-y-0"},Ke={class:"lg:w-[10%]"},Qe={class:"flex-1"},We={class:"space-y-6"},lt={__name:"Main",setup(m){const{activeForm:l,setForm:n,formComponents:d,activeFormComponent:r}=De();return C(()=>{const c=localStorage.getItem("activeForm");c&&(l.value=c)}),(c,o)=>{const e=F("Icon");return g(),_("div",He,[a("div",Ye,[a("h2",Ge,[s(e,{icon:"catppuccin:env",class:"w-6 h-6"}),o[1]||(o[1]=a("span",null,"Settings",-1))]),o[2]||(o[2]=a("p",{class:"text-muted-foreground"},"Manage your account settings and set e-mail preferences.",-1))]),s(t(x),{class:"my-6"}),a("div",Je,[a("aside",Ke,[s(Re,{onNav:o[0]||(o[0]=p=>t(n)(p)),activeForm:t(l)},null,8,["activeForm"])]),a("div",Qe,[a("div",We,[s(A,{name:"fade",mode:"out-in"},{default:u(()=>[(g(),T(Y(t(r)),{key:t(l)}))]),_:1})])])])])}}};export{lt as default};
