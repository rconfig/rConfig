import{D as V}from"./DataTableToolbar-BwPFEpJn.js";import{D as K}from"./DataTableSpinner-z8HceaJB.js";import{D as G,a as H,u as J,b as Q}from"./DeleteModal-CxTtXkOc.js";import{e as E,y as z,G as U,l as N,k as P,r as D,s as A,p as v,o as l,c,a,h as O,t as h,F as x,i as R,d as L,j as k,b as w,w as C,n as b,m as W,E as X,q as M}from"./app-C9AuNpcX.js";import{D as Y}from"./DevicesBreadcrumbs-fdqai0xq.js";import{L as Z}from"./LoadingSpinner-BDNkgvVg.js";import{P as $}from"./PageHeader-C0d3TrAV.js";import{u as ee,a as te}from"./ViewFunctions-Dm_yn-26.js";/* empty css               */const ae={props:{},emits:["filterTable"],setup(_,{emit:t}){const o=z();U();const e=N("create-notification"),y=o.params.id,f=o.query.devicename,d=P({}),r=o.query.status?o.query.status:"all",p=D(!1),g=D("");A(()=>{u()});function u(){axios.get("/api/configs/distinct-commands/"+y).then(m=>{Object.assign(d,m.data.data)}).catch(m=>{e({type:"danger",title:"Error",message:m.response})})}function B(m){g.value=m,p.value=!1,t("filterTable",m)}function n(){p.value=!p.value}function s(){g.value="",p.value=!1,t("filterTable","")}return{deviceid:y,devicename:f,distinctCommands:d,showSelect:p,toggleSelect:n,filterCommandSelected:g,activeStatus:r,filterOnCommand:B,clearFilter:s}}},oe={class:"pf-c-toolbar__group pf-m-filter-group"},ne={class:"pf-c-toolbar__item"},se={class:"pf-c-select"},le={class:"pf-c-select__toggle-wrapper"},ie=["textContent"],ce={key:0,class:"pf-c-select__menu multi-select-dropdown-overflow",role:"listbox"},re=["onClick"],de={key:0,class:"pf-c-select__menu-item-icon"},fe={class:"pf-c-toolbar__group pf-m-icon-button-group"},ue={class:"pf-c-toolbar__item"},pe={class:"pf-c-toolbar__item"},me={class:"pf-c-toolbar__item"},_e={class:"pf-c-toolbar__item"};function ge(_,t,o,e,y,f){const d=v("router-link");return l(),c(x,null,[t[5]||(t[5]=a("hr",{class:"pf-c-divider pf-m-vertical"},null,-1)),a("div",oe,[a("div",ne,[a("div",se,[a("button",{class:"pf-c-select__toggle",type:"button","aria-haspopup":"true","aria-expanded":"false",onClick:t[0]||(t[0]=O((...r)=>e.toggleSelect&&e.toggleSelect(...r),["prevent"]))},[a("div",le,[a("span",{class:"pf-c-select__toggle-text",textContent:h(e.filterCommandSelected?e.filterCommandSelected:"Filter command")},null,8,ie)]),t[2]||(t[2]=a("span",{class:"pf-c-select__toggle-arrow"},[a("i",{class:"fas fa-caret-down","aria-hidden":"true"})],-1))]),e.showSelect||!1?(l(),c("ul",ce,[(l(!0),c(x,null,R(e.distinctCommands,r=>(l(),c("li",{role:"presentation",key:r},[a("button",{class:"pf-c-select__menu-item",role:"option",onClick:O(p=>e.filterOnCommand(r.command),["prevent"])},[L(h(r.command)+" ",1),r.command===e.filterCommandSelected?(l(),c("span",de,t[3]||(t[3]=[a("i",{class:"fas fa-check","aria-hidden":"true"},null,-1)]))):k("",!0)],8,re)]))),128))])):k("",!0)])]),a("button",{class:"pf-c-button pf-m-plain pf-c-select__toggle-clear",type:"button","aria-label":"Clear all",onClick:t[1]||(t[1]=O(r=>e.clearFilter(),["prevent"]))},t[4]||(t[4]=[a("i",{class:"fas fa-times-circle","aria-hidden":"true"},null,-1)]))]),t[6]||(t[6]=a("hr",{class:"pf-c-divider pf-m-vertical"},null,-1)),a("div",fe,[a("div",ue,[w(d,{type:"button",class:"pf-c-button pf-m-plain",to:{path:"/device/view/configs/"+e.deviceid,query:{id:e.deviceid,devicename:e.devicename,status:"all"}}},{default:C(()=>[a("i",{class:b(["fas fa-expand-arrows-alt",e.activeStatus=="all"?"statusActive":"statusInactive"]),alt:"Show all configs",title:"Show all configs"},null,2)]),_:1},8,["to"])]),a("div",pe,[w(d,{type:"button",class:"pf-c-button pf-m-plain",to:{path:"/device/view/configs/"+e.deviceid,query:{id:e.deviceid,devicename:e.devicename,status:1}}},{default:C(()=>[a("i",{class:b(["fa fa-check-circle pf-u-success-color-100",e.activeStatus=="1"?"statusActive":"statusInactive"]),alt:"Show configs with completed status",title:"Show configs with completed status"},null,2)]),_:1},8,["to"])]),a("div",me,[w(d,{type:"button",class:"pf-c-button pf-m-plain",to:{path:"/device/view/configs/"+e.deviceid,query:{id:e.deviceid,devicename:e.devicename,status:2}}},{default:C(()=>[a("i",{class:b(["fa fa-exclamation-triangle pf-u-warning-color-100",e.activeStatus=="2"?"statusActive":"statusInactive"]),alt:"Show configs with unknown status",title:"Show configs with unknown status"},null,2)]),_:1},8,["to"])]),a("div",_e,[w(d,{type:"button",class:"pf-c-button pf-m-plain",to:{path:"/device/view/configs/"+e.deviceid,query:{id:e.deviceid,devicename:e.devicename,status:0}}},{default:C(()=>[a("i",{class:b(["fa fa-exclamation-circle pf-u-danger-color-100",e.activeStatus=="0"?"statusActive":"statusInactive"]),alt:"Show configs with failed status",title:"Show configs with failed status"},null,2)]),_:1},8,["to"])])])],64)}const be=E(ae,[["render",ge],["__scopeId","data-v-d2fa9ff6"]]),ve={components:{DataTableToolbar:V,DataTableSpinner:K,DataTableEmptyState:G,DataTablePaginate:H,ConfigsCustomToolbarActions:be},props:{pagename:{type:String},tabledata:{type:Object,required:[]},searchInputDisabled:{type:Boolean,default:!0},newBtnEnabled:{type:Boolean,default:!0},editBtnEnabled:{type:Boolean,default:!0},rowsDeleteNotification:{type:Boolean,default:!1}},emits:["openDrawer","deleteRow","pagechanged","deleteManyRows","checkBoxesCleared"],setup(_,{emit:t}){const o=P({pageParams:{page:1,perpage:10,filters:null,sortby:null,sortOrder:"desc"},sortIcon:{base:"fas fa-arrows-alt-v",is:"fa-sort",up:"fas fa-long-arrow-alt-up",down:"fas fa-long-arrow-alt-down"}}),e=D(o.sortIcon.base),y=D(0),f=D([]),d=D(!1),{setupResizableTable:r}=J(),p=N("formatTime");W(()=>{_.rowsDeleteNotification===!0&&(f.value=[],_.tabledata.data.data.forEach(i=>{i.id&&(i.checked=!1)}),t("checkBoxesCleared")),_.tabledata.isLoading||r()});function g(){d.value===!1?(f.value=[],_.tabledata.data.data.length>0&&_.tabledata.data.data.forEach(i=>{i.id&&(i.checked=!0,f.value.push(i.id))})):(_.tabledata.data.data.forEach(i=>{i.id&&(i.checked=!1)}),f.value=[]),d.value=!d.value}function u(i){const S=f.value.indexOf(i);S>-1?f.value.splice(S,1):f.value.push(i)}function B(i,S=!1){t("openDrawer",{id:i,isClone:S})}function n(i){t("deleteRow",i)}function s(){t("deleteManyRows",f)}function m(){o.pageParams.filters="",t("pagechanged",o.pageParams)}function F(i){o.pageParams.filters=i,t("pagechanged",o.pageParams)}function I(i){o.pageParams.page=i.page,o.pageParams.per_page=i.per_page,t("pagechanged",o.pageParams)}function T(i,S){e.value=o.pageParams.sortOrder==="desc"?o.sortIcon.up:o.sortIcon.down,y.value=S,o.pageParams.sortby=i,o.pageParams.sortOrder=o.pageParams.sortOrder==="desc"?"asc":"desc",t("pagechanged",o.pageParams)}function j(i){var S=["B","KB","MB","GB","TB"];if(i==0)return"0 Byte";var q=parseInt(Math.floor(Math.log(i)/Math.log(1024)));return Math.round(i/Math.pow(1024,q),2)+" "+S[q]}return{addFilters:F,allSelected:d,bytesToSize:j,checkedRows:f,clearFilters:m,data:o,deleteRow:n,deleteSelected:s,formatTime:p,isSorted:y,openDrawer:B,pageChanged:I,selectAllRows:g,selectRow:u,sortBy:T,sortIcon:e}}},we={class:"pf-c-drawer__content pf-m-no-background"},ye={class:"pf-c-drawer__body pf-m-padding"},ke={class:"pf-c-card"},he={class:"pf-c-table pf-m-compact pf-m-grid-lg",role:"grid",id:"resizeMe"},De={role:"row"},Ce={class:"pf-c-table__check",role:"cell",id:"headerRow"},Se={key:0},Be=["onClick"],xe={class:"pf-c-table__button-content"},Ie={class:"pf-c-table__text"},Re={class:"pf-c-table__sort-indicator"},Me={key:1,role:"rowgroup"},Pe={class:"pf-c-table__check",role:"cell"},Te=["onClick","checked"],Oe=["data-label"],Ee={key:0},Ne={key:1},Fe={key:3},qe={key:1},ze={key:3},Ae={role:"cell","data-label":"Actions",class:"pf-m-fit-content"},Le=["onClick"];function je(_,t,o,e,y,f){const d=v("configs-custom-toolbar-actions"),r=v("data-table-toolbar"),p=v("data-table-spinner"),g=v("router-link"),u=v("data-table-empty-state"),B=v("data-table-paginate");return l(),c("div",we,[a("div",ye,[a("div",ke,[w(r,{pagename:o.pagename,onSearchInput:t[2]||(t[2]=n=>e.addFilters(n)),onOpenDrawer:t[3]||(t[3]=n=>e.openDrawer(n)),newBtnEnabled:o.newBtnEnabled,searchInputDisabled:o.searchInputDisabled},X({customActions:C(()=>[w(d,{onFilterTable:t[0]||(t[0]=n=>e.addFilters(n))})]),_:2},[e.checkedRows.length>0?{name:"customButtons",fn:C(()=>[a("button",{class:"pf-c-button pf-m-danger",type:"button",onClick:t[1]||(t[1]=n=>e.deleteSelected())},"Delete selected")]),key:"0"}:void 0]),1032,["pagename","newBtnEnabled","searchInputDisabled"]),a("table",he,[a("thead",null,[a("tr",De,[a("td",Ce,[a("label",null,[a("input",{type:"checkbox",onClick:t[4]||(t[4]=n=>e.selectAllRows())})])]),(l(!0),c(x,null,R(o.tabledata.headers,(n,s)=>(l(),c("th",{key:n.name,class:b(["pf-c-table__sort pf-c-table__icon",[e.isSorted===s?"pf-m-selected":"",n.hideOnSmall?"pf-m-hidden pf-m-visible-on-xl":""]])},[n.sortable?k("",!0):(l(),c("span",Se,h(n.label),1)),n.sortable?(l(),c("button",{key:1,class:"pf-c-table__button",onClick:m=>e.sortBy(n.key,s)},[a("div",xe,[a("span",Ie,h(n.label),1),a("span",Re,[a("i",{class:b(e.isSorted===s?e.sortIcon:e.data.sortIcon.base)},null,2)])])],8,Be)):k("",!0)],2))),128)),t[6]||(t[6]=a("th",{class:"pf-c-table__icon pf-m-fit-content",role:"columnheader",scope:"col"},"Actions",-1))])]),o.tabledata.isLoading?(l(),M(p,{key:0})):k("",!0),o.tabledata.data.total>0||o.tabledata.isLoading?(l(),c("tbody",Me,[(l(!0),c(x,null,R(o.tabledata.data.data,n=>(l(),c("tr",{role:"row",key:n.name},[a("td",Pe,[a("label",null,[a("input",{type:"checkbox",onClick:s=>e.selectRow(n.id),checked:n.checked},null,8,Te)])]),(l(!0),c(x,null,R(o.tabledata.headers,s=>(l(),c("td",{key:s.label,role:"cell","data-label":s.label,class:b([s.hideOnSmall?"pf-m-hidden pf-m-visible-on-xl":"","pf-m-truncate"])},[s.isRelationShip===!0?(l(),c("div",Ee,[(l(!0),c(x,null,R(n[s.key],m=>(l(),c("div",{key:m.id},h(m[s.relationshipKey]),1))),128))])):(l(),c("div",Ne,[s.isStatusIcon?(l(),c("i",{key:0,class:b(n[s.key]=="0"?"fa fa-exclamation-circle pf-u-danger-color-100":"")},null,2)):k("",!0),s.isStatusIcon?(l(),c("i",{key:1,class:b(n[s.key]=="1"?"fa fa-check-circle pf-u-success-color-100 ":"")},null,2)):k("",!0),s.isStatusIcon?(l(),c("i",{key:2,class:b(n[s.key]=="2"?"fa fa-exclamation-triangle pf-u-warning-color-100":"")},null,2)):(l(),c("span",Fe,[s.isLink?(l(),M(g,{key:0,class:"Card__link",to:"/device/view/"+n.id},{default:C(()=>[L(h(n[s.key]),1)]),_:2},1032,["to"])):k("",!0),s.key==="config_filesize"?(l(),c("span",qe,h(e.bytesToSize(n[s.key])),1)):s.key==="created_at"?(l(),c("span",{key:2,class:b(n.config_downloaded===0?"pf-u-disabled-color-200":"")},h(e.formatTime(n[s.key])),3)):(l(),c("span",ze,h(n[s.key]),1))]))]))],10,Oe))),128)),a("td",Ae,[a("div",null,[w(g,{type:"button",class:"pf-c-button pf-m-link",to:"/device/view/configs/view-config/"+n.id},{default:C(()=>t[7]||(t[7]=[a("span",{class:"pf-c-button__icon pf-m-start"},[a("i",{class:"fas fa-search","aria-hidden":"true"})],-1)])),_:2},1032,["to"]),a("button",{class:"pf-c-button pf-m-link pf-m-danger pf-m-small",type:"button",onClick:s=>e.deleteRow(n.id),alt:"Delete",title:"Delete"},t[8]||(t[8]=[a("span",{class:"pf-c-button__icon pf-m-start"},[a("i",{class:"fas fa-trash","aria-hidden":"true"})],-1)]),8,Le)])])]))),128))])):o.tabledata.isLoading?k("",!0):(l(),M(u,{key:2,onClear:e.clearFilters},null,8,["onClear"]))]),w(B,{from:o.tabledata.data.from,to:o.tabledata.data.to,total:o.tabledata.data.total,current_page:o.tabledata.data.current_page,last_page:o.tabledata.data.last_page,onPagechanged:t[5]||(t[5]=n=>e.pageChanged(n))},null,8,["from","to","total","current_page","last_page"])])])])}const Ve=E(ve,[["render",je]]),Ke={props:{},components:{DataTableConfigs:Ve,DeleteModal:Q,DevicesBreadcrumbs:Y,LoadingSpinner:Z,PageHeader:$},setup(_){const t=D("Device Configurations");D("Device configurations for this device");const o=z(),e=o.query.id,y=o.query.devicename,f=o.query.status?o.query.status:"all";N("create-notification");const d=D(!1),r=P({editid:0,pagename:"Device Configurations",pagedesc:"rConfig system activity log",pagenamesingle:"Device Configuration",modelName:"configs/all-by-deviceid/"+e+"/"+f,openDrawerState:!1,showDeleteModal:!1,sideDrawerComponentKey:1,pageOptionsState:{page:1,per_page:10},modelObject:{download_status:"",command:"",config_filename:"",config_filesize:"",created_at:""}}),{models:p,isLoading:g,deleteRow:u,deleteManyRows:B,dataTablePageChanged:n}=ee(r,r.modelName,r.modelObject),{destroyModel:s}=te("configs",r.modelObject);A(()=>{n(r.pageOptionsState)});const m=P({headers:[{key:"download_status",label:"Status",sortable:!0,isStatusIcon:!0},{key:"device_name",label:"Device Name",sortable:!0},{key:"command",label:"Command",sortable:!1},{key:"config_filename",label:"Filename",sortable:!1},{key:"config_filesize",label:"Filesize",sortable:!1},{key:"created_at",label:"Downloaded",sortable:!0}],data:p,isLoading:g});return{confirmDelete:async I=>{r.showDeleteModal=!1,typeof I=="number"&&await s(I,r.pagenamesingle),typeof I=="object"&&await I.forEach(T=>{s(T,r.pagenamesingle)}),n(r.pageOptionsState),d.value=!0},rowsDeleteNotification:d,dataTablePageChanged:n,deleteRow:u,deleteManyRows:B,deviceid:e,devicename:y,pagename:t,table:m,viewstate:r}}},Ge={class:"pf-c-page__main",tabindex:"-1"},He={class:"pf-c-page__main-section pf-m-no-padding"},Je={class:"pf-c-drawer__main"};function Qe(_,t,o,e,y,f){const d=v("devices-breadcrumbs"),r=v("page-header"),p=v("data-table-configs"),g=v("delete-modal");return l(),c(x,null,[a("main",Ge,[w(r,{pagename:e.pagename},{breadcrumbs:C(()=>[w(d,{devicename:e.devicename,deviceId:e.deviceid},null,8,["devicename","deviceId"])]),_:1},8,["pagename"]),t[5]||(t[5]=a("div",{class:"pf-c-divider",role:"separator"},null,-1)),a("section",He,[a("div",{class:b(["pf-c-drawer",{"pf-m-expanded":e.viewstate.openDrawerState}])},[a("div",Je,[w(p,{pagename:e.viewstate.pagenamesingle,tabledata:e.table,onPagechanged:e.dataTablePageChanged,onOpenDrawer:t[0]||(t[0]=u=>_.openDrawer(u)),onDeleteRow:t[1]||(t[1]=u=>e.deleteRow(u)),onDeleteManyRows:t[2]||(t[2]=u=>e.deleteManyRows(u)),onCheckBoxesCleared:t[3]||(t[3]=u=>e.rowsDeleteNotification=!1),newBtnEnabled:!1,editBtnEnabled:!1,searchInputEnabled:!1,rowsDeleteNotification:e.rowsDeleteNotification},null,8,["pagename","tabledata","onPagechanged","rowsDeleteNotification"])])],2)])]),e.viewstate.showDeleteModal?(l(),M(g,{key:0,editid:e.viewstate.editid,onCloseModal:t[4]||(t[4]=u=>e.viewstate.showDeleteModal=!1),onConfirmDelete:e.confirmDelete},null,8,["editid","onConfirmDelete"])):k("",!0)],64)}const ot=E(Ke,[["render",Qe]]);export{ot as default};
