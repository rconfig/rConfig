import{e as H,b as f,G as Q,f as U,H as X,g as j,o as v,s as I,w as l,h as t,u as e,J as Z,L as ee,M as te,j as i,t as w,N as se,l as d,O as B,P as z,c as F,m as L,Q as ae,R as C,K as le,S as ne,T as O,U as oe,V as W,W as ie,X as de,Y as re}from"./app-DpV55vIH.js";import{u as Y,a as ue,k as ce,_ as me,b as q,c as A,d as G,e as fe,j as ge,f as ve,g as M,h as ke,i as pe}from"./useRowSelection-BfVN9-14.js";/* empty css               */const _e={class:"grid gap-2 py-4"},ye={class:"grid items-center grid-cols-4 gap-4"},we={class:"grid items-center grid-cols-4 gap-4"},$e={class:"flex flex-col w-full space-y-2"},xe={key:0,class:"text-red-400"},be={key:1,class:"text-red-400"},De={class:"pl-2 ml-auto"},Te={class:"bxnAJf2"},Ie={class:"pl-2 ml-auto"},Ce={class:"bxnAJf2"},Ne={__name:"TaskAddEditDialog",props:{editId:Number},emits:["save"],setup(k,{emit:b}){const{toastSuccess:p,toastError:N,toastInfo:V,toastWarning:P,toastDefault:S}=H(),D=Y(),{openDialog:K,closeDialog:u,isDialogOpen:h}=D,$=b;f([]);const x=f([]),g=f({task_name:"",task_desc:""}),r=k;function E(c){c.ctrlKey&&c.key==="Enter"&&_()}Q(()=>{r.editId>0&&U.get(`/api/tasks/${r.editId}`).then(c=>{g.value=c.data}),window.addEventListener("keydown",E)}),X(()=>{window.removeEventListener("keydown",E)});function _(){let c=r.editId>0?`/${r.editId}`:"",s=r.editId>0?"patch":"post";U[s]("/api/tasks"+c,g.value).then(y=>{$("save",y.data),p("Task created","The tag has been created successfully."),u("DialogNewTask")}).catch(y=>{x.value=y.response.data.errors})}return(c,s)=>{const y=j("Icon");return v(),I(e(ne),{open:e(h)("DialogNewTask")},{default:l(()=>[t(e(Z),{"as-child":""}),t(e(le),{class:"sm:max-w-[425px]",onEscapeKeyDown:s[5]||(s[5]=m=>e(u)("DialogNewTask")),onPointerDownOutside:s[6]||(s[6]=m=>e(u)("DialogNewTask")),onCloseClicked:s[7]||(s[7]=m=>e(u)("DialogNewTask"))},{default:l(()=>[t(e(ee),null,{default:l(()=>[t(e(te),null,{default:l(()=>[i(w(k.editId>0?"Edit":"Add")+" Task "+w(k.editId>0?"(ID: "+k.editId+")":""),1)]),_:1}),t(e(se),null,{default:l(()=>[i("Make changes to your tag here. Click "+w(k.editId>0?"update":"save")+" when you're done.",1)]),_:1})]),_:1}),d("div",_e,[d("div",ye,[t(e(B),{for:"task_name",class:"text-right"},{default:l(()=>s[8]||(s[8]=[i(" Task Name ")])),_:1}),t(e(z),{modelValue:g.value.task_name,"onUpdate:modelValue":s[0]||(s[0]=m=>g.value.task_name=m),id:"task_name",class:"col-span-3"},null,8,["modelValue"])]),d("div",we,[t(e(B),{for:"task_desc",class:"text-right"},{default:l(()=>s[9]||(s[9]=[i(" Description ")])),_:1}),t(e(z),{modelValue:g.value.task_desc,"onUpdate:modelValue":s[1]||(s[1]=m=>g.value.task_desc=m),id:"task_desc",class:"col-span-3"},null,8,["modelValue"])])]),d("div",$e,[x.value.task_desc?(v(),F("span",xe,w(x.value.task_desc[0]),1)):L("",!0),x.value.task_name?(v(),F("span",be,w(x.value.task_name[0]),1)):L("",!0)]),t(e(ae),null,{default:l(()=>[t(e(C),{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:s[2]||(s[2]=m=>e(u)("DialogNewTask")),size:"sm"},{default:l(()=>s[10]||(s[10]=[i(" Cancel "),d("div",{class:"pl-2 ml-auto"},[d("kbd",{class:"bxnAJf"},"ESC")],-1)])),_:1}),r.editId===0?(v(),I(e(C),{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:s[3]||(s[3]=m=>_()),variant:"primary"},{default:l(()=>[s[12]||(s[12]=i(" Save ")),d("div",De,[d("kbd",Te,[s[11]||(s[11]=i(" Ctrl  ")),t(y,{icon:"uil:enter",class:""})])])]),_:1})):L("",!0),r.editId>0?(v(),I(e(C),{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:s[4]||(s[4]=m=>_()),variant:"primary"},{default:l(()=>[s[14]||(s[14]=i(" Update ")),d("div",Ie,[d("kbd",Ce,[s[13]||(s[13]=i(" Ctrl  ")),t(y,{icon:"uil:enter",class:""})])])]),_:1})):L("",!0)]),_:1})]),_:1})]),_:1},8,["open"])}}};function Pe(){const k=f(1),b=f(parseInt(localStorage.getItem("perPage")||"10")),p=f("-id"),N=f(""),V=f({}),P=Y(),S=f(0),D=f(!1),K=f(1),u=f(1),h=f([]),{openDialog:$}=P,{toastSuccess:x,toastError:g}=H();async function r(o={}){D.value=!0;try{const T=await U.get("/api/tasks",{params:{page:k.value,perPage:b.value,sort:p.value,...V.value}});h.value=T.data,K.value=T.data.last_page}catch(T){console.error("Error fetching tasks:",T),g("Error","Failed to fetch tasks.")}finally{D.value=!1}}const E=o=>{S.value=0,u.value=Math.random(),$("DialogNewTask")};function _(o){S.value=o,u.value=Math.random(),$("DialogNewTask")}const c=async o=>{try{await U.delete(`/api/tasks/${o}`),r(),x("Task Deleted","The task has been deleted successfully.")}catch(T){console.error("Error deleting task:",T),g("Error","Failed to delete task.")}},s=o=>{S.value=o,u.value=Math.random(),$("DialogNewTask")},y=()=>{r(),u.value=Math.random()};function m(o){o.altKey&&o.key==="n"&&(o.preventDefault(),$("DialogNewTask"))}const J=oe(()=>{V.value["filter[q]"]=N.value,k.value=1,r()},500);O([k,b],()=>{r()}),O(N,()=>{J()}),O(b,o=>{localStorage.setItem("perPage",o.toString())});function a(o){p.value===o?p.value=`-${o}`:p.value=o,r()}return{tasks:h,isLoading:D,currentPage:k,perPage:b,lastPage:K,editId:S,newTaskModalKey:u,searchTerm:N,openDialog:$,fetchTasks:r,createTask:E,updateTask:_,deleteTask:c,handleSave:y,handleKeyDown:m,viewEditDialog:s,toggleSort:a,sortParam:p}}const Se={class:"flex flex-col h-full gap-1 text-center"},Ee={class:"flex items-center justify-between p-4"},Ve={class:"flex items-center"},he={class:"flex"},Ae={class:"px-6"},Ue={__name:"Main",setup(k){const{editId:b,tasks:p,currentPage:N,perPage:V,searchTerm:P,lastPage:S,isLoading:D,fetchTasks:K,viewEditDialog:u,createTask:h,deleteTask:$,handleSave:x,handleKeyDown:g,newTaskModalKey:r,toggleSort:E,sortParam:_}=Pe(),{selectedRows:c,selectAll:s,toggleSelectAll:y,toggleSelectRow:m}=ue(p);return Q(()=>{K(),window.addEventListener("keydown",g)}),X(()=>{window.removeEventListener("keydown",g)}),(J,a)=>{const o=j("Icon"),T=j("Toaster");return v(),F("div",Se,[d("div",Ee,[d("div",Ve,[t(e(z),{class:"max-w-lg ml-4",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter tasks by ID or Name...",modelValue:e(P),"onUpdate:modelValue":a[0]||(a[0]=n=>W(P)?P.value=n:null)},null,8,["modelValue"]),t(e(C),{class:"ml-2 hover:bg-gray-800",variant:"outline",onClick:a[1]||(a[1]=n=>P.value="")},{default:l(()=>a[9]||(a[9]=[i(" Clear Filter ")])),_:1})]),d("div",he,[e(c).length?(v(),I(e(C),{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",variant:"primary"},{default:l(()=>[i(" Delete Selected "+w(e(c).length)+" Task(s) ",1)]),_:1})):L("",!0),t(e(C),{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:ie(e(h),["prevent"]),variant:"primary"},{default:l(()=>a[10]||(a[10]=[i(" New Task "),d("div",{class:"pl-2 ml-auto"},[d("kbd",{class:"bxnAJf2"},"ALT N")],-1)])),_:1},8,["onClick"])])]),d("div",Ae,[t(e(ge),null,{default:l(()=>[t(e(me),null,{default:l(()=>[t(e(q),null,{default:l(()=>[t(e(A),{class:"w-[2%]"},{default:l(()=>[t(e(G),{id:"selectAll",modelValue:e(s),"onUpdate:modelValue":a[2]||(a[2]=n=>W(s)?s.value=n:null),onClick:a[3]||(a[3]=n=>e(y)())},null,8,["modelValue"])]),_:1}),t(e(A),{class:"w-[5%]"},{default:l(()=>[t(e(C),{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:a[4]||(a[4]=n=>e(E)("id"))},{default:l(()=>[t(o,{icon:e(_)==="id"?"lucide:sort-asc":e(_)==="-id"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),a[11]||(a[11]=d("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),t(e(A),{class:"w-[20%]"},{default:l(()=>[t(e(C),{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:a[5]||(a[5]=n=>e(E)("task_name"))},{default:l(()=>[t(o,{icon:e(_)==="task_name"?"lucide:sort-asc":e(_)==="-task_name"?"lucide:sort-desc":"hugeicons:sorting-05"},null,8,["icon"]),a[12]||(a[12]=d("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),t(e(A),{class:"w-[30%]"},{default:l(()=>a[13]||(a[13]=[i("Description")])),_:1}),t(e(A),{class:"w-[10%]"},{default:l(()=>a[14]||(a[14]=[i("Created")])),_:1}),t(e(A),{class:"w-[10%]"},{default:l(()=>a[15]||(a[15]=[i("Actions")])),_:1})]),_:1})]),_:1}),t(e(fe),null,{default:l(()=>[e(D)?(v(),I(ve,{key:0})):e(D)?(v(),I(pe,{key:2})):(v(!0),F(de,{key:1},re(e(p).data,n=>(v(),I(e(q),{key:n.id},{default:l(()=>[t(e(M),{class:"text-start"},{default:l(()=>[t(e(G),{class:"cursor-pointer",id:"select-"+n.id,checked:!!e(c).includes(n.id),onClick:R=>e(m)(n.id)},null,8,["id","checked","onClick"])]),_:2},1024),t(e(M),{class:"text-start"},{default:l(()=>[i(w(n.id),1)]),_:2},1024),t(e(M),{class:"text-start"},{default:l(()=>[i(w(n.task_name),1)]),_:2},1024),t(e(M),{class:"text-start"},{default:l(()=>[i(w(n.task_desc),1)]),_:2},1024),t(e(M),{class:"text-start"},{default:l(()=>[i(w(n.created_at),1)]),_:2},1024),t(e(M),{class:"text-start"},{default:l(()=>[t(ke,{rowData:n,onOnEdit:R=>e(u)(n.id),onOnDelete:R=>e($)(n.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(ce,{currentPage:e(N),lastPage:e(S),perPage:e(V),"onUpdate:currentPage":a[6]||(a[6]=n=>N.value=n),"onUpdate:perPage":a[7]||(a[7]=n=>V.value=n)},null,8,["currentPage","lastPage","perPage"]),(v(),I(Ne,{onSave:a[8]||(a[8]=n=>e(x)()),key:e(r),editId:e(b)},null,8,["editId"])),t(T)])])}}};export{Ue as default};
