import{u as O,r as t,J as h,a as n}from"./app-CIFZInuD.js";import{u as S}from"./useRowSelection-Czc7Bp0O.js";function w(C){const{toastSuccess:v,toastError:s}=O(),T=S(),{openDialog:y}=T,o=t(!1),r=t(!1),c=t([]),l=t("");t(null);const p=t(!1),m=t([]),u=t(!1),i=t(""),f=t("");function b(){o.value=!0,n.get("/api/import-github-templates",{fileName:this.fileName,code:this.code}).then(e=>{v("Templates imported from github successfully")}).catch(e=>{s("Error importing templates from github")}),setTimeout(()=>{o.value=!1},1e3)}h(l,()=>{l.value!==""&&d(l.value)}),h(i,()=>{i.value!==null&&g(i.value)});function E(){y("DialogTemplateImport")}function F(){o.value=!0,n.get("/api/list-template-repo-folders").then(e=>{c.value=e.data.data,r.value=!0,o.value=!1}).catch(e=>{console.log(e),e.response.data.message.msg==='rConfig-templates is empty, or does not exist. Clone from "https://github.com/rconfig/rconfig-templates" may have failed! Try importing the templates again.!'?r.value=!1:s("Error getting vendor templates"),o.value=!1})}function d(e){p.value=!1,u.value=!1,n.post("/api/list-repo-folders-contents",{directory:e}).then(a=>{m.value=a.data.data,p.value=!0,typeof a.data.data.readme<"u"&&(u.value=!0)}).catch(a=>{console.log(a),s("Error getting file list")})}function g(e){n.post("/api/get-template-file-contents",{filepath:e}).then(a=>{f.value=a.data.data.data.code}).catch(a=>{s("Error getting file contents")})}return{importTemplates:b,importingTemplates:o,getTemplateRepoFolders:F,hasVendorTemplateOptions:r,vendorTemplateOptions:c,vendorOptionSelected:l,getTemplatesList:d,getTemplateFileContents:g,openImportDialog:E,showFileOptions:p,listedFiles:m,hasReadmeFile:u,fileOptionSelected:i,selectedTemplateCode:f}}export{w as u};
