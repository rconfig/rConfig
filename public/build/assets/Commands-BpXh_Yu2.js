import{a as A,u as N}from"./ViewFunctions-B-wUYZaQ.js";import{P as F}from"./PageHeader-DVPVCgk1.js";import{D as V}from"./DataTableToolbar-3HKV5GpG.js";import{D as j}from"./DataTableSpinner-DtqR4biL.js";import{D as q,a as K,u as z,b as U}from"./DeleteModal-1HgdmIY5.js";import{_ as T,e as M,f as C,i as G,s as H,r as f,o as n,c as r,a as t,b as h,w as S,z as Y,F as v,k as x,q as R,t as y,h as g,l as D,j as B,g as I,n as E,v as L,p as J}from"./app-CMvkN1B1.js";import{S as Q}from"./SideDrawer-WeZa4FOQ.js";import{L as W}from"./LoadingSpinner-CxUrzMJq.js";import{M as X,u as Z}from"./MultiSelect-B5JrnsG5.js";/* empty css            */const $={components:{DataTableToolbar:V,DataTableSpinner:j,DataTableEmptyState:q,DataTablePaginate:K},props:{pagename:{type:String},tabledata:{type:Object,required:[]},searchInputDisabled:{type:Boolean,default:!0},newBtnEnabled:{type:Boolean,default:!0},backupDownloadBtnEnabled:{type:Boolean,default:!1},taskRunBtnEnabled:{type:Boolean,default:!1},editBtnEnabled:{type:Boolean,default:!0},rowViewBtnEnabled:{type:Boolean,default:!1}},emits:["openDrawer","deleteRow","pagechanged","showTaskRunConfirmModal","actionLink","viewAction"],setup(d,{emit:a}){const o=M({pageParams:{page:1,per_page:10,filters:null,sortby:null,sortOrder:"desc"},sortIcon:{base:"fas fa-arrows-alt-v",is:"fa-sort",up:"fas fa-long-arrow-alt-up",down:"fas fa-long-arrow-alt-down"}}),e=M({critical:"fas fa-exclamation-circle pf-u-danger-color-100",error:"fas fa-exclamation-circle pf-u-danger-color-100",warn:"fa fa-exclamation-triangle pf-u-warning-color-100",info:"fas fa-fw fa-info-circle pf-u-info-color-100",default:"fas fa-fw fa-info-circle pf-u-info-color-100"}),b=C(o.sortIcon.base),_=C(0);G("create-notification");const{setupResizableTable:m}=z();H(()=>{d.tabledata.isLoading||m()});function p(c,k=!1){a("openDrawer",{id:c,isClone:k})}function i(c){a("deleteRow",c)}function u(){o.pageParams.filters="",a("pagechanged",o.pageParams)}function s(c){o.pageParams.filters=c,a("pagechanged",o.pageParams)}function l(c){o.pageParams.page=c.page,o.pageParams.per_page=c.per_page,a("pagechanged",o.pageParams)}function w(c,k){b.value=o.pageParams.sortOrder==="desc"?o.sortIcon.up:o.sortIcon.down,_.value=k,o.pageParams.sortby=c,o.pageParams.sortOrder=o.pageParams.sortOrder==="desc"?"asc":"desc",a("pagechanged",o.pageParams)}function P(c){a("showTaskRunConfirmModal",c)}function O(c){a("viewAction",c),close()}return{activityLogIconTable:e,addFilters:s,clearFilters:u,data:o,deleteRow:i,emitShowTaskRunConfirmModal:P,isSorted:_,openDrawer:p,pageChanged:l,sortBy:w,sortIcon:b,viewAction:O}}},ee={class:"pf-c-drawer__content pf-m-no-background"},ae={class:"pf-c-drawer__body pf-m-padding"},te={class:"pf-c-card"},oe={class:"pf-c-table pf-m-compact pf-m-grid-lg",role:"grid",id:"resizeMe"},ne={role:"row",id:"headerRow"},se={key:0},le=["onClick"],re={class:"pf-c-table__button-content"},ie={class:"pf-c-table__text"},de={class:"pf-c-table__sort-indicator"},ce={key:1,role:"rowgroup"},me=["data-label"],pe={key:0},fe={key:1,class:"pf-c-label__content"},_e={role:"cell","data-label":"Actions",class:"pf-m-fit-content"},ge=["onClick"],be=["onClick"];function ue(d,a,o,e,b,_){const m=f("data-table-toolbar"),p=f("data-table-spinner"),i=f("data-table-empty-state"),u=f("data-table-paginate");return n(),r("div",ee,[t("div",ae,[t("div",te,[h(m,{pagename:o.pagename,onSearchInput:a[0]||(a[0]=s=>e.addFilters(s)),onOpenDrawer:a[1]||(a[1]=s=>e.openDrawer(s)),newBtnEnabled:o.newBtnEnabled,searchInputDisabled:o.searchInputDisabled},{customButtons:S(()=>[Y(d.$slots,"customButtons")]),_:3},8,["pagename","newBtnEnabled","searchInputDisabled"]),t("table",oe,[t("thead",null,[t("tr",ne,[(n(!0),r(v,null,x(o.tabledata.headers,(s,l)=>(n(),r("th",{key:s.name,class:R(["pf-m-truncate pf-c-table__sort pf-c-table__icon",e.isSorted===l?"pf-m-selected":""])},[s.sortable?g("",!0):(n(),r("span",se,y(s.label),1)),s.sortable?(n(),r("button",{key:1,class:"pf-c-table__button",onClick:w=>e.sortBy(s.key,l)},[t("div",re,[t("span",ie,y(s.label),1),t("span",de,[t("i",{class:R(e.isSorted===l?e.sortIcon:e.data.sortIcon.base)},null,2)])])],8,le)):g("",!0)],2))),128)),a[3]||(a[3]=t("th",{class:"pf-c-table__icon pf-m-fit-content",role:"columnheader",scope:"col"},"Actions",-1))])]),o.tabledata.isLoading?(n(),D(p,{key:0})):g("",!0),o.tabledata.data.total>0||o.tabledata.isLoading?(n(),r("tbody",ce,[(n(!0),r(v,null,x(o.tabledata.data.data,s=>(n(),r("tr",{role:"row",key:s.name},[(n(!0),r(v,null,x(o.tabledata.headers,l=>(n(),r("td",{key:l.label,role:"cell","data-label":l.label},[l.isRelationShip===!0?(n(),r("div",pe,[(n(!0),r(v,null,x(s[l.key],w=>(n(),r("div",{key:w.id},y(w[l.relationshipKey]),1))),128))])):(n(),r("span",fe,y(s[l.key]),1))],8,me))),128)),t("td",_e,[t("div",null,[o.editBtnEnabled?(n(),r("button",{key:0,class:"pf-c-button pf-m-link pf-m-small",type:"button",onClick:l=>e.openDrawer(s.id),alt:"Edit",title:"Edit"},a[4]||(a[4]=[t("span",{class:"pf-c-button__icon pf-m-start"},[t("i",{class:"fas fa-edit","aria-hidden":"true"})],-1),B(" Edit ")]),8,ge)):g("",!0),t("button",{class:"pf-c-button pf-m-link pf-m-danger pf-m-small",type:"button",onClick:l=>e.deleteRow(s.id),alt:"Delete",title:"Delete"},a[5]||(a[5]=[t("span",{class:"pf-c-button__icon pf-m-start"},[t("i",{class:"fas fa-trash","aria-hidden":"true"})],-1),B(" Delete ")]),8,be)])])]))),128))])):o.tabledata.isLoading?g("",!0):(n(),D(i,{key:2,onClear:e.clearFilters},null,8,["onClear"]))]),h(u,{from:o.tabledata.data.from,to:o.tabledata.data.to,total:o.tabledata.data.total,current_page:o.tabledata.data.current_page,last_page:o.tabledata.data.last_page,onPagechanged:a[2]||(a[2]=s=>e.pageChanged(s))},null,8,["from","to","total","current_page","last_page"])])])])}const we=T($,[["render",ue]]),ye={props:{viewstate:{type:Object}},emits:["closeDrawer","formsubmitted"],components:{MultiSelect:X,LoadingSpinner:W},setup(d,{emit:a}){const o=C(!1),e=C(1),b=C(d.viewstate.editid===0?"add":"edit"),{errors:_,model:m,clearModel:p,updateModel:i,getModel:u,storeModel:s,isLoading:l}=A(d.viewstate.modelName,d.viewstate.modelObject),{results:w}=Z("categories");I(()=>{u(d.viewstate.editid)});const P=async()=>{d.viewstate.editid!=0?await i(m):await s(m),_.value===""&&(a("formsubmitted",d.viewstate.pagenamesingle+" "+b.value+"ed!"),c())};function O(k){m.categoryArray=k}function c(){e.value+=1,console.log(e.value),a("closeDrawer")}return{componentKey1:e,showRoleOptions:o,close:c,errors:_,model:m,saveModels:P,clearModel:p,getCategorys:w,updateOptions:O,isLoading:l}}},ve={key:0,novalidate:"",class:"pf-c-form"},De=["value"],ke={class:"pf-c-form__group"},Ce={class:"pf-c-form__group-control"},he=["aria-invalid"],Se={key:0,class:"pf-c-form__helper-text pf-m-error",id:"form-help-text-address-helper","aria-live":"polite"},xe={class:"pf-c-form__group"},Me={class:"pf-c-form__group-control"},Be=["aria-invalid"],Pe={key:0,class:"pf-c-form__helper-text pf-m-error",id:"form-help-text-address-helper","aria-live":"polite"},Oe={key:0,class:"pf-c-form__helper-text pf-m-error",id:"form-help-text-address-helper","aria-live":"polite"},Re={class:"pf-c-form__group pf-m-action"},Te={class:"pf-c-form__group-control"},Ee={class:"pf-c-form__actions"};function Le(d,a,o,e,b,_){const m=f("loading-spinner"),p=f("multi-select");return n(),r(v,null,[h(m,{showSpinner:e.isLoading},null,8,["showSpinner"]),e.isLoading?g("",!0):(n(),r("form",ve,[t("input",{id:"editid",name:"editid",type:"hidden",value:o.viewstate.editid},null,8,De),t("div",ke,[a[5]||(a[5]=t("div",{class:"pf-c-form__group-label"},[t("label",{class:"pf-c-form__label",for:"form-demo-basic-name"},[t("span",{class:"pf-c-form__label-text"},"Command Name"),t("span",{class:"pf-c-form__label-required","aria-hidden":"true"},"*")])],-1)),t("div",Ce,[E(t("input",{class:"pf-c-form-control",required:"",type:"text",id:"command",name:"command","onUpdate:modelValue":a[0]||(a[0]=i=>e.model.command=i),"aria-invalid":!!e.errors.command,autocomplete:"off"},null,8,he),[[L,e.model.command]]),e.errors.command?(n(),r("p",Se,y(e.errors.command[0]),1)):g("",!0)])]),t("div",xe,[a[6]||(a[6]=t("div",{class:"pf-c-form__group-label"},[t("label",{class:"pf-c-form__label",for:"form-demo-basic-name"},[t("span",{class:"pf-c-form__label-text"},"Description"),t("span",{class:"pf-c-form__label-required","aria-hidden":"true"},"*")])],-1)),t("div",Me,[E(t("input",{class:"pf-c-form-control",required:"",type:"text",id:"description",name:"description","onUpdate:modelValue":a[1]||(a[1]=i=>e.model.description=i),"aria-invalid":!!e.errors.description,autocomplete:"off"},null,8,Be),[[L,e.model.description]]),e.errors.description?(n(),r("p",Pe,y(e.errors.description[0]),1)):g("",!0)])]),(n(),D(p,{options:e.getCategorys,modelOptions:e.model.category,msLabel:"categoryName",msValue:"id",errors:e.errors.hasOwnProperty("categoryArray"),onOptionsUpdated:a[2]||(a[2]=i=>e.updateOptions(i)),key:e.componentKey1,fieldType:"categories"},{"multi-select-label":S(()=>a[7]||(a[7]=[B("Choose categories")])),"multi-select-subtext":S(()=>a[8]||(a[8]=[B("You must associate one or multiple categories to this command.")])),_:1},8,["options","modelOptions","errors"])),e.errors.categoryArray?(n(),r("p",Oe,y(e.errors.categoryArray[0]),1)):g("",!0),t("div",Re,[t("div",Te,[t("div",Ee,[t("button",{class:"pf-c-button pf-m-primary",type:"submit",onClick:a[3]||(a[3]=J((...i)=>e.saveModels&&e.saveModels(...i),["prevent"]))},"Save"),t("button",{class:"pf-c-button pf-m-link",type:"button",onClick:a[4]||(a[4]=(...i)=>e.close&&e.close(...i))},"Cancel")])])])]))],64)}const Ie=T(ye,[["render",Le]]),Ae={components:{CommandsForm:Ie,PageHeader:F,DataTableCommands:we,SideDrawer:Q,DeleteModal:U},setup(){const d=M({editid:0,pagename:"Commands",pagedesc:"rConfig system commands",pagenamesingle:"Command",modelName:"commands",openDrawerState:!1,showDeleteModal:!1,sideDrawerComponentKey:1,pageOptionsState:{page:1,per_page:10},modelObject:{command:"",description:"",categoryArray:[]}}),{models:a,isLoading:o,dataTablePageChanged:e,openDrawer:b,closeDrawerState:_,deleteRow:m,formSubmitted:p,confirmDelete:i,destroyModel:u}=N(d,d.modelName,d.modelObject);I(()=>{e(d.pageOptionsState)});const s=M({headers:[{key:"id",label:"ID",sortable:!0,error:"Can't be blank"},{key:"command",label:"Command",sortable:!0,isRelationShip:!1},{key:"description",label:"Description",sortable:!1,isRelationShip:!1},{key:"category",label:"Categories",sortable:!1,isRelationShip:!0,relationshipKey:"categoryName"}],data:a,isLoading:o});return{viewstate:d,dataTablePageChanged:e,openDrawer:b,closeDrawerState:_,deleteRow:m,confirmDelete:i,table:s,destroyModel:u,formSubmitted:p}}},Ne={class:"pf-c-page__main",tabindex:"-1"},Fe={class:"pf-c-page__main-section pf-m-no-padding"},Ve={class:"pf-c-drawer__main"};function je(d,a,o,e,b,_){const m=f("page-header"),p=f("data-table-commands"),i=f("commands-form"),u=f("side-drawer"),s=f("delete-modal");return n(),r(v,null,[t("main",Ne,[h(m,{pagename:e.viewstate.pagename,desc:e.viewstate.pagedesc},null,8,["pagename","desc"]),a[7]||(a[7]=t("div",{class:"pf-c-divider",role:"separator"},null,-1)),t("section",Fe,[t("div",{class:R(["pf-c-drawer",{"pf-m-expanded":e.viewstate.openDrawerState}])},[t("div",Ve,[h(p,{pagename:e.viewstate.pagenamesingle,tabledata:e.table,onPagechanged:a[0]||(a[0]=l=>e.dataTablePageChanged(l)),onOpenDrawer:a[1]||(a[1]=l=>e.openDrawer(l)),onDeleteRow:a[2]||(a[2]=l=>e.deleteRow(l))},null,8,["pagename","tabledata"]),(n(),D(u,{pagename:e.viewstate.pagenamesingle,drawerState:e.viewstate.openDrawerState,editid:e.viewstate.editid,onCloseDrawer:a[4]||(a[4]=l=>e.viewstate.openDrawerState=!1),key:e.viewstate.sideDrawerComponentKey},{subtext:S(()=>a[6]||(a[6]=[t("div",{class:"pf-l-flex__item"},"Please complete all fields",-1)])),form:S(()=>[(n(),D(i,{viewstate:e.viewstate,onCloseDrawer:e.closeDrawerState,onFormsubmitted:a[3]||(a[3]=l=>e.formSubmitted(l)),key:e.viewstate.editid},null,8,["viewstate","onCloseDrawer"]))]),_:1},8,["pagename","drawerState","editid"]))])],2)])]),e.viewstate.showDeleteModal?(n(),D(s,{key:0,editid:e.viewstate.editid,onCloseModal:a[5]||(a[5]=l=>e.viewstate.showDeleteModal=!1),onConfirmDelete:e.confirmDelete},null,8,["editid","onConfirmDelete"])):g("",!0)],64)}const Xe=T(Ae,[["render",je]]);export{Xe as default};
