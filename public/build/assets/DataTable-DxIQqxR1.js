import{D as A,a as x,b as O,u as z}from"./DeleteModal-ZEvTaIan.js";import{D as F}from"./DataTableSpinner-xKQOEap9.js";import{T as M,a0 as E,E as I,Z as P,a1 as N,s as _,o as n,c as l,a as o,b as B,w as S,r as j,J as b,K as m,i as T,t as d,v as c,f as R,d as p}from"./app-DPEN0t_k.js";const K={components:{DataTableToolbar:A,DataTableSpinner:F,DataTableEmptyState:x,DataTablePaginate:O},props:{pagename:{type:String},tabledata:{type:Object,required:[]},searchInputDisabled:{type:Boolean,default:!0},newBtnEnabled:{type:Boolean,default:!0},backupDownloadBtnEnabled:{type:Boolean,default:!1},taskRunBtnEnabled:{type:Boolean,default:!1},editBtnEnabled:{type:Boolean,default:!0},rowViewBtnEnabled:{type:Boolean,default:!1}},emits:["openDrawer","deleteRow","pagechanged","showTaskRunConfirmModal","actionLink","viewAction"],setup(u,{emit:s}){const t=E({pageParams:{page:1,per_page:10,filters:null,sortby:null,sortOrder:"desc"},sortIcon:{base:"fas fa-arrows-alt-v",is:"fa-sort",up:"fas fa-long-arrow-alt-up",down:"fas fa-long-arrow-alt-down"}}),i=E({critical:"fas fa-exclamation-circle pf-u-danger-color-100",error:"fas fa-exclamation-circle pf-u-danger-color-100",warn:"fa fa-exclamation-triangle pf-u-warning-color-100",info:"fas fa-fw fa-info-circle pf-u-info-color-100",default:"fas fa-fw fa-info-circle pf-u-info-color-100"}),k=I(t.sortIcon.base),y=I(0);P("create-notification");const{setupResizableTable:g}=z(),w=P("formatTime");N(()=>{u.tabledata.isLoading||g()});function v(r,D=!1){s("openDrawer",{id:r,isClone:D})}function h(r){s("deleteRow",r)}function C(){t.pageParams.filters="",s("pagechanged",t.pageParams)}function a(r){t.pageParams.filters=r,s("pagechanged",t.pageParams)}function e(r){t.pageParams.page=r.page,t.pageParams.per_page=r.per_page,s("pagechanged",t.pageParams)}function f(r,D){k.value=t.pageParams.sortOrder==="desc"?t.sortIcon.up:t.sortIcon.down,y.value=D,t.pageParams.sortby=r,t.pageParams.sortOrder=t.pageParams.sortOrder==="desc"?"asc":"desc",s("pagechanged",t.pageParams)}function L(r){s("showTaskRunConfirmModal",r)}function V(r){s("viewAction",r),close()}return{activityLogIconTable:i,addFilters:a,clearFilters:C,data:t,deleteRow:h,emitShowTaskRunConfirmModal:L,formatTime:w,isSorted:y,openDrawer:v,pageChanged:e,sortBy:f,sortIcon:k,viewAction:V}}},q={class:"pf-c-drawer__content pf-m-no-background"},J={class:"pf-c-drawer__body pf-m-padding"},Z={class:"pf-c-card"},G={class:"pf-c-table pf-m-compact pf-m-grid-lg",role:"grid",id:"resizeMe"},H={role:"row",id:"headerRow"},Q={key:0},U=["onClick"],W={class:"pf-c-table__button-content"},X={class:"pf-c-table__text"},Y={class:"pf-c-table__sort-indicator"},$={key:1,role:"rowgroup"},tt=["data-label"],et={key:0},at={key:0},nt={key:1},ot={key:2},st={key:1},lt=["onClick"],it={key:2},ct=["onClick"],rt={key:3,title:"View devices",alt:"View devices"},dt={class:"pf-c-chip__text pf-u-font-size-md"},ft={key:4,class:""},pt={class:"pf-c-label__content"},ut={key:5},_t={key:0},bt={key:0,class:"pf-u-danger-color-100",id:"form-help-textinfo-helper","aria-live":"polite"},mt={role:"cell","data-label":"Actions",class:"pf-m-fit-content"},kt=["href"],yt=["onClick"],gt=["onClick"],wt=["onClick"],vt=["onClick"];function ht(u,s,t,i,k,y){const g=_("data-table-toolbar"),w=_("data-table-spinner"),v=_("router-link"),h=_("data-table-empty-state"),C=_("data-table-paginate");return n(),l("div",q,[o("div",J,[o("div",Z,[B(g,{pagename:t.pagename,onSearchInput:s[0]||(s[0]=a=>i.addFilters(a)),onOpenDrawer:s[1]||(s[1]=a=>i.openDrawer(a)),newBtnEnabled:t.newBtnEnabled,searchInputDisabled:t.searchInputDisabled},{customButtons:S(()=>[j(u.$slots,"customButtons")]),_:3},8,["pagename","newBtnEnabled","searchInputDisabled"]),o("table",G,[o("thead",null,[o("tr",H,[(n(!0),l(b,null,m(t.tabledata.headers,(a,e)=>(n(),l("th",{key:a.name,class:T(["pf-m-truncate pf-c-table__sort pf-c-table__icon",i.isSorted===e?"pf-m-selected":""])},[a.sortable?c("",!0):(n(),l("span",Q,d(a.label),1)),a.sortable?(n(),l("button",{key:1,class:"pf-c-table__button",onClick:f=>i.sortBy(a.key,e)},[o("div",W,[o("span",X,d(a.label),1),o("span",Y,[o("i",{class:T(i.isSorted===e?i.sortIcon:i.data.sortIcon.base)},null,2)])])],8,U)):c("",!0)],2))),128)),s[3]||(s[3]=o("th",{class:"pf-c-table__icon pf-m-fit-content",role:"columnheader",scope:"col"}," Actions ",-1))])]),t.tabledata.isLoading?(n(),R(w,{key:0})):c("",!0),t.tabledata.data.total>0||t.tabledata.isLoading?(n(),l("tbody",$,[(n(!0),l(b,null,m(t.tabledata.data.data,a=>(n(),l("tr",{role:"row",key:a.name},[(n(!0),l(b,null,m(t.tabledata.headers,e=>(n(),l("td",{key:e.label,role:"cell","data-label":e.label},[e.key==="finished"?(n(),l("div",et,[a[e.key]?(n(),l("div",at,d(a[e.key].last_started_at||" "),1)):c("",!0)])):c("",!0),e.isRelationShip===!0?(n(),l("div",nt,[(n(!0),l(b,null,m(a[e.key],f=>(n(),l("div",{key:f.id},d(f[e.relationshipKey]),1))),128))])):(n(),l("div",ot,[e.hasActivityIcon?(n(),l("span",{key:0,class:T(i.activityLogIconTable[a[e.key]])}," Â  ",2)):c("",!0),e.isActionLink?(n(),l("span",st,[o("button",{class:"pf-c-button pf-m-link pf-m-inline",type:"button",onClick:f=>u.$emit("actionLink",a[e.key])},d(a[e.key]),9,lt)])):c("",!0),e.isTasksActionLink?(n(),l("span",it,[o("button",{class:"pf-c-button pf-m-link pf-m-inline",type:"button",onClick:f=>u.$emit("actionLink",a.id)}," view ",8,ct)])):c("",!0),e.key==="device_count"?(n(),l("span",rt,[B(v,{type:"button",class:"pf-c-chip pf-m-overflow",to:"/devices/"+e.deviceCountType+"/"+a.id},{default:S(()=>[o("span",dt,d(a[e.key]),1)]),_:2},1032,["to"])])):c("",!0),e.key==="created_at"||e.key==="updated_at"&&a[e.key]>0?(n(),l("span",ft,[o("span",pt,d(i.formatTime(a[e.key])),1)])):!e.hasEnabledIcon&&!["valid_results_count","invalid_results_count","method_failures_count","report_id","device_count","finished","viewDevices"].includes(e.key)?(n(),l("span",ut,[p(d(a[e.key])+" ",1),e.key=="categoryName"?(n(),l("div",_t,[a.command&&a.command.length<=0&&e.error?(n(),l("p",bt,s[4]||(s[4]=[o("span",{class:"pf-u-danger-color-100"},[o("i",{class:"fas fa-exclamation-circle","aria-hidden":"true"})],-1),p(" This category does not have any commands - "),o("a",{href:"/commands",class:"alink"}," Configure ",-1)]))):c("",!0)])):c("",!0)])):c("",!0)]))],8,tt))),128)),o("td",mt,[o("div",null,[t.backupDownloadBtnEnabled?(n(),l("a",{key:0,class:"pf-c-button pf-m-link pf-m-small",type:"button",href:a.url},s[5]||(s[5]=[o("span",{class:"pf-c-button__icon pf-m-start"},[o("i",{class:"fa fa-download","aria-hidden":"true"})],-1),p(" Download ")]),8,kt)):c("",!0),t.taskRunBtnEnabled?(n(),l("button",{key:1,class:"pf-c-button pf-m-link pf-m-small",type:"button",onClick:e=>i.emitShowTaskRunConfirmModal(a.id),alt:"Start this task now!",title:"Start this task now!"},s[6]||(s[6]=[o("span",{class:"pf-c-button__icon pf-m-start"},[o("i",{class:"fa fa-play-circle","aria-hidden":"true"})],-1),p(" Start ")]),8,yt)):c("",!0),t.editBtnEnabled?(n(),l("button",{key:2,class:"pf-c-button pf-m-link pf-m-small",type:"button",onClick:e=>i.openDrawer(a.id),alt:"Edit",title:"Edit"},s[7]||(s[7]=[o("span",{class:"pf-c-button__icon pf-m-start"},[o("i",{class:"fas fa-edit","aria-hidden":"true"})],-1),p(" Edit ")]),8,gt)):c("",!0),t.rowViewBtnEnabled?(n(),l("button",{key:3,class:"pf-c-button pf-m-link pf-m-small",type:"button",onClick:e=>i.viewAction(a.id),alt:"View Details",title:"View Details"},s[8]||(s[8]=[o("span",{class:"pf-c-button__icon pf-m-start"},[o("i",{class:"fas fa-search","aria-hidden":"true"})],-1),p(" View Details ")]),8,wt)):c("",!0),o("button",{class:"pf-c-button pf-m-link pf-m-danger pf-m-small",type:"button",onClick:e=>i.deleteRow(a.id),alt:"Delete",title:"Delete"},s[9]||(s[9]=[o("span",{class:"pf-c-button__icon pf-m-start"},[o("i",{class:"fas fa-trash","aria-hidden":"true"})],-1),p(" Delete ")]),8,vt)])])]))),128))])):t.tabledata.isLoading?c("",!0):(n(),R(h,{key:2,onClear:i.clearFilters},null,8,["onClear"]))]),B(C,{from:t.tabledata.data.from,to:t.tabledata.data.to,total:t.tabledata.data.total,current_page:t.tabledata.data.current_page,last_page:t.tabledata.data.last_page,onPagechanged:s[2]||(s[2]=a=>i.pageChanged(a))},null,8,["from","to","total","current_page","last_page"])])])])}const Tt=M(K,[["render",ht]]);export{Tt as D};
